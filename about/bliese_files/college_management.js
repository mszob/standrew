(function(global,factory){if(typeof module==="object"&&typeof module.exports==="object"){module.exports=global.document?factory(global,true):function(w){if(!w.document){throw new Error("jQuery requires a window with a document");}
return factory(w);};}else{factory(global);}}(typeof window!=="undefined"?window:this,function(window,noGlobal){var arr=[];var document=window.document;var slice=arr.slice;var concat=arr.concat;var push=arr.push;var indexOf=arr.indexOf;var class2type={};var toString=class2type.toString;var hasOwn=class2type.hasOwnProperty;var support={};var
version="2.2.3",jQuery=function(selector,context){return new jQuery.fn.init(selector,context);},rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(all,letter){return letter.toUpperCase();};jQuery.fn=jQuery.prototype={jquery:version,constructor:jQuery,selector:"",length:0,toArray:function(){return slice.call(this);},get:function(num){return num!=null?(num<0?this[num+this.length]:this[num]):slice.call(this);},pushStack:function(elems){var ret=jQuery.merge(this.constructor(),elems);ret.prevObject=this;ret.context=this.context;return ret;},each:function(callback){return jQuery.each(this,callback);},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem);}));},slice:function(){return this.pushStack(slice.apply(this,arguments));},first:function(){return this.eq(0);},last:function(){return this.eq(-1);},eq:function(i){var len=this.length,j=+i+(i<0?len:0);return this.pushStack(j>=0&&j<len?[this[j]]:[]);},end:function(){return this.prevObject||this.constructor();},push:push,sort:arr.sort,splice:arr.splice};jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;if(typeof target==="boolean"){deep=target;target=arguments[i]||{};i++;}
if(typeof target!=="object"&&!jQuery.isFunction(target)){target={};}
if(i===length){target=this;i--;}
for(;i<length;i++){if((options=arguments[i])!=null){for(name in options){src=target[name];copy=options[name];if(target===copy){continue;}
if(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&jQuery.isArray(src)?src:[];}else{clone=src&&jQuery.isPlainObject(src)?src:{};}
target[name]=jQuery.extend(deep,clone,copy);}else if(copy!==undefined){target[name]=copy;}}}}
return target;};jQuery.extend({expando:"jQuery"+(version+Math.random()).replace(/\D/g,""),isReady:true,error:function(msg){throw new Error(msg);},noop:function(){},isFunction:function(obj){return jQuery.type(obj)==="function";},isArray:Array.isArray,isWindow:function(obj){return obj!=null&&obj===obj.window;},isNumeric:function(obj){var realStringObj=obj&&obj.toString();return!jQuery.isArray(obj)&&(realStringObj-parseFloat(realStringObj)+1)>=0;},isPlainObject:function(obj){var key;if(jQuery.type(obj)!=="object"||obj.nodeType||jQuery.isWindow(obj)){return false;}
if(obj.constructor&&!hasOwn.call(obj,"constructor")&&!hasOwn.call(obj.constructor.prototype||{},"isPrototypeOf")){return false;}
for(key in obj){}
return key===undefined||hasOwn.call(obj,key);},isEmptyObject:function(obj){var name;for(name in obj){return false;}
return true;},type:function(obj){if(obj==null){return obj+"";}
return typeof obj==="object"||typeof obj==="function"?class2type[toString.call(obj)]||"object":typeof obj;},globalEval:function(code){var script,indirect=eval;code=jQuery.trim(code);if(code){if(code.indexOf("use strict")===1){script=document.createElement("script");script.text=code;document.head.appendChild(script).parentNode.removeChild(script);}else{indirect(code);}}},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase);},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase();},each:function(obj,callback){var length,i=0;if(isArrayLike(obj)){length=obj.length;for(;i<length;i++){if(callback.call(obj[i],i,obj[i])===false){break;}}}else{for(i in obj){if(callback.call(obj[i],i,obj[i])===false){break;}}}
return obj;},trim:function(text){return text==null?"":(text+"").replace(rtrim,"");},makeArray:function(arr,results){var ret=results||[];if(arr!=null){if(isArrayLike(Object(arr))){jQuery.merge(ret,typeof arr==="string"?[arr]:arr);}else{push.call(ret,arr);}}
return ret;},inArray:function(elem,arr,i){return arr==null?-1:indexOf.call(arr,elem,i);},merge:function(first,second){var len=+second.length,j=0,i=first.length;for(;j<len;j++){first[i++]=second[j];}
first.length=i;return first;},grep:function(elems,callback,invert){var callbackInverse,matches=[],i=0,length=elems.length,callbackExpect=!invert;for(;i<length;i++){callbackInverse=!callback(elems[i],i);if(callbackInverse!==callbackExpect){matches.push(elems[i]);}}
return matches;},map:function(elems,callback,arg){var length,value,i=0,ret=[];if(isArrayLike(elems)){length=elems.length;for(;i<length;i++){value=callback(elems[i],i,arg);if(value!=null){ret.push(value);}}}else{for(i in elems){value=callback(elems[i],i,arg);if(value!=null){ret.push(value);}}}
return concat.apply([],ret);},guid:1,proxy:function(fn,context){var tmp,args,proxy;if(typeof context==="string"){tmp=fn[context];context=fn;fn=tmp;}
if(!jQuery.isFunction(fn)){return undefined;}
args=slice.call(arguments,2);proxy=function(){return fn.apply(context||this,args.concat(slice.call(arguments)));};proxy.guid=fn.guid=fn.guid||jQuery.guid++;return proxy;},now:Date.now,support:support});if(typeof Symbol==="function"){jQuery.fn[Symbol.iterator]=arr[Symbol.iterator];}
jQuery.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase();});function isArrayLike(obj){var length=!!obj&&"length"in obj&&obj.length,type=jQuery.type(obj);if(type==="function"||jQuery.isWindow(obj)){return false;}
return type==="array"||length===0||typeof length==="number"&&length>0&&(length-1)in obj;}
var Sizzle=(function(window){var i,support,Expr,getText,isXML,tokenize,compile,select,outermostContext,sortInput,hasDuplicate,setDocument,document,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains,expando="sizzle"+1*new Date(),preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),sortOrder=function(a,b){if(a===b){hasDuplicate=true;}
return 0;},MAX_NEGATIVE=1<<31,hasOwn=({}).hasOwnProperty,arr=[],pop=arr.pop,push_native=arr.push,push=arr.push,slice=arr.slice,indexOf=function(list,elem){var i=0,len=list.length;for(;i<len;i++){if(list[i]===elem){return i;}}
return-1;},booleans="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",whitespace="[\\x20\\t\\r\\n\\f]",identifier="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",attributes="\\["+whitespace+"*("+identifier+")(?:"+whitespace+"*([*^$|!~]?=)"+whitespace+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+identifier+"))|)"+whitespace+"*\\]",pseudos=":("+identifier+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+attributes+")*)|"+".*"+")\\)|)",rwhitespace=new RegExp(whitespace+"+","g"),rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([>+~]|"+whitespace+")"+whitespace+"*"),rattributeQuotes=new RegExp("="+whitespace+"*([^\\]'\"]*?)"+whitespace+"*\\]","g"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={"ID":new RegExp("^#("+identifier+")"),"CLASS":new RegExp("^\\.("+identifier+")"),"TAG":new RegExp("^("+identifier+"|[*])"),"ATTR":new RegExp("^"+attributes),"PSEUDO":new RegExp("^"+pseudos),"CHILD":new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),"bool":new RegExp("^(?:"+booleans+")$","i"),"needsContext":new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+
whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rsibling=/[+~]/,rescape=/'|\\/g,runescape=new RegExp("\\\\([\\da-f]{1,6}"+whitespace+"?|("+whitespace+")|.)","ig"),funescape=function(_,escaped,escapedWhitespace){var high="0x"+escaped-0x10000;return high!==high||escapedWhitespace?escaped:high<0?String.fromCharCode(high+0x10000):String.fromCharCode(high>>10|0xD800,high&0x3FF|0xDC00);},unloadHandler=function(){setDocument();};try{push.apply((arr=slice.call(preferredDoc.childNodes)),preferredDoc.childNodes);arr[preferredDoc.childNodes.length].nodeType;}catch(e){push={apply:arr.length?function(target,els){push_native.apply(target,slice.call(els));}:function(target,els){var j=target.length,i=0;while((target[j++]=els[i++])){}
target.length=j-1;}};}
function Sizzle(selector,context,results,seed){var m,i,elem,nid,nidselect,match,groups,newSelector,newContext=context&&context.ownerDocument,nodeType=context?context.nodeType:9;results=results||[];if(typeof selector!=="string"||!selector||nodeType!==1&&nodeType!==9&&nodeType!==11){return results;}
if(!seed){if((context?context.ownerDocument||context:preferredDoc)!==document){setDocument(context);}
context=context||document;if(documentIsHTML){if(nodeType!==11&&(match=rquickExpr.exec(selector))){if((m=match[1])){if(nodeType===9){if((elem=context.getElementById(m))){if(elem.id===m){results.push(elem);return results;}}else{return results;}}else{if(newContext&&(elem=newContext.getElementById(m))&&contains(context,elem)&&elem.id===m){results.push(elem);return results;}}}else if(match[2]){push.apply(results,context.getElementsByTagName(selector));return results;}else if((m=match[3])&&support.getElementsByClassName&&context.getElementsByClassName){push.apply(results,context.getElementsByClassName(m));return results;}}
if(support.qsa&&!compilerCache[selector+" "]&&(!rbuggyQSA||!rbuggyQSA.test(selector))){if(nodeType!==1){newContext=context;newSelector=selector;}else if(context.nodeName.toLowerCase()!=="object"){if((nid=context.getAttribute("id"))){nid=nid.replace(rescape,"\\$&");}else{context.setAttribute("id",(nid=expando));}
groups=tokenize(selector);i=groups.length;nidselect=ridentifier.test(nid)?"#"+nid:"[id='"+nid+"']";while(i--){groups[i]=nidselect+" "+toSelector(groups[i]);}
newSelector=groups.join(",");newContext=rsibling.test(selector)&&testContext(context.parentNode)||context;}
if(newSelector){try{push.apply(results,newContext.querySelectorAll(newSelector));return results;}catch(qsaError){}finally{if(nid===expando){context.removeAttribute("id");}}}}}}
return select(selector.replace(rtrim,"$1"),context,results,seed);}
function createCache(){var keys=[];function cache(key,value){if(keys.push(key+" ")>Expr.cacheLength){delete cache[keys.shift()];}
return(cache[key+" "]=value);}
return cache;}
function markFunction(fn){fn[expando]=true;return fn;}
function assert(fn){var div=document.createElement("div");try{return!!fn(div);}catch(e){return false;}finally{if(div.parentNode){div.parentNode.removeChild(div);}
div=null;}}
function addHandle(attrs,handler){var arr=attrs.split("|"),i=arr.length;while(i--){Expr.attrHandle[arr[i]]=handler;}}
function siblingCheck(a,b){var cur=b&&a,diff=cur&&a.nodeType===1&&b.nodeType===1&&(~b.sourceIndex||MAX_NEGATIVE)-
(~a.sourceIndex||MAX_NEGATIVE);if(diff){return diff;}
if(cur){while((cur=cur.nextSibling)){if(cur===b){return-1;}}}
return a?1:-1;}
function createInputPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type===type;};}
function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return(name==="input"||name==="button")&&elem.type===type;};}
function createPositionalPseudo(fn){return markFunction(function(argument){argument=+argument;return markFunction(function(seed,matches){var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;while(i--){if(seed[(j=matchIndexes[i])]){seed[j]=!(matches[j]=seed[j]);}}});});}
function testContext(context){return context&&typeof context.getElementsByTagName!=="undefined"&&context;}
support=Sizzle.support={};isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return documentElement?documentElement.nodeName!=="HTML":false;};setDocument=Sizzle.setDocument=function(node){var hasCompare,parent,doc=node?node.ownerDocument||node:preferredDoc;if(doc===document||doc.nodeType!==9||!doc.documentElement){return document;}
document=doc;docElem=document.documentElement;documentIsHTML=!isXML(document);if((parent=document.defaultView)&&parent.top!==parent){if(parent.addEventListener){parent.addEventListener("unload",unloadHandler,false);}else if(parent.attachEvent){parent.attachEvent("onunload",unloadHandler);}}
support.attributes=assert(function(div){div.className="i";return!div.getAttribute("className");});support.getElementsByTagName=assert(function(div){div.appendChild(document.createComment(""));return!div.getElementsByTagName("*").length;});support.getElementsByClassName=rnative.test(document.getElementsByClassName);support.getById=assert(function(div){docElem.appendChild(div).id=expando;return!document.getElementsByName||!document.getElementsByName(expando).length;});if(support.getById){Expr.find["ID"]=function(id,context){if(typeof context.getElementById!=="undefined"&&documentIsHTML){var m=context.getElementById(id);return m?[m]:[];}};Expr.filter["ID"]=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId;};};}else{delete Expr.find["ID"];Expr.filter["ID"]=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node=typeof elem.getAttributeNode!=="undefined"&&elem.getAttributeNode("id");return node&&node.value===attrId;};};}
Expr.find["TAG"]=support.getElementsByTagName?function(tag,context){if(typeof context.getElementsByTagName!=="undefined"){return context.getElementsByTagName(tag);}else if(support.qsa){return context.querySelectorAll(tag);}}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if(tag==="*"){while((elem=results[i++])){if(elem.nodeType===1){tmp.push(elem);}}
return tmp;}
return results;};Expr.find["CLASS"]=support.getElementsByClassName&&function(className,context){if(typeof context.getElementsByClassName!=="undefined"&&documentIsHTML){return context.getElementsByClassName(className);}};rbuggyMatches=[];rbuggyQSA=[];if((support.qsa=rnative.test(document.querySelectorAll))){assert(function(div){docElem.appendChild(div).innerHTML="<a id='"+expando+"'></a>"+"<select id='"+expando+"-\r\\' msallowcapture=''>"+"<option selected=''></option></select>";if(div.querySelectorAll("[msallowcapture^='']").length){rbuggyQSA.push("[*^$]="+whitespace+"*(?:''|\"\")");}
if(!div.querySelectorAll("[selected]").length){rbuggyQSA.push("\\["+whitespace+"*(?:value|"+booleans+")");}
if(!div.querySelectorAll("[id~="+expando+"-]").length){rbuggyQSA.push("~=");}
if(!div.querySelectorAll(":checked").length){rbuggyQSA.push(":checked");}
if(!div.querySelectorAll("a#"+expando+"+*").length){rbuggyQSA.push(".#.+[+~]");}});assert(function(div){var input=document.createElement("input");input.setAttribute("type","hidden");div.appendChild(input).setAttribute("name","D");if(div.querySelectorAll("[name=d]").length){rbuggyQSA.push("name"+whitespace+"*[*^$|!~]?=");}
if(!div.querySelectorAll(":enabled").length){rbuggyQSA.push(":enabled",":disabled");}
div.querySelectorAll("*,:x");rbuggyQSA.push(",.*:");});}
if((support.matchesSelector=rnative.test((matches=docElem.matches||docElem.webkitMatchesSelector||docElem.mozMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector)))){assert(function(div){support.disconnectedMatch=matches.call(div,"div");matches.call(div,"[s!='']:x");rbuggyMatches.push("!=",pseudos);});}
rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|"));rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|"));hasCompare=rnative.test(docElem.compareDocumentPosition);contains=hasCompare||rnative.test(docElem.contains)?function(a,b){var adown=a.nodeType===9?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!!(bup&&bup.nodeType===1&&(adown.contains?adown.contains(bup):a.compareDocumentPosition&&a.compareDocumentPosition(bup)&16));}:function(a,b){if(b){while((b=b.parentNode)){if(b===a){return true;}}}
return false;};sortOrder=hasCompare?function(a,b){if(a===b){hasDuplicate=true;return 0;}
var compare=!a.compareDocumentPosition-!b.compareDocumentPosition;if(compare){return compare;}
compare=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1;if(compare&1||(!support.sortDetached&&b.compareDocumentPosition(a)===compare)){if(a===document||a.ownerDocument===preferredDoc&&contains(preferredDoc,a)){return-1;}
if(b===document||b.ownerDocument===preferredDoc&&contains(preferredDoc,b)){return 1;}
return sortInput?(indexOf(sortInput,a)-indexOf(sortInput,b)):0;}
return compare&4?-1:1;}:function(a,b){if(a===b){hasDuplicate=true;return 0;}
var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(!aup||!bup){return a===document?-1:b===document?1:aup?-1:bup?1:sortInput?(indexOf(sortInput,a)-indexOf(sortInput,b)):0;}else if(aup===bup){return siblingCheck(a,b);}
cur=a;while((cur=cur.parentNode)){ap.unshift(cur);}
cur=b;while((cur=cur.parentNode)){bp.unshift(cur);}
while(ap[i]===bp[i]){i++;}
return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0;};return document;};Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements);};Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document){setDocument(elem);}
expr=expr.replace(rattributeQuotes,"='$1']");if(support.matchesSelector&&documentIsHTML&&!compilerCache[expr+" "]&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&(!rbuggyQSA||!rbuggyQSA.test(expr))){try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&elem.document.nodeType!==11){return ret;}}catch(e){}}
return Sizzle(expr,document,null,[elem]).length>0;};Sizzle.contains=function(context,elem){if((context.ownerDocument||context)!==document){setDocument(context);}
return contains(context,elem);};Sizzle.attr=function(elem,name){if((elem.ownerDocument||elem)!==document){setDocument(elem);}
var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):undefined;return val!==undefined?val:support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null;};Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg);};Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;hasDuplicate=!support.detectDuplicates;sortInput=!support.sortStable&&results.slice(0);results.sort(sortOrder);if(hasDuplicate){while((elem=results[i++])){if(elem===results[i]){j=duplicates.push(i);}}
while(j--){results.splice(duplicates[j],1);}}
sortInput=null;return results;};getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(!nodeType){while((node=elem[i++])){ret+=getText(node);}}else if(nodeType===1||nodeType===9||nodeType===11){if(typeof elem.textContent==="string"){return elem.textContent;}else{for(elem=elem.firstChild;elem;elem=elem.nextSibling){ret+=getText(elem);}}}else if(nodeType===3||nodeType===4){return elem.nodeValue;}
return ret;};Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{"ATTR":function(match){match[1]=match[1].replace(runescape,funescape);match[3]=(match[3]||match[4]||match[5]||"").replace(runescape,funescape);if(match[2]==="~="){match[3]=" "+match[3]+" ";}
return match.slice(0,4);},"CHILD":function(match){match[1]=match[1].toLowerCase();if(match[1].slice(0,3)==="nth"){if(!match[3]){Sizzle.error(match[0]);}
match[4]=+(match[4]?match[5]+(match[6]||1):2*(match[3]==="even"||match[3]==="odd"));match[5]=+((match[7]+match[8])||match[3]==="odd");}else if(match[3]){Sizzle.error(match[0]);}
return match;},"PSEUDO":function(match){var excess,unquoted=!match[6]&&match[2];if(matchExpr["CHILD"].test(match[0])){return null;}
if(match[3]){match[2]=match[4]||match[5]||"";}else if(unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,true))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)){match[0]=match[0].slice(0,excess);match[2]=unquoted.slice(0,excess);}
return match.slice(0,3);}},filter:{"TAG":function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return nodeNameSelector==="*"?function(){return true;}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName;};},"CLASS":function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test(typeof elem.className==="string"&&elem.className||typeof elem.getAttribute!=="undefined"&&elem.getAttribute("class")||"");});},"ATTR":function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);if(result==null){return operator==="!=";}
if(!operator){return true;}
result+="";return operator==="="?result===check:operator==="!="?result!==check:operator==="^="?check&&result.indexOf(check)===0:operator==="*="?check&&result.indexOf(check)>-1:operator==="$="?check&&result.slice(-check.length)===check:operator==="~="?(" "+result.replace(rwhitespace," ")+" ").indexOf(check)>-1:operator==="|="?result===check||result.slice(0,check.length+1)===check+"-":false;};},"CHILD":function(type,what,argument,first,last){var simple=type.slice(0,3)!=="nth",forward=type.slice(-4)!=="last",ofType=what==="of-type";return first===1&&last===0?function(elem){return!!elem.parentNode;}:function(elem,context,xml){var cache,uniqueCache,outerCache,node,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType,diff=false;if(parent){if(simple){while(dir){node=elem;while((node=node[dir])){if(ofType?node.nodeName.toLowerCase()===name:node.nodeType===1){return false;}}
start=dir=type==="only"&&!start&&"nextSibling";}
return true;}
start=[forward?parent.firstChild:parent.lastChild];if(forward&&useCache){node=parent;outerCache=node[expando]||(node[expando]={});uniqueCache=outerCache[node.uniqueID]||(outerCache[node.uniqueID]={});cache=uniqueCache[type]||[];nodeIndex=cache[0]===dirruns&&cache[1];diff=nodeIndex&&cache[2];node=nodeIndex&&parent.childNodes[nodeIndex];while((node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())){if(node.nodeType===1&&++diff&&node===elem){uniqueCache[type]=[dirruns,nodeIndex,diff];break;}}}else{if(useCache){node=elem;outerCache=node[expando]||(node[expando]={});uniqueCache=outerCache[node.uniqueID]||(outerCache[node.uniqueID]={});cache=uniqueCache[type]||[];nodeIndex=cache[0]===dirruns&&cache[1];diff=nodeIndex;}
if(diff===false){while((node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())){if((ofType?node.nodeName.toLowerCase()===name:node.nodeType===1)&&++diff){if(useCache){outerCache=node[expando]||(node[expando]={});uniqueCache=outerCache[node.uniqueID]||(outerCache[node.uniqueID]={});uniqueCache[type]=[dirruns,diff];}
if(node===elem){break;}}}}}
diff-=last;return diff===first||(diff%first===0&&diff / first>=0);}};},"PSEUDO":function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);if(fn[expando]){return fn(argument);}
if(fn.length>1){args=[pseudo,pseudo,"",argument];return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){var idx,matched=fn(seed,argument),i=matched.length;while(i--){idx=indexOf(seed,matched[i]);seed[idx]=!(matches[idx]=matched[i]);}}):function(elem){return fn(elem,0,args);};}
return fn;}},pseudos:{"not":markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;while(i--){if((elem=unmatched[i])){seed[i]=!(matches[i]=elem);}}}):function(elem,context,xml){input[0]=elem;matcher(input,null,xml,results);input[0]=null;return!results.pop();};}),"has":markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0;};}),"contains":markFunction(function(text){text=text.replace(runescape,funescape);return function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1;};}),"lang":markFunction(function(lang){if(!ridentifier.test(lang||"")){Sizzle.error("unsupported lang: "+lang);}
lang=lang.replace(runescape,funescape).toLowerCase();return function(elem){var elemLang;do{if((elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang"))){elemLang=elemLang.toLowerCase();return elemLang===lang||elemLang.indexOf(lang+"-")===0;}}while((elem=elem.parentNode)&&elem.nodeType===1);return false;};}),"target":function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id;},"root":function(elem){return elem===docElem;},"focus":function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex);},"enabled":function(elem){return elem.disabled===false;},"disabled":function(elem){return elem.disabled===true;},"checked":function(elem){var nodeName=elem.nodeName.toLowerCase();return(nodeName==="input"&&!!elem.checked)||(nodeName==="option"&&!!elem.selected);},"selected":function(elem){if(elem.parentNode){elem.parentNode.selectedIndex;}
return elem.selected===true;},"empty":function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling){if(elem.nodeType<6){return false;}}
return true;},"parent":function(elem){return!Expr.pseudos["empty"](elem);},"header":function(elem){return rheader.test(elem.nodeName);},"input":function(elem){return rinputs.test(elem.nodeName);},"button":function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type==="button"||name==="button";},"text":function(elem){var attr;return elem.nodeName.toLowerCase()==="input"&&elem.type==="text"&&((attr=elem.getAttribute("type"))==null||attr.toLowerCase()==="text");},"first":createPositionalPseudo(function(){return[0];}),"last":createPositionalPseudo(function(matchIndexes,length){return[length-1];}),"eq":createPositionalPseudo(function(matchIndexes,length,argument){return[argument<0?argument+length:argument];}),"even":createPositionalPseudo(function(matchIndexes,length){var i=0;for(;i<length;i+=2){matchIndexes.push(i);}
return matchIndexes;}),"odd":createPositionalPseudo(function(matchIndexes,length){var i=1;for(;i<length;i+=2){matchIndexes.push(i);}
return matchIndexes;}),"lt":createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;--i>=0;){matchIndexes.push(i);}
return matchIndexes;}),"gt":createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;++i<length;){matchIndexes.push(i);}
return matchIndexes;})}};Expr.pseudos["nth"]=Expr.pseudos["eq"];for(i in{radio:true,checkbox:true,file:true,password:true,image:true}){Expr.pseudos[i]=createInputPseudo(i);}
for(i in{submit:true,reset:true}){Expr.pseudos[i]=createButtonPseudo(i);}
function setFilters(){}
setFilters.prototype=Expr.filters=Expr.pseudos;Expr.setFilters=new setFilters();tokenize=Sizzle.tokenize=function(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached){return parseOnly?0:cached.slice(0);}
soFar=selector;groups=[];preFilters=Expr.preFilter;while(soFar){if(!matched||(match=rcomma.exec(soFar))){if(match){soFar=soFar.slice(match[0].length)||soFar;}
groups.push((tokens=[]));}
matched=false;if((match=rcombinators.exec(soFar))){matched=match.shift();tokens.push({value:matched,type:match[0].replace(rtrim," ")});soFar=soFar.slice(matched.length);}
for(type in Expr.filter){if((match=matchExpr[type].exec(soFar))&&(!preFilters[type]||(match=preFilters[type](match)))){matched=match.shift();tokens.push({value:matched,type:type,matches:match});soFar=soFar.slice(matched.length);}}
if(!matched){break;}}
return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0);};function toSelector(tokens){var i=0,len=tokens.length,selector="";for(;i<len;i++){selector+=tokens[i].value;}
return selector;}
function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&dir==="parentNode",doneName=done++;return combinator.first?function(elem,context,xml){while((elem=elem[dir])){if(elem.nodeType===1||checkNonElements){return matcher(elem,context,xml);}}}:function(elem,context,xml){var oldCache,uniqueCache,outerCache,newCache=[dirruns,doneName];if(xml){while((elem=elem[dir])){if(elem.nodeType===1||checkNonElements){if(matcher(elem,context,xml)){return true;}}}}else{while((elem=elem[dir])){if(elem.nodeType===1||checkNonElements){outerCache=elem[expando]||(elem[expando]={});uniqueCache=outerCache[elem.uniqueID]||(outerCache[elem.uniqueID]={});if((oldCache=uniqueCache[dir])&&oldCache[0]===dirruns&&oldCache[1]===doneName){return(newCache[2]=oldCache[2]);}else{uniqueCache[dir]=newCache;if((newCache[2]=matcher(elem,context,xml))){return true;}}}}}};}
function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){var i=matchers.length;while(i--){if(!matchers[i](elem,context,xml)){return false;}}
return true;}:matchers[0];}
function multipleContexts(selector,contexts,results){var i=0,len=contexts.length;for(;i<len;i++){Sizzle(selector,contexts[i],results);}
return results;}
function condense(unmatched,map,filter,context,xml){var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=map!=null;for(;i<len;i++){if((elem=unmatched[i])){if(!filter||filter(elem,context,xml)){newUnmatched.push(elem);if(mapped){map.push(i);}}}}
return newUnmatched;}
function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){if(postFilter&&!postFilter[expando]){postFilter=setMatcher(postFilter);}
if(postFinder&&!postFinder[expando]){postFinder=setMatcher(postFinder,postSelector);}
return markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=preFilter&&(seed||!selector)?condense(elems,preMap,preFilter,context,xml):elems,matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher){matcher(matcherIn,matcherOut,context,xml);}
if(postFilter){temp=condense(matcherOut,postMap);postFilter(temp,[],context,xml);i=temp.length;while(i--){if((elem=temp[i])){matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem);}}}
if(seed){if(postFinder||preFilter){if(postFinder){temp=[];i=matcherOut.length;while(i--){if((elem=matcherOut[i])){temp.push((matcherIn[i]=elem));}}
postFinder(null,(matcherOut=[]),temp,xml);}
i=matcherOut.length;while(i--){if((elem=matcherOut[i])&&(temp=postFinder?indexOf(seed,elem):preMap[i])>-1){seed[temp]=!(results[temp]=elem);}}}}else{matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut);if(postFinder){postFinder(null,results,matcherOut,xml);}else{push.apply(results,matcherOut);}}});}
function matcherFromTokens(tokens){var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext;},implicitRelative,true),matchAnyContext=addCombinator(function(elem){return indexOf(checkContext,elem)>-1;},implicitRelative,true),matchers=[function(elem,context,xml){var ret=(!leadingRelative&&(xml||context!==outermostContext))||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml));checkContext=null;return ret;}];for(;i<len;i++){if((matcher=Expr.relative[tokens[i].type])){matchers=[addCombinator(elementMatcher(matchers),matcher)];}else{matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches);if(matcher[expando]){j=++i;for(;j<len;j++){if(Expr.relative[tokens[j].type]){break;}}
return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1).concat({value:tokens[i-2].type===" "?"*":""})).replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens((tokens=tokens.slice(j))),j<len&&toSelector(tokens));}
matchers.push(matcher);}}
return elementMatcher(matchers);}
function matcherFromGroupMatchers(elementMatchers,setMatchers){var bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,outermost){var elem,j,matcher,matchedCount=0,i="0",unmatched=seed&&[],setMatched=[],contextBackup=outermostContext,elems=seed||byElement&&Expr.find["TAG"]("*",outermost),dirrunsUnique=(dirruns+=contextBackup==null?1:Math.random()||0.1),len=elems.length;if(outermost){outermostContext=context===document||context||outermost;}
for(;i!==len&&(elem=elems[i])!=null;i++){if(byElement&&elem){j=0;if(!context&&elem.ownerDocument!==document){setDocument(elem);xml=!documentIsHTML;}
while((matcher=elementMatchers[j++])){if(matcher(elem,context||document,xml)){results.push(elem);break;}}
if(outermost){dirruns=dirrunsUnique;}}
if(bySet){if((elem=!matcher&&elem)){matchedCount--;}
if(seed){unmatched.push(elem);}}}
matchedCount+=i;if(bySet&&i!==matchedCount){j=0;while((matcher=setMatchers[j++])){matcher(unmatched,setMatched,context,xml);}
if(seed){if(matchedCount>0){while(i--){if(!(unmatched[i]||setMatched[i])){setMatched[i]=pop.call(results);}}}
setMatched=condense(setMatched);}
push.apply(results,setMatched);if(outermost&&!seed&&setMatched.length>0&&(matchedCount+setMatchers.length)>1){Sizzle.uniqueSort(results);}}
if(outermost){dirruns=dirrunsUnique;outermostContext=contextBackup;}
return unmatched;};return bySet?markFunction(superMatcher):superMatcher;}
compile=Sizzle.compile=function(selector,match){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){if(!match){match=tokenize(selector);}
i=match.length;while(i--){cached=matcherFromTokens(match[i]);if(cached[expando]){setMatchers.push(cached);}else{elementMatchers.push(cached);}}
cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers));cached.selector=selector;}
return cached;};select=Sizzle.select=function(selector,context,results,seed){var i,tokens,token,type,find,compiled=typeof selector==="function"&&selector,match=!seed&&tokenize((selector=compiled.selector||selector));results=results||[];if(match.length===1){tokens=match[0]=match[0].slice(0);if(tokens.length>2&&(token=tokens[0]).type==="ID"&&support.getById&&context.nodeType===9&&documentIsHTML&&Expr.relative[tokens[1].type]){context=(Expr.find["ID"](token.matches[0].replace(runescape,funescape),context)||[])[0];if(!context){return results;}else if(compiled){context=context.parentNode;}
selector=selector.slice(tokens.shift().value.length);}
i=matchExpr["needsContext"].test(selector)?0:tokens.length;while(i--){token=tokens[i];if(Expr.relative[(type=token.type)]){break;}
if((find=Expr.find[type])){if((seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&testContext(context.parentNode)||context))){tokens.splice(i,1);selector=seed.length&&toSelector(tokens);if(!selector){push.apply(results,seed);return results;}
break;}}}}
(compiled||compile(selector,match))(seed,context,!documentIsHTML,results,!context||rsibling.test(selector)&&testContext(context.parentNode)||context);return results;};support.sortStable=expando.split("").sort(sortOrder).join("")===expando;support.detectDuplicates=!!hasDuplicate;setDocument();support.sortDetached=assert(function(div1){return div1.compareDocumentPosition(document.createElement("div"))&1;});if(!assert(function(div){div.innerHTML="<a href='#'></a>";return div.firstChild.getAttribute("href")==="#";})){addHandle("type|href|height|width",function(elem,name,isXML){if(!isXML){return elem.getAttribute(name,name.toLowerCase()==="type"?1:2);}});}
if(!support.attributes||!assert(function(div){div.innerHTML="<input/>";div.firstChild.setAttribute("value","");return div.firstChild.getAttribute("value")==="";})){addHandle("value",function(elem,name,isXML){if(!isXML&&elem.nodeName.toLowerCase()==="input"){return elem.defaultValue;}});}
if(!assert(function(div){return div.getAttribute("disabled")==null;})){addHandle(booleans,function(elem,name,isXML){var val;if(!isXML){return elem[name]===true?name.toLowerCase():(val=elem.getAttributeNode(name))&&val.specified?val.value:null;}});}
return Sizzle;})(window);jQuery.find=Sizzle;jQuery.expr=Sizzle.selectors;jQuery.expr[":"]=jQuery.expr.pseudos;jQuery.uniqueSort=jQuery.unique=Sizzle.uniqueSort;jQuery.text=Sizzle.getText;jQuery.isXMLDoc=Sizzle.isXML;jQuery.contains=Sizzle.contains;var dir=function(elem,dir,until){var matched=[],truncate=until!==undefined;while((elem=elem[dir])&&elem.nodeType!==9){if(elem.nodeType===1){if(truncate&&jQuery(elem).is(until)){break;}
matched.push(elem);}}
return matched;};var siblings=function(n,elem){var matched=[];for(;n;n=n.nextSibling){if(n.nodeType===1&&n!==elem){matched.push(n);}}
return matched;};var rneedsContext=jQuery.expr.match.needsContext;var rsingleTag=(/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/);var risSimple=/^.[^:#\[\.,]*$/;function winnow(elements,qualifier,not){if(jQuery.isFunction(qualifier)){return jQuery.grep(elements,function(elem,i){return!!qualifier.call(elem,i,elem)!==not;});}
if(qualifier.nodeType){return jQuery.grep(elements,function(elem){return(elem===qualifier)!==not;});}
if(typeof qualifier==="string"){if(risSimple.test(qualifier)){return jQuery.filter(qualifier,elements,not);}
qualifier=jQuery.filter(qualifier,elements);}
return jQuery.grep(elements,function(elem){return(indexOf.call(qualifier,elem)>-1)!==not;});}
jQuery.filter=function(expr,elems,not){var elem=elems[0];if(not){expr=":not("+expr+")";}
return elems.length===1&&elem.nodeType===1?jQuery.find.matchesSelector(elem,expr)?[elem]:[]:jQuery.find.matches(expr,jQuery.grep(elems,function(elem){return elem.nodeType===1;}));};jQuery.fn.extend({find:function(selector){var i,len=this.length,ret=[],self=this;if(typeof selector!=="string"){return this.pushStack(jQuery(selector).filter(function(){for(i=0;i<len;i++){if(jQuery.contains(self[i],this)){return true;}}}));}
for(i=0;i<len;i++){jQuery.find(selector,self[i],ret);}
ret=this.pushStack(len>1?jQuery.unique(ret):ret);ret.selector=this.selector?this.selector+" "+selector:selector;return ret;},filter:function(selector){return this.pushStack(winnow(this,selector||[],false));},not:function(selector){return this.pushStack(winnow(this,selector||[],true));},is:function(selector){return!!winnow(this,typeof selector==="string"&&rneedsContext.test(selector)?jQuery(selector):selector||[],false).length;}});var rootjQuery,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,init=jQuery.fn.init=function(selector,context,root){var match,elem;if(!selector){return this;}
root=root||rootjQuery;if(typeof selector==="string"){if(selector[0]==="<"&&selector[selector.length-1]===">"&&selector.length>=3){match=[null,selector,null];}else{match=rquickExpr.exec(selector);}
if(match&&(match[1]||!context)){if(match[1]){context=context instanceof jQuery?context[0]:context;jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,true));if(rsingleTag.test(match[1])&&jQuery.isPlainObject(context)){for(match in context){if(jQuery.isFunction(this[match])){this[match](context[match]);}else{this.attr(match,context[match]);}}}
return this;}else{elem=document.getElementById(match[2]);if(elem&&elem.parentNode){this.length=1;this[0]=elem;}
this.context=document;this.selector=selector;return this;}}else if(!context||context.jquery){return(context||root).find(selector);}else{return this.constructor(context).find(selector);}}else if(selector.nodeType){this.context=this[0]=selector;this.length=1;return this;}else if(jQuery.isFunction(selector)){return root.ready!==undefined?root.ready(selector):selector(jQuery);}
if(selector.selector!==undefined){this.selector=selector.selector;this.context=selector.context;}
return jQuery.makeArray(selector,this);};init.prototype=jQuery.fn;rootjQuery=jQuery(document);var rparentsprev=/^(?:parents|prev(?:Until|All))/,guaranteedUnique={children:true,contents:true,next:true,prev:true};jQuery.fn.extend({has:function(target){var targets=jQuery(target,this),l=targets.length;return this.filter(function(){var i=0;for(;i<l;i++){if(jQuery.contains(this,targets[i])){return true;}}});},closest:function(selectors,context){var cur,i=0,l=this.length,matched=[],pos=rneedsContext.test(selectors)||typeof selectors!=="string"?jQuery(selectors,context||this.context):0;for(;i<l;i++){for(cur=this[i];cur&&cur!==context;cur=cur.parentNode){if(cur.nodeType<11&&(pos?pos.index(cur)>-1:cur.nodeType===1&&jQuery.find.matchesSelector(cur,selectors))){matched.push(cur);break;}}}
return this.pushStack(matched.length>1?jQuery.uniqueSort(matched):matched);},index:function(elem){if(!elem){return(this[0]&&this[0].parentNode)?this.first().prevAll().length:-1;}
if(typeof elem==="string"){return indexOf.call(jQuery(elem),this[0]);}
return indexOf.call(this,elem.jquery?elem[0]:elem);},add:function(selector,context){return this.pushStack(jQuery.uniqueSort(jQuery.merge(this.get(),jQuery(selector,context))));},addBack:function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector));}});function sibling(cur,dir){while((cur=cur[dir])&&cur.nodeType!==1){}
return cur;}
jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&parent.nodeType!==11?parent:null;},parents:function(elem){return dir(elem,"parentNode");},parentsUntil:function(elem,i,until){return dir(elem,"parentNode",until);},next:function(elem){return sibling(elem,"nextSibling");},prev:function(elem){return sibling(elem,"previousSibling");},nextAll:function(elem){return dir(elem,"nextSibling");},prevAll:function(elem){return dir(elem,"previousSibling");},nextUntil:function(elem,i,until){return dir(elem,"nextSibling",until);},prevUntil:function(elem,i,until){return dir(elem,"previousSibling",until);},siblings:function(elem){return siblings((elem.parentNode||{}).firstChild,elem);},children:function(elem){return siblings(elem.firstChild);},contents:function(elem){return elem.contentDocument||jQuery.merge([],elem.childNodes);}},function(name,fn){jQuery.fn[name]=function(until,selector){var matched=jQuery.map(this,fn,until);if(name.slice(-5)!=="Until"){selector=until;}
if(selector&&typeof selector==="string"){matched=jQuery.filter(selector,matched);}
if(this.length>1){if(!guaranteedUnique[name]){jQuery.uniqueSort(matched);}
if(rparentsprev.test(name)){matched.reverse();}}
return this.pushStack(matched);};});var rnotwhite=(/\S+/g);function createOptions(options){var object={};jQuery.each(options.match(rnotwhite)||[],function(_,flag){object[flag]=true;});return object;}
jQuery.Callbacks=function(options){options=typeof options==="string"?createOptions(options):jQuery.extend({},options);var
firing,memory,fired,locked,list=[],queue=[],firingIndex=-1,fire=function(){locked=options.once;fired=firing=true;for(;queue.length;firingIndex=-1){memory=queue.shift();while(++firingIndex<list.length){if(list[firingIndex].apply(memory[0],memory[1])===false&&options.stopOnFalse){firingIndex=list.length;memory=false;}}}
if(!options.memory){memory=false;}
firing=false;if(locked){if(memory){list=[];}else{list="";}}},self={add:function(){if(list){if(memory&&!firing){firingIndex=list.length-1;queue.push(memory);}
(function add(args){jQuery.each(args,function(_,arg){if(jQuery.isFunction(arg)){if(!options.unique||!self.has(arg)){list.push(arg);}}else if(arg&&arg.length&&jQuery.type(arg)!=="string"){add(arg);}});})(arguments);if(memory&&!firing){fire();}}
return this;},remove:function(){jQuery.each(arguments,function(_,arg){var index;while((index=jQuery.inArray(arg,list,index))>-1){list.splice(index,1);if(index<=firingIndex){firingIndex--;}}});return this;},has:function(fn){return fn?jQuery.inArray(fn,list)>-1:list.length>0;},empty:function(){if(list){list=[];}
return this;},disable:function(){locked=queue=[];list=memory="";return this;},disabled:function(){return!list;},lock:function(){locked=queue=[];if(!memory){list=memory="";}
return this;},locked:function(){return!!locked;},fireWith:function(context,args){if(!locked){args=args||[];args=[context,args.slice?args.slice():args];queue.push(args);if(!firing){fire();}}
return this;},fire:function(){self.fireWith(this,arguments);return this;},fired:function(){return!!fired;}};return self;};jQuery.extend({Deferred:function(func){var tuples=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],state="pending",promise={state:function(){return state;},always:function(){deferred.done(arguments).fail(arguments);return this;},then:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var fn=jQuery.isFunction(fns[i])&&fns[i];deferred[tuple[1]](function(){var returned=fn&&fn.apply(this,arguments);if(returned&&jQuery.isFunction(returned.promise)){returned.promise().progress(newDefer.notify).done(newDefer.resolve).fail(newDefer.reject);}else{newDefer[tuple[0]+"With"](this===promise?newDefer.promise():this,fn?[returned]:arguments);}});});fns=null;}).promise();},promise:function(obj){return obj!=null?jQuery.extend(obj,promise):promise;}},deferred={};promise.pipe=promise.then;jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3];promise[tuple[1]]=list.add;if(stateString){list.add(function(){state=stateString;},tuples[i^1][2].disable,tuples[2][2].lock);}
deferred[tuple[0]]=function(){deferred[tuple[0]+"With"](this===deferred?promise:this,arguments);return this;};deferred[tuple[0]+"With"]=list.fireWith;});promise.promise(deferred);if(func){func.call(deferred,deferred);}
return deferred;},when:function(subordinate){var i=0,resolveValues=slice.call(arguments),length=resolveValues.length,remaining=length!==1||(subordinate&&jQuery.isFunction(subordinate.promise))?length:0,deferred=remaining===1?subordinate:jQuery.Deferred(),updateFunc=function(i,contexts,values){return function(value){contexts[i]=this;values[i]=arguments.length>1?slice.call(arguments):value;if(values===progressValues){deferred.notifyWith(contexts,values);}else if(!(--remaining)){deferred.resolveWith(contexts,values);}};},progressValues,progressContexts,resolveContexts;if(length>1){progressValues=new Array(length);progressContexts=new Array(length);resolveContexts=new Array(length);for(;i<length;i++){if(resolveValues[i]&&jQuery.isFunction(resolveValues[i].promise)){resolveValues[i].promise().progress(updateFunc(i,progressContexts,progressValues)).done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject);}else{--remaining;}}}
if(!remaining){deferred.resolveWith(resolveContexts,resolveValues);}
return deferred.promise();}});var readyList;jQuery.fn.ready=function(fn){jQuery.ready.promise().done(fn);return this;};jQuery.extend({isReady:false,readyWait:1,holdReady:function(hold){if(hold){jQuery.readyWait++;}else{jQuery.ready(true);}},ready:function(wait){if(wait===true?--jQuery.readyWait:jQuery.isReady){return;}
jQuery.isReady=true;if(wait!==true&&--jQuery.readyWait>0){return;}
readyList.resolveWith(document,[jQuery]);if(jQuery.fn.triggerHandler){jQuery(document).triggerHandler("ready");jQuery(document).off("ready");}}});function completed(){document.removeEventListener("DOMContentLoaded",completed);window.removeEventListener("load",completed);jQuery.ready();}
jQuery.ready.promise=function(obj){if(!readyList){readyList=jQuery.Deferred();if(document.readyState==="complete"||(document.readyState!=="loading"&&!document.documentElement.doScroll)){window.setTimeout(jQuery.ready);}else{document.addEventListener("DOMContentLoaded",completed);window.addEventListener("load",completed);}}
return readyList.promise(obj);};jQuery.ready.promise();var access=function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,len=elems.length,bulk=key==null;if(jQuery.type(key)==="object"){chainable=true;for(i in key){access(elems,fn,i,key[i],true,emptyGet,raw);}}else if(value!==undefined){chainable=true;if(!jQuery.isFunction(value)){raw=true;}
if(bulk){if(raw){fn.call(elems,value);fn=null;}else{bulk=fn;fn=function(elem,key,value){return bulk.call(jQuery(elem),value);};}}
if(fn){for(;i<len;i++){fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)));}}}
return chainable?elems:bulk?fn.call(elems):len?fn(elems[0],key):emptyGet;};var acceptData=function(owner){return owner.nodeType===1||owner.nodeType===9||!(+owner.nodeType);};function Data(){this.expando=jQuery.expando+Data.uid++;}
Data.uid=1;Data.prototype={register:function(owner,initial){var value=initial||{};if(owner.nodeType){owner[this.expando]=value;}else{Object.defineProperty(owner,this.expando,{value:value,writable:true,configurable:true});}
return owner[this.expando];},cache:function(owner){if(!acceptData(owner)){return{};}
var value=owner[this.expando];if(!value){value={};if(acceptData(owner)){if(owner.nodeType){owner[this.expando]=value;}else{Object.defineProperty(owner,this.expando,{value:value,configurable:true});}}}
return value;},set:function(owner,data,value){var prop,cache=this.cache(owner);if(typeof data==="string"){cache[data]=value;}else{for(prop in data){cache[prop]=data[prop];}}
return cache;},get:function(owner,key){return key===undefined?this.cache(owner):owner[this.expando]&&owner[this.expando][key];},access:function(owner,key,value){var stored;if(key===undefined||((key&&typeof key==="string")&&value===undefined)){stored=this.get(owner,key);return stored!==undefined?stored:this.get(owner,jQuery.camelCase(key));}
this.set(owner,key,value);return value!==undefined?value:key;},remove:function(owner,key){var i,name,camel,cache=owner[this.expando];if(cache===undefined){return;}
if(key===undefined){this.register(owner);}else{if(jQuery.isArray(key)){name=key.concat(key.map(jQuery.camelCase));}else{camel=jQuery.camelCase(key);if(key in cache){name=[key,camel];}else{name=camel;name=name in cache?[name]:(name.match(rnotwhite)||[]);}}
i=name.length;while(i--){delete cache[name[i]];}}
if(key===undefined||jQuery.isEmptyObject(cache)){if(owner.nodeType){owner[this.expando]=undefined;}else{delete owner[this.expando];}}},hasData:function(owner){var cache=owner[this.expando];return cache!==undefined&&!jQuery.isEmptyObject(cache);}};var dataPriv=new Data();var dataUser=new Data();var rbrace=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rmultiDash=/[A-Z]/g;function dataAttr(elem,key,data){var name;if(data===undefined&&elem.nodeType===1){name="data-"+key.replace(rmultiDash,"-$&").toLowerCase();data=elem.getAttribute(name);if(typeof data==="string"){try{data=data==="true"?true:data==="false"?false:data==="null"?null:+data+""===data?+data:rbrace.test(data)?jQuery.parseJSON(data):data;}catch(e){}
dataUser.set(elem,key,data);}else{data=undefined;}}
return data;}
jQuery.extend({hasData:function(elem){return dataUser.hasData(elem)||dataPriv.hasData(elem);},data:function(elem,name,data){return dataUser.access(elem,name,data);},removeData:function(elem,name){dataUser.remove(elem,name);},_data:function(elem,name,data){return dataPriv.access(elem,name,data);},_removeData:function(elem,name){dataPriv.remove(elem,name);}});jQuery.fn.extend({data:function(key,value){var i,name,data,elem=this[0],attrs=elem&&elem.attributes;if(key===undefined){if(this.length){data=dataUser.get(elem);if(elem.nodeType===1&&!dataPriv.get(elem,"hasDataAttrs")){i=attrs.length;while(i--){if(attrs[i]){name=attrs[i].name;if(name.indexOf("data-")===0){name=jQuery.camelCase(name.slice(5));dataAttr(elem,name,data[name]);}}}
dataPriv.set(elem,"hasDataAttrs",true);}}
return data;}
if(typeof key==="object"){return this.each(function(){dataUser.set(this,key);});}
return access(this,function(value){var data,camelKey;if(elem&&value===undefined){data=dataUser.get(elem,key)||dataUser.get(elem,key.replace(rmultiDash,"-$&").toLowerCase());if(data!==undefined){return data;}
camelKey=jQuery.camelCase(key);data=dataUser.get(elem,camelKey);if(data!==undefined){return data;}
data=dataAttr(elem,camelKey,undefined);if(data!==undefined){return data;}
return;}
camelKey=jQuery.camelCase(key);this.each(function(){var data=dataUser.get(this,camelKey);dataUser.set(this,camelKey,value);if(key.indexOf("-")>-1&&data!==undefined){dataUser.set(this,key,value);}});},null,value,arguments.length>1,null,true);},removeData:function(key){return this.each(function(){dataUser.remove(this,key);});}});jQuery.extend({queue:function(elem,type,data){var queue;if(elem){type=(type||"fx")+"queue";queue=dataPriv.get(elem,type);if(data){if(!queue||jQuery.isArray(data)){queue=dataPriv.access(elem,type,jQuery.makeArray(data));}else{queue.push(data);}}
return queue||[];}},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type),next=function(){jQuery.dequeue(elem,type);};if(fn==="inprogress"){fn=queue.shift();startLength--;}
if(fn){if(type==="fx"){queue.unshift("inprogress");}
delete hooks.stop;fn.call(elem,next,hooks);}
if(!startLength&&hooks){hooks.empty.fire();}},_queueHooks:function(elem,type){var key=type+"queueHooks";return dataPriv.get(elem,key)||dataPriv.access(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){dataPriv.remove(elem,[type+"queue",key]);})});}});jQuery.fn.extend({queue:function(type,data){var setter=2;if(typeof type!=="string"){data=type;type="fx";setter--;}
if(arguments.length<setter){return jQuery.queue(this[0],type);}
return data===undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type);if(type==="fx"&&queue[0]!=="inprogress"){jQuery.dequeue(this,type);}});},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type);});},clearQueue:function(type){return this.queue(type||"fx",[]);},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){if(!(--count)){defer.resolveWith(elements,[elements]);}};if(typeof type!=="string"){obj=type;type=undefined;}
type=type||"fx";while(i--){tmp=dataPriv.get(elements[i],type+"queueHooks");if(tmp&&tmp.empty){count++;tmp.empty.add(resolve);}}
resolve();return defer.promise(obj);}});var pnum=(/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/).source;var rcssNum=new RegExp("^(?:([+-])=|)("+pnum+")([a-z%]*)$","i");var cssExpand=["Top","Right","Bottom","Left"];var isHidden=function(elem,el){elem=el||elem;return jQuery.css(elem,"display")==="none"||!jQuery.contains(elem.ownerDocument,elem);};function adjustCSS(elem,prop,valueParts,tween){var adjusted,scale=1,maxIterations=20,currentValue=tween?function(){return tween.cur();}:function(){return jQuery.css(elem,prop,"");},initial=currentValue(),unit=valueParts&&valueParts[3]||(jQuery.cssNumber[prop]?"":"px"),initialInUnit=(jQuery.cssNumber[prop]||unit!=="px"&&+initial)&&rcssNum.exec(jQuery.css(elem,prop));if(initialInUnit&&initialInUnit[3]!==unit){unit=unit||initialInUnit[3];valueParts=valueParts||[];initialInUnit=+initial||1;do{scale=scale||".5";initialInUnit=initialInUnit / scale;jQuery.style(elem,prop,initialInUnit+unit);}while(scale!==(scale=currentValue()/ initial)&&scale!==1&&--maxIterations);}
if(valueParts){initialInUnit=+initialInUnit||+initial||0;adjusted=valueParts[1]?initialInUnit+(valueParts[1]+1)*valueParts[2]:+valueParts[2];if(tween){tween.unit=unit;tween.start=initialInUnit;tween.end=adjusted;}}
return adjusted;}
var rcheckableType=(/^(?:checkbox|radio)$/i);var rtagName=(/<([\w:-]+)/);var rscriptType=(/^$|\/(?:java|ecma)script/i);var wrapMap={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;function getAll(context,tag){var ret=typeof context.getElementsByTagName!=="undefined"?context.getElementsByTagName(tag||"*"):typeof context.querySelectorAll!=="undefined"?context.querySelectorAll(tag||"*"):[];return tag===undefined||tag&&jQuery.nodeName(context,tag)?jQuery.merge([context],ret):ret;}
function setGlobalEval(elems,refElements){var i=0,l=elems.length;for(;i<l;i++){dataPriv.set(elems[i],"globalEval",!refElements||dataPriv.get(refElements[i],"globalEval"));}}
var rhtml=/<|&#?\w+;/;function buildFragment(elems,context,scripts,selection,ignored){var elem,tmp,tag,wrap,contains,j,fragment=context.createDocumentFragment(),nodes=[],i=0,l=elems.length;for(;i<l;i++){elem=elems[i];if(elem||elem===0){if(jQuery.type(elem)==="object"){jQuery.merge(nodes,elem.nodeType?[elem]:elem);}else if(!rhtml.test(elem)){nodes.push(context.createTextNode(elem));}else{tmp=tmp||fragment.appendChild(context.createElement("div"));tag=(rtagName.exec(elem)||["",""])[1].toLowerCase();wrap=wrapMap[tag]||wrapMap._default;tmp.innerHTML=wrap[1]+jQuery.htmlPrefilter(elem)+wrap[2];j=wrap[0];while(j--){tmp=tmp.lastChild;}
jQuery.merge(nodes,tmp.childNodes);tmp=fragment.firstChild;tmp.textContent="";}}}
fragment.textContent="";i=0;while((elem=nodes[i++])){if(selection&&jQuery.inArray(elem,selection)>-1){if(ignored){ignored.push(elem);}
continue;}
contains=jQuery.contains(elem.ownerDocument,elem);tmp=getAll(fragment.appendChild(elem),"script");if(contains){setGlobalEval(tmp);}
if(scripts){j=0;while((elem=tmp[j++])){if(rscriptType.test(elem.type||"")){scripts.push(elem);}}}}
return fragment;}
(function(){var fragment=document.createDocumentFragment(),div=fragment.appendChild(document.createElement("div")),input=document.createElement("input");input.setAttribute("type","radio");input.setAttribute("checked","checked");input.setAttribute("name","t");div.appendChild(input);support.checkClone=div.cloneNode(true).cloneNode(true).lastChild.checked;div.innerHTML="<textarea>x</textarea>";support.noCloneChecked=!!div.cloneNode(true).lastChild.defaultValue;})();var
rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,rtypenamespace=/^([^.]*)(?:\.(.+)|)/;function returnTrue(){return true;}
function returnFalse(){return false;}
function safeActiveElement(){try{return document.activeElement;}catch(err){}}
function on(elem,types,selector,data,fn,one){var origFn,type;if(typeof types==="object"){if(typeof selector!=="string"){data=data||selector;selector=undefined;}
for(type in types){on(elem,type,selector,data,types[type],one);}
return elem;}
if(data==null&&fn==null){fn=selector;data=selector=undefined;}else if(fn==null){if(typeof selector==="string"){fn=data;data=undefined;}else{fn=data;data=selector;selector=undefined;}}
if(fn===false){fn=returnFalse;}else if(!fn){return elem;}
if(one===1){origFn=fn;fn=function(event){jQuery().off(event);return origFn.apply(this,arguments);};fn.guid=origFn.guid||(origFn.guid=jQuery.guid++);}
return elem.each(function(){jQuery.event.add(this,types,fn,data,selector);});}
jQuery.event={global:{},add:function(elem,types,handler,data,selector){var handleObjIn,eventHandle,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=dataPriv.get(elem);if(!elemData){return;}
if(handler.handler){handleObjIn=handler;handler=handleObjIn.handler;selector=handleObjIn.selector;}
if(!handler.guid){handler.guid=jQuery.guid++;}
if(!(events=elemData.events)){events=elemData.events={};}
if(!(eventHandle=elemData.handle)){eventHandle=elemData.handle=function(e){return typeof jQuery!=="undefined"&&jQuery.event.triggered!==e.type?jQuery.event.dispatch.apply(elem,arguments):undefined;};}
types=(types||"").match(rnotwhite)||[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type){continue;}
special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;special=jQuery.event.special[type]||{};handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn);if(!(handlers=events[type])){handlers=events[type]=[];handlers.delegateCount=0;if(!special.setup||special.setup.call(elem,data,namespaces,eventHandle)===false){if(elem.addEventListener){elem.addEventListener(type,eventHandle);}}}
if(special.add){special.add.call(elem,handleObj);if(!handleObj.handler.guid){handleObj.handler.guid=handler.guid;}}
if(selector){handlers.splice(handlers.delegateCount++,0,handleObj);}else{handlers.push(handleObj);}
jQuery.event.global[type]=true;}},remove:function(elem,types,handler,selector,mappedTypes){var j,origCount,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=dataPriv.hasData(elem)&&dataPriv.get(elem);if(!elemData||!(events=elemData.events)){return;}
types=(types||"").match(rnotwhite)||[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type){for(type in events){jQuery.event.remove(elem,type+types[t],handler,selector,true);}
continue;}
special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;handlers=events[type]||[];tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)");origCount=j=handlers.length;while(j--){handleObj=handlers[j];if((mappedTypes||origType===handleObj.origType)&&(!handler||handler.guid===handleObj.guid)&&(!tmp||tmp.test(handleObj.namespace))&&(!selector||selector===handleObj.selector||selector==="**"&&handleObj.selector)){handlers.splice(j,1);if(handleObj.selector){handlers.delegateCount--;}
if(special.remove){special.remove.call(elem,handleObj);}}}
if(origCount&&!handlers.length){if(!special.teardown||special.teardown.call(elem,namespaces,elemData.handle)===false){jQuery.removeEvent(elem,type,elemData.handle);}
delete events[type];}}
if(jQuery.isEmptyObject(events)){dataPriv.remove(elem,"handle events");}},dispatch:function(event){event=jQuery.event.fix(event);var i,j,ret,matched,handleObj,handlerQueue=[],args=slice.call(arguments),handlers=(dataPriv.get(this,"events")||{})[event.type]||[],special=jQuery.event.special[event.type]||{};args[0]=event;event.delegateTarget=this;if(special.preDispatch&&special.preDispatch.call(this,event)===false){return;}
handlerQueue=jQuery.event.handlers.call(this,event,handlers);i=0;while((matched=handlerQueue[i++])&&!event.isPropagationStopped()){event.currentTarget=matched.elem;j=0;while((handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped()){if(!event.rnamespace||event.rnamespace.test(handleObj.namespace)){event.handleObj=handleObj;event.data=handleObj.data;ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args);if(ret!==undefined){if((event.result=ret)===false){event.preventDefault();event.stopPropagation();}}}}}
if(special.postDispatch){special.postDispatch.call(this,event);}
return event.result;},handlers:function(event,handlers){var i,matches,sel,handleObj,handlerQueue=[],delegateCount=handlers.delegateCount,cur=event.target;if(delegateCount&&cur.nodeType&&(event.type!=="click"||isNaN(event.button)||event.button<1)){for(;cur!==this;cur=cur.parentNode||this){if(cur.nodeType===1&&(cur.disabled!==true||event.type!=="click")){matches=[];for(i=0;i<delegateCount;i++){handleObj=handlers[i];sel=handleObj.selector+" ";if(matches[sel]===undefined){matches[sel]=handleObj.needsContext?jQuery(sel,this).index(cur)>-1:jQuery.find(sel,this,null,[cur]).length;}
if(matches[sel]){matches.push(handleObj);}}
if(matches.length){handlerQueue.push({elem:cur,handlers:matches});}}}}
if(delegateCount<handlers.length){handlerQueue.push({elem:this,handlers:handlers.slice(delegateCount)});}
return handlerQueue;},props:("altKey bubbles cancelable ctrlKey currentTarget detail eventPhase "+"metaKey relatedTarget shiftKey target timeStamp view which").split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){if(event.which==null){event.which=original.charCode!=null?original.charCode:original.keyCode;}
return event;}},mouseHooks:{props:("button buttons clientX clientY offsetX offsetY pageX pageY "+"screenX screenY toElement").split(" "),filter:function(event,original){var eventDoc,doc,body,button=original.button;if(event.pageX==null&&original.clientX!=null){eventDoc=event.target.ownerDocument||document;doc=eventDoc.documentElement;body=eventDoc.body;event.pageX=original.clientX+
(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-
(doc&&doc.clientLeft||body&&body.clientLeft||0);event.pageY=original.clientY+
(doc&&doc.scrollTop||body&&body.scrollTop||0)-
(doc&&doc.clientTop||body&&body.clientTop||0);}
if(!event.which&&button!==undefined){event.which=(button&1?1:(button&2?3:(button&4?2:0)));}
return event;}},fix:function(event){if(event[jQuery.expando]){return event;}
var i,prop,copy,type=event.type,originalEvent=event,fixHook=this.fixHooks[type];if(!fixHook){this.fixHooks[type]=fixHook=rmouseEvent.test(type)?this.mouseHooks:rkeyEvent.test(type)?this.keyHooks:{};}
copy=fixHook.props?this.props.concat(fixHook.props):this.props;event=new jQuery.Event(originalEvent);i=copy.length;while(i--){prop=copy[i];event[prop]=originalEvent[prop];}
if(!event.target){event.target=document;}
if(event.target.nodeType===3){event.target=event.target.parentNode;}
return fixHook.filter?fixHook.filter(event,originalEvent):event;},special:{load:{noBubble:true},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus){this.focus();return false;}},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur){this.blur();return false;}},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&jQuery.nodeName(this,"input")){this.click();return false;}},_default:function(event){return jQuery.nodeName(event.target,"a");}},beforeunload:{postDispatch:function(event){if(event.result!==undefined&&event.originalEvent){event.originalEvent.returnValue=event.result;}}}}};jQuery.removeEvent=function(elem,type,handle){if(elem.removeEventListener){elem.removeEventListener(type,handle);}};jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event)){return new jQuery.Event(src,props);}
if(src&&src.type){this.originalEvent=src;this.type=src.type;this.isDefaultPrevented=src.defaultPrevented||src.defaultPrevented===undefined&&src.returnValue===false?returnTrue:returnFalse;}else{this.type=src;}
if(props){jQuery.extend(this,props);}
this.timeStamp=src&&src.timeStamp||jQuery.now();this[jQuery.expando]=true;};jQuery.Event.prototype={constructor:jQuery.Event,isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue;if(e){e.preventDefault();}},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue;if(e){e.stopPropagation();}},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=returnTrue;if(e){e.stopImmediatePropagation();}
this.stopPropagation();}};jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj;if(!related||(related!==target&&!jQuery.contains(target,related))){event.type=handleObj.origType;ret=handleObj.handler.apply(this,arguments);event.type=fix;}
return ret;}};});jQuery.fn.extend({on:function(types,selector,data,fn){return on(this,types,selector,data,fn);},one:function(types,selector,data,fn){return on(this,types,selector,data,fn,1);},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj){handleObj=types.handleObj;jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler);return this;}
if(typeof types==="object"){for(type in types){this.off(type,selector,types[type]);}
return this;}
if(selector===false||typeof selector==="function"){fn=selector;selector=undefined;}
if(fn===false){fn=returnFalse;}
return this.each(function(){jQuery.event.remove(this,types,fn,selector);});}});var
rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,rnoInnerhtml=/<script|<style|<link/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function manipulationTarget(elem,content){return jQuery.nodeName(elem,"table")&&jQuery.nodeName(content.nodeType!==11?content:content.firstChild,"tr")?elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody")):elem;}
function disableScript(elem){elem.type=(elem.getAttribute("type")!==null)+"/"+elem.type;return elem;}
function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);if(match){elem.type=match[1];}else{elem.removeAttribute("type");}
return elem;}
function cloneCopyEvent(src,dest){var i,l,type,pdataOld,pdataCur,udataOld,udataCur,events;if(dest.nodeType!==1){return;}
if(dataPriv.hasData(src)){pdataOld=dataPriv.access(src);pdataCur=dataPriv.set(dest,pdataOld);events=pdataOld.events;if(events){delete pdataCur.handle;pdataCur.events={};for(type in events){for(i=0,l=events[type].length;i<l;i++){jQuery.event.add(dest,type,events[type][i]);}}}}
if(dataUser.hasData(src)){udataOld=dataUser.access(src);udataCur=jQuery.extend({},udataOld);dataUser.set(dest,udataCur);}}
function fixInput(src,dest){var nodeName=dest.nodeName.toLowerCase();if(nodeName==="input"&&rcheckableType.test(src.type)){dest.checked=src.checked;}else if(nodeName==="input"||nodeName==="textarea"){dest.defaultValue=src.defaultValue;}}
function domManip(collection,args,callback,ignored){args=concat.apply([],args);var fragment,first,scripts,hasScripts,node,doc,i=0,l=collection.length,iNoClone=l-1,value=args[0],isFunction=jQuery.isFunction(value);if(isFunction||(l>1&&typeof value==="string"&&!support.checkClone&&rchecked.test(value))){return collection.each(function(index){var self=collection.eq(index);if(isFunction){args[0]=value.call(this,index,self.html());}
domManip(self,args,callback,ignored);});}
if(l){fragment=buildFragment(args,collection[0].ownerDocument,false,collection,ignored);first=fragment.firstChild;if(fragment.childNodes.length===1){fragment=first;}
if(first||ignored){scripts=jQuery.map(getAll(fragment,"script"),disableScript);hasScripts=scripts.length;for(;i<l;i++){node=fragment;if(i!==iNoClone){node=jQuery.clone(node,true,true);if(hasScripts){jQuery.merge(scripts,getAll(node,"script"));}}
callback.call(collection[i],node,i);}
if(hasScripts){doc=scripts[scripts.length-1].ownerDocument;jQuery.map(scripts,restoreScript);for(i=0;i<hasScripts;i++){node=scripts[i];if(rscriptType.test(node.type||"")&&!dataPriv.access(node,"globalEval")&&jQuery.contains(doc,node)){if(node.src){if(jQuery._evalUrl){jQuery._evalUrl(node.src);}}else{jQuery.globalEval(node.textContent.replace(rcleanScript,""));}}}}}}
return collection;}
function remove(elem,selector,keepData){var node,nodes=selector?jQuery.filter(selector,elem):elem,i=0;for(;(node=nodes[i])!=null;i++){if(!keepData&&node.nodeType===1){jQuery.cleanData(getAll(node));}
if(node.parentNode){if(keepData&&jQuery.contains(node.ownerDocument,node)){setGlobalEval(getAll(node,"script"));}
node.parentNode.removeChild(node);}}
return elem;}
jQuery.extend({htmlPrefilter:function(html){return html.replace(rxhtmlTag,"<$1></$2>");},clone:function(elem,dataAndEvents,deepDataAndEvents){var i,l,srcElements,destElements,clone=elem.cloneNode(true),inPage=jQuery.contains(elem.ownerDocument,elem);if(!support.noCloneChecked&&(elem.nodeType===1||elem.nodeType===11)&&!jQuery.isXMLDoc(elem)){destElements=getAll(clone);srcElements=getAll(elem);for(i=0,l=srcElements.length;i<l;i++){fixInput(srcElements[i],destElements[i]);}}
if(dataAndEvents){if(deepDataAndEvents){srcElements=srcElements||getAll(elem);destElements=destElements||getAll(clone);for(i=0,l=srcElements.length;i<l;i++){cloneCopyEvent(srcElements[i],destElements[i]);}}else{cloneCopyEvent(elem,clone);}}
destElements=getAll(clone,"script");if(destElements.length>0){setGlobalEval(destElements,!inPage&&getAll(elem,"script"));}
return clone;},cleanData:function(elems){var data,elem,type,special=jQuery.event.special,i=0;for(;(elem=elems[i])!==undefined;i++){if(acceptData(elem)){if((data=elem[dataPriv.expando])){if(data.events){for(type in data.events){if(special[type]){jQuery.event.remove(elem,type);}else{jQuery.removeEvent(elem,type,data.handle);}}}
elem[dataPriv.expando]=undefined;}
if(elem[dataUser.expando]){elem[dataUser.expando]=undefined;}}}}});jQuery.fn.extend({domManip:domManip,detach:function(selector){return remove(this,selector,true);},remove:function(selector){return remove(this,selector);},text:function(value){return access(this,function(value){return value===undefined?jQuery.text(this):this.empty().each(function(){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){this.textContent=value;}});},null,value,arguments.length);},append:function(){return domManip(this,arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var target=manipulationTarget(this,elem);target.appendChild(elem);}});},prepend:function(){return domManip(this,arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var target=manipulationTarget(this,elem);target.insertBefore(elem,target.firstChild);}});},before:function(){return domManip(this,arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this);}});},after:function(){return domManip(this,arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this.nextSibling);}});},empty:function(){var elem,i=0;for(;(elem=this[i])!=null;i++){if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));elem.textContent="";}}
return this;},clone:function(dataAndEvents,deepDataAndEvents){dataAndEvents=dataAndEvents==null?false:dataAndEvents;deepDataAndEvents=deepDataAndEvents==null?dataAndEvents:deepDataAndEvents;return this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents);});},html:function(value){return access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(value===undefined&&elem.nodeType===1){return elem.innerHTML;}
if(typeof value==="string"&&!rnoInnerhtml.test(value)&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=jQuery.htmlPrefilter(value);try{for(;i<l;i++){elem=this[i]||{};if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));elem.innerHTML=value;}}
elem=0;}catch(e){}}
if(elem){this.empty().append(value);}},null,value,arguments.length);},replaceWith:function(){var ignored=[];return domManip(this,arguments,function(elem){var parent=this.parentNode;if(jQuery.inArray(this,ignored)<0){jQuery.cleanData(getAll(this));if(parent){parent.replaceChild(elem,this);}}},ignored);}});jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var elems,ret=[],insert=jQuery(selector),last=insert.length-1,i=0;for(;i<=last;i++){elems=i===last?this:this.clone(true);jQuery(insert[i])[original](elems);push.apply(ret,elems.get());}
return this.pushStack(ret);};});var iframe,elemdisplay={HTML:"block",BODY:"block"};function actualDisplay(name,doc){var elem=jQuery(doc.createElement(name)).appendTo(doc.body),display=jQuery.css(elem[0],"display");elem.detach();return display;}
function defaultDisplay(nodeName){var doc=document,display=elemdisplay[nodeName];if(!display){display=actualDisplay(nodeName,doc);if(display==="none"||!display){iframe=(iframe||jQuery("<iframe frameborder='0' width='0' height='0'/>")).appendTo(doc.documentElement);doc=iframe[0].contentDocument;doc.write();doc.close();display=actualDisplay(nodeName,doc);iframe.detach();}
elemdisplay[nodeName]=display;}
return display;}
var rmargin=(/^margin/);var rnumnonpx=new RegExp("^("+pnum+")(?!px)[a-z%]+$","i");var getStyles=function(elem){var view=elem.ownerDocument.defaultView;if(!view||!view.opener){view=window;}
return view.getComputedStyle(elem);};var swap=function(elem,options,callback,args){var ret,name,old={};for(name in options){old[name]=elem.style[name];elem.style[name]=options[name];}
ret=callback.apply(elem,args||[]);for(name in options){elem.style[name]=old[name];}
return ret;};var documentElement=document.documentElement;(function(){var pixelPositionVal,boxSizingReliableVal,pixelMarginRightVal,reliableMarginLeftVal,container=document.createElement("div"),div=document.createElement("div");if(!div.style){return;}
div.style.backgroundClip="content-box";div.cloneNode(true).style.backgroundClip="";support.clearCloneStyle=div.style.backgroundClip==="content-box";container.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;"+"padding:0;margin-top:1px;position:absolute";container.appendChild(div);function computeStyleTests(){div.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;"+"position:relative;display:block;"+"margin:auto;border:1px;padding:1px;"+"top:1%;width:50%";div.innerHTML="";documentElement.appendChild(container);var divStyle=window.getComputedStyle(div);pixelPositionVal=divStyle.top!=="1%";reliableMarginLeftVal=divStyle.marginLeft==="2px";boxSizingReliableVal=divStyle.width==="4px";div.style.marginRight="50%";pixelMarginRightVal=divStyle.marginRight==="4px";documentElement.removeChild(container);}
jQuery.extend(support,{pixelPosition:function(){computeStyleTests();return pixelPositionVal;},boxSizingReliable:function(){if(boxSizingReliableVal==null){computeStyleTests();}
return boxSizingReliableVal;},pixelMarginRight:function(){if(boxSizingReliableVal==null){computeStyleTests();}
return pixelMarginRightVal;},reliableMarginLeft:function(){if(boxSizingReliableVal==null){computeStyleTests();}
return reliableMarginLeftVal;},reliableMarginRight:function(){var ret,marginDiv=div.appendChild(document.createElement("div"));marginDiv.style.cssText=div.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;"+"display:block;margin:0;border:0;padding:0";marginDiv.style.marginRight=marginDiv.style.width="0";div.style.width="1px";documentElement.appendChild(container);ret=!parseFloat(window.getComputedStyle(marginDiv).marginRight);documentElement.removeChild(container);div.removeChild(marginDiv);return ret;}});})();function curCSS(elem,name,computed){var width,minWidth,maxWidth,ret,style=elem.style;computed=computed||getStyles(elem);ret=computed?computed.getPropertyValue(name)||computed[name]:undefined;if((ret===""||ret===undefined)&&!jQuery.contains(elem.ownerDocument,elem)){ret=jQuery.style(elem,name);}
if(computed){if(!support.pixelMarginRight()&&rnumnonpx.test(ret)&&rmargin.test(name)){width=style.width;minWidth=style.minWidth;maxWidth=style.maxWidth;style.minWidth=style.maxWidth=style.width=ret;ret=computed.width;style.width=width;style.minWidth=minWidth;style.maxWidth=maxWidth;}}
return ret!==undefined?ret+"":ret;}
function addGetHookIf(conditionFn,hookFn){return{get:function(){if(conditionFn()){delete this.get;return;}
return(this.get=hookFn).apply(this,arguments);}};}
var
rdisplayswap=/^(none|table(?!-c[ea]).+)/,cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:"0",fontWeight:"400"},cssPrefixes=["Webkit","O","Moz","ms"],emptyStyle=document.createElement("div").style;function vendorPropName(name){if(name in emptyStyle){return name;}
var capName=name[0].toUpperCase()+name.slice(1),i=cssPrefixes.length;while(i--){name=cssPrefixes[i]+capName;if(name in emptyStyle){return name;}}}
function setPositiveNumber(elem,value,subtract){var matches=rcssNum.exec(value);return matches?Math.max(0,matches[2]-(subtract||0))+(matches[3]||"px"):value;}
function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){var i=extra===(isBorderBox?"border":"content")?4:name==="width"?1:0,val=0;for(;i<4;i+=2){if(extra==="margin"){val+=jQuery.css(elem,extra+cssExpand[i],true,styles);}
if(isBorderBox){if(extra==="content"){val-=jQuery.css(elem,"padding"+cssExpand[i],true,styles);}
if(extra!=="margin"){val-=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles);}}else{val+=jQuery.css(elem,"padding"+cssExpand[i],true,styles);if(extra!=="padding"){val+=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles);}}}
return val;}
function getWidthOrHeight(elem,name,extra){var valueIsBorderBox=true,val=name==="width"?elem.offsetWidth:elem.offsetHeight,styles=getStyles(elem),isBorderBox=jQuery.css(elem,"boxSizing",false,styles)==="border-box";if(document.msFullscreenElement&&window.top!==window){if(elem.getClientRects().length){val=Math.round(elem.getBoundingClientRect()[name]*100);}}
if(val<=0||val==null){val=curCSS(elem,name,styles);if(val<0||val==null){val=elem.style[name];}
if(rnumnonpx.test(val)){return val;}
valueIsBorderBox=isBorderBox&&(support.boxSizingReliable()||val===elem.style[name]);val=parseFloat(val)||0;}
return(val+
augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles))+"px";}
function showHide(elements,show){var display,elem,hidden,values=[],index=0,length=elements.length;for(;index<length;index++){elem=elements[index];if(!elem.style){continue;}
values[index]=dataPriv.get(elem,"olddisplay");display=elem.style.display;if(show){if(!values[index]&&display==="none"){elem.style.display="";}
if(elem.style.display===""&&isHidden(elem)){values[index]=dataPriv.access(elem,"olddisplay",defaultDisplay(elem.nodeName));}}else{hidden=isHidden(elem);if(display!=="none"||!hidden){dataPriv.set(elem,"olddisplay",hidden?display:jQuery.css(elem,"display"));}}}
for(index=0;index<length;index++){elem=elements[index];if(!elem.style){continue;}
if(!show||elem.style.display==="none"||elem.style.display===""){elem.style.display=show?values[index]||"":"none";}}
return elements;}
jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return ret===""?"1":ret;}}}},cssNumber:{"animationIterationCount":true,"columnCount":true,"fillOpacity":true,"flexGrow":true,"flexShrink":true,"fontWeight":true,"lineHeight":true,"opacity":true,"order":true,"orphans":true,"widows":true,"zIndex":true,"zoom":true},cssProps:{"float":"cssFloat"},style:function(elem,name,value,extra){if(!elem||elem.nodeType===3||elem.nodeType===8||!elem.style){return;}
var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(origName)||origName);hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(value!==undefined){type=typeof value;if(type==="string"&&(ret=rcssNum.exec(value))&&ret[1]){value=adjustCSS(elem,name,ret);type="number";}
if(value==null||value!==value){return;}
if(type==="number"){value+=ret&&ret[3]||(jQuery.cssNumber[origName]?"":"px");}
if(!support.clearCloneStyle&&value===""&&name.indexOf("background")===0){style[name]="inherit";}
if(!hooks||!("set"in hooks)||(value=hooks.set(elem,value,extra))!==undefined){style[name]=value;}}else{if(hooks&&"get"in hooks&&(ret=hooks.get(elem,false,extra))!==undefined){return ret;}
return style[name];}},css:function(elem,name,extra,styles){var val,num,hooks,origName=jQuery.camelCase(name);name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(origName)||origName);hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(hooks&&"get"in hooks){val=hooks.get(elem,true,extra);}
if(val===undefined){val=curCSS(elem,name,styles);}
if(val==="normal"&&name in cssNormalTransform){val=cssNormalTransform[name];}
if(extra===""||extra){num=parseFloat(val);return extra===true||isFinite(num)?num||0:val;}
return val;}});jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){if(computed){return rdisplayswap.test(jQuery.css(elem,"display"))&&elem.offsetWidth===0?swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra);}):getWidthOrHeight(elem,name,extra);}},set:function(elem,value,extra){var matches,styles=extra&&getStyles(elem),subtract=extra&&augmentWidthOrHeight(elem,name,extra,jQuery.css(elem,"boxSizing",false,styles)==="border-box",styles);if(subtract&&(matches=rcssNum.exec(value))&&(matches[3]||"px")!=="px"){elem.style[name]=value;value=jQuery.css(elem,name);}
return setPositiveNumber(elem,value,subtract);}};});jQuery.cssHooks.marginLeft=addGetHookIf(support.reliableMarginLeft,function(elem,computed){if(computed){return(parseFloat(curCSS(elem,"marginLeft"))||elem.getBoundingClientRect().left-
swap(elem,{marginLeft:0},function(){return elem.getBoundingClientRect().left;}))+"px";}});jQuery.cssHooks.marginRight=addGetHookIf(support.reliableMarginRight,function(elem,computed){if(computed){return swap(elem,{"display":"inline-block"},curCSS,[elem,"marginRight"]);}});jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){var i=0,expanded={},parts=typeof value==="string"?value.split(" "):[value];for(;i<4;i++){expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0];}
return expanded;}};if(!rmargin.test(prefix)){jQuery.cssHooks[prefix+suffix].set=setPositiveNumber;}});jQuery.fn.extend({css:function(name,value){return access(this,function(elem,name,value){var styles,len,map={},i=0;if(jQuery.isArray(name)){styles=getStyles(elem);len=name.length;for(;i<len;i++){map[name[i]]=jQuery.css(elem,name[i],false,styles);}
return map;}
return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name);},name,value,arguments.length>1);},show:function(){return showHide(this,true);},hide:function(){return showHide(this);},toggle:function(state){if(typeof state==="boolean"){return state?this.show():this.hide();}
return this.each(function(){if(isHidden(this)){jQuery(this).show();}else{jQuery(this).hide();}});}});function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing);}
jQuery.Tween=Tween;Tween.prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem;this.prop=prop;this.easing=easing||jQuery.easing._default;this.options=options;this.start=this.now=this.cur();this.end=end;this.unit=unit||(jQuery.cssNumber[prop]?"":"px");},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this);},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];if(this.options.duration){this.pos=eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration);}else{this.pos=eased=percent;}
this.now=(this.end-this.start)*eased+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this);}
if(hooks&&hooks.set){hooks.set(this);}else{Tween.propHooks._default.set(this);}
return this;}};Tween.prototype.init.prototype=Tween.prototype;Tween.propHooks={_default:{get:function(tween){var result;if(tween.elem.nodeType!==1||tween.elem[tween.prop]!=null&&tween.elem.style[tween.prop]==null){return tween.elem[tween.prop];}
result=jQuery.css(tween.elem,tween.prop,"");return!result||result==="auto"?0:result;},set:function(tween){if(jQuery.fx.step[tween.prop]){jQuery.fx.step[tween.prop](tween);}else if(tween.elem.nodeType===1&&(tween.elem.style[jQuery.cssProps[tween.prop]]!=null||jQuery.cssHooks[tween.prop])){jQuery.style(tween.elem,tween.prop,tween.now+tween.unit);}else{tween.elem[tween.prop]=tween.now;}}}};Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){if(tween.elem.nodeType&&tween.elem.parentNode){tween.elem[tween.prop]=tween.now;}}};jQuery.easing={linear:function(p){return p;},swing:function(p){return 0.5-Math.cos(p*Math.PI)/ 2;},_default:"swing"};jQuery.fx=Tween.prototype.init;jQuery.fx.step={};var
fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rrun=/queueHooks$/;function createFxNow(){window.setTimeout(function(){fxNow=undefined;});return(fxNow=jQuery.now());}
function genFx(type,includeWidth){var which,i=0,attrs={height:type};includeWidth=includeWidth?1:0;for(;i<4;i+=2-includeWidth){which=cssExpand[i];attrs["margin"+which]=attrs["padding"+which]=type;}
if(includeWidth){attrs.opacity=attrs.width=type;}
return attrs;}
function createTween(value,prop,animation){var tween,collection=(Animation.tweeners[prop]||[]).concat(Animation.tweeners["*"]),index=0,length=collection.length;for(;index<length;index++){if((tween=collection[index].call(animation,prop,value))){return tween;}}}
function defaultPrefilter(elem,props,opts){var prop,value,toggle,tween,hooks,oldfire,display,checkDisplay,anim=this,orig={},style=elem.style,hidden=elem.nodeType&&isHidden(elem),dataShow=dataPriv.get(elem,"fxshow");if(!opts.queue){hooks=jQuery._queueHooks(elem,"fx");if(hooks.unqueued==null){hooks.unqueued=0;oldfire=hooks.empty.fire;hooks.empty.fire=function(){if(!hooks.unqueued){oldfire();}};}
hooks.unqueued++;anim.always(function(){anim.always(function(){hooks.unqueued--;if(!jQuery.queue(elem,"fx").length){hooks.empty.fire();}});});}
if(elem.nodeType===1&&("height"in props||"width"in props)){opts.overflow=[style.overflow,style.overflowX,style.overflowY];display=jQuery.css(elem,"display");checkDisplay=display==="none"?dataPriv.get(elem,"olddisplay")||defaultDisplay(elem.nodeName):display;if(checkDisplay==="inline"&&jQuery.css(elem,"float")==="none"){style.display="inline-block";}}
if(opts.overflow){style.overflow="hidden";anim.always(function(){style.overflow=opts.overflow[0];style.overflowX=opts.overflow[1];style.overflowY=opts.overflow[2];});}
for(prop in props){value=props[prop];if(rfxtypes.exec(value)){delete props[prop];toggle=toggle||value==="toggle";if(value===(hidden?"hide":"show")){if(value==="show"&&dataShow&&dataShow[prop]!==undefined){hidden=true;}else{continue;}}
orig[prop]=dataShow&&dataShow[prop]||jQuery.style(elem,prop);}else{display=undefined;}}
if(!jQuery.isEmptyObject(orig)){if(dataShow){if("hidden"in dataShow){hidden=dataShow.hidden;}}else{dataShow=dataPriv.access(elem,"fxshow",{});}
if(toggle){dataShow.hidden=!hidden;}
if(hidden){jQuery(elem).show();}else{anim.done(function(){jQuery(elem).hide();});}
anim.done(function(){var prop;dataPriv.remove(elem,"fxshow");for(prop in orig){jQuery.style(elem,prop,orig[prop]);}});for(prop in orig){tween=createTween(hidden?dataShow[prop]:0,prop,anim);if(!(prop in dataShow)){dataShow[prop]=tween.start;if(hidden){tween.end=tween.start;tween.start=prop==="width"||prop==="height"?1:0;}}}}else if((display==="none"?defaultDisplay(elem.nodeName):display)==="inline"){style.display=display;}}
function propFilter(props,specialEasing){var index,name,easing,value,hooks;for(index in props){name=jQuery.camelCase(index);easing=specialEasing[name];value=props[index];if(jQuery.isArray(value)){easing=value[1];value=props[index]=value[0];}
if(index!==name){props[name]=value;delete props[index];}
hooks=jQuery.cssHooks[name];if(hooks&&"expand"in hooks){value=hooks.expand(value);delete props[name];for(index in value){if(!(index in props)){props[index]=value[index];specialEasing[index]=easing;}}}else{specialEasing[name]=easing;}}}
function Animation(elem,properties,options){var result,stopped,index=0,length=Animation.prefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem;}),tick=function(){if(stopped){return false;}
var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),temp=remaining / animation.duration||0,percent=1-temp,index=0,length=animation.tweens.length;for(;index<length;index++){animation.tweens[index].run(percent);}
deferred.notifyWith(elem,[animation,percent,remaining]);if(percent<1&&length){return remaining;}else{deferred.resolveWith(elem,[animation]);return false;}},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(true,{specialEasing:{},easing:jQuery.easing._default},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);animation.tweens.push(tween);return tween;},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;if(stopped){return this;}
stopped=true;for(;index<length;index++){animation.tweens[index].run(1);}
if(gotoEnd){deferred.notifyWith(elem,[animation,1,0]);deferred.resolveWith(elem,[animation,gotoEnd]);}else{deferred.rejectWith(elem,[animation,gotoEnd]);}
return this;}}),props=animation.props;propFilter(props,animation.opts.specialEasing);for(;index<length;index++){result=Animation.prefilters[index].call(animation,elem,props,animation.opts);if(result){if(jQuery.isFunction(result.stop)){jQuery._queueHooks(animation.elem,animation.opts.queue).stop=jQuery.proxy(result.stop,result);}
return result;}}
jQuery.map(props,createTween,animation);if(jQuery.isFunction(animation.opts.start)){animation.opts.start.call(elem,animation);}
jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue}));return animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always);}
jQuery.Animation=jQuery.extend(Animation,{tweeners:{"*":[function(prop,value){var tween=this.createTween(prop,value);adjustCSS(tween.elem,prop,rcssNum.exec(value),tween);return tween;}]},tweener:function(props,callback){if(jQuery.isFunction(props)){callback=props;props=["*"];}else{props=props.match(rnotwhite);}
var prop,index=0,length=props.length;for(;index<length;index++){prop=props[index];Animation.tweeners[prop]=Animation.tweeners[prop]||[];Animation.tweeners[prop].unshift(callback);}},prefilters:[defaultPrefilter],prefilter:function(callback,prepend){if(prepend){Animation.prefilters.unshift(callback);}else{Animation.prefilters.push(callback);}}});jQuery.speed=function(speed,easing,fn){var opt=speed&&typeof speed==="object"?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};opt.duration=jQuery.fx.off?0:typeof opt.duration==="number"?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default;if(opt.queue==null||opt.queue===true){opt.queue="fx";}
opt.old=opt.complete;opt.complete=function(){if(jQuery.isFunction(opt.old)){opt.old.call(this);}
if(opt.queue){jQuery.dequeue(this,opt.queue);}};return opt;};jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback);},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);if(empty||dataPriv.get(this,"finish")){anim.stop(true);}};doAnimation.finish=doAnimation;return empty||optall.queue===false?this.each(doAnimation):this.queue(optall.queue,doAnimation);},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop;stop(gotoEnd);};if(typeof type!=="string"){gotoEnd=clearQueue;clearQueue=type;type=undefined;}
if(clearQueue&&type!==false){this.queue(type||"fx",[]);}
return this.each(function(){var dequeue=true,index=type!=null&&type+"queueHooks",timers=jQuery.timers,data=dataPriv.get(this);if(index){if(data[index]&&data[index].stop){stopQueue(data[index]);}}else{for(index in data){if(data[index]&&data[index].stop&&rrun.test(index)){stopQueue(data[index]);}}}
for(index=timers.length;index--;){if(timers[index].elem===this&&(type==null||timers[index].queue===type)){timers[index].anim.stop(gotoEnd);dequeue=false;timers.splice(index,1);}}
if(dequeue||!gotoEnd){jQuery.dequeue(this,type);}});},finish:function(type){if(type!==false){type=type||"fx";}
return this.each(function(){var index,data=dataPriv.get(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:0;data.finish=true;jQuery.queue(this,type,[]);if(hooks&&hooks.stop){hooks.stop.call(this,true);}
for(index=timers.length;index--;){if(timers[index].elem===this&&timers[index].queue===type){timers[index].anim.stop(true);timers.splice(index,1);}}
for(index=0;index<length;index++){if(queue[index]&&queue[index].finish){queue[index].finish.call(this);}}
delete data.finish;});}});jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return speed==null||typeof speed==="boolean"?cssFn.apply(this,arguments):this.animate(genFx(name,true),speed,easing,callback);};});jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback);};});jQuery.timers=[];jQuery.fx.tick=function(){var timer,i=0,timers=jQuery.timers;fxNow=jQuery.now();for(;i<timers.length;i++){timer=timers[i];if(!timer()&&timers[i]===timer){timers.splice(i--,1);}}
if(!timers.length){jQuery.fx.stop();}
fxNow=undefined;};jQuery.fx.timer=function(timer){jQuery.timers.push(timer);if(timer()){jQuery.fx.start();}else{jQuery.timers.pop();}};jQuery.fx.interval=13;jQuery.fx.start=function(){if(!timerId){timerId=window.setInterval(jQuery.fx.tick,jQuery.fx.interval);}};jQuery.fx.stop=function(){window.clearInterval(timerId);timerId=null;};jQuery.fx.speeds={slow:600,fast:200,_default:400};jQuery.fn.delay=function(time,type){time=jQuery.fx?jQuery.fx.speeds[time]||time:time;type=type||"fx";return this.queue(type,function(next,hooks){var timeout=window.setTimeout(next,time);hooks.stop=function(){window.clearTimeout(timeout);};});};(function(){var input=document.createElement("input"),select=document.createElement("select"),opt=select.appendChild(document.createElement("option"));input.type="checkbox";support.checkOn=input.value!=="";support.optSelected=opt.selected;select.disabled=true;support.optDisabled=!opt.disabled;input=document.createElement("input");input.value="t";input.type="radio";support.radioValue=input.value==="t";})();var boolHook,attrHandle=jQuery.expr.attrHandle;jQuery.fn.extend({attr:function(name,value){return access(this,jQuery.attr,name,value,arguments.length>1);},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name);});}});jQuery.extend({attr:function(elem,name,value){var ret,hooks,nType=elem.nodeType;if(nType===3||nType===8||nType===2){return;}
if(typeof elem.getAttribute==="undefined"){return jQuery.prop(elem,name,value);}
if(nType!==1||!jQuery.isXMLDoc(elem)){name=name.toLowerCase();hooks=jQuery.attrHooks[name]||(jQuery.expr.match.bool.test(name)?boolHook:undefined);}
if(value!==undefined){if(value===null){jQuery.removeAttr(elem,name);return;}
if(hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined){return ret;}
elem.setAttribute(name,value+"");return value;}
if(hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null){return ret;}
ret=jQuery.find.attr(elem,name);return ret==null?undefined:ret;},attrHooks:{type:{set:function(elem,value){if(!support.radioValue&&value==="radio"&&jQuery.nodeName(elem,"input")){var val=elem.value;elem.setAttribute("type",value);if(val){elem.value=val;}
return value;}}}},removeAttr:function(elem,value){var name,propName,i=0,attrNames=value&&value.match(rnotwhite);if(attrNames&&elem.nodeType===1){while((name=attrNames[i++])){propName=jQuery.propFix[name]||name;if(jQuery.expr.match.bool.test(name)){elem[propName]=false;}
elem.removeAttribute(name);}}}});boolHook={set:function(elem,value,name){if(value===false){jQuery.removeAttr(elem,name);}else{elem.setAttribute(name,name);}
return name;}};jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(i,name){var getter=attrHandle[name]||jQuery.find.attr;attrHandle[name]=function(elem,name,isXML){var ret,handle;if(!isXML){handle=attrHandle[name];attrHandle[name]=ret;ret=getter(elem,name,isXML)!=null?name.toLowerCase():null;attrHandle[name]=handle;}
return ret;};});var rfocusable=/^(?:input|select|textarea|button)$/i,rclickable=/^(?:a|area)$/i;jQuery.fn.extend({prop:function(name,value){return access(this,jQuery.prop,name,value,arguments.length>1);},removeProp:function(name){return this.each(function(){delete this[jQuery.propFix[name]||name];});}});jQuery.extend({prop:function(elem,name,value){var ret,hooks,nType=elem.nodeType;if(nType===3||nType===8||nType===2){return;}
if(nType!==1||!jQuery.isXMLDoc(elem)){name=jQuery.propFix[name]||name;hooks=jQuery.propHooks[name];}
if(value!==undefined){if(hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined){return ret;}
return(elem[name]=value);}
if(hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null){return ret;}
return elem[name];},propHooks:{tabIndex:{get:function(elem){var tabindex=jQuery.find.attr(elem,"tabindex");return tabindex?parseInt(tabindex,10):rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:-1;}}},propFix:{"for":"htmlFor","class":"className"}});if(!support.optSelected){jQuery.propHooks.selected={get:function(elem){var parent=elem.parentNode;if(parent&&parent.parentNode){parent.parentNode.selectedIndex;}
return null;},set:function(elem){var parent=elem.parentNode;if(parent){parent.selectedIndex;if(parent.parentNode){parent.parentNode.selectedIndex;}}}};}
jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this;});var rclass=/[\t\r\n\f]/g;function getClass(elem){return elem.getAttribute&&elem.getAttribute("class")||"";}
jQuery.fn.extend({addClass:function(value){var classes,elem,cur,curValue,clazz,j,finalValue,i=0;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).addClass(value.call(this,j,getClass(this)));});}
if(typeof value==="string"&&value){classes=value.match(rnotwhite)||[];while((elem=this[i++])){curValue=getClass(elem);cur=elem.nodeType===1&&(" "+curValue+" ").replace(rclass," ");if(cur){j=0;while((clazz=classes[j++])){if(cur.indexOf(" "+clazz+" ")<0){cur+=clazz+" ";}}
finalValue=jQuery.trim(cur);if(curValue!==finalValue){elem.setAttribute("class",finalValue);}}}}
return this;},removeClass:function(value){var classes,elem,cur,curValue,clazz,j,finalValue,i=0;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).removeClass(value.call(this,j,getClass(this)));});}
if(!arguments.length){return this.attr("class","");}
if(typeof value==="string"&&value){classes=value.match(rnotwhite)||[];while((elem=this[i++])){curValue=getClass(elem);cur=elem.nodeType===1&&(" "+curValue+" ").replace(rclass," ");if(cur){j=0;while((clazz=classes[j++])){while(cur.indexOf(" "+clazz+" ")>-1){cur=cur.replace(" "+clazz+" "," ");}}
finalValue=jQuery.trim(cur);if(curValue!==finalValue){elem.setAttribute("class",finalValue);}}}}
return this;},toggleClass:function(value,stateVal){var type=typeof value;if(typeof stateVal==="boolean"&&type==="string"){return stateVal?this.addClass(value):this.removeClass(value);}
if(jQuery.isFunction(value)){return this.each(function(i){jQuery(this).toggleClass(value.call(this,i,getClass(this),stateVal),stateVal);});}
return this.each(function(){var className,i,self,classNames;if(type==="string"){i=0;self=jQuery(this);classNames=value.match(rnotwhite)||[];while((className=classNames[i++])){if(self.hasClass(className)){self.removeClass(className);}else{self.addClass(className);}}}else if(value===undefined||type==="boolean"){className=getClass(this);if(className){dataPriv.set(this,"__className__",className);}
if(this.setAttribute){this.setAttribute("class",className||value===false?"":dataPriv.get(this,"__className__")||"");}}});},hasClass:function(selector){var className,elem,i=0;className=" "+selector+" ";while((elem=this[i++])){if(elem.nodeType===1&&(" "+getClass(elem)+" ").replace(rclass," ").indexOf(className)>-1){return true;}}
return false;}});var rreturn=/\r/g,rspaces=/[\x20\t\r\n\f]+/g;jQuery.fn.extend({val:function(value){var hooks,ret,isFunction,elem=this[0];if(!arguments.length){if(elem){hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()];if(hooks&&"get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined){return ret;}
ret=elem.value;return typeof ret==="string"?ret.replace(rreturn,""):ret==null?"":ret;}
return;}
isFunction=jQuery.isFunction(value);return this.each(function(i){var val;if(this.nodeType!==1){return;}
if(isFunction){val=value.call(this,i,jQuery(this).val());}else{val=value;}
if(val==null){val="";}else if(typeof val==="number"){val+="";}else if(jQuery.isArray(val)){val=jQuery.map(val,function(value){return value==null?"":value+"";});}
hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];if(!hooks||!("set"in hooks)||hooks.set(this,val,"value")===undefined){this.value=val;}});}});jQuery.extend({valHooks:{option:{get:function(elem){var val=jQuery.find.attr(elem,"value");return val!=null?val:jQuery.trim(jQuery.text(elem)).replace(rspaces," ");}},select:{get:function(elem){var value,option,options=elem.options,index=elem.selectedIndex,one=elem.type==="select-one"||index<0,values=one?null:[],max=one?index+1:options.length,i=index<0?max:one?index:0;for(;i<max;i++){option=options[i];if((option.selected||i===index)&&(support.optDisabled?!option.disabled:option.getAttribute("disabled")===null)&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){value=jQuery(option).val();if(one){return value;}
values.push(value);}}
return values;},set:function(elem,value){var optionSet,option,options=elem.options,values=jQuery.makeArray(value),i=options.length;while(i--){option=options[i];if(option.selected=jQuery.inArray(jQuery.valHooks.option.get(option),values)>-1){optionSet=true;}}
if(!optionSet){elem.selectedIndex=-1;}
return values;}}}});jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function(elem,value){if(jQuery.isArray(value)){return(elem.checked=jQuery.inArray(jQuery(elem).val(),value)>-1);}}};if(!support.checkOn){jQuery.valHooks[this].get=function(elem){return elem.getAttribute("value")===null?"on":elem.value;};}});var rfocusMorph=/^(?:focusinfocus|focusoutblur)$/;jQuery.extend(jQuery.event,{trigger:function(event,data,elem,onlyHandlers){var i,cur,tmp,bubbleType,ontype,handle,special,eventPath=[elem||document],type=hasOwn.call(event,"type")?event.type:event,namespaces=hasOwn.call(event,"namespace")?event.namespace.split("."):[];cur=tmp=elem=elem||document;if(elem.nodeType===3||elem.nodeType===8){return;}
if(rfocusMorph.test(type+jQuery.event.triggered)){return;}
if(type.indexOf(".")>-1){namespaces=type.split(".");type=namespaces.shift();namespaces.sort();}
ontype=type.indexOf(":")<0&&"on"+type;event=event[jQuery.expando]?event:new jQuery.Event(type,typeof event==="object"&&event);event.isTrigger=onlyHandlers?2:3;event.namespace=namespaces.join(".");event.rnamespace=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;event.result=undefined;if(!event.target){event.target=elem;}
data=data==null?[event]:jQuery.makeArray(data,[event]);special=jQuery.event.special[type]||{};if(!onlyHandlers&&special.trigger&&special.trigger.apply(elem,data)===false){return;}
if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){bubbleType=special.delegateType||type;if(!rfocusMorph.test(bubbleType+type)){cur=cur.parentNode;}
for(;cur;cur=cur.parentNode){eventPath.push(cur);tmp=cur;}
if(tmp===(elem.ownerDocument||document)){eventPath.push(tmp.defaultView||tmp.parentWindow||window);}}
i=0;while((cur=eventPath[i++])&&!event.isPropagationStopped()){event.type=i>1?bubbleType:special.bindType||type;handle=(dataPriv.get(cur,"events")||{})[event.type]&&dataPriv.get(cur,"handle");if(handle){handle.apply(cur,data);}
handle=ontype&&cur[ontype];if(handle&&handle.apply&&acceptData(cur)){event.result=handle.apply(cur,data);if(event.result===false){event.preventDefault();}}}
event.type=type;if(!onlyHandlers&&!event.isDefaultPrevented()){if((!special._default||special._default.apply(eventPath.pop(),data)===false)&&acceptData(elem)){if(ontype&&jQuery.isFunction(elem[type])&&!jQuery.isWindow(elem)){tmp=elem[ontype];if(tmp){elem[ontype]=null;}
jQuery.event.triggered=type;elem[type]();jQuery.event.triggered=undefined;if(tmp){elem[ontype]=tmp;}}}}
return event.result;},simulate:function(type,elem,event){var e=jQuery.extend(new jQuery.Event(),event,{type:type,isSimulated:true});jQuery.event.trigger(e,null,elem);if(e.isDefaultPrevented()){event.preventDefault();}}});jQuery.fn.extend({trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this);});},triggerHandler:function(type,data){var elem=this[0];if(elem){return jQuery.event.trigger(type,data,elem,true);}}});jQuery.each(("blur focus focusin focusout load resize scroll unload click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup error contextmenu").split(" "),function(i,name){jQuery.fn[name]=function(data,fn){return arguments.length>0?this.on(name,null,data,fn):this.trigger(name);};});jQuery.fn.extend({hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver);}});support.focusin="onfocusin"in window;if(!support.focusin){jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event));};jQuery.event.special[fix]={setup:function(){var doc=this.ownerDocument||this,attaches=dataPriv.access(doc,fix);if(!attaches){doc.addEventListener(orig,handler,true);}
dataPriv.access(doc,fix,(attaches||0)+1);},teardown:function(){var doc=this.ownerDocument||this,attaches=dataPriv.access(doc,fix)-1;if(!attaches){doc.removeEventListener(orig,handler,true);dataPriv.remove(doc,fix);}else{dataPriv.access(doc,fix,attaches);}}};});}
var location=window.location;var nonce=jQuery.now();var rquery=(/\?/);jQuery.parseJSON=function(data){return JSON.parse(data+"");};jQuery.parseXML=function(data){var xml;if(!data||typeof data!=="string"){return null;}
try{xml=(new window.DOMParser()).parseFromString(data,"text/xml");}catch(e){xml=undefined;}
if(!xml||xml.getElementsByTagName("parsererror").length){jQuery.error("Invalid XML: "+data);}
return xml;};var
rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)$/mg,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,prefilters={},transports={},allTypes="*/".concat("*"),originAnchor=document.createElement("a");originAnchor.href=location.href;function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){if(typeof dataTypeExpression!=="string"){func=dataTypeExpression;dataTypeExpression="*";}
var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(rnotwhite)||[];if(jQuery.isFunction(func)){while((dataType=dataTypes[i++])){if(dataType[0]==="+"){dataType=dataType.slice(1)||"*";(structure[dataType]=structure[dataType]||[]).unshift(func);}else{(structure[dataType]=structure[dataType]||[]).push(func);}}}};}
function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){var inspected={},seekingTransport=(structure===transports);function inspect(dataType){var selected;inspected[dataType]=true;jQuery.each(structure[dataType]||[],function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);if(typeof dataTypeOrTransport==="string"&&!seekingTransport&&!inspected[dataTypeOrTransport]){options.dataTypes.unshift(dataTypeOrTransport);inspect(dataTypeOrTransport);return false;}else if(seekingTransport){return!(selected=dataTypeOrTransport);}});return selected;}
return inspect(options.dataTypes[0])||!inspected["*"]&&inspect("*");}
function ajaxExtend(target,src){var key,deep,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src){if(src[key]!==undefined){(flatOptions[key]?target:(deep||(deep={})))[key]=src[key];}}
if(deep){jQuery.extend(true,target,deep);}
return target;}
function ajaxHandleResponses(s,jqXHR,responses){var ct,type,finalDataType,firstDataType,contents=s.contents,dataTypes=s.dataTypes;while(dataTypes[0]==="*"){dataTypes.shift();if(ct===undefined){ct=s.mimeType||jqXHR.getResponseHeader("Content-Type");}}
if(ct){for(type in contents){if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break;}}}
if(dataTypes[0]in responses){finalDataType=dataTypes[0];}else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break;}
if(!firstDataType){firstDataType=type;}}
finalDataType=finalDataType||firstDataType;}
if(finalDataType){if(finalDataType!==dataTypes[0]){dataTypes.unshift(finalDataType);}
return responses[finalDataType];}}
function ajaxConvert(s,response,jqXHR,isSuccess){var conv2,current,conv,tmp,prev,converters={},dataTypes=s.dataTypes.slice();if(dataTypes[1]){for(conv in s.converters){converters[conv.toLowerCase()]=s.converters[conv];}}
current=dataTypes.shift();while(current){if(s.responseFields[current]){jqXHR[s.responseFields[current]]=response;}
if(!prev&&isSuccess&&s.dataFilter){response=s.dataFilter(response,s.dataType);}
prev=current;current=dataTypes.shift();if(current){if(current==="*"){current=prev;}else if(prev!=="*"&&prev!==current){conv=converters[prev+" "+current]||converters["* "+current];if(!conv){for(conv2 in converters){tmp=conv2.split(" ");if(tmp[1]===current){conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]];if(conv){if(conv===true){conv=converters[conv2];}else if(converters[conv2]!==true){current=tmp[0];dataTypes.unshift(tmp[1]);}
break;}}}}
if(conv!==true){if(conv&&s.throws){response=conv(response);}else{try{response=conv(response);}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current};}}}}}}
return{state:"success",data:response};}
jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:location.href,type:"GET",isLocal:rlocalProtocol.test(location.protocol),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(target,settings){return settings?ajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target);},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){if(typeof url==="object"){options=url;url=undefined;}
options=options||{};var transport,cacheURL,responseHeadersString,responseHeaders,timeoutTimer,urlAnchor,fireGlobals,i,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function(key){var match;if(state===2){if(!responseHeaders){responseHeaders={};while((match=rheaders.exec(responseHeadersString))){responseHeaders[match[1].toLowerCase()]=match[2];}}
match=responseHeaders[key.toLowerCase()];}
return match==null?null:match;},getAllResponseHeaders:function(){return state===2?responseHeadersString:null;},setRequestHeader:function(name,value){var lname=name.toLowerCase();if(!state){name=requestHeadersNames[lname]=requestHeadersNames[lname]||name;requestHeaders[name]=value;}
return this;},overrideMimeType:function(type){if(!state){s.mimeType=type;}
return this;},statusCode:function(map){var code;if(map){if(state<2){for(code in map){statusCode[code]=[statusCode[code],map[code]];}}else{jqXHR.always(map[jqXHR.status]);}}
return this;},abort:function(statusText){var finalText=statusText||strAbort;if(transport){transport.abort(finalText);}
done(0,finalText);return this;}};deferred.promise(jqXHR).complete=completeDeferred.add;jqXHR.success=jqXHR.done;jqXHR.error=jqXHR.fail;s.url=((url||s.url||location.href)+"").replace(rhash,"").replace(rprotocol,location.protocol+"//");s.type=options.method||options.type||s.method||s.type;s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().match(rnotwhite)||[""];if(s.crossDomain==null){urlAnchor=document.createElement("a");try{urlAnchor.href=s.url;urlAnchor.href=urlAnchor.href;s.crossDomain=originAnchor.protocol+"//"+originAnchor.host!==urlAnchor.protocol+"//"+urlAnchor.host;}catch(e){s.crossDomain=true;}}
if(s.data&&s.processData&&typeof s.data!=="string"){s.data=jQuery.param(s.data,s.traditional);}
inspectPrefiltersOrTransports(prefilters,s,options,jqXHR);if(state===2){return jqXHR;}
fireGlobals=jQuery.event&&s.global;if(fireGlobals&&jQuery.active++===0){jQuery.event.trigger("ajaxStart");}
s.type=s.type.toUpperCase();s.hasContent=!rnoContent.test(s.type);cacheURL=s.url;if(!s.hasContent){if(s.data){cacheURL=(s.url+=(rquery.test(cacheURL)?"&":"?")+s.data);delete s.data;}
if(s.cache===false){s.url=rts.test(cacheURL)?cacheURL.replace(rts,"$1_="+nonce++):cacheURL+(rquery.test(cacheURL)?"&":"?")+"_="+nonce++;}}
if(s.ifModified){if(jQuery.lastModified[cacheURL]){jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL]);}
if(jQuery.etag[cacheURL]){jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL]);}}
if(s.data&&s.hasContent&&s.contentType!==false||options.contentType){jqXHR.setRequestHeader("Content-Type",s.contentType);}
jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+
(s.dataTypes[0]!=="*"?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers){jqXHR.setRequestHeader(i,s.headers[i]);}
if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===false||state===2)){return jqXHR.abort();}
strAbort="abort";for(i in{success:1,error:1,complete:1}){jqXHR[i](s[i]);}
transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR);if(!transport){done(-1,"No Transport");}else{jqXHR.readyState=1;if(fireGlobals){globalEventContext.trigger("ajaxSend",[jqXHR,s]);}
if(state===2){return jqXHR;}
if(s.async&&s.timeout>0){timeoutTimer=window.setTimeout(function(){jqXHR.abort("timeout");},s.timeout);}
try{state=1;transport.send(requestHeaders,done);}catch(e){if(state<2){done(-1,e);}else{throw e;}}}
function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;if(state===2){return;}
state=2;if(timeoutTimer){window.clearTimeout(timeoutTimer);}
transport=undefined;responseHeadersString=headers||"";jqXHR.readyState=status>0?4:0;isSuccess=status>=200&&status<300||status===304;if(responses){response=ajaxHandleResponses(s,jqXHR,responses);}
response=ajaxConvert(s,response,jqXHR,isSuccess);if(isSuccess){if(s.ifModified){modified=jqXHR.getResponseHeader("Last-Modified");if(modified){jQuery.lastModified[cacheURL]=modified;}
modified=jqXHR.getResponseHeader("etag");if(modified){jQuery.etag[cacheURL]=modified;}}
if(status===204||s.type==="HEAD"){statusText="nocontent";}else if(status===304){statusText="notmodified";}else{statusText=response.state;success=response.data;error=response.error;isSuccess=!error;}}else{error=statusText;if(status||!statusText){statusText="error";if(status<0){status=0;}}}
jqXHR.status=status;jqXHR.statusText=(nativeStatusText||statusText)+"";if(isSuccess){deferred.resolveWith(callbackContext,[success,statusText,jqXHR]);}else{deferred.rejectWith(callbackContext,[jqXHR,statusText,error]);}
jqXHR.statusCode(statusCode);statusCode=undefined;if(fireGlobals){globalEventContext.trigger(isSuccess?"ajaxSuccess":"ajaxError",[jqXHR,s,isSuccess?success:error]);}
completeDeferred.fireWith(callbackContext,[jqXHR,statusText]);if(fireGlobals){globalEventContext.trigger("ajaxComplete",[jqXHR,s]);if(!(--jQuery.active)){jQuery.event.trigger("ajaxStop");}}}
return jqXHR;},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json");},getScript:function(url,callback){return jQuery.get(url,undefined,callback,"script");}});jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){if(jQuery.isFunction(data)){type=type||callback;callback=data;data=undefined;}
return jQuery.ajax(jQuery.extend({url:url,type:method,dataType:type,data:data,success:callback},jQuery.isPlainObject(url)&&url));};});jQuery._evalUrl=function(url){return jQuery.ajax({url:url,type:"GET",dataType:"script",async:false,global:false,"throws":true});};jQuery.fn.extend({wrapAll:function(html){var wrap;if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapAll(html.call(this,i));});}
if(this[0]){wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){wrap.insertBefore(this[0]);}
wrap.map(function(){var elem=this;while(elem.firstElementChild){elem=elem.firstElementChild;}
return elem;}).append(this);}
return this;},wrapInner:function(html){if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapInner(html.call(this,i));});}
return this.each(function(){var self=jQuery(this),contents=self.contents();if(contents.length){contents.wrapAll(html);}else{self.append(html);}});},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html);});},unwrap:function(){return this.parent().each(function(){if(!jQuery.nodeName(this,"body")){jQuery(this).replaceWith(this.childNodes);}}).end();}});jQuery.expr.filters.hidden=function(elem){return!jQuery.expr.filters.visible(elem);};jQuery.expr.filters.visible=function(elem){return elem.offsetWidth>0||elem.offsetHeight>0||elem.getClientRects().length>0;};var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj)){jQuery.each(obj,function(i,v){if(traditional||rbracket.test(prefix)){add(prefix,v);}else{buildParams(prefix+"["+(typeof v==="object"&&v!=null?i:"")+"]",v,traditional,add);}});}else if(!traditional&&jQuery.type(obj)==="object"){for(name in obj){buildParams(prefix+"["+name+"]",obj[name],traditional,add);}}else{add(prefix,obj);}}
jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,value){value=jQuery.isFunction(value)?value():(value==null?"":value);s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value);};if(traditional===undefined){traditional=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional;}
if(jQuery.isArray(a)||(a.jquery&&!jQuery.isPlainObject(a))){jQuery.each(a,function(){add(this.name,this.value);});}else{for(prefix in a){buildParams(prefix,a[prefix],traditional,add);}}
return s.join("&").replace(r20,"+");};jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray());},serializeArray:function(){return this.map(function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this;}).filter(function(){var type=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!rcheckableType.test(type));}).map(function(i,elem){var val=jQuery(this).val();return val==null?null:jQuery.isArray(val)?jQuery.map(val,function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")};}):{name:elem.name,value:val.replace(rCRLF,"\r\n")};}).get();}});jQuery.ajaxSettings.xhr=function(){try{return new window.XMLHttpRequest();}catch(e){}};var xhrSuccessStatus={0:200,1223:204},xhrSupported=jQuery.ajaxSettings.xhr();support.cors=!!xhrSupported&&("withCredentials"in xhrSupported);support.ajax=xhrSupported=!!xhrSupported;jQuery.ajaxTransport(function(options){var callback,errorCallback;if(support.cors||xhrSupported&&!options.crossDomain){return{send:function(headers,complete){var i,xhr=options.xhr();xhr.open(options.type,options.url,options.async,options.username,options.password);if(options.xhrFields){for(i in options.xhrFields){xhr[i]=options.xhrFields[i];}}
if(options.mimeType&&xhr.overrideMimeType){xhr.overrideMimeType(options.mimeType);}
if(!options.crossDomain&&!headers["X-Requested-With"]){headers["X-Requested-With"]="XMLHttpRequest";}
for(i in headers){xhr.setRequestHeader(i,headers[i]);}
callback=function(type){return function(){if(callback){callback=errorCallback=xhr.onload=xhr.onerror=xhr.onabort=xhr.onreadystatechange=null;if(type==="abort"){xhr.abort();}else if(type==="error"){if(typeof xhr.status!=="number"){complete(0,"error");}else{complete(xhr.status,xhr.statusText);}}else{complete(xhrSuccessStatus[xhr.status]||xhr.status,xhr.statusText,(xhr.responseType||"text")!=="text"||typeof xhr.responseText!=="string"?{binary:xhr.response}:{text:xhr.responseText},xhr.getAllResponseHeaders());}}};};xhr.onload=callback();errorCallback=xhr.onerror=callback("error");if(xhr.onabort!==undefined){xhr.onabort=errorCallback;}else{xhr.onreadystatechange=function(){if(xhr.readyState===4){window.setTimeout(function(){if(callback){errorCallback();}});}};}
callback=callback("abort");try{xhr.send(options.hasContent&&options.data||null);}catch(e){if(callback){throw e;}}},abort:function(){if(callback){callback();}}};}});jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, "+"application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(text){jQuery.globalEval(text);return text;}}});jQuery.ajaxPrefilter("script",function(s){if(s.cache===undefined){s.cache=false;}
if(s.crossDomain){s.type="GET";}});jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,callback;return{send:function(_,complete){script=jQuery("<script>").prop({charset:s.scriptCharset,src:s.url}).on("load error",callback=function(evt){script.remove();callback=null;if(evt){complete(evt.type==="error"?404:200,evt.type);}});document.head.appendChild(script[0]);},abort:function(){if(callback){callback();}}};}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||(jQuery.expando+"_"+(nonce++));this[callback]=true;return callback;}});jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=s.jsonp!==false&&(rjsonp.test(s.url)?"url":typeof s.data==="string"&&(s.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&rjsonp.test(s.data)&&"data");if(jsonProp||s.dataTypes[0]==="jsonp"){callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback;if(jsonProp){s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName);}else if(s.jsonp!==false){s.url+=(rquery.test(s.url)?"&":"?")+s.jsonp+"="+callbackName;}
s.converters["script json"]=function(){if(!responseContainer){jQuery.error(callbackName+" was not called");}
return responseContainer[0];};s.dataTypes[0]="json";overwritten=window[callbackName];window[callbackName]=function(){responseContainer=arguments;};jqXHR.always(function(){if(overwritten===undefined){jQuery(window).removeProp(callbackName);}else{window[callbackName]=overwritten;}
if(s[callbackName]){s.jsonpCallback=originalSettings.jsonpCallback;oldCallbacks.push(callbackName);}
if(responseContainer&&jQuery.isFunction(overwritten)){overwritten(responseContainer[0]);}
responseContainer=overwritten=undefined;});return"script";}});jQuery.parseHTML=function(data,context,keepScripts){if(!data||typeof data!=="string"){return null;}
if(typeof context==="boolean"){keepScripts=context;context=false;}
context=context||document;var parsed=rsingleTag.exec(data),scripts=!keepScripts&&[];if(parsed){return[context.createElement(parsed[1])];}
parsed=buildFragment([data],context,scripts);if(scripts&&scripts.length){jQuery(scripts).remove();}
return jQuery.merge([],parsed.childNodes);};var _load=jQuery.fn.load;jQuery.fn.load=function(url,params,callback){if(typeof url!=="string"&&_load){return _load.apply(this,arguments);}
var selector,type,response,self=this,off=url.indexOf(" ");if(off>-1){selector=jQuery.trim(url.slice(off));url=url.slice(0,off);}
if(jQuery.isFunction(params)){callback=params;params=undefined;}else if(params&&typeof params==="object"){type="POST";}
if(self.length>0){jQuery.ajax({url:url,type:type||"GET",dataType:"html",data:params}).done(function(responseText){response=arguments;self.html(selector?jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector):responseText);}).always(callback&&function(jqXHR,status){self.each(function(){callback.apply(this,response||[jqXHR.responseText,status,jqXHR]);});});}
return this;};jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(i,type){jQuery.fn[type]=function(fn){return this.on(type,fn);};});jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem;}).length;};function getWindow(elem){return jQuery.isWindow(elem)?elem:elem.nodeType===9&&elem.defaultView;}
jQuery.offset={setOffset:function(elem,options,i){var curPosition,curLeft,curCSSTop,curTop,curOffset,curCSSLeft,calculatePosition,position=jQuery.css(elem,"position"),curElem=jQuery(elem),props={};if(position==="static"){elem.style.position="relative";}
curOffset=curElem.offset();curCSSTop=jQuery.css(elem,"top");curCSSLeft=jQuery.css(elem,"left");calculatePosition=(position==="absolute"||position==="fixed")&&(curCSSTop+curCSSLeft).indexOf("auto")>-1;if(calculatePosition){curPosition=curElem.position();curTop=curPosition.top;curLeft=curPosition.left;}else{curTop=parseFloat(curCSSTop)||0;curLeft=parseFloat(curCSSLeft)||0;}
if(jQuery.isFunction(options)){options=options.call(elem,i,jQuery.extend({},curOffset));}
if(options.top!=null){props.top=(options.top-curOffset.top)+curTop;}
if(options.left!=null){props.left=(options.left-curOffset.left)+curLeft;}
if("using"in options){options.using.call(elem,props);}else{curElem.css(props);}}};jQuery.fn.extend({offset:function(options){if(arguments.length){return options===undefined?this:this.each(function(i){jQuery.offset.setOffset(this,options,i);});}
var docElem,win,elem=this[0],box={top:0,left:0},doc=elem&&elem.ownerDocument;if(!doc){return;}
docElem=doc.documentElement;if(!jQuery.contains(docElem,elem)){return box;}
box=elem.getBoundingClientRect();win=getWindow(doc);return{top:box.top+win.pageYOffset-docElem.clientTop,left:box.left+win.pageXOffset-docElem.clientLeft};},position:function(){if(!this[0]){return;}
var offsetParent,offset,elem=this[0],parentOffset={top:0,left:0};if(jQuery.css(elem,"position")==="fixed"){offset=elem.getBoundingClientRect();}else{offsetParent=this.offsetParent();offset=this.offset();if(!jQuery.nodeName(offsetParent[0],"html")){parentOffset=offsetParent.offset();}
parentOffset.top+=jQuery.css(offsetParent[0],"borderTopWidth",true);parentOffset.left+=jQuery.css(offsetParent[0],"borderLeftWidth",true);}
return{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",true),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",true)};},offsetParent:function(){return this.map(function(){var offsetParent=this.offsetParent;while(offsetParent&&jQuery.css(offsetParent,"position")==="static"){offsetParent=offsetParent.offsetParent;}
return offsetParent||documentElement;});}});jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top="pageYOffset"===prop;jQuery.fn[method]=function(val){return access(this,function(elem,method,val){var win=getWindow(elem);if(val===undefined){return win?win[prop]:elem[method];}
if(win){win.scrollTo(!top?val:win.pageXOffset,top?val:win.pageYOffset);}else{elem[method]=val;}},method,val,arguments.length);};});jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]=addGetHookIf(support.pixelPosition,function(elem,computed){if(computed){computed=curCSS(elem,prop);return rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed;}});});jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||typeof margin!=="boolean"),extra=defaultExtra||(margin===true||value===true?"margin":"border");return access(this,function(elem,type,value){var doc;if(jQuery.isWindow(elem)){return elem.document.documentElement["client"+name];}
if(elem.nodeType===9){doc=elem.documentElement;return Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name]);}
return value===undefined?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra);},type,chainable?margin:undefined,chainable,null);};});});jQuery.fn.extend({bind:function(types,data,fn){return this.on(types,null,data,fn);},unbind:function(types,fn){return this.off(types,null,fn);},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn);},undelegate:function(selector,types,fn){return arguments.length===1?this.off(selector,"**"):this.off(types,selector||"**",fn);},size:function(){return this.length;}});jQuery.fn.andSelf=jQuery.fn.addBack;if(typeof define==="function"&&define.amd){define("jquery",[],function(){return jQuery;});}
var
_jQuery=window.jQuery,_$=window.$;jQuery.noConflict=function(deep){if(window.$===jQuery){window.$=_$;}
if(deep&&window.jQuery===jQuery){window.jQuery=_jQuery;}
return jQuery;};if(!noGlobal){window.jQuery=window.$=jQuery;}
return jQuery;}));if(typeof JSON!=='object'){JSON={};}
(function(){'use strict';function f(n){return n<10?'0'+n:n;}
if(typeof Date.prototype.toJSON!=='function'){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+'-'+
f(this.getUTCMonth()+1)+'-'+
f(this.getUTCDate())+'T'+
f(this.getUTCHours())+':'+
f(this.getUTCMinutes())+':'+
f(this.getUTCSeconds())+'Z':null;};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf();};}
var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==='string'?c:'\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+string+'"';}
function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==='object'&&typeof value.toJSON==='function'){value=value.toJSON(key);}
if(typeof rep==='function'){value=rep.call(holder,key,value);}
switch(typeof value){case'string':return quote(value);case'number':return isFinite(value)?String(value):'null';case'boolean':case'null':return String(value);case'object':if(!value){return'null';}
gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==='[object Array]'){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||'null';}
v=partial.length===0?'[]':gap?'[\n'+gap+partial.join(',\n'+gap)+'\n'+mind+']':'['+partial.join(',')+']';gap=mind;return v;}
if(rep&&typeof rep==='object'){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==='string'){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v);}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v);}}}}
v=partial.length===0?'{}':gap?'{\n'+gap+partial.join(',\n'+gap)+'\n'+mind+'}':'{'+partial.join(',')+'}';gap=mind;return v;}}
if(typeof JSON.stringify!=='function'){JSON.stringify=function(value,replacer,space){var i;gap='';indent='';if(typeof space==='number'){for(i=0;i<space;i+=1){indent+=' ';}}else if(typeof space==='string'){indent=space;}
rep=replacer;if(replacer&&typeof replacer!=='function'&&(typeof replacer!=='object'||typeof replacer.length!=='number')){throw new Error('JSON.stringify');}
return str('',{'':value});};}
if(typeof JSON.parse!=='function'){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==='object'){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v;}else{delete value[k];}}}}
return reviver.call(holder,key,value);}
text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return'\\u'+
('0000'+a.charCodeAt(0).toString(16)).slice(-4);});}
if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,''))){j=eval('('+text+')');return typeof reviver==='function'?walk({'':j},''):j;}
throw new SyntaxError('JSON.parse');};}}());(function(window,undefined){"use strict";var
History=window.History=window.History||{},jQuery=window.jQuery;if(typeof History.Adapter!=='undefined'){throw new Error('History.js Adapter has already been loaded...');}
History.Adapter={bind:function(el,event,callback){jQuery(el).bind(event,callback);},trigger:function(el,event,extra){jQuery(el).trigger(event,extra);},extractEventData:function(key,event,extra){var result=(event&&event.originalEvent&&event.originalEvent[key])||(extra&&extra[key])||undefined;return result;},onDomLoad:function(callback){jQuery(callback);}};if(typeof History.init!=='undefined'){History.init();}})(window);(function(window,undefined){"use strict";var
document=window.document,setTimeout=window.setTimeout||setTimeout,clearTimeout=window.clearTimeout||clearTimeout,setInterval=window.setInterval||setInterval,History=window.History=window.History||{};if(typeof History.initHtml4!=='undefined'){throw new Error('History.js HTML4 Support has already been loaded...');}
History.initHtml4=function(){if(typeof History.initHtml4.initialized!=='undefined'){return false;}
else{History.initHtml4.initialized=true;}
History.enabled=true;History.savedHashes=[];History.isLastHash=function(newHash){var oldHash=History.getHashByIndex(),isLast;isLast=newHash===oldHash;return isLast;};History.isHashEqual=function(newHash,oldHash){newHash=encodeURIComponent(newHash).replace(/%25/g,"%");oldHash=encodeURIComponent(oldHash).replace(/%25/g,"%");return newHash===oldHash;};History.saveHash=function(newHash){if(History.isLastHash(newHash)){return false;}
History.savedHashes.push(newHash);return true;};History.getHashByIndex=function(index){var hash=null;if(typeof index==='undefined'){hash=History.savedHashes[History.savedHashes.length-1];}
else if(index<0){hash=History.savedHashes[History.savedHashes.length+index];}
else{hash=History.savedHashes[index];}
return hash;};History.discardedHashes={};History.discardedStates={};History.discardState=function(discardedState,forwardState,backState){var discardedStateHash=History.getHashByState(discardedState),discardObject;discardObject={'discardedState':discardedState,'backState':backState,'forwardState':forwardState};History.discardedStates[discardedStateHash]=discardObject;return true;};History.discardHash=function(discardedHash,forwardState,backState){var discardObject={'discardedHash':discardedHash,'backState':backState,'forwardState':forwardState};History.discardedHashes[discardedHash]=discardObject;return true;};History.discardedState=function(State){var StateHash=History.getHashByState(State),discarded;discarded=History.discardedStates[StateHash]||false;return discarded;};History.discardedHash=function(hash){var discarded=History.discardedHashes[hash]||false;return discarded;};History.recycleState=function(State){var StateHash=History.getHashByState(State);if(History.discardedState(State)){delete History.discardedStates[StateHash];}
return true;};if(History.emulated.hashChange){History.hashChangeInit=function(){History.checkerFunction=null;var lastDocumentHash='',iframeId,iframe,lastIframeHash,checkerRunning,startedWithHash=Boolean(History.getHash());if(History.isInternetExplorer()){iframeId='historyjs-iframe';iframe=document.createElement('iframe');iframe.setAttribute('id',iframeId);iframe.setAttribute('src','#');iframe.style.display='none';document.body.appendChild(iframe);iframe.contentWindow.document.open();iframe.contentWindow.document.close();lastIframeHash='';checkerRunning=false;History.checkerFunction=function(){if(checkerRunning){return false;}
checkerRunning=true;var
documentHash=History.getHash(),iframeHash=History.getHash(iframe.contentWindow.document);if(documentHash!==lastDocumentHash){lastDocumentHash=documentHash;if(iframeHash!==documentHash){lastIframeHash=iframeHash=documentHash;iframe.contentWindow.document.open();iframe.contentWindow.document.close();iframe.contentWindow.document.location.hash=History.escapeHash(documentHash);}
History.Adapter.trigger(window,'hashchange');}
else if(iframeHash!==lastIframeHash){lastIframeHash=iframeHash;if(startedWithHash&&iframeHash===''){History.back();}
else{History.setHash(iframeHash,false);}}
checkerRunning=false;return true;};}
else{History.checkerFunction=function(){var documentHash=History.getHash()||'';if(documentHash!==lastDocumentHash){lastDocumentHash=documentHash;History.Adapter.trigger(window,'hashchange');}
return true;};}
History.intervalList.push(setInterval(History.checkerFunction,History.options.hashChangeInterval));return true;};History.Adapter.onDomLoad(History.hashChangeInit);}
if(History.emulated.pushState){History.onHashChange=function(event){var currentUrl=((event&&event.newURL)||History.getLocationHref()),currentHash=History.getHashByUrl(currentUrl),currentState=null,currentStateHash=null,currentStateHashExits=null,discardObject;if(History.isLastHash(currentHash)){History.busy(false);return false;}
History.doubleCheckComplete();History.saveHash(currentHash);if(currentHash&&History.isTraditionalAnchor(currentHash)){History.Adapter.trigger(window,'anchorchange');History.busy(false);return false;}
currentState=History.extractState(History.getFullUrl(currentHash||History.getLocationHref()),true);if(History.isLastSavedState(currentState)){History.busy(false);return false;}
currentStateHash=History.getHashByState(currentState);discardObject=History.discardedState(currentState);if(discardObject){if(History.getHashByIndex(-2)===History.getHashByState(discardObject.forwardState)){History.back(false);}else{History.forward(false);}
return false;}
History.pushState(currentState.data,currentState.title,encodeURI(currentState.url),false);return true;};History.Adapter.bind(window,'hashchange',History.onHashChange);History.pushState=function(data,title,url,queue){url=encodeURI(url).replace(/%25/g,"%");if(History.getHashByUrl(url)){throw new Error('History.js does not support states with fragment-identifiers (hashes/anchors).');}
if(queue!==false&&History.busy()){History.pushQueue({scope:History,callback:History.pushState,args:arguments,queue:queue});return false;}
History.busy(true);var newState=History.createStateObject(data,title,url),newStateHash=History.getHashByState(newState),oldState=History.getState(false),oldStateHash=History.getHashByState(oldState),html4Hash=History.getHash(),wasExpected=History.expectedStateId==newState.id;History.storeState(newState);History.expectedStateId=newState.id;History.recycleState(newState);History.setTitle(newState);if(newStateHash===oldStateHash){History.busy(false);return false;}
History.saveState(newState);if(!wasExpected)
History.Adapter.trigger(window,'statechange');if(!History.isHashEqual(newStateHash,html4Hash)&&!History.isHashEqual(newStateHash,History.getShortUrl(History.getLocationHref()))){History.setHash(newStateHash,false);}
History.busy(false);return true;};History.replaceState=function(data,title,url,queue){url=encodeURI(url).replace(/%25/g,"%");if(History.getHashByUrl(url)){throw new Error('History.js does not support states with fragment-identifiers (hashes/anchors).');}
if(queue!==false&&History.busy()){History.pushQueue({scope:History,callback:History.replaceState,args:arguments,queue:queue});return false;}
History.busy(true);var newState=History.createStateObject(data,title,url),newStateHash=History.getHashByState(newState),oldState=History.getState(false),oldStateHash=History.getHashByState(oldState),previousState=History.getStateByIndex(-2);History.discardState(oldState,newState,previousState);if(newStateHash===oldStateHash){History.storeState(newState);History.expectedStateId=newState.id;History.recycleState(newState);History.setTitle(newState);History.saveState(newState);History.Adapter.trigger(window,'statechange');History.busy(false);}
else{History.pushState(newState.data,newState.title,newState.url,false);}
return true;};}
if(History.emulated.pushState){if(History.getHash()&&!History.emulated.hashChange){History.Adapter.onDomLoad(function(){History.Adapter.trigger(window,'hashchange');});}}};if(typeof History.init!=='undefined'){History.init();}})(window);(function(window,undefined){"use strict";var
console=window.console||undefined,document=window.document,navigator=window.navigator,sessionStorage=false,setTimeout=window.setTimeout,clearTimeout=window.clearTimeout,setInterval=window.setInterval,clearInterval=window.clearInterval,JSON=window.JSON,alert=window.alert,History=window.History=window.History||{},history=window.history;try{sessionStorage=window.sessionStorage;sessionStorage.setItem('TEST','1');sessionStorage.removeItem('TEST');}catch(e){sessionStorage=false;}
JSON.stringify=JSON.stringify||JSON.encode;JSON.parse=JSON.parse||JSON.decode;if(typeof History.init!=='undefined'){throw new Error('History.js Core has already been loaded...');}
History.init=function(options){if(typeof History.Adapter==='undefined'){return false;}
if(typeof History.initCore!=='undefined'){History.initCore();}
if(typeof History.initHtml4!=='undefined'){History.initHtml4();}
return true;};History.initCore=function(options){if(typeof History.initCore.initialized!=='undefined'){return false;}
else{History.initCore.initialized=true;}
History.options=History.options||{};History.options.hashChangeInterval=History.options.hashChangeInterval||100;History.options.safariPollInterval=History.options.safariPollInterval||500;History.options.doubleCheckInterval=History.options.doubleCheckInterval||500;History.options.disableSuid=History.options.disableSuid||false;History.options.storeInterval=History.options.storeInterval||1000;History.options.busyDelay=History.options.busyDelay||250;History.options.debug=History.options.debug||false;History.options.initialTitle=History.options.initialTitle||document.title;History.options.html4Mode=History.options.html4Mode||false;History.options.delayInit=History.options.delayInit||false;History.intervalList=[];History.clearAllIntervals=function(){var i,il=History.intervalList;if(typeof il!=="undefined"&&il!==null){for(i=0;i<il.length;i++){clearInterval(il[i]);}
History.intervalList=null;}};History.debug=function(){if((History.options.debug||false)){History.log.apply(History,arguments);}};History.log=function(){var
consoleExists=!(typeof console==='undefined'||typeof console.log==='undefined'||typeof console.log.apply==='undefined'),textarea=document.getElementById('log'),message,i,n,args,arg;if(consoleExists){args=Array.prototype.slice.call(arguments);message=args.shift();if(typeof console.debug!=='undefined'){console.debug.apply(console,[message,args]);}
else{console.log.apply(console,[message,args]);}}
else{message=("\n"+arguments[0]+"\n");}
for(i=1,n=arguments.length;i<n;++i){arg=arguments[i];if(typeof arg==='object'&&typeof JSON!=='undefined'){try{arg=JSON.stringify(arg);}
catch(Exception){}}
message+="\n"+arg+"\n";}
if(textarea){textarea.value+=message+"\n-----\n";textarea.scrollTop=textarea.scrollHeight-textarea.clientHeight;}
else if(!consoleExists){alert(message);}
return true;};History.getInternetExplorerMajorVersion=function(){var result=History.getInternetExplorerMajorVersion.cached=(typeof History.getInternetExplorerMajorVersion.cached!=='undefined')?History.getInternetExplorerMajorVersion.cached:(function(){var v=3,div=document.createElement('div'),all=div.getElementsByTagName('i');while((div.innerHTML='<!--[if gt IE '+(++v)+']><i></i><![endif]-->')&&all[0]){}
return(v>4)?v:false;})();return result;};History.isInternetExplorer=function(){var result=History.isInternetExplorer.cached=(typeof History.isInternetExplorer.cached!=='undefined')?History.isInternetExplorer.cached:Boolean(History.getInternetExplorerMajorVersion());return result;};if(History.options.html4Mode){History.emulated={pushState:true,hashChange:true};}
else{History.emulated={pushState:!Boolean(window.history&&window.history.pushState&&window.history.replaceState&&!((/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i).test(navigator.userAgent)||(/AppleWebKit\/5([0-2]|3[0-2])/i).test(navigator.userAgent))),hashChange:Boolean(!(('onhashchange'in window)||('onhashchange'in document))||(History.isInternetExplorer()&&History.getInternetExplorerMajorVersion()<8))};}
History.enabled=!History.emulated.pushState;History.bugs={setHash:Boolean(!History.emulated.pushState&&navigator.vendor==='Apple Computer, Inc.'&&/AppleWebKit\/5([0-2]|3[0-3])/.test(navigator.userAgent)),safariPoll:Boolean(!History.emulated.pushState&&navigator.vendor==='Apple Computer, Inc.'&&/AppleWebKit\/5([0-2]|3[0-3])/.test(navigator.userAgent)),ieDoubleCheck:Boolean(History.isInternetExplorer()&&History.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(History.isInternetExplorer()&&History.getInternetExplorerMajorVersion()<7)};History.isEmptyObject=function(obj){for(var name in obj){if(obj.hasOwnProperty(name)){return false;}}
return true;};History.cloneObject=function(obj){var hash,newObj;if(obj){hash=JSON.stringify(obj);newObj=JSON.parse(hash);}
else{newObj={};}
return newObj;};History.getRootUrl=function(){var rootUrl=document.location.protocol+'//'+(document.location.hostname||document.location.host);if(document.location.port||false){rootUrl+=':'+document.location.port;}
rootUrl+='/';return rootUrl;};History.getBaseHref=function(){var
baseElements=document.getElementsByTagName('base'),baseElement=null,baseHref='';if(baseElements.length===1){baseElement=baseElements[0];baseHref=baseElement.href.replace(/[^\/]+$/,'');}
baseHref=baseHref.replace(/\/+$/,'');if(baseHref)baseHref+='/';return baseHref;};History.getBaseUrl=function(){var baseUrl=History.getBaseHref()||History.getBasePageUrl()||History.getRootUrl();return baseUrl;};History.getPageUrl=function(){var
State=History.getState(false,false),stateUrl=(State||{}).url||History.getLocationHref(),pageUrl;pageUrl=stateUrl.replace(/\/+$/,'').replace(/[^\/]+$/,function(part,index,string){return(/\./).test(part)?part:part+'/';});return pageUrl;};History.getBasePageUrl=function(){var basePageUrl=(History.getLocationHref()).replace(/[#\?].*/,'').replace(/[^\/]+$/,function(part,index,string){return(/[^\/]$/).test(part)?'':part;}).replace(/\/+$/,'')+'/';return basePageUrl;};History.getFullUrl=function(url,allowBaseHref){var fullUrl=url,firstChar=url.substring(0,1);allowBaseHref=(typeof allowBaseHref==='undefined')?true:allowBaseHref;if(/[a-z]+\:\/\//.test(url)){}
else if(firstChar==='/'){fullUrl=History.getRootUrl()+url.replace(/^\/+/,'');}
else if(firstChar==='#'){fullUrl=History.getPageUrl().replace(/#.*/,'')+url;}
else if(firstChar==='?'){fullUrl=History.getPageUrl().replace(/[\?#].*/,'')+url;}
else{if(allowBaseHref){fullUrl=History.getBaseUrl()+url.replace(/^(\.\/)+/,'');}else{fullUrl=History.getBasePageUrl()+url.replace(/^(\.\/)+/,'');}}
return fullUrl.replace(/\#$/,'');};History.getShortUrl=function(url){var shortUrl=url,baseUrl=History.getBaseUrl(),rootUrl=History.getRootUrl();if(History.emulated.pushState){shortUrl=shortUrl.replace(baseUrl,'');}
shortUrl=shortUrl.replace(rootUrl,'/');if(History.isTraditionalAnchor(shortUrl)){shortUrl='./'+shortUrl;}
shortUrl=shortUrl.replace(/^(\.\/)+/g,'./').replace(/\#$/,'');return shortUrl;};History.getLocationHref=function(doc){doc=doc||document;if(doc.URL===doc.location.href)
return doc.location.href;if(doc.location.href===decodeURIComponent(doc.URL))
return doc.URL;if(doc.location.hash&&decodeURIComponent(doc.location.href.replace(/^[^#]+/,""))===doc.location.hash)
return doc.location.href;if(doc.URL.indexOf('#')==-1&&doc.location.href.indexOf('#')!=-1)
return doc.location.href;return doc.URL||doc.location.href;};History.store={};History.idToState=History.idToState||{};History.stateToId=History.stateToId||{};History.urlToId=History.urlToId||{};History.storedStates=History.storedStates||[];History.savedStates=History.savedStates||[];History.normalizeStore=function(){History.store.idToState=History.store.idToState||{};History.store.urlToId=History.store.urlToId||{};History.store.stateToId=History.store.stateToId||{};};History.getState=function(friendly,create){if(typeof friendly==='undefined'){friendly=true;}
if(typeof create==='undefined'){create=true;}
var State=History.getLastSavedState();if(!State&&create){State=History.createStateObject();}
if(friendly){State=History.cloneObject(State);State.url=State.cleanUrl||State.url;}
return State;};History.getIdByState=function(newState){var id=History.extractId(newState.url),str;if(!id){str=History.getStateString(newState);if(typeof History.stateToId[str]!=='undefined'){id=History.stateToId[str];}
else if(typeof History.store.stateToId[str]!=='undefined'){id=History.store.stateToId[str];}
else{while(true){id=(new Date()).getTime()+String(Math.random()).replace(/\D/g,'');if(typeof History.idToState[id]==='undefined'&&typeof History.store.idToState[id]==='undefined'){break;}}
History.stateToId[str]=id;History.idToState[id]=newState;}}
return id;};History.normalizeState=function(oldState){var newState,dataNotEmpty;if(!oldState||(typeof oldState!=='object')){oldState={};}
if(typeof oldState.normalized!=='undefined'){return oldState;}
if(!oldState.data||(typeof oldState.data!=='object')){oldState.data={};}
newState={};newState.normalized=true;newState.title=oldState.title||'';newState.url=History.getFullUrl(oldState.url?oldState.url:(History.getLocationHref()));newState.hash=History.getShortUrl(newState.url);newState.data=History.cloneObject(oldState.data);newState.id=History.getIdByState(newState);newState.cleanUrl=newState.url.replace(/\??\&_suid.*/,'');newState.url=newState.cleanUrl;dataNotEmpty=!History.isEmptyObject(newState.data);if((newState.title||dataNotEmpty)&&History.options.disableSuid!==true){newState.hash=History.getShortUrl(newState.url).replace(/\??\&_suid.*/,'');if(!/\?/.test(newState.hash)){newState.hash+='?';}
newState.hash+='&_suid='+newState.id;}
newState.hashedUrl=History.getFullUrl(newState.hash);if((History.emulated.pushState||History.bugs.safariPoll)&&History.hasUrlDuplicate(newState)){newState.url=newState.hashedUrl;}
return newState;};History.createStateObject=function(data,title,url){var State={'data':data,'title':title,'url':url};State=History.normalizeState(State);return State;};History.getStateById=function(id){id=String(id);var State=History.idToState[id]||History.store.idToState[id]||undefined;return State;};History.getStateString=function(passedState){var State,cleanedState,str;State=History.normalizeState(passedState);cleanedState={data:State.data,title:passedState.title,url:passedState.url};str=JSON.stringify(cleanedState);return str;};History.getStateId=function(passedState){var State,id;State=History.normalizeState(passedState);id=State.id;return id;};History.getHashByState=function(passedState){var State,hash;State=History.normalizeState(passedState);hash=State.hash;return hash;};History.extractId=function(url_or_hash){var id,parts,url,tmp;if(url_or_hash.indexOf('#')!=-1)
{tmp=url_or_hash.split("#")[0];}
else
{tmp=url_or_hash;}
parts=/(.*)\&_suid=([0-9]+)$/.exec(tmp);url=parts?(parts[1]||url_or_hash):url_or_hash;id=parts?String(parts[2]||''):'';return id||false;};History.isTraditionalAnchor=function(url_or_hash){var isTraditional=!(/[\/\?\.]/.test(url_or_hash));return isTraditional;};History.extractState=function(url_or_hash,create){var State=null,id,url;create=create||false;id=History.extractId(url_or_hash);if(id){State=History.getStateById(id);}
if(!State){url=History.getFullUrl(url_or_hash);id=History.getIdByUrl(url)||false;if(id){State=History.getStateById(id);}
if(!State&&create&&!History.isTraditionalAnchor(url_or_hash)){State=History.createStateObject(null,null,url);}}
return State;};History.getIdByUrl=function(url){var id=History.urlToId[url]||History.store.urlToId[url]||undefined;return id;};History.getLastSavedState=function(){return History.savedStates[History.savedStates.length-1]||undefined;};History.getLastStoredState=function(){return History.storedStates[History.storedStates.length-1]||undefined;};History.hasUrlDuplicate=function(newState){var hasDuplicate=false,oldState;oldState=History.extractState(newState.url);hasDuplicate=oldState&&oldState.id!==newState.id;return hasDuplicate;};History.storeState=function(newState){History.urlToId[newState.url]=newState.id;History.storedStates.push(History.cloneObject(newState));return newState;};History.isLastSavedState=function(newState){var isLast=false,newId,oldState,oldId;if(History.savedStates.length){newId=newState.id;oldState=History.getLastSavedState();oldId=oldState.id;isLast=(newId===oldId);}
return isLast;};History.saveState=function(newState){if(History.isLastSavedState(newState)){return false;}
History.savedStates.push(History.cloneObject(newState));return true;};History.getStateByIndex=function(index){var State=null;if(typeof index==='undefined'){State=History.savedStates[History.savedStates.length-1];}
else if(index<0){State=History.savedStates[History.savedStates.length+index];}
else{State=History.savedStates[index];}
return State;};History.getCurrentIndex=function(){var index=null;if(History.savedStates.length<1){index=0;}
else{index=History.savedStates.length-1;}
return index;};History.getHash=function(doc){var url=History.getLocationHref(doc),hash;hash=History.getHashByUrl(url);return hash;};History.unescapeHash=function(hash){var result=History.normalizeHash(hash);result=decodeURIComponent(result);return result;};History.normalizeHash=function(hash){var result=hash.replace(/[^#]*#/,'').replace(/#.*/,'');return result;};History.setHash=function(hash,queue){var State,pageUrl;if(queue!==false&&History.busy()){History.pushQueue({scope:History,callback:History.setHash,args:arguments,queue:queue});return false;}
History.busy(true);State=History.extractState(hash,true);if(State&&!History.emulated.pushState){History.pushState(State.data,State.title,State.url,false);}
else if(History.getHash()!==hash){if(History.bugs.setHash){pageUrl=History.getPageUrl();History.pushState(null,null,pageUrl+'#'+hash,false);}
else{document.location.hash=hash;}}
return History;};History.escapeHash=function(hash){var result=History.normalizeHash(hash);result=window.encodeURIComponent(result);if(!History.bugs.hashEscape){result=result.replace(/\%21/g,'!').replace(/\%26/g,'&').replace(/\%3D/g,'=').replace(/\%3F/g,'?');}
return result;};History.getHashByUrl=function(url){var hash=String(url).replace(/([^#]*)#?([^#]*)#?(.*)/,'$2');hash=History.unescapeHash(hash);return hash;};History.setTitle=function(newState){var title=newState.title,firstState;if(!title){firstState=History.getStateByIndex(0);if(firstState&&firstState.url===newState.url){title=firstState.title||History.options.initialTitle;}}
try{document.getElementsByTagName('title')[0].innerHTML=title.replace('<','&lt;').replace('>','&gt;').replace(' & ',' &amp; ');}
catch(Exception){}
document.title=title;return History;};History.queues=[];History.busy=function(value){if(typeof value!=='undefined'){History.busy.flag=value;}
else if(typeof History.busy.flag==='undefined'){History.busy.flag=false;}
if(!History.busy.flag){clearTimeout(History.busy.timeout);var fireNext=function(){var i,queue,item;if(History.busy.flag)return;for(i=History.queues.length-1;i>=0;--i){queue=History.queues[i];if(queue.length===0)continue;item=queue.shift();History.fireQueueItem(item);History.busy.timeout=setTimeout(fireNext,History.options.busyDelay);}};History.busy.timeout=setTimeout(fireNext,History.options.busyDelay);}
return History.busy.flag;};History.busy.flag=false;History.fireQueueItem=function(item){return item.callback.apply(item.scope||History,item.args||[]);};History.pushQueue=function(item){History.queues[item.queue||0]=History.queues[item.queue||0]||[];History.queues[item.queue||0].push(item);return History;};History.queue=function(item,queue){if(typeof item==='function'){item={callback:item};}
if(typeof queue!=='undefined'){item.queue=queue;}
if(History.busy()){History.pushQueue(item);}else{History.fireQueueItem(item);}
return History;};History.clearQueue=function(){History.busy.flag=false;History.queues=[];return History;};History.stateChanged=false;History.doubleChecker=false;History.doubleCheckComplete=function(){History.stateChanged=true;History.doubleCheckClear();return History;};History.doubleCheckClear=function(){if(History.doubleChecker){clearTimeout(History.doubleChecker);History.doubleChecker=false;}
return History;};History.doubleCheck=function(tryAgain){History.stateChanged=false;History.doubleCheckClear();if(History.bugs.ieDoubleCheck){History.doubleChecker=setTimeout(function(){History.doubleCheckClear();if(!History.stateChanged){tryAgain();}
return true;},History.options.doubleCheckInterval);}
return History;};History.safariStatePoll=function(){var
urlState=History.extractState(History.getLocationHref()),newState;if(!History.isLastSavedState(urlState)){newState=urlState;}
else{return;}
if(!newState){newState=History.createStateObject();}
History.Adapter.trigger(window,'popstate');return History;};History.back=function(queue){if(queue!==false&&History.busy()){History.pushQueue({scope:History,callback:History.back,args:arguments,queue:queue});return false;}
History.busy(true);History.doubleCheck(function(){History.back(false);});history.go(-1);return true;};History.forward=function(queue){if(queue!==false&&History.busy()){History.pushQueue({scope:History,callback:History.forward,args:arguments,queue:queue});return false;}
History.busy(true);History.doubleCheck(function(){History.forward(false);});history.go(1);return true;};History.go=function(index,queue){var i;if(index>0){for(i=1;i<=index;++i){History.forward(queue);}}
else if(index<0){for(i=-1;i>=index;--i){History.back(queue);}}
else{throw new Error('History.go: History.go requires a positive or negative integer passed.');}
return History;};if(History.emulated.pushState){var emptyFunction=function(){};History.pushState=History.pushState||emptyFunction;History.replaceState=History.replaceState||emptyFunction;}
else{History.onPopState=function(event,extra){var stateId=false,newState=false,currentHash,currentState;History.doubleCheckComplete();currentHash=History.getHash();if(currentHash){currentState=History.extractState(currentHash||History.getLocationHref(),true);if(currentState){History.replaceState(currentState.data,currentState.title,currentState.url,false);}
else{History.Adapter.trigger(window,'anchorchange');History.busy(false);}
History.expectedStateId=false;return false;}
stateId=History.Adapter.extractEventData('state',event,extra)||false;if(stateId){newState=History.getStateById(stateId);}
else if(History.expectedStateId){newState=History.getStateById(History.expectedStateId);}
else{newState=History.extractState(History.getLocationHref());}
if(!newState){newState=History.createStateObject(null,null,History.getLocationHref());}
History.expectedStateId=false;if(History.isLastSavedState(newState)){History.busy(false);return false;}
History.storeState(newState);History.saveState(newState);History.setTitle(newState);History.Adapter.trigger(window,'statechange');History.busy(false);return true;};History.Adapter.bind(window,'popstate',History.onPopState);History.pushState=function(data,title,url,queue){if(History.getHashByUrl(url)&&History.emulated.pushState){throw new Error('History.js does not support states with fragement-identifiers (hashes/anchors).');}
if(queue!==false&&History.busy()){History.pushQueue({scope:History,callback:History.pushState,args:arguments,queue:queue});return false;}
History.busy(true);var newState=History.createStateObject(data,title,url);if(History.isLastSavedState(newState)){History.busy(false);}
else{History.storeState(newState);History.expectedStateId=newState.id;history.pushState(newState.id,newState.title,newState.url);History.Adapter.trigger(window,'popstate');}
return true;};History.replaceState=function(data,title,url,queue){if(History.getHashByUrl(url)&&History.emulated.pushState){throw new Error('History.js does not support states with fragement-identifiers (hashes/anchors).');}
if(queue!==false&&History.busy()){History.pushQueue({scope:History,callback:History.replaceState,args:arguments,queue:queue});return false;}
History.busy(true);var newState=History.createStateObject(data,title,url);if(History.isLastSavedState(newState)){History.busy(false);}
else{History.storeState(newState);History.expectedStateId=newState.id;history.replaceState(newState.id,newState.title,newState.url);History.Adapter.trigger(window,'popstate');}
return true;};}
if(sessionStorage){try{History.store=JSON.parse(sessionStorage.getItem('History.store'))||{};}
catch(err){History.store={};}
History.normalizeStore();}
else{History.store={};History.normalizeStore();}
History.Adapter.bind(window,"unload",History.clearAllIntervals);History.saveState(History.storeState(History.extractState(History.getLocationHref(),true)));if(sessionStorage){History.onUnload=function(){var currentStore,item,currentStoreString;try{currentStore=JSON.parse(sessionStorage.getItem('History.store'))||{};}
catch(err){currentStore={};}
currentStore.idToState=currentStore.idToState||{};currentStore.urlToId=currentStore.urlToId||{};currentStore.stateToId=currentStore.stateToId||{};for(item in History.idToState){if(!History.idToState.hasOwnProperty(item)){continue;}
currentStore.idToState[item]=History.idToState[item];}
for(item in History.urlToId){if(!History.urlToId.hasOwnProperty(item)){continue;}
currentStore.urlToId[item]=History.urlToId[item];}
for(item in History.stateToId){if(!History.stateToId.hasOwnProperty(item)){continue;}
currentStore.stateToId[item]=History.stateToId[item];}
History.store=currentStore;History.normalizeStore();currentStoreString=JSON.stringify(currentStore);try{sessionStorage.setItem('History.store',currentStoreString);}
catch(e){if(e.code===DOMException.QUOTA_EXCEEDED_ERR){if(sessionStorage.length){sessionStorage.removeItem('History.store');sessionStorage.setItem('History.store',currentStoreString);}else{}}else{throw e;}}};History.intervalList.push(setInterval(History.onUnload,History.options.storeInterval));History.Adapter.bind(window,'beforeunload',History.onUnload);History.Adapter.bind(window,'unload',History.onUnload);}
if(!History.emulated.pushState){if(History.bugs.safariPoll){History.intervalList.push(setInterval(History.safariStatePoll,History.options.safariPollInterval));}
if(navigator.vendor==='Apple Computer, Inc.'||(navigator.appCodeName||'')==='Mozilla'){History.Adapter.bind(window,'hashchange',function(){History.Adapter.trigger(window,'popstate');});if(History.getHash()){History.Adapter.onDomLoad(function(){History.Adapter.trigger(window,'hashchange');});}}}};if(!History.options||!History.options.delayInit){History.init();}})(window);;(function($,window,document,undefined){var show=$.fn.show;$.fn.show=function(speed,easing,callback){for(var i=0,j=this.length;i<j;i++){el=this[i];if(el.classList&&(el.classList.contains('hide_show')||el.classList.contains('show_hide'))){el.classList.add('show_hide');el.classList.remove('hide_show');}
else{show.apply(this,arguments);break;}}
return this;};var hide=$.fn.hide;$.fn.hide=function(speed,easing,callback){for(var i=0,j=this.length;i<j;i++){el=this[i];if(el.classList&&(el.classList.contains('hide_show')||el.classList.contains('show_hide'))){el.classList.add('hide_show');el.classList.remove('show_hide');}
else{hide.apply(this,arguments);break;}}
return this;};var ajax_nav_request=null,$document=$(document),$window=$(window),active_ajax_requests={};var defaults={ajax_nav_selector:'#content',delete_confirm:"Are you sure you want to delete this_RESOURCE_NAME?",delete_confirm_class:'confirm_delete',default_page_title:null,default_error_messages:{http_400:"Oops! Looks like there was something wrong with your request.",http_401:"Oops! Looks like you need to log in.",http_403:"Oops! Looks like you're not allowed to do that.",http_404:"That page could not be found.",http_500:"Whoops, something went wrong! Please try again later.",timeout:"Oops! We had trouble connecting to populi... please check your internet connection.",other:'Something went wrong. Please try again later.'}};var prevent_remote=false;$.jpi=function(options){var _this=this;var _settings={};var _pause_ajax_history=false;$.jpi.get_active_ajax_requests=function(){return active_ajax_requests;}
$.jpi.updateCurrentHistoryState=function(url,page_title,data){History.Scroll[History.getState().id]=$('body').scrollTop();History.pushState(data,page_title,url);};$.jpi.killCurrentNavRequest=function(){if(ajax_nav_request){ajax_nav_request.abort();return true;}
else{return false;}};$.jpi.parseResponseType=function(mime_type){mime_type=typeof mime_type=='string'?mime_type:'';mime_type=mime_type.toLowerCase();if(mime_type.match(/json$/)){return'json';}
else if(mime_type.match(/xml$/)){return'xml';}
return'html';};$.jpi.prevent_remote=function(){prevent_remote=true;}
var handleJsonCallbacks=function(paCallbacks){if(paCallbacks){$.each(paCallbacks,function(iIndex,mCallback){if($.type(mCallback)=='string'){dynamicFunction(mCallback);}
else if($.type(mCallback)=='object'&&$.type(mCallback.name)=='string'){dynamicFunctionWithArgs(mCallback.name,mCallback.args);}});}};var getPageTitleFromHeader=function(ajax_request){var title=_settings.default_page_title;var x_title=ajax_request.getResponseHeader('X-Page-Title');if(x_title){try{title=JSON.parse(x_title);}catch(e){title=x_title;}}
return title;};var dynamicFunction=function(func){this[func].apply(this,Array.prototype.slice.call(arguments,1));};var dynamicFunctionWithArgs=function(func,args){this[func].apply(this,args);};var get_element=function(selector,context_selector,$triggering_element){var parsed_selector=parse_selector(selector);var parsed_context_selector=parse_selector(context_selector);if(parsed_selector.traversal_method){$element=$triggering_element[parsed_selector.traversal_method](parsed_selector.selector);}else if(parsed_context_selector.traversal_method){$context=$triggering_element[parsed_context_selector.traversal_method](parsed_context_selector.selector);$element=$(selector,$context);}else if(parsed_context_selector.selector){$element=$(selector,$(parsed_context_selector.selector));}else if(parsed_selector.selector){$element=$(selector);}else{$element=$triggering_element;}
return $element;}
var parse_selector=function(selector){if($.trim(selector).length==0){return{traversal_method:null,selector:null};}else{var parsed=selector.match(/(closest|siblings|next|parent|parents)(?:\: *(.*))?/)
if(parsed){return{traversal_method:parsed[1],selector:(typeof parsed[2]=='undefined'?'*':parsed[2])};}else{return{traversal_method:null,selector:selector};}}}
var log=function(message){if(typeof console=='object'&&typeof console.log=='function'){console.log(message);}};var find_url=function(tag_name,$element){switch(tag_name){case'a':return $element.attr('href');case'form':return $element.attr('action');case'select':var option_url=$element.find(':selected').data('url');if(option_url&&option_url.length){return option_url;}
default:return $element.data('url');}};var post_to_new_tab=function(url,data){var form=$('<form target="_blank" style="display:none;" method="post"></form>');form.attr("action",url);build_tmp_form_helper(form,data);$(document.body).append(form);form.submit();form.remove();}
var build_tmp_form_helper=function(form,data,prefix){prefix=prefix||'';$.each(data,function(key,value){var key_with_prefix=prefix.length?prefix+'['+key+']':key;if(value instanceof Array){$.each(value,function(array_key,array_value){if(array_value instanceof Object){build_tmp_form_helper(form,array_value,key_with_prefix+'['+array_key.toString()+']');}
else{var field=$('<input type="hidden"></input>').attr("name",key_with_prefix+'[]').attr("value",array_value);form.append(field);}});}
else if(value instanceof Object){build_tmp_form_helper(form,value,key_with_prefix);}
else{var field=$('<input type="hidden"></input>').attr("name",key_with_prefix).attr("value",value);form.append(field);}});}
var generate_uid=function(){return $.now()+Math.random();}
var parse_json_errors=function(text){var errors=[];try{var json_response=$.parseJSON(text);if(typeof json_response.errors=='object'){errors=json_response.errors;}
else if(typeof json_response=='object'&&json_response instanceof Array){errors=json_response;}
else{errors=[json_response];}}
catch(e){log('JPI ERROR: Problem parsing JSON error response: '+e.message);}
return errors;}
var request_done=function(triggering_class,response,ajax_request,text_status,$element,$target){var data_type=$.jpi.parseResponseType(ajax_request.getResponseHeader('Content-type'));var refresh_selector=$element.data('refresh');switch(data_type.toLowerCase()){case'html':switch(triggering_class){case'remote_update':$element.detach();$target.addClass('remote_updating').html(response);break;case'remote_replace':var $new_content=$(response);$target.replaceWith($new_content);$new_content.trigger('remote_replaced.jpi');break;case'remote_append':$target.append(response);break;case'remote_refresh':$target.html(response);break;default:if($element!=$target){$target.html(response);}}
break;case'json':if(response!==Object(response)){response=JSON.parse(response);}
handleJsonCallbacks(response.callbacks);break;}
$triggering_element=$.contains(document.documentElement,$element.get(0))?$element:$target;$triggering_element.trigger('after_done.jpi',[triggering_class,response,text_status,ajax_request]);if(triggering_class=='remote_delete'&&$target){$target.trigger('remote_deleted.jpi',response);}
if(refresh_selector){$(refresh_selector).each(function(){$(this).trigger('trigger.jpi');});}};var request_fail=function($target){if(typeof $target=='object'){$target.removeClass(_settings.delete_confirm_class);}};var request_always=function($element,triggering_class,$target){$element.trigger('after_remote.jpi',{triggered_by_class:triggering_class,triggered_by_element:$element,target:$target});};var replace_last=function(needle,replacement,haystack){return haystack.reverse().replace(new RegExp(needle.toString().reverse()),replacement.toString().reverse()).reverse();}
var init=function(options){String.prototype.reverse=function(){return this.split("").reverse().join("");}
_settings=$.extend(defaults,options);if(typeof window.History=='undefined'||typeof window.History.getIdByUrl=='undefined'){log("JPI ERROR: We need History.js loaded by now, and it's not!");return false;}
if($(_settings.ajax_nav_selector).length==0){log("JPI ERROR: We can't find a DOM object to use for ajax navigation! Here's the selector we're using: "+_settings.ajax_nav_selector+" Are you sure you're calling $.jpi() *within* document.ready? Otherwise this DOM object might not yet be created by the browser.");return false;}
History=window.History;History.Scroll={};$document.on("click change submit trigger.jpi",".remote, .remote_nav, .remote_replace, .remote_append, .remote_delete, .remote_update, .remote_refresh",function(event){var $element=$(this);var tag=this.nodeName.toLowerCase();if((tag=='form'&&event.type!='submit')||(tag=='select'&&event.type!='change')||($element.attr('type')=='checkbox'&&event.type!='click')||($.inArray(tag,['a','checkbox','button'])==-1&&event.type=='click')||($.inArray(tag,['input','select','textarea'])==-1&&event.type=='change')){return true;}
var url=find_url(tag,$element);if(!url){log("JPI ERROR: Looks like you wanted ajaxy stuff to happen, but we couldn't find a URL for this <"+tag+">!");return true;}
var triggering_class='remote';$.each(['remote','remote_nav','remote_replace','remote_delete','remote_update','remote_append','remote_refresh'],function(index,value){if($element.hasClass(value)){triggering_class=value;return true;}});if((triggering_class!='remote_delete'&&$element.data('confirm')&&!confirm($element.data('confirm')))||(tag=='button'&&($element.prop('disabled')||$element.hasClass('disabled')))){event.preventDefault();return false;}
var form_method=(tag=='form'&&$element.attr('method'))?$element.attr('method').toUpperCase():'';var request_method=form_method.length?form_method:'GET';var data_to_submit=null;if($element.data('get')){data_to_submit=$element.data('get');}
else if($element.data('post')){data_to_submit=$element.data('post');if(!form_method.length){request_method='POST';}}
if(tag=='select'&&$element.attr('name')){var select_value={};select_value[$element.attr('name')]=$element.val();data_to_submit=$.extend(data_to_submit,select_value);}
var data_type='html';if($element.data("type")){data_type=$element.data("type");}
else if(url){var extension=url.match(/\.([a-z]+)$/i);if(extension){extension=extension[1].toLowerCase();if($.inArray(extension,['json','xml'])!=-1){data_type=extension;}
else if(extension=='js'){data_type='script';}
else if($.inArray(extension,['text','csv'])!=-1){data_type='text';}}}
event.preventDefault();if(!$element.hasClass('allow_propagation')){event.stopPropagation();}
if(tag=='a'&&triggering_class=='remote_nav'&&(event.which==2||event.metaKey)){if(request_method=='GET'){if(!$.isEmptyObject(data_to_submit)){url+=(url.match(/\?/)?'&':'?')+$.param(data_to_submit);}
window.open(url);}
else{post_to_new_tab(url,data_to_submit);}
return false;}
var $target=$element;if($element.data('target')){$target=get_element($element.data('target'),$element.data('context'),$element);}
else if(triggering_class=='remote_replace'){$target=$element.closest('.remote_replaceable').andSelf().first();}
else if(triggering_class=='remote_delete'){$target=$element.closest('.remote_deletable').andSelf().first();}
else if(triggering_class=='remote_update'){$target=$element.closest('.remote_updatable').andSelf().first();}
else if(triggering_class=='remote_append'){$target=$element.closest('.remote_appendable').first();}
else if(triggering_class=='remote_nav'){$target=$(_settings.ajax_nav_selector);}
if(triggering_class=='remote_nav'&&tag!='form'&&window.location.href.replace(window.location.origin,'')!=url){var page_title=$element.data('page-title')||null;$document.trigger('before_remote.jpi',{triggered_by_class:'remote_nav',target:$(_settings.ajax_nav_selector)});if(prevent_remote){prevent_remote=false;return false;}
var nextHistoryId=History.getIdByUrl(History.getFullUrl(url));if(typeof(nextHistoryId)!=='undefined'){delete History.Scroll[nextHistoryId];}
$.jpi.updateCurrentHistoryState(url,page_title,{request_method:request_method,data_to_submit:data_to_submit});}
else{if(triggering_class=='remote_delete'){if($target){$target.addClass(_settings.delete_confirm_class);}
var delete_message=null;if($target.data('delete-confirm')){delete_message=$target.data('delete-confirm');}
else if(_settings.delete_confirm){var delete_name=$target.data('resource-name')||'';delete_message=_settings.delete_confirm.replace(/_?RESOURCE_NAME_?/g,function(match){var result=match;if(delete_name){result=result.replace(/^_|_$/g,' ');}
return result.replace(/_?RESOURCE_NAME_?/,delete_name);});}
if(delete_message&&!confirm(delete_message)){$target.removeClass(_settings.delete_confirm_class);return false;}}
else if(triggering_class=='remote_update'){if($target){var $clone=$target.clone(true,true).hide().addClass('remote_update_original');$clone.data('original-id',$clone.attr('id'));$clone.removeAttr('id');$target.after($clone);}}
$element.trigger('before_remote.jpi',{triggered_by_class:triggering_class,target:$target,element:$element});if(prevent_remote){prevent_remote=false;return false;}
var options={url:url,type:request_method,dataType:data_type,data:data_to_submit,jpi_uid:generate_uid()};if(tag=='form'){options.suppress_global_errors=true;options.success=function(response,text_status,ajax_request){request_done(triggering_class,response,ajax_request,text_status,$element,$target);};options.error=function(ajax_request,text_status,error_thrown){if(text_status=='abort'){return false;}
var errors=[];var response_type=$.jpi.parseResponseType(ajax_request.getResponseHeader('Content-type'));switch(response_type){case'json':errors=parse_json_errors(ajax_request.responseText);$element.trigger('clear_form_errors.jpi');$.each(errors,function(index,error){$element.trigger('form_error.jpi',error);});break;case'html':$element.trigger('clear_form_errors.jpi');$element.trigger('form_error.jpi',[ajax_request.responseText,ajax_request.status]);break;}
request_fail($target);return false;};options.complete=function(){request_always($element,triggering_class,$target);};$element.ajaxSubmit(options);}
else{$.ajax(options).done(function(response,text_status,ajax_request){request_done(triggering_class,response,ajax_request,text_status,$element,$target);}).fail(function(){request_fail($target);}).always(function(){request_always($element,triggering_class,$target);});}}}).on('click','.onclick_submit, .onclick_remove, .onclick_cancel_remote_update, .onclick_toggle, .onclick_clone',function(event){var $clicked=$(this);var tag=this.nodeName.toLowerCase();var selector=$clicked.data('target');var context_selector=$clicked.data('context');if($clicked.prop('disabled')){event.preventDefault();return false;}
if($clicked.hasClass('onclick_submit')){event.preventDefault();if(selector){var $form=context_selector?$(selector,$(context_selector)):$(selector);}
else if(this.nodeName.toLowerCase()=='form'){var $form=$clicked;}
else{var $form=$clicked.closest('form');}
$form.submit();}
else if($clicked.hasClass('onclick_remove')){event.preventDefault();var $target=context_selector?$(selector,$(context_selector)):$(selector);$target.add($clicked.closest('.removable')).add($clicked).first().fadeOut(function(){$(this).remove()});}else if($clicked.hasClass('onclick_cancel_remote_update')){event.preventDefault();var $target=$clicked.closest('.remote_updatable').andSelf().first();if($target.length){var $clone=$target.next('.remote_update_original');if($clone.length){if($clone.data('original-id')){$clone.attr('id',$clone.attr('original-id'));$clone.removeData('original-id');}
$target.replaceWith($clone.show());$clone.trigger('remote_update_canceled.jpi');}}}else if($clicked.hasClass('onclick_toggle')){var $container=context_selector?$(context_selector):$clicked.closest('.toggle_container');var selector=$clicked.data('target');if(!selector&&$container.length){selector='.hide_show, .show_hide';}
var $target=$container.length?$(selector,$container):$(selector);if(tag!='input'){event.preventDefault();}
$target.each(function(){$this=$(this);$closest=$this.closest('.toggle_container');if(!$closest.length||$closest.get(0)==$container.get(0)){$this.toggle();log("JPI triggering: after_toggle.jpi");$this.trigger('after_toggle.jpi');}});}else if($clicked.hasClass('onclick_clone')){event.preventDefault();var $container=get_element(selector,context_selector,$clicked);if($container==$clicked&&!$container.hasClass('clone_container')){$container=$clicked.closest('.clone_container');}
if($container.length){var $target=$('.cloneable',$container);if($target.length){$source=$target.not(':animated').first();$insert_target=$target.not(':animated').last();var $clone=$source.clone(true).show();$('input:text, input:password, input:file, textarea, select, label',$clone).val('');var number_replacement_method='randomize';var number_replacements_from_end=1;if(number_replacement_method=='randomize'){var random_numbers=[];for(var i=0;i<5;i++){random_numbers[i]=Math.round(Math.random()*100000);}}
$('[name],[id],[for]',$clone).each(function(){$element=$(this);$.each(['name','id','for'],function(index,current_attr){attr=$element.attr(current_attr);if(typeof attr!=='undefined'&&attr!==false){var current_attr_value=$element.attr(current_attr);var matches=current_attr_value.match(/([0-9]+)/g);if(matches){var numbers=matches.reverse();for(var iteration=1;iteration<=number_replacements_from_end&&iteration<=numbers.length;iteration++){var number=numbers[iteration-1];var new_attr_value=current_attr_value;switch(number_replacement_method){case'randomize':new_attr_value=replace_last(number,random_numbers[iteration],current_attr_value);break;case'increment':new_attr_value=replace_last(number,Number(number)+1,current_attr_value);break;}
$element.attr(current_attr,new_attr_value);}}}});});var date_picker_date_time_ids={};$('[data-date-time-id]',$clone).each(function(){var $this=$(this);var date_time_id=$this.attr('data-date-time-id');if(date_picker_date_time_ids.hasOwnProperty(date_time_id)){var new_date_time_id=date_picker_date_time_ids[date_time_id];}
else{var new_date_time_id=Math.round(Math.random()*10000000000);date_picker_date_time_ids[date_time_id]=new_date_time_id;}
$this.attr('data-date-time-id',new_date_time_id);});$insert_target.after($clone);log("JPI triggering: after_clone.jpi");$clone.trigger('after_clone.jpi',[$clicked,$container]);}}else{log('JPI: You wanted to clone something but we could not find the container');}}}).on('change','.onchange_show_hide',function(event){var $element=$(this);if(typeof $element.val=='function'&&$element.val()){var filter=$element.data('filter')?$element.data('filter'):'*';var prefix=$element.data('prefix')?$element.data('prefix'):'';if($element.attr('type')=='checkbox'){var value=$element.prop('checked')?'on':'off';}
else{var value=$element.val();}
if(value.match(/^[0-9]+$/)){var value_selector='.'+prefix+'value_'+value;}
else{var value_selector='.'+prefix+value.replace(/[^0-9a-z_]/ig,'_').toLowerCase();}
if($element.data('target')){$target=$element.data('context')?$($element.data('target'),$($element.data('context'))):$($element.data('target'));}
else{$target=$element.closest('.show_hide_container');if($target.length==0){$target=$element.closest('form, div, p, td, th');}}
$('.show_hide, .hide_show',$target).filter(filter).not(value_selector).hide().trigger('after_hide.jpi');$('.show_hide, .hide_show',$target).filter(filter).filter(value_selector).show().trigger('after_show.jpi');}});$document.ajaxSend(function(event,request,options){if(typeof options.jpi_uid!='undefined'){active_ajax_requests[options.jpi_uid]=request;}}).ajaxError(function(event,ajax_request,settings){if(settings.suppress_global_errors){return false;}
if(ajax_request.statusText=='abort'){return false;}
var errors=[];var response_type=$.jpi.parseResponseType(ajax_request.getResponseHeader('Content-type'));var response_text=ajax_request.responseText||'';if(response_type=='json'){errors=parse_json_errors(ajax_request.responseText);}
else if(response_text.length){errors.push(response_text);}
if(errors.length==0){if(ajax_request.statusText=='timeout'){errors.push(_settings.default_error_messages['timeout']);}
else if(typeof _settings.default_error_messages['http_'+ajax_request.status.toString()]=='string'){errors.push(_settings.default_error_messages['http_'+ajax_request.status.toString()]);}
else{errors.push(_settings.default_error_messages['other']);}}
$.each(errors,function(index,error){$document.trigger('error.jpi',error);});}).ajaxComplete(function(event,request,options){if(typeof options.jpi_uid!='undefined'){delete active_ajax_requests[options.jpi_uid];}});$document.on('error.jpi',function(event,error){if(typeof error=='string'){var message=error;}
else if(typeof error=='object'&&typeof error.message!='undefined'){var message=error.message;}
else{var message=error.toString();}
if(message.match(/[<\/[a-z]+ ?>]/i)){$(_settings.ajax_nav_selector).html(message);}
else{alert(message);}}).on('form_error.jpi','form',function(event,error){var $form=$(event.target);var message='There was a problem!';if(typeof error=='string'){message=error;}
else if(typeof error.message!='undefined'){message=error.message;}
if($('.form_errors_container',$form).length==0){$form.prepend('<div class="form_errors_container clear"></div>');}
$('.form_errors_container:first',$form).append('<div class="form_error">'+message+'</div>');}).on('clear_form_errors.jpi','form',function(event){$('.form_errors_container',event.target).remove();}).on('remote_deleted.jpi',function(event){var $target=$(event.target);$target.fadeOut(function(){$target.remove();});});$window.on('statechange',function(){var State=History.getState();var url=State.url;if(_pause_ajax_history){_pause_ajax_history=false;$document.trigger('remote_nav_fail.jpi',{triggered_by_class:'remote_nav',target:$(_settings.ajax_nav_selector)});return false;}
$.jpi.killCurrentNavRequest();ajax_nav_request=$.ajax({url:url,jpi_uid:generate_uid(),data:State.data.data_to_submit||null,type:State.data.request_method||'GET'}).done(function(html,text_status,ajax_request){$(_settings.ajax_nav_selector).html(html);if(typeof $('body').scrollTo!='undefined'){$('body').scrollTo((History.Scroll[State.id]||0),{duration:0});}
var page_title=getPageTitleFromHeader(ajax_request)||State.title;if(page_title){document.title=page_title;if($('title').length){$('title').html($('title').html().replace('<','&lt;').replace('>','&gt;').replace(' & ',' &amp; '));}}}).fail(function(){_pause_ajax_history=true;History.back();}).always(function(){$document.trigger('after_remote.jpi',{triggered_by_class:'remote_nav',target:$(_settings.ajax_nav_selector)});});});return _this;}
return init(options);};})(jQuery,window,document);(function(factory){if(typeof define==="function"&&define.amd){define(["jquery"],factory);}else{factory(jQuery);}}(function($){$.ui=$.ui||{};$.extend($.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});$.fn.extend({scrollParent:function(includeHidden){var position=this.css("position"),excludeStaticParent=position==="absolute",overflowRegex=includeHidden?/(auto|scroll|hidden)/:/(auto|scroll)/,scrollParent=this.parents().filter(function(){var parent=$(this);if(excludeStaticParent&&parent.css("position")==="static"){return false;}
return overflowRegex.test(parent.css("overflow")+parent.css("overflow-y")+parent.css("overflow-x"));}).eq(0);return position==="fixed"||!scrollParent.length?$(this[0].ownerDocument||document):scrollParent;},uniqueId:(function(){var uuid=0;return function(){return this.each(function(){if(!this.id){this.id="ui-id-"+(++uuid);}});};})(),removeUniqueId:function(){return this.each(function(){if(/^ui-id-\d+$/.test(this.id)){$(this).removeAttr("id");}});}});function focusable(element,isTabIndexNotNaN){var map,mapName,img,nodeName=element.nodeName.toLowerCase();if("area"===nodeName){map=element.parentNode;mapName=map.name;if(!element.href||!mapName||map.nodeName.toLowerCase()!=="map"){return false;}
img=$("img[usemap='#"+mapName+"']")[0];return!!img&&visible(img);}
return(/^(input|select|textarea|button|object)$/.test(nodeName)?!element.disabled:"a"===nodeName?element.href||isTabIndexNotNaN:isTabIndexNotNaN)&&visible(element);}
function visible(element){return $.expr.filters.visible(element)&&!$(element).parents().addBack().filter(function(){return $.css(this,"visibility")==="hidden";}).length;}
$.extend($.expr[":"],{data:$.expr.createPseudo?$.expr.createPseudo(function(dataName){return function(elem){return!!$.data(elem,dataName);};}):function(elem,i,match){return!!$.data(elem,match[3]);},focusable:function(element){return focusable(element,!isNaN($.attr(element,"tabindex")));},tabbable:function(element){var tabIndex=$.attr(element,"tabindex"),isTabIndexNaN=isNaN(tabIndex);return(isTabIndexNaN||tabIndex>=0)&&focusable(element,!isTabIndexNaN);}});if(!$("<a>").outerWidth(1).jquery){$.each(["Width","Height"],function(i,name){var side=name==="Width"?["Left","Right"]:["Top","Bottom"],type=name.toLowerCase(),orig={innerWidth:$.fn.innerWidth,innerHeight:$.fn.innerHeight,outerWidth:$.fn.outerWidth,outerHeight:$.fn.outerHeight};function reduce(elem,size,border,margin){$.each(side,function(){size-=parseFloat($.css(elem,"padding"+this))||0;if(border){size-=parseFloat($.css(elem,"border"+this+"Width"))||0;}
if(margin){size-=parseFloat($.css(elem,"margin"+this))||0;}});return size;}
$.fn["inner"+name]=function(size){if(size===undefined){return orig["inner"+name].call(this);}
return this.each(function(){$(this).css(type,reduce(this,size)+"px");});};$.fn["outer"+name]=function(size,margin){if(typeof size!=="number"){return orig["outer"+name].call(this,size);}
return this.each(function(){$(this).css(type,reduce(this,size,true,margin)+"px");});};});}
if(!$.fn.addBack){$.fn.addBack=function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector));};}
if($("<a>").data("a-b","a").removeData("a-b").data("a-b")){$.fn.removeData=(function(removeData){return function(key){if(arguments.length){return removeData.call(this,$.camelCase(key));}else{return removeData.call(this);}};})($.fn.removeData);}
$.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());$.fn.extend({focus:(function(orig){return function(delay,fn){return typeof delay==="number"?this.each(function(){var elem=this;setTimeout(function(){$(elem).focus();if(fn){fn.call(elem);}},delay);}):orig.apply(this,arguments);};})($.fn.focus),disableSelection:(function(){var eventType="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(eventType+".ui-disableSelection",function(event){event.preventDefault();});};})(),enableSelection:function(){return this.unbind(".ui-disableSelection");},zIndex:function(zIndex){if(zIndex!==undefined){return this.css("zIndex",zIndex);}
if(this.length){var elem=$(this[0]),position,value;while(elem.length&&elem[0]!==document){position=elem.css("position");if(position==="absolute"||position==="relative"||position==="fixed"){value=parseInt(elem.css("zIndex"),10);if(!isNaN(value)&&value!==0){return value;}}
elem=elem.parent();}}
return 0;}});$.ui.plugin={add:function(module,option,set){var i,proto=$.ui[module].prototype;for(i in set){proto.plugins[i]=proto.plugins[i]||[];proto.plugins[i].push([option,set[i]]);}},call:function(instance,name,args,allowDisconnected){var i,set=instance.plugins[name];if(!set){return;}
if(!allowDisconnected&&(!instance.element[0].parentNode||instance.element[0].parentNode.nodeType===11)){return;}
for(i=0;i<set.length;i++){if(instance.options[set[i][0]]){set[i][1].apply(instance.element,args);}}}};var widget_uuid=0,widget_slice=Array.prototype.slice;$.cleanData=(function(orig){return function(elems){var events,elem,i;for(i=0;(elem=elems[i])!=null;i++){try{events=$._data(elem,"events");if(events&&events.remove){$(elem).triggerHandler("remove");}}catch(e){}}
orig(elems);};})($.cleanData);$.widget=function(name,base,prototype){var fullName,existingConstructor,constructor,basePrototype,proxiedPrototype={},namespace=name.split(".")[0];name=name.split(".")[1];fullName=namespace+"-"+name;if(!prototype){prototype=base;base=$.Widget;}
$.expr[":"][fullName.toLowerCase()]=function(elem){return!!$.data(elem,fullName);};$[namespace]=$[namespace]||{};existingConstructor=$[namespace][name];constructor=$[namespace][name]=function(options,element){if(!this._createWidget){return new constructor(options,element);}
if(arguments.length){this._createWidget(options,element);}};$.extend(constructor,existingConstructor,{version:prototype.version,_proto:$.extend({},prototype),_childConstructors:[]});basePrototype=new base();basePrototype.options=$.widget.extend({},basePrototype.options);$.each(prototype,function(prop,value){if(!$.isFunction(value)){proxiedPrototype[prop]=value;return;}
proxiedPrototype[prop]=(function(){var _super=function(){return base.prototype[prop].apply(this,arguments);},_superApply=function(args){return base.prototype[prop].apply(this,args);};return function(){var __super=this._super,__superApply=this._superApply,returnValue;this._super=_super;this._superApply=_superApply;returnValue=value.apply(this,arguments);this._super=__super;this._superApply=__superApply;return returnValue;};})();});constructor.prototype=$.widget.extend(basePrototype,{widgetEventPrefix:existingConstructor?(basePrototype.widgetEventPrefix||name):name},proxiedPrototype,{constructor:constructor,namespace:namespace,widgetName:name,widgetFullName:fullName});if(existingConstructor){$.each(existingConstructor._childConstructors,function(i,child){var childPrototype=child.prototype;$.widget(childPrototype.namespace+"."+childPrototype.widgetName,constructor,child._proto);});delete existingConstructor._childConstructors;}else{base._childConstructors.push(constructor);}
$.widget.bridge(name,constructor);return constructor;};$.widget.extend=function(target){var input=widget_slice.call(arguments,1),inputIndex=0,inputLength=input.length,key,value;for(;inputIndex<inputLength;inputIndex++){for(key in input[inputIndex]){value=input[inputIndex][key];if(input[inputIndex].hasOwnProperty(key)&&value!==undefined){if($.isPlainObject(value)){target[key]=$.isPlainObject(target[key])?$.widget.extend({},target[key],value):$.widget.extend({},value);}else{target[key]=value;}}}}
return target;};$.widget.bridge=function(name,object){var fullName=object.prototype.widgetFullName||name;$.fn[name]=function(options){var isMethodCall=typeof options==="string",args=widget_slice.call(arguments,1),returnValue=this;if(isMethodCall){this.each(function(){var methodValue,instance=$.data(this,fullName);if(options==="instance"){returnValue=instance;return false;}
if(!instance){return $.error("cannot call methods on "+name+" prior to initialization; "+"attempted to call method '"+options+"'");}
if(!$.isFunction(instance[options])||options.charAt(0)==="_"){return $.error("no such method '"+options+"' for "+name+" widget instance");}
methodValue=instance[options].apply(instance,args);if(methodValue!==instance&&methodValue!==undefined){returnValue=methodValue&&methodValue.jquery?returnValue.pushStack(methodValue.get()):methodValue;return false;}});}else{if(args.length){options=$.widget.extend.apply(null,[options].concat(args));}
this.each(function(){var instance=$.data(this,fullName);if(instance){instance.option(options||{});if(instance._init){instance._init();}}else{$.data(this,fullName,new object(options,this));}});}
return returnValue;};};$.Widget=function(){};$.Widget._childConstructors=[];$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:false,create:null},_createWidget:function(options,element){element=$(element||this.defaultElement||this)[0];this.element=$(element);this.uuid=widget_uuid++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=$();this.hoverable=$();this.focusable=$();if(element!==this){$.data(element,this.widgetFullName,this);this._on(true,this.element,{remove:function(event){if(event.target===element){this.destroy();}}});this.document=$(element.style?element.ownerDocument:element.document||element);this.window=$(this.document[0].defaultView||this.document[0].parentWindow);}
this.options=$.widget.extend({},this.options,this._getCreateOptions(),options);this._create();this._trigger("create",null,this._getCreateEventData());this._init();},_getCreateOptions:$.noop,_getCreateEventData:$.noop,_create:$.noop,_init:$.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData($.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus");},_destroy:$.noop,widget:function(){return this.element;},option:function(key,value){var options=key,parts,curOption,i;if(arguments.length===0){return $.widget.extend({},this.options);}
if(typeof key==="string"){options={};parts=key.split(".");key=parts.shift();if(parts.length){curOption=options[key]=$.widget.extend({},this.options[key]);for(i=0;i<parts.length-1;i++){curOption[parts[i]]=curOption[parts[i]]||{};curOption=curOption[parts[i]];}
key=parts.pop();if(arguments.length===1){return curOption[key]===undefined?null:curOption[key];}
curOption[key]=value;}else{if(arguments.length===1){return this.options[key]===undefined?null:this.options[key];}
options[key]=value;}}
this._setOptions(options);return this;},_setOptions:function(options){var key;for(key in options){this._setOption(key,options[key]);}
return this;},_setOption:function(key,value){this.options[key]=value;if(key==="disabled"){this.widget().toggleClass(this.widgetFullName+"-disabled",!!value);if(value){this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus");}}
return this;},enable:function(){return this._setOptions({disabled:false});},disable:function(){return this._setOptions({disabled:true});},_on:function(suppressDisabledCheck,element,handlers){var delegateElement,instance=this;if(typeof suppressDisabledCheck!=="boolean"){handlers=element;element=suppressDisabledCheck;suppressDisabledCheck=false;}
if(!handlers){handlers=element;element=this.element;delegateElement=this.widget();}else{element=delegateElement=$(element);this.bindings=this.bindings.add(element);}
$.each(handlers,function(event,handler){function handlerProxy(){if(!suppressDisabledCheck&&(instance.options.disabled===true||$(this).hasClass("ui-state-disabled"))){return;}
return(typeof handler==="string"?instance[handler]:handler).apply(instance,arguments);}
if(typeof handler!=="string"){handlerProxy.guid=handler.guid=handler.guid||handlerProxy.guid||$.guid++;}
var match=event.match(/^([\w:-]*)\s*(.*)$/),eventName=match[1]+instance.eventNamespace,selector=match[2];if(selector){delegateElement.delegate(selector,eventName,handlerProxy);}else{element.bind(eventName,handlerProxy);}});},_off:function(element,eventName){eventName=(eventName||"").split(" ").join(this.eventNamespace+" ")+
this.eventNamespace;element.unbind(eventName).undelegate(eventName);this.bindings=$(this.bindings.not(element).get());this.focusable=$(this.focusable.not(element).get());this.hoverable=$(this.hoverable.not(element).get());},_delay:function(handler,delay){function handlerProxy(){return(typeof handler==="string"?instance[handler]:handler).apply(instance,arguments);}
var instance=this;return setTimeout(handlerProxy,delay||0);},_hoverable:function(element){this.hoverable=this.hoverable.add(element);this._on(element,{mouseenter:function(event){$(event.currentTarget).addClass("ui-state-hover");},mouseleave:function(event){$(event.currentTarget).removeClass("ui-state-hover");}});},_focusable:function(element){this.focusable=this.focusable.add(element);this._on(element,{focusin:function(event){$(event.currentTarget).addClass("ui-state-focus");},focusout:function(event){$(event.currentTarget).removeClass("ui-state-focus");}});},_trigger:function(type,event,data){var prop,orig,callback=this.options[type];data=data||{};event=$.Event(event);event.type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase();event.target=this.element[0];orig=event.originalEvent;if(orig){for(prop in orig){if(!(prop in event)){event[prop]=orig[prop];}}}
this.element.trigger(event,data);return!($.isFunction(callback)&&callback.apply(this.element[0],[event].concat(data))===false||event.isDefaultPrevented());}};$.each({show:"fadeIn",hide:"fadeOut"},function(method,defaultEffect){$.Widget.prototype["_"+method]=function(element,options,callback){if(typeof options==="string"){options={effect:options};}
var hasOptions,effectName=!options?method:options===true||typeof options==="number"?defaultEffect:options.effect||defaultEffect;options=options||{};if(typeof options==="number"){options={duration:options};}
hasOptions=!$.isEmptyObject(options);options.complete=callback;if(options.delay){element.delay(options.delay);}
if(hasOptions&&$.effects&&$.effects.effect[effectName]){element[method](options);}else if(effectName!==method&&element[effectName]){element[effectName](options.duration,options.easing,callback);}else{element.queue(function(next){$(this)[method]();if(callback){callback.call(element[0]);}
next();});}};});var widget=$.widget;var mouseHandled=false;$(document).mouseup(function(){mouseHandled=false;});var mouse=$.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var that=this;this.element.bind("mousedown."+this.widgetName,function(event){return that._mouseDown(event);}).bind("click."+this.widgetName,function(event){if(true===$.data(event.target,that.widgetName+".preventClickEvent")){$.removeData(event.target,that.widgetName+".preventClickEvent");event.stopImmediatePropagation();return false;}});this.started=false;},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);if(this._mouseMoveDelegate){this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);}},_mouseDown:function(event){if(mouseHandled){return;}
this._mouseMoved=false;(this._mouseStarted&&this._mouseUp(event));this._mouseDownEvent=event;var that=this,btnIsLeft=(event.which===1),elIsCancel=(typeof this.options.cancel==="string"&&event.target.nodeName?$(event.target).closest(this.options.cancel).length:false);if(!btnIsLeft||elIsCancel||!this._mouseCapture(event)){return true;}
this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){that.mouseDelayMet=true;},this.options.delay);}
if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=(this._mouseStart(event)!==false);if(!this._mouseStarted){event.preventDefault();return true;}}
if(true===$.data(event.target,this.widgetName+".preventClickEvent")){$.removeData(event.target,this.widgetName+".preventClickEvent");}
this._mouseMoveDelegate=function(event){return that._mouseMove(event);};this._mouseUpDelegate=function(event){return that._mouseUp(event);};this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);event.preventDefault();mouseHandled=true;return true;},_mouseMove:function(event){if(this._mouseMoved){if($.ui.ie&&(!document.documentMode||document.documentMode<9)&&!event.button){return this._mouseUp(event);}else if(!event.which){return this._mouseUp(event);}}
if(event.which||event.button){this._mouseMoved=true;}
if(this._mouseStarted){this._mouseDrag(event);return event.preventDefault();}
if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,event)!==false);(this._mouseStarted?this._mouseDrag(event):this._mouseUp(event));}
return!this._mouseStarted;},_mouseUp:function(event){this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(event.target===this._mouseDownEvent.target){$.data(event.target,this.widgetName+".preventClickEvent",true);}
this._mouseStop(event);}
mouseHandled=false;return false;},_mouseDistanceMet:function(event){return(Math.max(Math.abs(this._mouseDownEvent.pageX-event.pageX),Math.abs(this._mouseDownEvent.pageY-event.pageY))>=this.options.distance);},_mouseDelayMet:function(){return this.mouseDelayMet;},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true;}});(function(){$.ui=$.ui||{};var cachedScrollbarWidth,supportsOffsetFractions,max=Math.max,abs=Math.abs,round=Math.round,rhorizontal=/left|center|right/,rvertical=/top|center|bottom/,roffset=/[\+\-]\d+(\.[\d]+)?%?/,rposition=/^\w+/,rpercent=/%$/,_position=$.fn.position;function getOffsets(offsets,width,height){return[parseFloat(offsets[0])*(rpercent.test(offsets[0])?width / 100:1),parseFloat(offsets[1])*(rpercent.test(offsets[1])?height / 100:1)];}
function parseCss(element,property){return parseInt($.css(element,property),10)||0;}
function getDimensions(elem){var raw=elem[0];if(raw.nodeType===9){return{width:elem.width(),height:elem.height(),offset:{top:0,left:0}};}
if($.isWindow(raw)){return{width:elem.width(),height:elem.height(),offset:{top:elem.scrollTop(),left:elem.scrollLeft()}};}
if(raw.preventDefault){return{width:0,height:0,offset:{top:raw.pageY,left:raw.pageX}};}
return{width:elem.outerWidth(),height:elem.outerHeight(),offset:elem.offset()};}
$.position={scrollbarWidth:function(){if(cachedScrollbarWidth!==undefined){return cachedScrollbarWidth;}
var w1,w2,div=$("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),innerDiv=div.children()[0];$("body").append(div);w1=innerDiv.offsetWidth;div.css("overflow","scroll");w2=innerDiv.offsetWidth;if(w1===w2){w2=div[0].clientWidth;}
div.remove();return(cachedScrollbarWidth=w1-w2);},getScrollInfo:function(within){var overflowX=within.isWindow||within.isDocument?"":within.element.css("overflow-x"),overflowY=within.isWindow||within.isDocument?"":within.element.css("overflow-y"),hasOverflowX=overflowX==="scroll"||(overflowX==="auto"&&within.width<within.element[0].scrollWidth),hasOverflowY=overflowY==="scroll"||(overflowY==="auto"&&within.height<within.element[0].scrollHeight);return{width:hasOverflowY?$.position.scrollbarWidth():0,height:hasOverflowX?$.position.scrollbarWidth():0};},getWithinInfo:function(element){var withinElement=$(element||window),isWindow=$.isWindow(withinElement[0]),isDocument=!!withinElement[0]&&withinElement[0].nodeType===9;return{element:withinElement,isWindow:isWindow,isDocument:isDocument,offset:withinElement.offset()||{left:0,top:0},scrollLeft:withinElement.scrollLeft(),scrollTop:withinElement.scrollTop(),width:isWindow||isDocument?withinElement.width():withinElement.outerWidth(),height:isWindow||isDocument?withinElement.height():withinElement.outerHeight()};}};$.fn.position=function(options){if(!options||!options.of){return _position.apply(this,arguments);}
options=$.extend({},options);var atOffset,targetWidth,targetHeight,targetOffset,basePosition,dimensions,target=$(options.of),within=$.position.getWithinInfo(options.within),scrollInfo=$.position.getScrollInfo(within),collision=(options.collision||"flip").split(" "),offsets={};dimensions=getDimensions(target);if(target[0].preventDefault){options.at="left top";}
targetWidth=dimensions.width;targetHeight=dimensions.height;targetOffset=dimensions.offset;basePosition=$.extend({},targetOffset);$.each(["my","at"],function(){var pos=(options[this]||"").split(" "),horizontalOffset,verticalOffset;if(pos.length===1){pos=rhorizontal.test(pos[0])?pos.concat(["center"]):rvertical.test(pos[0])?["center"].concat(pos):["center","center"];}
pos[0]=rhorizontal.test(pos[0])?pos[0]:"center";pos[1]=rvertical.test(pos[1])?pos[1]:"center";horizontalOffset=roffset.exec(pos[0]);verticalOffset=roffset.exec(pos[1]);offsets[this]=[horizontalOffset?horizontalOffset[0]:0,verticalOffset?verticalOffset[0]:0];options[this]=[rposition.exec(pos[0])[0],rposition.exec(pos[1])[0]];});if(collision.length===1){collision[1]=collision[0];}
if(options.at[0]==="right"){basePosition.left+=targetWidth;}else if(options.at[0]==="center"){basePosition.left+=targetWidth / 2;}
if(options.at[1]==="bottom"){basePosition.top+=targetHeight;}else if(options.at[1]==="center"){basePosition.top+=targetHeight / 2;}
atOffset=getOffsets(offsets.at,targetWidth,targetHeight);basePosition.left+=atOffset[0];basePosition.top+=atOffset[1];return this.each(function(){var collisionPosition,using,elem=$(this),elemWidth=elem.outerWidth(),elemHeight=elem.outerHeight(),marginLeft=parseCss(this,"marginLeft"),marginTop=parseCss(this,"marginTop"),collisionWidth=elemWidth+marginLeft+parseCss(this,"marginRight")+scrollInfo.width,collisionHeight=elemHeight+marginTop+parseCss(this,"marginBottom")+scrollInfo.height,position=$.extend({},basePosition),myOffset=getOffsets(offsets.my,elem.outerWidth(),elem.outerHeight());if(options.my[0]==="right"){position.left-=elemWidth;}else if(options.my[0]==="center"){position.left-=elemWidth / 2;}
if(options.my[1]==="bottom"){position.top-=elemHeight;}else if(options.my[1]==="center"){position.top-=elemHeight / 2;}
position.left+=myOffset[0];position.top+=myOffset[1];if(!supportsOffsetFractions){position.left=round(position.left);position.top=round(position.top);}
collisionPosition={marginLeft:marginLeft,marginTop:marginTop};$.each(["left","top"],function(i,dir){if($.ui.position[collision[i]]){$.ui.position[collision[i]][dir](position,{targetWidth:targetWidth,targetHeight:targetHeight,elemWidth:elemWidth,elemHeight:elemHeight,collisionPosition:collisionPosition,collisionWidth:collisionWidth,collisionHeight:collisionHeight,offset:[atOffset[0]+myOffset[0],atOffset[1]+myOffset[1]],my:options.my,at:options.at,within:within,elem:elem});}});if(options.using){using=function(props){var left=targetOffset.left-position.left,right=left+targetWidth-elemWidth,top=targetOffset.top-position.top,bottom=top+targetHeight-elemHeight,feedback={target:{element:target,left:targetOffset.left,top:targetOffset.top,width:targetWidth,height:targetHeight},element:{element:elem,left:position.left,top:position.top,width:elemWidth,height:elemHeight},horizontal:right<0?"left":left>0?"right":"center",vertical:bottom<0?"top":top>0?"bottom":"middle"};if(targetWidth<elemWidth&&abs(left+right)<targetWidth){feedback.horizontal="center";}
if(targetHeight<elemHeight&&abs(top+bottom)<targetHeight){feedback.vertical="middle";}
if(max(abs(left),abs(right))>max(abs(top),abs(bottom))){feedback.important="horizontal";}else{feedback.important="vertical";}
options.using.call(this,props,feedback);};}
elem.offset($.extend(position,{using:using}));});};$.ui.position={fit:{left:function(position,data){var within=data.within,withinOffset=within.isWindow?within.scrollLeft:within.offset.left,outerWidth=within.width,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=withinOffset-collisionPosLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-withinOffset,newOverRight;if(data.collisionWidth>outerWidth){if(overLeft>0&&overRight<=0){newOverRight=position.left+overLeft+data.collisionWidth-outerWidth-withinOffset;position.left+=overLeft-newOverRight;}else if(overRight>0&&overLeft<=0){position.left=withinOffset;}else{if(overLeft>overRight){position.left=withinOffset+outerWidth-data.collisionWidth;}else{position.left=withinOffset;}}}else if(overLeft>0){position.left+=overLeft;}else if(overRight>0){position.left-=overRight;}else{position.left=max(position.left-collisionPosLeft,position.left);}},top:function(position,data){var within=data.within,withinOffset=within.isWindow?within.scrollTop:within.offset.top,outerHeight=data.within.height,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=withinOffset-collisionPosTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-withinOffset,newOverBottom;if(data.collisionHeight>outerHeight){if(overTop>0&&overBottom<=0){newOverBottom=position.top+overTop+data.collisionHeight-outerHeight-withinOffset;position.top+=overTop-newOverBottom;}else if(overBottom>0&&overTop<=0){position.top=withinOffset;}else{if(overTop>overBottom){position.top=withinOffset+outerHeight-data.collisionHeight;}else{position.top=withinOffset;}}}else if(overTop>0){position.top+=overTop;}else if(overBottom>0){position.top-=overBottom;}else{position.top=max(position.top-collisionPosTop,position.top);}}},flip:{left:function(position,data){var within=data.within,withinOffset=within.offset.left+within.scrollLeft,outerWidth=within.width,offsetLeft=within.isWindow?within.scrollLeft:within.offset.left,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=collisionPosLeft-offsetLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-offsetLeft,myOffset=data.my[0]==="left"?-data.elemWidth:data.my[0]==="right"?data.elemWidth:0,atOffset=data.at[0]==="left"?data.targetWidth:data.at[0]==="right"?-data.targetWidth:0,offset=-2*data.offset[0],newOverRight,newOverLeft;if(overLeft<0){newOverRight=position.left+myOffset+atOffset+offset+data.collisionWidth-outerWidth-withinOffset;if(newOverRight<0||newOverRight<abs(overLeft)){position.left+=myOffset+atOffset+offset;}}else if(overRight>0){newOverLeft=position.left-data.collisionPosition.marginLeft+myOffset+atOffset+offset-offsetLeft;if(newOverLeft>0||abs(newOverLeft)<overRight){position.left+=myOffset+atOffset+offset;}}},top:function(position,data){var within=data.within,withinOffset=within.offset.top+within.scrollTop,outerHeight=within.height,offsetTop=within.isWindow?within.scrollTop:within.offset.top,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=collisionPosTop-offsetTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-offsetTop,top=data.my[1]==="top",myOffset=top?-data.elemHeight:data.my[1]==="bottom"?data.elemHeight:0,atOffset=data.at[1]==="top"?data.targetHeight:data.at[1]==="bottom"?-data.targetHeight:0,offset=-2*data.offset[1],newOverTop,newOverBottom;if(overTop<0){newOverBottom=position.top+myOffset+atOffset+offset+data.collisionHeight-outerHeight-withinOffset;if(newOverBottom<0||newOverBottom<abs(overTop)){position.top+=myOffset+atOffset+offset;}}else if(overBottom>0){newOverTop=position.top-data.collisionPosition.marginTop+myOffset+atOffset+offset-offsetTop;if(newOverTop>0||abs(newOverTop)<overBottom){position.top+=myOffset+atOffset+offset;}}}},flipfit:{left:function(){$.ui.position.flip.left.apply(this,arguments);$.ui.position.fit.left.apply(this,arguments);},top:function(){$.ui.position.flip.top.apply(this,arguments);$.ui.position.fit.top.apply(this,arguments);}}};(function(){var testElement,testElementParent,testElementStyle,offsetLeft,i,body=document.getElementsByTagName("body")[0],div=document.createElement("div");testElement=document.createElement(body?"div":"body");testElementStyle={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};if(body){$.extend(testElementStyle,{position:"absolute",left:"-1000px",top:"-1000px"});}
for(i in testElementStyle){testElement.style[i]=testElementStyle[i];}
testElement.appendChild(div);testElementParent=body||document.documentElement;testElementParent.insertBefore(testElement,testElementParent.firstChild);div.style.cssText="position: absolute; left: 10.7432222px;";offsetLeft=$(div).offset().left;supportsOffsetFractions=offsetLeft>10&&offsetLeft<11;testElement.innerHTML="";testElementParent.removeChild(testElement);})();})();var position=$.ui.position;$.widget("ui.draggable",$.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false,drag:null,start:null,stop:null},_create:function(){if(this.options.helper==="original"){this._setPositionRelative();}
if(this.options.addClasses){this.element.addClass("ui-draggable");}
if(this.options.disabled){this.element.addClass("ui-draggable-disabled");}
this._setHandleClassName();this._mouseInit();},_setOption:function(key,value){this._super(key,value);if(key==="handle"){this._removeHandleClassName();this._setHandleClassName();}},_destroy:function(){if((this.helper||this.element).is(".ui-draggable-dragging")){this.destroyOnClear=true;return;}
this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._removeHandleClassName();this._mouseDestroy();},_mouseCapture:function(event){var o=this.options;this._blurActiveElement(event);if(this.helper||o.disabled||$(event.target).closest(".ui-resizable-handle").length>0){return false;}
this.handle=this._getHandle(event);if(!this.handle){return false;}
this._blockFrames(o.iframeFix===true?"iframe":o.iframeFix);return true;},_blockFrames:function(selector){this.iframeBlocks=this.document.find(selector).map(function(){var iframe=$(this);return $("<div>").css("position","absolute").appendTo(iframe.parent()).outerWidth(iframe.outerWidth()).outerHeight(iframe.outerHeight()).offset(iframe.offset())[0];});},_unblockFrames:function(){if(this.iframeBlocks){this.iframeBlocks.remove();delete this.iframeBlocks;}},_blurActiveElement:function(event){var document=this.document[0];if(!this.handleElement.is(event.target)){return;}
try{if(document.activeElement&&document.activeElement.nodeName.toLowerCase()!=="body"){$(document.activeElement).blur();}}catch(error){}},_mouseStart:function(event){var o=this.options;this.helper=this._createHelper(event);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();if($.ui.ddmanager){$.ui.ddmanager.current=this;}
this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent(true);this.offsetParent=this.helper.offsetParent();this.hasFixedAncestor=this.helper.parents().filter(function(){return $(this).css("position")==="fixed";}).length>0;this.positionAbs=this.element.offset();this._refreshOffsets(event);this.originalPosition=this.position=this._generatePosition(event,false);this.originalPageX=event.pageX;this.originalPageY=event.pageY;(o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt));this._setContainment();if(this._trigger("start",event)===false){this._clear();return false;}
this._cacheHelperProportions();if($.ui.ddmanager&&!o.dropBehaviour){$.ui.ddmanager.prepareOffsets(this,event);}
this._normalizeRightBottom();this._mouseDrag(event,true);if($.ui.ddmanager){$.ui.ddmanager.dragStart(this,event);}
return true;},_refreshOffsets:function(event){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:false,parent:this._getParentOffset(),relative:this._getRelativeOffset()};this.offset.click={left:event.pageX-this.offset.left,top:event.pageY-this.offset.top};},_mouseDrag:function(event,noPropagation){if(this.hasFixedAncestor){this.offset.parent=this._getParentOffset();}
this.position=this._generatePosition(event,true);this.positionAbs=this._convertPositionTo("absolute");if(!noPropagation){var ui=this._uiHash();if(this._trigger("drag",event,ui)===false){this._mouseUp({});return false;}
this.position=ui.position;}
this.helper[0].style.left=this.position.left+"px";this.helper[0].style.top=this.position.top+"px";if($.ui.ddmanager){$.ui.ddmanager.drag(this,event);}
return false;},_mouseStop:function(event){var that=this,dropped=false;if($.ui.ddmanager&&!this.options.dropBehaviour){dropped=$.ui.ddmanager.drop(this,event);}
if(this.dropped){dropped=this.dropped;this.dropped=false;}
if((this.options.revert==="invalid"&&!dropped)||(this.options.revert==="valid"&&dropped)||this.options.revert===true||($.isFunction(this.options.revert)&&this.options.revert.call(this.element,dropped))){$(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(that._trigger("stop",event)!==false){that._clear();}});}else{if(this._trigger("stop",event)!==false){this._clear();}}
return false;},_mouseUp:function(event){this._unblockFrames();if($.ui.ddmanager){$.ui.ddmanager.dragStop(this,event);}
if(this.handleElement.is(event.target)){this.element.focus();}
return $.ui.mouse.prototype._mouseUp.call(this,event);},cancel:function(){if(this.helper.is(".ui-draggable-dragging")){this._mouseUp({});}else{this._clear();}
return this;},_getHandle:function(event){return this.options.handle?!!$(event.target).closest(this.element.find(this.options.handle)).length:true;},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element;this.handleElement.addClass("ui-draggable-handle");},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle");},_createHelper:function(event){var o=this.options,helperIsFunction=$.isFunction(o.helper),helper=helperIsFunction?$(o.helper.apply(this.element[0],[event])):(o.helper==="clone"?this.element.clone().removeAttr("id"):this.element);if(!helper.parents("body").length){helper.appendTo((o.appendTo==="parent"?this.element[0].parentNode:o.appendTo));}
if(helperIsFunction&&helper[0]===this.element[0]){this._setPositionRelative();}
if(helper[0]!==this.element[0]&&!(/(fixed|absolute)/).test(helper.css("position"))){helper.css("position","absolute");}
return helper;},_setPositionRelative:function(){if(!(/^(?:r|a|f)/).test(this.element.css("position"))){this.element[0].style.position="relative";}},_adjustOffsetFromHelper:function(obj){if(typeof obj==="string"){obj=obj.split(" ");}
if($.isArray(obj)){obj={left:+obj[0],top:+obj[1]||0};}
if("left"in obj){this.offset.click.left=obj.left+this.margins.left;}
if("right"in obj){this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left;}
if("top"in obj){this.offset.click.top=obj.top+this.margins.top;}
if("bottom"in obj){this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top;}},_isRootNode:function(element){return(/(html|body)/i).test(element.tagName)||element===this.document[0];},_getParentOffset:function(){var po=this.offsetParent.offset(),document=this.document[0];if(this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])){po.left+=this.scrollParent.scrollLeft();po.top+=this.scrollParent.scrollTop();}
if(this._isRootNode(this.offsetParent[0])){po={top:0,left:0};}
return{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)};},_getRelativeOffset:function(){if(this.cssPosition!=="relative"){return{top:0,left:0};}
var p=this.element.position(),scrollIsRootNode=this._isRootNode(this.scrollParent[0]);return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+(!scrollIsRootNode?this.scrollParent.scrollTop():0),left:p.left-(parseInt(this.helper.css("left"),10)||0)+(!scrollIsRootNode?this.scrollParent.scrollLeft():0)};},_cacheMargins:function(){this.margins={left:(parseInt(this.element.css("marginLeft"),10)||0),top:(parseInt(this.element.css("marginTop"),10)||0),right:(parseInt(this.element.css("marginRight"),10)||0),bottom:(parseInt(this.element.css("marginBottom"),10)||0)};},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()};},_setContainment:function(){var isUserScrollable,c,ce,o=this.options,document=this.document[0];this.relativeContainer=null;if(!o.containment){this.containment=null;return;}
if(o.containment==="window"){this.containment=[$(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,$(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,$(window).scrollLeft()+$(window).width()-this.helperProportions.width-this.margins.left,$(window).scrollTop()+($(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return;}
if(o.containment==="document"){this.containment=[0,0,$(document).width()-this.helperProportions.width-this.margins.left,($(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return;}
if(o.containment.constructor===Array){this.containment=o.containment;return;}
if(o.containment==="parent"){o.containment=this.helper[0].parentNode;}
c=$(o.containment);ce=c[0];if(!ce){return;}
isUserScrollable=/(scroll|auto)/.test(c.css("overflow"));this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(isUserScrollable?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-
(parseInt(c.css("borderRightWidth"),10)||0)-
(parseInt(c.css("paddingRight"),10)||0)-
this.helperProportions.width-
this.margins.left-
this.margins.right,(isUserScrollable?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-
(parseInt(c.css("borderBottomWidth"),10)||0)-
(parseInt(c.css("paddingBottom"),10)||0)-
this.helperProportions.height-
this.margins.top-
this.margins.bottom];this.relativeContainer=c;},_convertPositionTo:function(d,pos){if(!pos){pos=this.position;}
var mod=d==="absolute"?1:-1,scrollIsRootNode=this._isRootNode(this.scrollParent[0]);return{top:(pos.top+
this.offset.relative.top*mod+
this.offset.parent.top*mod-
((this.cssPosition==="fixed"?-this.offset.scroll.top:(scrollIsRootNode?0:this.offset.scroll.top))*mod)),left:(pos.left+
this.offset.relative.left*mod+
this.offset.parent.left*mod-
((this.cssPosition==="fixed"?-this.offset.scroll.left:(scrollIsRootNode?0:this.offset.scroll.left))*mod))};},_generatePosition:function(event,constrainPosition){var containment,co,top,left,o=this.options,scrollIsRootNode=this._isRootNode(this.scrollParent[0]),pageX=event.pageX,pageY=event.pageY;if(!scrollIsRootNode||!this.offset.scroll){this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()};}
if(constrainPosition){if(this.containment){if(this.relativeContainer){co=this.relativeContainer.offset();containment=[this.containment[0]+co.left,this.containment[1]+co.top,this.containment[2]+co.left,this.containment[3]+co.top];}else{containment=this.containment;}
if(event.pageX-this.offset.click.left<containment[0]){pageX=containment[0]+this.offset.click.left;}
if(event.pageY-this.offset.click.top<containment[1]){pageY=containment[1]+this.offset.click.top;}
if(event.pageX-this.offset.click.left>containment[2]){pageX=containment[2]+this.offset.click.left;}
if(event.pageY-this.offset.click.top>containment[3]){pageY=containment[3]+this.offset.click.top;}}
if(o.grid){top=o.grid[1]?this.originalPageY+Math.round((pageY-this.originalPageY)/ o.grid[1])*o.grid[1]:this.originalPageY;pageY=containment?((top-this.offset.click.top>=containment[1]||top-this.offset.click.top>containment[3])?top:((top-this.offset.click.top>=containment[1])?top-o.grid[1]:top+o.grid[1])):top;left=o.grid[0]?this.originalPageX+Math.round((pageX-this.originalPageX)/ o.grid[0])*o.grid[0]:this.originalPageX;pageX=containment?((left-this.offset.click.left>=containment[0]||left-this.offset.click.left>containment[2])?left:((left-this.offset.click.left>=containment[0])?left-o.grid[0]:left+o.grid[0])):left;}
if(o.axis==="y"){pageX=this.originalPageX;}
if(o.axis==="x"){pageY=this.originalPageY;}}
return{top:(pageY-
this.offset.click.top-
this.offset.relative.top-
this.offset.parent.top+
(this.cssPosition==="fixed"?-this.offset.scroll.top:(scrollIsRootNode?0:this.offset.scroll.top))),left:(pageX-
this.offset.click.left-
this.offset.relative.left-
this.offset.parent.left+
(this.cssPosition==="fixed"?-this.offset.scroll.left:(scrollIsRootNode?0:this.offset.scroll.left)))};},_clear:function(){this.helper.removeClass("ui-draggable-dragging");if(this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval){this.helper.remove();}
this.helper=null;this.cancelHelperRemoval=false;if(this.destroyOnClear){this.destroy();}},_normalizeRightBottom:function(){if(this.options.axis!=="y"&&this.helper.css("right")!=="auto"){this.helper.width(this.helper.width());this.helper.css("right","auto");}
if(this.options.axis!=="x"&&this.helper.css("bottom")!=="auto"){this.helper.height(this.helper.height());this.helper.css("bottom","auto");}},_trigger:function(type,event,ui){ui=ui||this._uiHash();$.ui.plugin.call(this,type,[event,ui,this],true);if(/^(drag|start|stop)/.test(type)){this.positionAbs=this._convertPositionTo("absolute");ui.offset=this.positionAbs;}
return $.Widget.prototype._trigger.call(this,type,event,ui);},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs};}});$.ui.plugin.add("draggable","connectToSortable",{start:function(event,ui,draggable){var uiSortable=$.extend({},ui,{item:draggable.element});draggable.sortables=[];$(draggable.options.connectToSortable).each(function(){var sortable=$(this).sortable("instance");if(sortable&&!sortable.options.disabled){draggable.sortables.push(sortable);sortable.refreshPositions();sortable._trigger("activate",event,uiSortable);}});},stop:function(event,ui,draggable){var uiSortable=$.extend({},ui,{item:draggable.element});draggable.cancelHelperRemoval=false;$.each(draggable.sortables,function(){var sortable=this;if(sortable.isOver){sortable.isOver=0;draggable.cancelHelperRemoval=true;sortable.cancelHelperRemoval=false;sortable._storedCSS={position:sortable.placeholder.css("position"),top:sortable.placeholder.css("top"),left:sortable.placeholder.css("left")};sortable._mouseStop(event);sortable.options.helper=sortable.options._helper;}else{sortable.cancelHelperRemoval=true;sortable._trigger("deactivate",event,uiSortable);}});},drag:function(event,ui,draggable){$.each(draggable.sortables,function(){var innermostIntersecting=false,sortable=this;sortable.positionAbs=draggable.positionAbs;sortable.helperProportions=draggable.helperProportions;sortable.offset.click=draggable.offset.click;if(sortable._intersectsWith(sortable.containerCache)){innermostIntersecting=true;$.each(draggable.sortables,function(){this.positionAbs=draggable.positionAbs;this.helperProportions=draggable.helperProportions;this.offset.click=draggable.offset.click;if(this!==sortable&&this._intersectsWith(this.containerCache)&&$.contains(sortable.element[0],this.element[0])){innermostIntersecting=false;}
return innermostIntersecting;});}
if(innermostIntersecting){if(!sortable.isOver){sortable.isOver=1;draggable._parent=ui.helper.parent();sortable.currentItem=ui.helper.appendTo(sortable.element).data("ui-sortable-item",true);sortable.options._helper=sortable.options.helper;sortable.options.helper=function(){return ui.helper[0];};event.target=sortable.currentItem[0];sortable._mouseCapture(event,true);sortable._mouseStart(event,true,true);sortable.offset.click.top=draggable.offset.click.top;sortable.offset.click.left=draggable.offset.click.left;sortable.offset.parent.left-=draggable.offset.parent.left-
sortable.offset.parent.left;sortable.offset.parent.top-=draggable.offset.parent.top-
sortable.offset.parent.top;draggable._trigger("toSortable",event);draggable.dropped=sortable.element;$.each(draggable.sortables,function(){this.refreshPositions();});draggable.currentItem=draggable.element;sortable.fromOutside=draggable;}
if(sortable.currentItem){sortable._mouseDrag(event);ui.position=sortable.position;}}else{if(sortable.isOver){sortable.isOver=0;sortable.cancelHelperRemoval=true;sortable.options._revert=sortable.options.revert;sortable.options.revert=false;sortable._trigger("out",event,sortable._uiHash(sortable));sortable._mouseStop(event,true);sortable.options.revert=sortable.options._revert;sortable.options.helper=sortable.options._helper;if(sortable.placeholder){sortable.placeholder.remove();}
ui.helper.appendTo(draggable._parent);draggable._refreshOffsets(event);ui.position=draggable._generatePosition(event,true);draggable._trigger("fromSortable",event);draggable.dropped=false;$.each(draggable.sortables,function(){this.refreshPositions();});}}});}});$.ui.plugin.add("draggable","cursor",{start:function(event,ui,instance){var t=$("body"),o=instance.options;if(t.css("cursor")){o._cursor=t.css("cursor");}
t.css("cursor",o.cursor);},stop:function(event,ui,instance){var o=instance.options;if(o._cursor){$("body").css("cursor",o._cursor);}}});$.ui.plugin.add("draggable","opacity",{start:function(event,ui,instance){var t=$(ui.helper),o=instance.options;if(t.css("opacity")){o._opacity=t.css("opacity");}
t.css("opacity",o.opacity);},stop:function(event,ui,instance){var o=instance.options;if(o._opacity){$(ui.helper).css("opacity",o._opacity);}}});$.ui.plugin.add("draggable","scroll",{start:function(event,ui,i){if(!i.scrollParentNotHidden){i.scrollParentNotHidden=i.helper.scrollParent(false);}
if(i.scrollParentNotHidden[0]!==i.document[0]&&i.scrollParentNotHidden[0].tagName!=="HTML"){i.overflowOffset=i.scrollParentNotHidden.offset();}},drag:function(event,ui,i){var o=i.options,scrolled=false,scrollParent=i.scrollParentNotHidden[0],document=i.document[0];if(scrollParent!==document&&scrollParent.tagName!=="HTML"){if(!o.axis||o.axis!=="x"){if((i.overflowOffset.top+scrollParent.offsetHeight)-event.pageY<o.scrollSensitivity){scrollParent.scrollTop=scrolled=scrollParent.scrollTop+o.scrollSpeed;}else if(event.pageY-i.overflowOffset.top<o.scrollSensitivity){scrollParent.scrollTop=scrolled=scrollParent.scrollTop-o.scrollSpeed;}}
if(!o.axis||o.axis!=="y"){if((i.overflowOffset.left+scrollParent.offsetWidth)-event.pageX<o.scrollSensitivity){scrollParent.scrollLeft=scrolled=scrollParent.scrollLeft+o.scrollSpeed;}else if(event.pageX-i.overflowOffset.left<o.scrollSensitivity){scrollParent.scrollLeft=scrolled=scrollParent.scrollLeft-o.scrollSpeed;}}}else{if(!o.axis||o.axis!=="x"){if(event.pageY-$(document).scrollTop()<o.scrollSensitivity){scrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed);}else if($(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity){scrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed);}}
if(!o.axis||o.axis!=="y"){if(event.pageX-$(document).scrollLeft()<o.scrollSensitivity){scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed);}else if($(window).width()-(event.pageX-$(document).scrollLeft())<o.scrollSensitivity){scrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed);}}}
if(scrolled!==false&&$.ui.ddmanager&&!o.dropBehaviour){$.ui.ddmanager.prepareOffsets(i,event);}}});$.ui.plugin.add("draggable","snap",{start:function(event,ui,i){var o=i.options;i.snapElements=[];$(o.snap.constructor!==String?(o.snap.items||":data(ui-draggable)"):o.snap).each(function(){var $t=$(this),$o=$t.offset();if(this!==i.element[0]){i.snapElements.push({item:this,width:$t.outerWidth(),height:$t.outerHeight(),top:$o.top,left:$o.left});}});},drag:function(event,ui,inst){var ts,bs,ls,rs,l,r,t,b,i,first,o=inst.options,d=o.snapTolerance,x1=ui.offset.left,x2=x1+inst.helperProportions.width,y1=ui.offset.top,y2=y1+inst.helperProportions.height;for(i=inst.snapElements.length-1;i>=0;i--){l=inst.snapElements[i].left-inst.margins.left;r=l+inst.snapElements[i].width;t=inst.snapElements[i].top-inst.margins.top;b=t+inst.snapElements[i].height;if(x2<l-d||x1>r+d||y2<t-d||y1>b+d||!$.contains(inst.snapElements[i].item.ownerDocument,inst.snapElements[i].item)){if(inst.snapElements[i].snapping){(inst.options.snap.release&&inst.options.snap.release.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})));}
inst.snapElements[i].snapping=false;continue;}
if(o.snapMode!=="inner"){ts=Math.abs(t-y2)<=d;bs=Math.abs(b-y1)<=d;ls=Math.abs(l-x2)<=d;rs=Math.abs(r-x1)<=d;if(ts){ui.position.top=inst._convertPositionTo("relative",{top:t-inst.helperProportions.height,left:0}).top;}
if(bs){ui.position.top=inst._convertPositionTo("relative",{top:b,left:0}).top;}
if(ls){ui.position.left=inst._convertPositionTo("relative",{top:0,left:l-inst.helperProportions.width}).left;}
if(rs){ui.position.left=inst._convertPositionTo("relative",{top:0,left:r}).left;}}
first=(ts||bs||ls||rs);if(o.snapMode!=="outer"){ts=Math.abs(t-y1)<=d;bs=Math.abs(b-y2)<=d;ls=Math.abs(l-x1)<=d;rs=Math.abs(r-x2)<=d;if(ts){ui.position.top=inst._convertPositionTo("relative",{top:t,left:0}).top;}
if(bs){ui.position.top=inst._convertPositionTo("relative",{top:b-inst.helperProportions.height,left:0}).top;}
if(ls){ui.position.left=inst._convertPositionTo("relative",{top:0,left:l}).left;}
if(rs){ui.position.left=inst._convertPositionTo("relative",{top:0,left:r-inst.helperProportions.width}).left;}}
if(!inst.snapElements[i].snapping&&(ts||bs||ls||rs||first)){(inst.options.snap.snap&&inst.options.snap.snap.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})));}
inst.snapElements[i].snapping=(ts||bs||ls||rs||first);}}});$.ui.plugin.add("draggable","stack",{start:function(event,ui,instance){var min,o=instance.options,group=$.makeArray($(o.stack)).sort(function(a,b){return(parseInt($(a).css("zIndex"),10)||0)-(parseInt($(b).css("zIndex"),10)||0);});if(!group.length){return;}
min=parseInt($(group[0]).css("zIndex"),10)||0;$(group).each(function(i){$(this).css("zIndex",min+i);});this.css("zIndex",(min+group.length));}});$.ui.plugin.add("draggable","zIndex",{start:function(event,ui,instance){var t=$(ui.helper),o=instance.options;if(t.css("zIndex")){o._zIndex=t.css("zIndex");}
t.css("zIndex",o.zIndex);},stop:function(event,ui,instance){var o=instance.options;if(o._zIndex){$(ui.helper).css("zIndex",o._zIndex);}}});var draggable=$.ui.draggable;$.widget("ui.droppable",{version:"1.11.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var proportions,o=this.options,accept=o.accept;this.isover=false;this.isout=true;this.accept=$.isFunction(accept)?accept:function(d){return d.is(accept);};this.proportions=function(){if(arguments.length){proportions=arguments[0];}else{return proportions?proportions:proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};}};this._addToManager(o.scope);o.addClasses&&this.element.addClass("ui-droppable");},_addToManager:function(scope){$.ui.ddmanager.droppables[scope]=$.ui.ddmanager.droppables[scope]||[];$.ui.ddmanager.droppables[scope].push(this);},_splice:function(drop){var i=0;for(;i<drop.length;i++){if(drop[i]===this){drop.splice(i,1);}}},_destroy:function(){var drop=$.ui.ddmanager.droppables[this.options.scope];this._splice(drop);this.element.removeClass("ui-droppable ui-droppable-disabled");},_setOption:function(key,value){if(key==="accept"){this.accept=$.isFunction(value)?value:function(d){return d.is(value);};}else if(key==="scope"){var drop=$.ui.ddmanager.droppables[this.options.scope];this._splice(drop);this._addToManager(value);}
this._super(key,value);},_activate:function(event){var draggable=$.ui.ddmanager.current;if(this.options.activeClass){this.element.addClass(this.options.activeClass);}
if(draggable){this._trigger("activate",event,this.ui(draggable));}},_deactivate:function(event){var draggable=$.ui.ddmanager.current;if(this.options.activeClass){this.element.removeClass(this.options.activeClass);}
if(draggable){this._trigger("deactivate",event,this.ui(draggable));}},_over:function(event){var draggable=$.ui.ddmanager.current;if(!draggable||(draggable.currentItem||draggable.element)[0]===this.element[0]){return;}
if(this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){if(this.options.hoverClass){this.element.addClass(this.options.hoverClass);}
this._trigger("over",event,this.ui(draggable));}},_out:function(event){var draggable=$.ui.ddmanager.current;if(!draggable||(draggable.currentItem||draggable.element)[0]===this.element[0]){return;}
if(this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass);}
this._trigger("out",event,this.ui(draggable));}},_drop:function(event,custom){var draggable=custom||$.ui.ddmanager.current,childrenIntersection=false;if(!draggable||(draggable.currentItem||draggable.element)[0]===this.element[0]){return false;}
this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var inst=$(this).droppable("instance");if(inst.options.greedy&&!inst.options.disabled&&inst.options.scope===draggable.options.scope&&inst.accept.call(inst.element[0],(draggable.currentItem||draggable.element))&&$.ui.intersect(draggable,$.extend(inst,{offset:inst.element.offset()}),inst.options.tolerance,event)){childrenIntersection=true;return false;}});if(childrenIntersection){return false;}
if(this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){if(this.options.activeClass){this.element.removeClass(this.options.activeClass);}
if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass);}
this._trigger("drop",event,this.ui(draggable));return this.element;}
return false;},ui:function(c){return{draggable:(c.currentItem||c.element),helper:c.helper,position:c.position,offset:c.positionAbs};}});$.ui.intersect=(function(){function isOverAxis(x,reference,size){return(x>=reference)&&(x<(reference+size));}
return function(draggable,droppable,toleranceMode,event){if(!droppable.offset){return false;}
var x1=(draggable.positionAbs||draggable.position.absolute).left+draggable.margins.left,y1=(draggable.positionAbs||draggable.position.absolute).top+draggable.margins.top,x2=x1+draggable.helperProportions.width,y2=y1+draggable.helperProportions.height,l=droppable.offset.left,t=droppable.offset.top,r=l+droppable.proportions().width,b=t+droppable.proportions().height;switch(toleranceMode){case"fit":return(l<=x1&&x2<=r&&t<=y1&&y2<=b);case"intersect":return(l<x1+(draggable.helperProportions.width / 2)&&x2-(draggable.helperProportions.width / 2)<r&&t<y1+(draggable.helperProportions.height / 2)&&y2-(draggable.helperProportions.height / 2)<b);case"pointer":return isOverAxis(event.pageY,t,droppable.proportions().height)&&isOverAxis(event.pageX,l,droppable.proportions().width);case"touch":return((y1>=t&&y1<=b)||(y2>=t&&y2<=b)||(y1<t&&y2>b))&&((x1>=l&&x1<=r)||(x2>=l&&x2<=r)||(x1<l&&x2>r));default:return false;}};})();$.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,event){var i,j,m=$.ui.ddmanager.droppables[t.options.scope]||[],type=event?event.type:null,list=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();droppablesLoop:for(i=0;i<m.length;i++){if(m[i].options.disabled||(t&&!m[i].accept.call(m[i].element[0],(t.currentItem||t.element)))){continue;}
for(j=0;j<list.length;j++){if(list[j]===m[i].element[0]){m[i].proportions().height=0;continue droppablesLoop;}}
m[i].visible=m[i].element.css("display")!=="none";if(!m[i].visible){continue;}
if(type==="mousedown"){m[i]._activate.call(m[i],event);}
m[i].offset=m[i].element.offset();m[i].proportions({width:m[i].element[0].offsetWidth,height:m[i].element[0].offsetHeight});}},drop:function(draggable,event){var dropped=false;$.each(($.ui.ddmanager.droppables[draggable.options.scope]||[]).slice(),function(){if(!this.options){return;}
if(!this.options.disabled&&this.visible&&$.ui.intersect(draggable,this,this.options.tolerance,event)){dropped=this._drop.call(this,event)||dropped;}
if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){this.isout=true;this.isover=false;this._deactivate.call(this,event);}});return dropped;},dragStart:function(draggable,event){draggable.element.parentsUntil("body").bind("scroll.droppable",function(){if(!draggable.options.refreshPositions){$.ui.ddmanager.prepareOffsets(draggable,event);}});},drag:function(draggable,event){if(draggable.options.refreshPositions){$.ui.ddmanager.prepareOffsets(draggable,event);}
$.each($.ui.ddmanager.droppables[draggable.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible){return;}
var parentInstance,scope,parent,intersects=$.ui.intersect(draggable,this,this.options.tolerance,event),c=!intersects&&this.isover?"isout":(intersects&&!this.isover?"isover":null);if(!c){return;}
if(this.options.greedy){scope=this.options.scope;parent=this.element.parents(":data(ui-droppable)").filter(function(){return $(this).droppable("instance").options.scope===scope;});if(parent.length){parentInstance=$(parent[0]).droppable("instance");parentInstance.greedyChild=(c==="isover");}}
if(parentInstance&&c==="isover"){parentInstance.isover=false;parentInstance.isout=true;parentInstance._out.call(parentInstance,event);}
this[c]=true;this[c==="isout"?"isover":"isout"]=false;this[c==="isover"?"_over":"_out"].call(this,event);if(parentInstance&&c==="isout"){parentInstance.isout=false;parentInstance.isover=true;parentInstance._over.call(parentInstance,event);}});},dragStop:function(draggable,event){draggable.element.parentsUntil("body").unbind("scroll.droppable");if(!draggable.options.refreshPositions){$.ui.ddmanager.prepareOffsets(draggable,event);}}};var droppable=$.ui.droppable;$.widget("ui.resizable",$.ui.mouse,{version:"1.11.4",widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(value){return parseInt(value,10)||0;},_isNumber:function(value){return!isNaN(parseInt(value,10));},_hasScroll:function(el,a){if($(el).css("overflow")==="hidden"){return false;}
var scroll=(a&&a==="left")?"scrollLeft":"scrollTop",has=false;if(el[scroll]>0){return true;}
el[scroll]=1;has=(el[scroll]>0);el[scroll]=0;return has;},_create:function(){var n,i,handle,axis,hname,that=this,o=this.options;this.element.addClass("ui-resizable");$.extend(this,{_aspectRatio:!!(o.aspectRatio),aspectRatio:o.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:o.helper||o.ghost||o.animate?o.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)){this.element.wrap($("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize();}
this.handles=o.handles||(!$(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});this._handles=$();if(this.handles.constructor===String){if(this.handles==="all"){this.handles="n,e,s,w,se,sw,ne,nw";}
n=this.handles.split(",");this.handles={};for(i=0;i<n.length;i++){handle=$.trim(n[i]);hname="ui-resizable-"+handle;axis=$("<div class='ui-resizable-handle "+hname+"'></div>");axis.css({zIndex:o.zIndex});if("se"===handle){axis.addClass("ui-icon ui-icon-gripsmall-diagonal-se");}
this.handles[handle]=".ui-resizable-"+handle;this.element.append(axis);}}
this._renderAxis=function(target){var i,axis,padPos,padWrapper;target=target||this.element;for(i in this.handles){if(this.handles[i].constructor===String){this.handles[i]=this.element.children(this.handles[i]).first().show();}else if(this.handles[i].jquery||this.handles[i].nodeType){this.handles[i]=$(this.handles[i]);this._on(this.handles[i],{"mousedown":that._mouseDown});}
if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)){axis=$(this.handles[i],this.element);padWrapper=/sw|ne|nw|se|n|s/.test(i)?axis.outerHeight():axis.outerWidth();padPos=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join("");target.css(padPos,padWrapper);this._proportionallyResize();}
this._handles=this._handles.add(this.handles[i]);}};this._renderAxis(this.element);this._handles=this._handles.add(this.element.find(".ui-resizable-handle"));this._handles.disableSelection();this._handles.mouseover(function(){if(!that.resizing){if(this.className){axis=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);}
that.axis=axis&&axis[1]?axis[1]:"se";}});if(o.autoHide){this._handles.hide();$(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(o.disabled){return;}
$(this).removeClass("ui-resizable-autohide");that._handles.show();}).mouseleave(function(){if(o.disabled){return;}
if(!that.resizing){$(this).addClass("ui-resizable-autohide");that._handles.hide();}});}
this._mouseInit();},_destroy:function(){this._mouseDestroy();var wrapper,_destroy=function(exp){$(exp).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove();};if(this.elementIsWrapper){_destroy(this.element);wrapper=this.element;this.originalElement.css({position:wrapper.css("position"),width:wrapper.outerWidth(),height:wrapper.outerHeight(),top:wrapper.css("top"),left:wrapper.css("left")}).insertAfter(wrapper);wrapper.remove();}
this.originalElement.css("resize",this.originalResizeStyle);_destroy(this.originalElement);return this;},_mouseCapture:function(event){var i,handle,capture=false;for(i in this.handles){handle=$(this.handles[i])[0];if(handle===event.target||$.contains(handle,event.target)){capture=true;}}
return!this.options.disabled&&capture;},_mouseStart:function(event){var curleft,curtop,cursor,o=this.options,el=this.element;this.resizing=true;this._renderProxy();curleft=this._num(this.helper.css("left"));curtop=this._num(this.helper.css("top"));if(o.containment){curleft+=$(o.containment).scrollLeft()||0;curtop+=$(o.containment).scrollTop()||0;}
this.offset=this.helper.offset();this.position={left:curleft,top:curtop};this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:el.width(),height:el.height()};this.originalSize=this._helper?{width:el.outerWidth(),height:el.outerHeight()}:{width:el.width(),height:el.height()};this.sizeDiff={width:el.outerWidth()-el.width(),height:el.outerHeight()-el.height()};this.originalPosition={left:curleft,top:curtop};this.originalMousePosition={left:event.pageX,top:event.pageY};this.aspectRatio=(typeof o.aspectRatio==="number")?o.aspectRatio:((this.originalSize.width / this.originalSize.height)||1);cursor=$(".ui-resizable-"+this.axis).css("cursor");$("body").css("cursor",cursor==="auto"?this.axis+"-resize":cursor);el.addClass("ui-resizable-resizing");this._propagate("start",event);return true;},_mouseDrag:function(event){var data,props,smp=this.originalMousePosition,a=this.axis,dx=(event.pageX-smp.left)||0,dy=(event.pageY-smp.top)||0,trigger=this._change[a];this._updatePrevProperties();if(!trigger){return false;}
data=trigger.apply(this,[event,dx,dy]);this._updateVirtualBoundaries(event.shiftKey);if(this._aspectRatio||event.shiftKey){data=this._updateRatio(data,event);}
data=this._respectSize(data,event);this._updateCache(data);this._propagate("resize",event);props=this._applyChanges();if(!this._helper&&this._proportionallyResizeElements.length){this._proportionallyResize();}
if(!$.isEmptyObject(props)){this._updatePrevProperties();this._trigger("resize",event,this.ui());this._applyChanges();}
return false;},_mouseStop:function(event){this.resizing=false;var pr,ista,soffseth,soffsetw,s,left,top,o=this.options,that=this;if(this._helper){pr=this._proportionallyResizeElements;ista=pr.length&&(/textarea/i).test(pr[0].nodeName);soffseth=ista&&this._hasScroll(pr[0],"left")?0:that.sizeDiff.height;soffsetw=ista?0:that.sizeDiff.width;s={width:(that.helper.width()-soffsetw),height:(that.helper.height()-soffseth)};left=(parseInt(that.element.css("left"),10)+
(that.position.left-that.originalPosition.left))||null;top=(parseInt(that.element.css("top"),10)+
(that.position.top-that.originalPosition.top))||null;if(!o.animate){this.element.css($.extend(s,{top:top,left:left}));}
that.helper.height(that.size.height);that.helper.width(that.size.width);if(this._helper&&!o.animate){this._proportionallyResize();}}
$("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",event);if(this._helper){this.helper.remove();}
return false;},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left};this.prevSize={width:this.size.width,height:this.size.height};},_applyChanges:function(){var props={};if(this.position.top!==this.prevPosition.top){props.top=this.position.top+"px";}
if(this.position.left!==this.prevPosition.left){props.left=this.position.left+"px";}
if(this.size.width!==this.prevSize.width){props.width=this.size.width+"px";}
if(this.size.height!==this.prevSize.height){props.height=this.size.height+"px";}
this.helper.css(props);return props;},_updateVirtualBoundaries:function(forceAspectRatio){var pMinWidth,pMaxWidth,pMinHeight,pMaxHeight,b,o=this.options;b={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:Infinity,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:Infinity};if(this._aspectRatio||forceAspectRatio){pMinWidth=b.minHeight*this.aspectRatio;pMinHeight=b.minWidth / this.aspectRatio;pMaxWidth=b.maxHeight*this.aspectRatio;pMaxHeight=b.maxWidth / this.aspectRatio;if(pMinWidth>b.minWidth){b.minWidth=pMinWidth;}
if(pMinHeight>b.minHeight){b.minHeight=pMinHeight;}
if(pMaxWidth<b.maxWidth){b.maxWidth=pMaxWidth;}
if(pMaxHeight<b.maxHeight){b.maxHeight=pMaxHeight;}}
this._vBoundaries=b;},_updateCache:function(data){this.offset=this.helper.offset();if(this._isNumber(data.left)){this.position.left=data.left;}
if(this._isNumber(data.top)){this.position.top=data.top;}
if(this._isNumber(data.height)){this.size.height=data.height;}
if(this._isNumber(data.width)){this.size.width=data.width;}},_updateRatio:function(data){var cpos=this.position,csize=this.size,a=this.axis;if(this._isNumber(data.height)){data.width=(data.height*this.aspectRatio);}else if(this._isNumber(data.width)){data.height=(data.width / this.aspectRatio);}
if(a==="sw"){data.left=cpos.left+(csize.width-data.width);data.top=null;}
if(a==="nw"){data.top=cpos.top+(csize.height-data.height);data.left=cpos.left+(csize.width-data.width);}
return data;},_respectSize:function(data){var o=this._vBoundaries,a=this.axis,ismaxw=this._isNumber(data.width)&&o.maxWidth&&(o.maxWidth<data.width),ismaxh=this._isNumber(data.height)&&o.maxHeight&&(o.maxHeight<data.height),isminw=this._isNumber(data.width)&&o.minWidth&&(o.minWidth>data.width),isminh=this._isNumber(data.height)&&o.minHeight&&(o.minHeight>data.height),dw=this.originalPosition.left+this.originalSize.width,dh=this.position.top+this.size.height,cw=/sw|nw|w/.test(a),ch=/nw|ne|n/.test(a);if(isminw){data.width=o.minWidth;}
if(isminh){data.height=o.minHeight;}
if(ismaxw){data.width=o.maxWidth;}
if(ismaxh){data.height=o.maxHeight;}
if(isminw&&cw){data.left=dw-o.minWidth;}
if(ismaxw&&cw){data.left=dw-o.maxWidth;}
if(isminh&&ch){data.top=dh-o.minHeight;}
if(ismaxh&&ch){data.top=dh-o.maxHeight;}
if(!data.width&&!data.height&&!data.left&&data.top){data.top=null;}else if(!data.width&&!data.height&&!data.top&&data.left){data.left=null;}
return data;},_getPaddingPlusBorderDimensions:function(element){var i=0,widths=[],borders=[element.css("borderTopWidth"),element.css("borderRightWidth"),element.css("borderBottomWidth"),element.css("borderLeftWidth")],paddings=[element.css("paddingTop"),element.css("paddingRight"),element.css("paddingBottom"),element.css("paddingLeft")];for(;i<4;i++){widths[i]=(parseInt(borders[i],10)||0);widths[i]+=(parseInt(paddings[i],10)||0);}
return{height:widths[0]+widths[2],width:widths[1]+widths[3]};},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length){return;}
var prel,i=0,element=this.helper||this.element;for(;i<this._proportionallyResizeElements.length;i++){prel=this._proportionallyResizeElements[i];if(!this.outerDimensions){this.outerDimensions=this._getPaddingPlusBorderDimensions(prel);}
prel.css({height:(element.height()-this.outerDimensions.height)||0,width:(element.width()-this.outerDimensions.width)||0});}},_renderProxy:function(){var el=this.element,o=this.options;this.elementOffset=el.offset();if(this._helper){this.helper=this.helper||$("<div style='overflow:hidden;'></div>");this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++o.zIndex});this.helper.appendTo("body").disableSelection();}else{this.helper=this.element;}},_change:{e:function(event,dx){return{width:this.originalSize.width+dx};},w:function(event,dx){var cs=this.originalSize,sp=this.originalPosition;return{left:sp.left+dx,width:cs.width-dx};},n:function(event,dx,dy){var cs=this.originalSize,sp=this.originalPosition;return{top:sp.top+dy,height:cs.height-dy};},s:function(event,dx,dy){return{height:this.originalSize.height+dy};},se:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]));},sw:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]));},ne:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]));},nw:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]));}},_propagate:function(n,event){$.ui.plugin.call(this,n,[event,this.ui()]);(n!=="resize"&&this._trigger(n,event,this.ui()));},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition};}});$.ui.plugin.add("resizable","animate",{stop:function(event){var that=$(this).resizable("instance"),o=that.options,pr=that._proportionallyResizeElements,ista=pr.length&&(/textarea/i).test(pr[0].nodeName),soffseth=ista&&that._hasScroll(pr[0],"left")?0:that.sizeDiff.height,soffsetw=ista?0:that.sizeDiff.width,style={width:(that.size.width-soffsetw),height:(that.size.height-soffseth)},left=(parseInt(that.element.css("left"),10)+
(that.position.left-that.originalPosition.left))||null,top=(parseInt(that.element.css("top"),10)+
(that.position.top-that.originalPosition.top))||null;that.element.animate($.extend(style,top&&left?{top:top,left:left}:{}),{duration:o.animateDuration,easing:o.animateEasing,step:function(){var data={width:parseInt(that.element.css("width"),10),height:parseInt(that.element.css("height"),10),top:parseInt(that.element.css("top"),10),left:parseInt(that.element.css("left"),10)};if(pr&&pr.length){$(pr[0]).css({width:data.width,height:data.height});}
that._updateCache(data);that._propagate("resize",event);}});}});$.ui.plugin.add("resizable","containment",{start:function(){var element,p,co,ch,cw,width,height,that=$(this).resizable("instance"),o=that.options,el=that.element,oc=o.containment,ce=(oc instanceof $)?oc.get(0):(/parent/.test(oc))?el.parent().get(0):oc;if(!ce){return;}
that.containerElement=$(ce);if(/document/.test(oc)||oc===document){that.containerOffset={left:0,top:0};that.containerPosition={left:0,top:0};that.parentData={element:$(document),left:0,top:0,width:$(document).width(),height:$(document).height()||document.body.parentNode.scrollHeight};}else{element=$(ce);p=[];$(["Top","Right","Left","Bottom"]).each(function(i,name){p[i]=that._num(element.css("padding"+name));});that.containerOffset=element.offset();that.containerPosition=element.position();that.containerSize={height:(element.innerHeight()-p[3]),width:(element.innerWidth()-p[1])};co=that.containerOffset;ch=that.containerSize.height;cw=that.containerSize.width;width=(that._hasScroll(ce,"left")?ce.scrollWidth:cw);height=(that._hasScroll(ce)?ce.scrollHeight:ch);that.parentData={element:ce,left:co.left,top:co.top,width:width,height:height};}},resize:function(event){var woset,hoset,isParent,isOffsetRelative,that=$(this).resizable("instance"),o=that.options,co=that.containerOffset,cp=that.position,pRatio=that._aspectRatio||event.shiftKey,cop={top:0,left:0},ce=that.containerElement,continueResize=true;if(ce[0]!==document&&(/static/).test(ce.css("position"))){cop=co;}
if(cp.left<(that._helper?co.left:0)){that.size.width=that.size.width+
(that._helper?(that.position.left-co.left):(that.position.left-cop.left));if(pRatio){that.size.height=that.size.width / that.aspectRatio;continueResize=false;}
that.position.left=o.helper?co.left:0;}
if(cp.top<(that._helper?co.top:0)){that.size.height=that.size.height+
(that._helper?(that.position.top-co.top):that.position.top);if(pRatio){that.size.width=that.size.height*that.aspectRatio;continueResize=false;}
that.position.top=that._helper?co.top:0;}
isParent=that.containerElement.get(0)===that.element.parent().get(0);isOffsetRelative=/relative|absolute/.test(that.containerElement.css("position"));if(isParent&&isOffsetRelative){that.offset.left=that.parentData.left+that.position.left;that.offset.top=that.parentData.top+that.position.top;}else{that.offset.left=that.element.offset().left;that.offset.top=that.element.offset().top;}
woset=Math.abs(that.sizeDiff.width+
(that._helper?that.offset.left-cop.left:(that.offset.left-co.left)));hoset=Math.abs(that.sizeDiff.height+
(that._helper?that.offset.top-cop.top:(that.offset.top-co.top)));if(woset+that.size.width>=that.parentData.width){that.size.width=that.parentData.width-woset;if(pRatio){that.size.height=that.size.width / that.aspectRatio;continueResize=false;}}
if(hoset+that.size.height>=that.parentData.height){that.size.height=that.parentData.height-hoset;if(pRatio){that.size.width=that.size.height*that.aspectRatio;continueResize=false;}}
if(!continueResize){that.position.left=that.prevPosition.left;that.position.top=that.prevPosition.top;that.size.width=that.prevSize.width;that.size.height=that.prevSize.height;}},stop:function(){var that=$(this).resizable("instance"),o=that.options,co=that.containerOffset,cop=that.containerPosition,ce=that.containerElement,helper=$(that.helper),ho=helper.offset(),w=helper.outerWidth()-that.sizeDiff.width,h=helper.outerHeight()-that.sizeDiff.height;if(that._helper&&!o.animate&&(/relative/).test(ce.css("position"))){$(this).css({left:ho.left-cop.left-co.left,width:w,height:h});}
if(that._helper&&!o.animate&&(/static/).test(ce.css("position"))){$(this).css({left:ho.left-cop.left-co.left,width:w,height:h});}}});$.ui.plugin.add("resizable","alsoResize",{start:function(){var that=$(this).resizable("instance"),o=that.options;$(o.alsoResize).each(function(){var el=$(this);el.data("ui-resizable-alsoresize",{width:parseInt(el.width(),10),height:parseInt(el.height(),10),left:parseInt(el.css("left"),10),top:parseInt(el.css("top"),10)});});},resize:function(event,ui){var that=$(this).resizable("instance"),o=that.options,os=that.originalSize,op=that.originalPosition,delta={height:(that.size.height-os.height)||0,width:(that.size.width-os.width)||0,top:(that.position.top-op.top)||0,left:(that.position.left-op.left)||0};$(o.alsoResize).each(function(){var el=$(this),start=$(this).data("ui-resizable-alsoresize"),style={},css=el.parents(ui.originalElement[0]).length?["width","height"]:["width","height","top","left"];$.each(css,function(i,prop){var sum=(start[prop]||0)+(delta[prop]||0);if(sum&&sum>=0){style[prop]=sum||null;}});el.css(style);});},stop:function(){$(this).removeData("resizable-alsoresize");}});$.ui.plugin.add("resizable","ghost",{start:function(){var that=$(this).resizable("instance"),o=that.options,cs=that.size;that.ghost=that.originalElement.clone();that.ghost.css({opacity:0.25,display:"block",position:"relative",height:cs.height,width:cs.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof o.ghost==="string"?o.ghost:"");that.ghost.appendTo(that.helper);},resize:function(){var that=$(this).resizable("instance");if(that.ghost){that.ghost.css({position:"relative",height:that.size.height,width:that.size.width});}},stop:function(){var that=$(this).resizable("instance");if(that.ghost&&that.helper){that.helper.get(0).removeChild(that.ghost.get(0));}}});$.ui.plugin.add("resizable","grid",{resize:function(){var outerDimensions,that=$(this).resizable("instance"),o=that.options,cs=that.size,os=that.originalSize,op=that.originalPosition,a=that.axis,grid=typeof o.grid==="number"?[o.grid,o.grid]:o.grid,gridX=(grid[0]||1),gridY=(grid[1]||1),ox=Math.round((cs.width-os.width)/ gridX)*gridX,oy=Math.round((cs.height-os.height)/ gridY)*gridY,newWidth=os.width+ox,newHeight=os.height+oy,isMaxWidth=o.maxWidth&&(o.maxWidth<newWidth),isMaxHeight=o.maxHeight&&(o.maxHeight<newHeight),isMinWidth=o.minWidth&&(o.minWidth>newWidth),isMinHeight=o.minHeight&&(o.minHeight>newHeight);o.grid=grid;if(isMinWidth){newWidth+=gridX;}
if(isMinHeight){newHeight+=gridY;}
if(isMaxWidth){newWidth-=gridX;}
if(isMaxHeight){newHeight-=gridY;}
if(/^(se|s|e)$/.test(a)){that.size.width=newWidth;that.size.height=newHeight;}else if(/^(ne)$/.test(a)){that.size.width=newWidth;that.size.height=newHeight;that.position.top=op.top-oy;}else if(/^(sw)$/.test(a)){that.size.width=newWidth;that.size.height=newHeight;that.position.left=op.left-ox;}else{if(newHeight-gridY<=0||newWidth-gridX<=0){outerDimensions=that._getPaddingPlusBorderDimensions(this);}
if(newHeight-gridY>0){that.size.height=newHeight;that.position.top=op.top-oy;}else{newHeight=gridY-outerDimensions.height;that.size.height=newHeight;that.position.top=op.top+os.height-newHeight;}
if(newWidth-gridX>0){that.size.width=newWidth;that.position.left=op.left-ox;}else{newWidth=gridX-outerDimensions.width;that.size.width=newWidth;that.position.left=op.left+os.width-newWidth;}}}});var resizable=$.ui.resizable;var selectable=$.widget("ui.selectable",$.ui.mouse,{version:"1.11.4",options:{appendTo:"body",autoRefresh:true,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var selectees,that=this;this.element.addClass("ui-selectable");this.dragged=false;this.refresh=function(){selectees=$(that.options.filter,that.element[0]);selectees.addClass("ui-selectee");selectees.each(function(){var $this=$(this),pos=$this.offset();$.data(this,"selectable-item",{element:this,$element:$this,left:pos.left,top:pos.top,right:pos.left+$this.outerWidth(),bottom:pos.top+$this.outerHeight(),startselected:false,selected:$this.hasClass("ui-selected"),selecting:$this.hasClass("ui-selecting"),unselecting:$this.hasClass("ui-unselecting")});});};this.refresh();this.selectees=selectees.addClass("ui-selectee");this._mouseInit();this.helper=$("<div class='ui-selectable-helper'></div>");},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled");this._mouseDestroy();},_mouseStart:function(event){var that=this,options=this.options;this.opos=[event.pageX,event.pageY];if(this.options.disabled){return;}
this.selectees=$(options.filter,this.element[0]);this._trigger("start",event);$(options.appendTo).append(this.helper);this.helper.css({"left":event.pageX,"top":event.pageY,"width":0,"height":0});if(options.autoRefresh){this.refresh();}
this.selectees.filter(".ui-selected").each(function(){var selectee=$.data(this,"selectable-item");selectee.startselected=true;if(!event.metaKey&&!event.ctrlKey){selectee.$element.removeClass("ui-selected");selectee.selected=false;selectee.$element.addClass("ui-unselecting");selectee.unselecting=true;that._trigger("unselecting",event,{unselecting:selectee.element});}});$(event.target).parents().addBack().each(function(){var doSelect,selectee=$.data(this,"selectable-item");if(selectee){doSelect=(!event.metaKey&&!event.ctrlKey)||!selectee.$element.hasClass("ui-selected");selectee.$element.removeClass(doSelect?"ui-unselecting":"ui-selected").addClass(doSelect?"ui-selecting":"ui-unselecting");selectee.unselecting=!doSelect;selectee.selecting=doSelect;selectee.selected=doSelect;if(doSelect){that._trigger("selecting",event,{selecting:selectee.element});}else{that._trigger("unselecting",event,{unselecting:selectee.element});}
return false;}});},_mouseDrag:function(event){this.dragged=true;if(this.options.disabled){return;}
var tmp,that=this,options=this.options,x1=this.opos[0],y1=this.opos[1],x2=event.pageX,y2=event.pageY;if(x1>x2){tmp=x2;x2=x1;x1=tmp;}
if(y1>y2){tmp=y2;y2=y1;y1=tmp;}
this.helper.css({left:x1,top:y1,width:x2-x1,height:y2-y1});this.selectees.each(function(){var selectee=$.data(this,"selectable-item"),hit=false;if(!selectee||selectee.element===that.element[0]){return;}
if(options.tolerance==="touch"){hit=(!(selectee.left>x2||selectee.right<x1||selectee.top>y2||selectee.bottom<y1));}else if(options.tolerance==="fit"){hit=(selectee.left>x1&&selectee.right<x2&&selectee.top>y1&&selectee.bottom<y2);}
if(hit){if(selectee.selected){selectee.$element.removeClass("ui-selected");selectee.selected=false;}
if(selectee.unselecting){selectee.$element.removeClass("ui-unselecting");selectee.unselecting=false;}
if(!selectee.selecting){selectee.$element.addClass("ui-selecting");selectee.selecting=true;that._trigger("selecting",event,{selecting:selectee.element});}}else{if(selectee.selecting){if((event.metaKey||event.ctrlKey)&&selectee.startselected){selectee.$element.removeClass("ui-selecting");selectee.selecting=false;selectee.$element.addClass("ui-selected");selectee.selected=true;}else{selectee.$element.removeClass("ui-selecting");selectee.selecting=false;if(selectee.startselected){selectee.$element.addClass("ui-unselecting");selectee.unselecting=true;}
that._trigger("unselecting",event,{unselecting:selectee.element});}}
if(selectee.selected){if(!event.metaKey&&!event.ctrlKey&&!selectee.startselected){selectee.$element.removeClass("ui-selected");selectee.selected=false;selectee.$element.addClass("ui-unselecting");selectee.unselecting=true;that._trigger("unselecting",event,{unselecting:selectee.element});}}}});return false;},_mouseStop:function(event){var that=this;this.dragged=false;$(".ui-unselecting",this.element[0]).each(function(){var selectee=$.data(this,"selectable-item");selectee.$element.removeClass("ui-unselecting");selectee.unselecting=false;selectee.startselected=false;that._trigger("unselected",event,{unselected:selectee.element});});$(".ui-selecting",this.element[0]).each(function(){var selectee=$.data(this,"selectable-item");selectee.$element.removeClass("ui-selecting").addClass("ui-selected");selectee.selecting=false;selectee.selected=true;selectee.startselected=true;that._trigger("selected",event,{selected:selectee.element});});this._trigger("stop",event);this.helper.remove();return false;}});var sortable=$.widget("ui.sortable",$.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:false,options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(x,reference,size){return(x>=reference)&&(x<(reference+size));},_isFloating:function(item){return(/left|right/).test(item.css("float"))||(/inline|table-cell/).test(item.css("display"));},_create:function(){this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.offset=this.element.offset();this._mouseInit();this._setHandleClassName();this.ready=true;},_setOption:function(key,value){this._super(key,value);if(key==="handle"){this._setHandleClassName();}},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle");$.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle");});},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle");this._mouseDestroy();for(var i=this.items.length-1;i>=0;i--){this.items[i].item.removeData(this.widgetName+"-item");}
return this;},_mouseCapture:function(event,overrideHandle){var currentItem=null,validHandle=false,that=this;if(this.reverting){return false;}
if(this.options.disabled||this.options.type==="static"){return false;}
this._refreshItems(event);$(event.target).parents().each(function(){if($.data(this,that.widgetName+"-item")===that){currentItem=$(this);return false;}});if($.data(event.target,that.widgetName+"-item")===that){currentItem=$(event.target);}
if(!currentItem){return false;}
if(this.options.handle&&!overrideHandle){$(this.options.handle,currentItem).find("*").addBack().each(function(){if(this===event.target){validHandle=true;}});if(!validHandle){return false;}}
this.currentItem=currentItem;this._removeCurrentsFromItems();return true;},_mouseStart:function(event,overrideHandle,noActivation){var i,body,o=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(event);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};$.extend(this.offset,{click:{left:event.pageX-this.offset.left,top:event.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(event);this.originalPageX=event.pageX;this.originalPageY=event.pageY;(o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt));this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};if(this.helper[0]!==this.currentItem[0]){this.currentItem.hide();}
this._createPlaceholder();if(o.containment){this._setContainment();}
if(o.cursor&&o.cursor!=="auto"){body=this.document.find("body");this.storedCursor=body.css("cursor");body.css("cursor",o.cursor);this.storedStylesheet=$("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(body);}
if(o.opacity){if(this.helper.css("opacity")){this._storedOpacity=this.helper.css("opacity");}
this.helper.css("opacity",o.opacity);}
if(o.zIndex){if(this.helper.css("zIndex")){this._storedZIndex=this.helper.css("zIndex");}
this.helper.css("zIndex",o.zIndex);}
if(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"){this.overflowOffset=this.scrollParent.offset();}
this._trigger("start",event,this._uiHash());if(!this._preserveHelperProportions){this._cacheHelperProportions();}
if(!noActivation){for(i=this.containers.length-1;i>=0;i--){this.containers[i]._trigger("activate",event,this._uiHash(this));}}
if($.ui.ddmanager){$.ui.ddmanager.current=this;}
if($.ui.ddmanager&&!o.dropBehaviour){$.ui.ddmanager.prepareOffsets(this,event);}
this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(event);return true;},_mouseDrag:function(event){var i,item,itemElement,intersection,o=this.options,scrolled=false;this.position=this._generatePosition(event);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs;}
if(this.options.scroll){if(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"){if((this.overflowOffset.top+this.scrollParent[0].offsetHeight)-event.pageY<o.scrollSensitivity){this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop+o.scrollSpeed;}else if(event.pageY-this.overflowOffset.top<o.scrollSensitivity){this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop-o.scrollSpeed;}
if((this.overflowOffset.left+this.scrollParent[0].offsetWidth)-event.pageX<o.scrollSensitivity){this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft+o.scrollSpeed;}else if(event.pageX-this.overflowOffset.left<o.scrollSensitivity){this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft-o.scrollSpeed;}}else{if(event.pageY-this.document.scrollTop()<o.scrollSensitivity){scrolled=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed);}else if(this.window.height()-(event.pageY-this.document.scrollTop())<o.scrollSensitivity){scrolled=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed);}
if(event.pageX-this.document.scrollLeft()<o.scrollSensitivity){scrolled=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed);}else if(this.window.width()-(event.pageX-this.document.scrollLeft())<o.scrollSensitivity){scrolled=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed);}}
if(scrolled!==false&&$.ui.ddmanager&&!o.dropBehaviour){$.ui.ddmanager.prepareOffsets(this,event);}}
this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!=="y"){this.helper[0].style.left=this.position.left+"px";}
if(!this.options.axis||this.options.axis!=="x"){this.helper[0].style.top=this.position.top+"px";}
for(i=this.items.length-1;i>=0;i--){item=this.items[i];itemElement=item.item[0];intersection=this._intersectsWithPointer(item);if(!intersection){continue;}
if(item.instance!==this.currentContainer){continue;}
if(itemElement!==this.currentItem[0]&&this.placeholder[intersection===1?"next":"prev"]()[0]!==itemElement&&!$.contains(this.placeholder[0],itemElement)&&(this.options.type==="semi-dynamic"?!$.contains(this.element[0],itemElement):true)){this.direction=intersection===1?"down":"up";if(this.options.tolerance==="pointer"||this._intersectsWithSides(item)){this._rearrange(event,item);}else{break;}
this._trigger("change",event,this._uiHash());break;}}
this._contactContainers(event);if($.ui.ddmanager){$.ui.ddmanager.drag(this,event);}
this._trigger("sort",event,this._uiHash());this.lastPositionAbs=this.positionAbs;return false;},_mouseStop:function(event,noPropagation){if(!event){return;}
if($.ui.ddmanager&&!this.options.dropBehaviour){$.ui.ddmanager.drop(this,event);}
if(this.options.revert){var that=this,cur=this.placeholder.offset(),axis=this.options.axis,animation={};if(!axis||axis==="x"){animation.left=cur.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft);}
if(!axis||axis==="y"){animation.top=cur.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop);}
this.reverting=true;$(this.helper).animate(animation,parseInt(this.options.revert,10)||500,function(){that._clear(event);});}else{this._clear(event,noPropagation);}
return false;},cancel:function(){if(this.dragging){this._mouseUp({target:null});if(this.options.helper==="original"){this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");}else{this.currentItem.show();}
for(var i=this.containers.length-1;i>=0;i--){this.containers[i]._trigger("deactivate",null,this._uiHash(this));if(this.containers[i].containerCache.over){this.containers[i]._trigger("out",null,this._uiHash(this));this.containers[i].containerCache.over=0;}}}
if(this.placeholder){if(this.placeholder[0].parentNode){this.placeholder[0].parentNode.removeChild(this.placeholder[0]);}
if(this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode){this.helper.remove();}
$.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});if(this.domPosition.prev){$(this.domPosition.prev).after(this.currentItem);}else{$(this.domPosition.parent).prepend(this.currentItem);}}
return this;},serialize:function(o){var items=this._getItemsAsjQuery(o&&o.connected),str=[];o=o||{};$(items).each(function(){var res=($(o.item||this).attr(o.attribute||"id")||"").match(o.expression||(/(.+)[\-=_](.+)/));if(res){str.push((o.key||res[1]+"[]")+"="+(o.key&&o.expression?res[1]:res[2]));}});if(!str.length&&o.key){str.push(o.key+"=");}
return str.join("&");},toArray:function(o){var items=this._getItemsAsjQuery(o&&o.connected),ret=[];o=o||{};items.each(function(){ret.push($(o.item||this).attr(o.attribute||"id")||"");});return ret;},_intersectsWith:function(item){var x1=this.positionAbs.left,x2=x1+this.helperProportions.width,y1=this.positionAbs.top,y2=y1+this.helperProportions.height,l=item.left,r=l+item.width,t=item.top,b=t+item.height,dyClick=this.offset.click.top,dxClick=this.offset.click.left,isOverElementHeight=(this.options.axis==="x")||((y1+dyClick)>t&&(y1+dyClick)<b),isOverElementWidth=(this.options.axis==="y")||((x1+dxClick)>l&&(x1+dxClick)<r),isOverElement=isOverElementHeight&&isOverElementWidth;if(this.options.tolerance==="pointer"||this.options.forcePointerForContainers||(this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>item[this.floating?"width":"height"])){return isOverElement;}else{return(l<x1+(this.helperProportions.width / 2)&&x2-(this.helperProportions.width / 2)<r&&t<y1+(this.helperProportions.height / 2)&&y2-(this.helperProportions.height / 2)<b);}},_intersectsWithPointer:function(item){var isOverElementHeight=(this.options.axis==="x")||this._isOverAxis(this.positionAbs.top+this.offset.click.top,item.top,item.height),isOverElementWidth=(this.options.axis==="y")||this._isOverAxis(this.positionAbs.left+this.offset.click.left,item.left,item.width),isOverElement=isOverElementHeight&&isOverElementWidth,verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();if(!isOverElement){return false;}
return this.floating?(((horizontalDirection&&horizontalDirection==="right")||verticalDirection==="down")?2:1):(verticalDirection&&(verticalDirection==="down"?2:1));},_intersectsWithSides:function(item){var isOverBottomHalf=this._isOverAxis(this.positionAbs.top+this.offset.click.top,item.top+(item.height/2),item.height),isOverRightHalf=this._isOverAxis(this.positionAbs.left+this.offset.click.left,item.left+(item.width/2),item.width),verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();if(this.floating&&horizontalDirection){return((horizontalDirection==="right"&&isOverRightHalf)||(horizontalDirection==="left"&&!isOverRightHalf));}else{return verticalDirection&&((verticalDirection==="down"&&isOverBottomHalf)||(verticalDirection==="up"&&!isOverBottomHalf));}},_getDragVerticalDirection:function(){var delta=this.positionAbs.top-this.lastPositionAbs.top;return delta!==0&&(delta>0?"down":"up");},_getDragHorizontalDirection:function(){var delta=this.positionAbs.left-this.lastPositionAbs.left;return delta!==0&&(delta>0?"right":"left");},refresh:function(event){this._refreshItems(event);this._setHandleClassName();this.refreshPositions();return this;},_connectWith:function(){var options=this.options;return options.connectWith.constructor===String?[options.connectWith]:options.connectWith;},_getItemsAsjQuery:function(connected){var i,j,cur,inst,items=[],queries=[],connectWith=this._connectWith();if(connectWith&&connected){for(i=connectWith.length-1;i>=0;i--){cur=$(connectWith[i],this.document[0]);for(j=cur.length-1;j>=0;j--){inst=$.data(cur[j],this.widgetFullName);if(inst&&inst!==this&&!inst.options.disabled){queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element):$(inst.options.items,inst.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),inst]);}}}}
queries.push([$.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):$(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);function addItems(){items.push(this);}
for(i=queries.length-1;i>=0;i--){queries[i][0].each(addItems);}
return $(items);},_removeCurrentsFromItems:function(){var list=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=$.grep(this.items,function(item){for(var j=0;j<list.length;j++){if(list[j]===item.item[0]){return false;}}
return true;});},_refreshItems:function(event){this.items=[];this.containers=[this];var i,j,cur,inst,targetData,_queries,item,queriesLength,items=this.items,queries=[[$.isFunction(this.options.items)?this.options.items.call(this.element[0],event,{item:this.currentItem}):$(this.options.items,this.element),this]],connectWith=this._connectWith();if(connectWith&&this.ready){for(i=connectWith.length-1;i>=0;i--){cur=$(connectWith[i],this.document[0]);for(j=cur.length-1;j>=0;j--){inst=$.data(cur[j],this.widgetFullName);if(inst&&inst!==this&&!inst.options.disabled){queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element[0],event,{item:this.currentItem}):$(inst.options.items,inst.element),inst]);this.containers.push(inst);}}}}
for(i=queries.length-1;i>=0;i--){targetData=queries[i][1];_queries=queries[i][0];for(j=0,queriesLength=_queries.length;j<queriesLength;j++){item=$(_queries[j]);item.data(this.widgetName+"-item",targetData);items.push({item:item,instance:targetData,width:0,height:0,left:0,top:0});}}},refreshPositions:function(fast){this.floating=this.items.length?this.options.axis==="x"||this._isFloating(this.items[0].item):false;if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset();}
var i,item,t,p;for(i=this.items.length-1;i>=0;i--){item=this.items[i];if(item.instance!==this.currentContainer&&this.currentContainer&&item.item[0]!==this.currentItem[0]){continue;}
t=this.options.toleranceElement?$(this.options.toleranceElement,item.item):item.item;if(!fast){item.width=t.outerWidth();item.height=t.outerHeight();}
p=t.offset();item.left=p.left;item.top=p.top;}
if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this);}else{for(i=this.containers.length-1;i>=0;i--){p=this.containers[i].element.offset();this.containers[i].containerCache.left=p.left;this.containers[i].containerCache.top=p.top;this.containers[i].containerCache.width=this.containers[i].element.outerWidth();this.containers[i].containerCache.height=this.containers[i].element.outerHeight();}}
return this;},_createPlaceholder:function(that){that=that||this;var className,o=that.options;if(!o.placeholder||o.placeholder.constructor===String){className=o.placeholder;o.placeholder={element:function(){var nodeName=that.currentItem[0].nodeName.toLowerCase(),element=$("<"+nodeName+">",that.document[0]).addClass(className||that.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");if(nodeName==="tbody"){that._createTrPlaceholder(that.currentItem.find("tr").eq(0),$("<tr>",that.document[0]).appendTo(element));}else if(nodeName==="tr"){that._createTrPlaceholder(that.currentItem,element);}else if(nodeName==="img"){element.attr("src",that.currentItem.attr("src"));}
if(!className){element.css("visibility","hidden");}
return element;},update:function(container,p){if(className&&!o.forcePlaceholderSize){return;}
if(!p.height()){p.height(that.currentItem.innerHeight()-parseInt(that.currentItem.css("paddingTop")||0,10)-parseInt(that.currentItem.css("paddingBottom")||0,10));}
if(!p.width()){p.width(that.currentItem.innerWidth()-parseInt(that.currentItem.css("paddingLeft")||0,10)-parseInt(that.currentItem.css("paddingRight")||0,10));}}};}
that.placeholder=$(o.placeholder.element.call(that.element,that.currentItem));that.currentItem.after(that.placeholder);o.placeholder.update(that,that.placeholder);},_createTrPlaceholder:function(sourceTr,targetTr){var that=this;sourceTr.children().each(function(){$("<td>&#160;</td>",that.document[0]).attr("colspan",$(this).attr("colspan")||1).appendTo(targetTr);});},_contactContainers:function(event){var i,j,dist,itemWithLeastDistance,posProperty,sizeProperty,cur,nearBottom,floating,axis,innermostContainer=null,innermostIndex=null;for(i=this.containers.length-1;i>=0;i--){if($.contains(this.currentItem[0],this.containers[i].element[0])){continue;}
if(this._intersectsWith(this.containers[i].containerCache)){if(innermostContainer&&$.contains(this.containers[i].element[0],innermostContainer.element[0])){continue;}
innermostContainer=this.containers[i];innermostIndex=i;}else{if(this.containers[i].containerCache.over){this.containers[i]._trigger("out",event,this._uiHash(this));this.containers[i].containerCache.over=0;}}}
if(!innermostContainer){return;}
if(this.containers.length===1){if(!this.containers[innermostIndex].containerCache.over){this.containers[innermostIndex]._trigger("over",event,this._uiHash(this));this.containers[innermostIndex].containerCache.over=1;}}else{dist=10000;itemWithLeastDistance=null;floating=innermostContainer.floating||this._isFloating(this.currentItem);posProperty=floating?"left":"top";sizeProperty=floating?"width":"height";axis=floating?"clientX":"clientY";for(j=this.items.length-1;j>=0;j--){if(!$.contains(this.containers[innermostIndex].element[0],this.items[j].item[0])){continue;}
if(this.items[j].item[0]===this.currentItem[0]){continue;}
cur=this.items[j].item.offset()[posProperty];nearBottom=false;if(event[axis]-cur>this.items[j][sizeProperty]/ 2){nearBottom=true;}
if(Math.abs(event[axis]-cur)<dist){dist=Math.abs(event[axis]-cur);itemWithLeastDistance=this.items[j];this.direction=nearBottom?"up":"down";}}
if(!itemWithLeastDistance&&!this.options.dropOnEmpty){return;}
if(this.currentContainer===this.containers[innermostIndex]){if(!this.currentContainer.containerCache.over){this.containers[innermostIndex]._trigger("over",event,this._uiHash());this.currentContainer.containerCache.over=1;}
return;}
itemWithLeastDistance?this._rearrange(event,itemWithLeastDistance,null,true):this._rearrange(event,null,this.containers[innermostIndex].element,true);this._trigger("change",event,this._uiHash());this.containers[innermostIndex]._trigger("change",event,this._uiHash(this));this.currentContainer=this.containers[innermostIndex];this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[innermostIndex]._trigger("over",event,this._uiHash(this));this.containers[innermostIndex].containerCache.over=1;}},_createHelper:function(event){var o=this.options,helper=$.isFunction(o.helper)?$(o.helper.apply(this.element[0],[event,this.currentItem])):(o.helper==="clone"?this.currentItem.clone():this.currentItem);if(!helper.parents("body").length){$(o.appendTo!=="parent"?o.appendTo:this.currentItem[0].parentNode)[0].appendChild(helper[0]);}
if(helper[0]===this.currentItem[0]){this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")};}
if(!helper[0].style.width||o.forceHelperSize){helper.width(this.currentItem.width());}
if(!helper[0].style.height||o.forceHelperSize){helper.height(this.currentItem.height());}
return helper;},_adjustOffsetFromHelper:function(obj){if(typeof obj==="string"){obj=obj.split(" ");}
if($.isArray(obj)){obj={left:+obj[0],top:+obj[1]||0};}
if("left"in obj){this.offset.click.left=obj.left+this.margins.left;}
if("right"in obj){this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left;}
if("top"in obj){this.offset.click.top=obj.top+this.margins.top;}
if("bottom"in obj){this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top;}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var po=this.offsetParent.offset();if(this.cssPosition==="absolute"&&this.scrollParent[0]!==this.document[0]&&$.contains(this.scrollParent[0],this.offsetParent[0])){po.left+=this.scrollParent.scrollLeft();po.top+=this.scrollParent.scrollTop();}
if(this.offsetParent[0]===this.document[0].body||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&$.ui.ie)){po={top:0,left:0};}
return{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)};},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var p=this.currentItem.position();return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:p.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()};}else{return{top:0,left:0};}},_cacheMargins:function(){this.margins={left:(parseInt(this.currentItem.css("marginLeft"),10)||0),top:(parseInt(this.currentItem.css("marginTop"),10)||0)};},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()};},_setContainment:function(){var ce,co,over,o=this.options;if(o.containment==="parent"){o.containment=this.helper[0].parentNode;}
if(o.containment==="document"||o.containment==="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,o.containment==="document"?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,(o.containment==="document"?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];}
if(!(/^(document|window|parent)$/).test(o.containment)){ce=$(o.containment)[0];co=$(o.containment).offset();over=($(ce).css("overflow")!=="hidden");this.containment=[co.left+(parseInt($(ce).css("borderLeftWidth"),10)||0)+(parseInt($(ce).css("paddingLeft"),10)||0)-this.margins.left,co.top+(parseInt($(ce).css("borderTopWidth"),10)||0)+(parseInt($(ce).css("paddingTop"),10)||0)-this.margins.top,co.left+(over?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt($(ce).css("borderLeftWidth"),10)||0)-(parseInt($(ce).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,co.top+(over?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt($(ce).css("borderTopWidth"),10)||0)-(parseInt($(ce).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top];}},_convertPositionTo:function(d,pos){if(!pos){pos=this.position;}
var mod=d==="absolute"?1:-1,scroll=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&$.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=(/(html|body)/i).test(scroll[0].tagName);return{top:(pos.top+
this.offset.relative.top*mod+
this.offset.parent.top*mod-
((this.cssPosition==="fixed"?-this.scrollParent.scrollTop():(scrollIsRootNode?0:scroll.scrollTop()))*mod)),left:(pos.left+
this.offset.relative.left*mod+
this.offset.parent.left*mod-
((this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())*mod))};},_generatePosition:function(event){var top,left,o=this.options,pageX=event.pageX,pageY=event.pageY,scroll=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&$.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=(/(html|body)/i).test(scroll[0].tagName);if(this.cssPosition==="relative"&&!(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0])){this.offset.relative=this._getRelativeOffset();}
if(this.originalPosition){if(this.containment){if(event.pageX-this.offset.click.left<this.containment[0]){pageX=this.containment[0]+this.offset.click.left;}
if(event.pageY-this.offset.click.top<this.containment[1]){pageY=this.containment[1]+this.offset.click.top;}
if(event.pageX-this.offset.click.left>this.containment[2]){pageX=this.containment[2]+this.offset.click.left;}
if(event.pageY-this.offset.click.top>this.containment[3]){pageY=this.containment[3]+this.offset.click.top;}}
if(o.grid){top=this.originalPageY+Math.round((pageY-this.originalPageY)/ o.grid[1])*o.grid[1];pageY=this.containment?((top-this.offset.click.top>=this.containment[1]&&top-this.offset.click.top<=this.containment[3])?top:((top-this.offset.click.top>=this.containment[1])?top-o.grid[1]:top+o.grid[1])):top;left=this.originalPageX+Math.round((pageX-this.originalPageX)/ o.grid[0])*o.grid[0];pageX=this.containment?((left-this.offset.click.left>=this.containment[0]&&left-this.offset.click.left<=this.containment[2])?left:((left-this.offset.click.left>=this.containment[0])?left-o.grid[0]:left+o.grid[0])):left;}}
return{top:(pageY-
this.offset.click.top-
this.offset.relative.top-
this.offset.parent.top+
((this.cssPosition==="fixed"?-this.scrollParent.scrollTop():(scrollIsRootNode?0:scroll.scrollTop())))),left:(pageX-
this.offset.click.left-
this.offset.relative.left-
this.offset.parent.left+
((this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())))};},_rearrange:function(event,i,a,hardRefresh){a?a[0].appendChild(this.placeholder[0]):i.item[0].parentNode.insertBefore(this.placeholder[0],(this.direction==="down"?i.item[0]:i.item[0].nextSibling));this.counter=this.counter?++this.counter:1;var counter=this.counter;this._delay(function(){if(counter===this.counter){this.refreshPositions(!hardRefresh);}});},_clear:function(event,noPropagation){this.reverting=false;var i,delayedTriggers=[];if(!this._noFinalSort&&this.currentItem.parent().length){this.placeholder.before(this.currentItem);}
this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(i in this._storedCSS){if(this._storedCSS[i]==="auto"||this._storedCSS[i]==="static"){this._storedCSS[i]="";}}
this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");}else{this.currentItem.show();}
if(this.fromOutside&&!noPropagation){delayedTriggers.push(function(event){this._trigger("receive",event,this._uiHash(this.fromOutside));});}
if((this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!noPropagation){delayedTriggers.push(function(event){this._trigger("update",event,this._uiHash());});}
if(this!==this.currentContainer){if(!noPropagation){delayedTriggers.push(function(event){this._trigger("remove",event,this._uiHash());});delayedTriggers.push((function(c){return function(event){c._trigger("receive",event,this._uiHash(this));};}).call(this,this.currentContainer));delayedTriggers.push((function(c){return function(event){c._trigger("update",event,this._uiHash(this));};}).call(this,this.currentContainer));}}
function delayEvent(type,instance,container){return function(event){container._trigger(type,event,instance._uiHash(instance));};}
for(i=this.containers.length-1;i>=0;i--){if(!noPropagation){delayedTriggers.push(delayEvent("deactivate",this,this.containers[i]));}
if(this.containers[i].containerCache.over){delayedTriggers.push(delayEvent("out",this,this.containers[i]));this.containers[i].containerCache.over=0;}}
if(this.storedCursor){this.document.find("body").css("cursor",this.storedCursor);this.storedStylesheet.remove();}
if(this._storedOpacity){this.helper.css("opacity",this._storedOpacity);}
if(this._storedZIndex){this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex);}
this.dragging=false;if(!noPropagation){this._trigger("beforeStop",event,this._uiHash());}
this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(!this.cancelHelperRemoval){if(this.helper[0]!==this.currentItem[0]){this.helper.remove();}
this.helper=null;}
if(!noPropagation){for(i=0;i<delayedTriggers.length;i++){delayedTriggers[i].call(this,event);}
this._trigger("stop",event,this._uiHash());}
this.fromOutside=false;return!this.cancelHelperRemoval;},_trigger:function(){if($.Widget.prototype._trigger.apply(this,arguments)===false){this.cancel();}},_uiHash:function(_inst){var inst=_inst||this;return{helper:inst.helper,placeholder:inst.placeholder||$([]),position:inst.position,originalPosition:inst.originalPosition,offset:inst.positionAbs,item:inst.currentItem,sender:_inst?_inst.element:null};}});var menu=$.widget("ui.menu",{version:"1.11.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.mouseHandled=false;this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0});if(this.options.disabled){this.element.addClass("ui-state-disabled").attr("aria-disabled","true");}
this._on({"mousedown .ui-menu-item":function(event){event.preventDefault();},"click .ui-menu-item":function(event){var target=$(event.target);if(!this.mouseHandled&&target.not(".ui-state-disabled").length){this.select(event);if(!event.isPropagationStopped()){this.mouseHandled=true;}
if(target.has(".ui-menu").length){this.expand(event);}else if(!this.element.is(":focus")&&$(this.document[0].activeElement).closest(".ui-menu").length){this.element.trigger("focus",[true]);if(this.active&&this.active.parents(".ui-menu").length===1){clearTimeout(this.timer);}}}},"mouseenter .ui-menu-item":function(event){if(this.previousFilter){return;}
var target=$(event.currentTarget);target.siblings(".ui-state-active").removeClass("ui-state-active");this.focus(event,target);},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(event,keepActiveItem){var item=this.active||this.element.find(this.options.items).eq(0);if(!keepActiveItem){this.focus(event,item);}},blur:function(event){this._delay(function(){if(!$.contains(this.element[0],this.document[0].activeElement)){this.collapseAll(event);}});},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(event){if(this._closeOnDocumentClick(event)){this.collapseAll(event);}
this.mouseHandled=false;}});},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var elem=$(this);if(elem.data("ui-menu-submenu-carat")){elem.remove();}});this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content");},_keydown:function(event){var match,prev,character,skip,preventDefault=true;switch(event.keyCode){case $.ui.keyCode.PAGE_UP:this.previousPage(event);break;case $.ui.keyCode.PAGE_DOWN:this.nextPage(event);break;case $.ui.keyCode.HOME:this._move("first","first",event);break;case $.ui.keyCode.END:this._move("last","last",event);break;case $.ui.keyCode.UP:this.previous(event);break;case $.ui.keyCode.DOWN:this.next(event);break;case $.ui.keyCode.LEFT:this.collapse(event);break;case $.ui.keyCode.RIGHT:if(this.active&&!this.active.is(".ui-state-disabled")){this.expand(event);}
break;case $.ui.keyCode.ENTER:case $.ui.keyCode.SPACE:this._activate(event);break;case $.ui.keyCode.ESCAPE:this.collapse(event);break;default:preventDefault=false;prev=this.previousFilter||"";character=String.fromCharCode(event.keyCode);skip=false;clearTimeout(this.filterTimer);if(character===prev){skip=true;}else{character=prev+character;}
match=this._filterMenuItems(character);match=skip&&match.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):match;if(!match.length){character=String.fromCharCode(event.keyCode);match=this._filterMenuItems(character);}
if(match.length){this.focus(event,match);this.previousFilter=character;this.filterTimer=this._delay(function(){delete this.previousFilter;},1000);}else{delete this.previousFilter;}}
if(preventDefault){event.preventDefault();}},_activate:function(event){if(!this.active.is(".ui-state-disabled")){if(this.active.is("[aria-haspopup='true']")){this.expand(event);}else{this.select(event);}}},refresh:function(){var menus,items,that=this,icon=this.options.icons.submenu,submenus=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length);submenus.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var menu=$(this),item=menu.parent(),submenuCarat=$("<span>").addClass("ui-menu-icon ui-icon "+icon).data("ui-menu-submenu-carat",true);item.attr("aria-haspopup","true").prepend(submenuCarat);menu.attr("aria-labelledby",item.attr("id"));});menus=submenus.add(this.element);items=menus.find(this.options.items);items.not(".ui-menu-item").each(function(){var item=$(this);if(that._isDivider(item)){item.addClass("ui-widget-content ui-menu-divider");}});items.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()});items.filter(".ui-state-disabled").attr("aria-disabled","true");if(this.active&&!$.contains(this.element[0],this.active[0])){this.blur();}},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role];},_setOption:function(key,value){if(key==="icons"){this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(value.submenu);}
if(key==="disabled"){this.element.toggleClass("ui-state-disabled",!!value).attr("aria-disabled",value);}
this._super(key,value);},focus:function(event,item){var nested,focused;this.blur(event,event&&event.type==="focus");this._scrollIntoView(item);this.active=item.first();focused=this.active.addClass("ui-state-focus").removeClass("ui-state-active");if(this.options.role){this.element.attr("aria-activedescendant",focused.attr("id"));}
this.active.parent().closest(".ui-menu-item").addClass("ui-state-active");if(event&&event.type==="keydown"){this._close();}else{this.timer=this._delay(function(){this._close();},this.delay);}
nested=item.children(".ui-menu");if(nested.length&&event&&(/^mouse/.test(event.type))){this._startOpening(nested);}
this.activeMenu=item.parent();this._trigger("focus",event,{item:item});},_scrollIntoView:function(item){var borderTop,paddingTop,offset,scroll,elementHeight,itemHeight;if(this._hasScroll()){borderTop=parseFloat($.css(this.activeMenu[0],"borderTopWidth"))||0;paddingTop=parseFloat($.css(this.activeMenu[0],"paddingTop"))||0;offset=item.offset().top-this.activeMenu.offset().top-borderTop-paddingTop;scroll=this.activeMenu.scrollTop();elementHeight=this.activeMenu.height();itemHeight=item.outerHeight();if(offset<0){this.activeMenu.scrollTop(scroll+offset);}else if(offset+itemHeight>elementHeight){this.activeMenu.scrollTop(scroll+offset-elementHeight+itemHeight);}}},blur:function(event,fromFocus){if(!fromFocus){clearTimeout(this.timer);}
if(!this.active){return;}
this.active.removeClass("ui-state-focus");this.active=null;this._trigger("blur",event,{item:this.active});},_startOpening:function(submenu){clearTimeout(this.timer);if(submenu.attr("aria-hidden")!=="true"){return;}
this.timer=this._delay(function(){this._close();this._open(submenu);},this.delay);},_open:function(submenu){var position=$.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(submenu.parents(".ui-menu")).hide().attr("aria-hidden","true");submenu.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(position);},collapseAll:function(event,all){clearTimeout(this.timer);this.timer=this._delay(function(){var currentMenu=all?this.element:$(event&&event.target).closest(this.element.find(".ui-menu"));if(!currentMenu.length){currentMenu=this.element;}
this._close(currentMenu);this.blur(event);this.activeMenu=currentMenu;},this.delay);},_close:function(startMenu){if(!startMenu){startMenu=this.active?this.active.parent():this.element;}
startMenu.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active");},_closeOnDocumentClick:function(event){return!$(event.target).closest(".ui-menu").length;},_isDivider:function(item){return!/[^\-\u2014\u2013\s]/.test(item.text());},collapse:function(event){var newItem=this.active&&this.active.parent().closest(".ui-menu-item",this.element);if(newItem&&newItem.length){this._close();this.focus(event,newItem);}},expand:function(event){var newItem=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();if(newItem&&newItem.length){this._open(newItem.parent());this._delay(function(){this.focus(event,newItem);});}},next:function(event){this._move("next","first",event);},previous:function(event){this._move("prev","last",event);},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length;},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length;},_move:function(direction,filter,event){var next;if(this.active){if(direction==="first"||direction==="last"){next=this.active
[direction==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1);}else{next=this.active
[direction+"All"](".ui-menu-item").eq(0);}}
if(!next||!next.length||!this.active){next=this.activeMenu.find(this.options.items)[filter]();}
this.focus(event,next);},nextPage:function(event){var item,base,height;if(!this.active){this.next(event);return;}
if(this.isLastItem()){return;}
if(this._hasScroll()){base=this.active.offset().top;height=this.element.height();this.active.nextAll(".ui-menu-item").each(function(){item=$(this);return item.offset().top-base-height<0;});this.focus(event,item);}else{this.focus(event,this.activeMenu.find(this.options.items)
[!this.active?"first":"last"]());}},previousPage:function(event){var item,base,height;if(!this.active){this.next(event);return;}
if(this.isFirstItem()){return;}
if(this._hasScroll()){base=this.active.offset().top;height=this.element.height();this.active.prevAll(".ui-menu-item").each(function(){item=$(this);return item.offset().top-base+height>0;});this.focus(event,item);}else{this.focus(event,this.activeMenu.find(this.options.items).first());}},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight");},select:function(event){this.active=this.active||$(event.target).closest(".ui-menu-item");var ui={item:this.active};if(!this.active.has(".ui-menu").length){this.collapseAll(event,true);}
this._trigger("select",event,ui);},_filterMenuItems:function(character){var escapedCharacter=character.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),regex=new RegExp("^"+escapedCharacter,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return regex.test($.trim($(this).text()));});}});$.widget("ui.autocomplete",{version:"1.11.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:false,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var suppressKeyPress,suppressKeyPressRepeat,suppressInput,nodeName=this.element[0].nodeName.toLowerCase(),isTextarea=nodeName==="textarea",isInput=nodeName==="input";this.isMultiLine=isTextarea?true:isInput?false:this.element.prop("isContentEditable");this.valueMethod=this.element[isTextarea||isInput?"val":"text"];this.isNewMenu=true;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off");this._on(this.element,{keydown:function(event){if(this.element.prop("readOnly")){suppressKeyPress=true;suppressInput=true;suppressKeyPressRepeat=true;return;}
suppressKeyPress=false;suppressInput=false;suppressKeyPressRepeat=false;var keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.PAGE_UP:suppressKeyPress=true;this._move("previousPage",event);break;case keyCode.PAGE_DOWN:suppressKeyPress=true;this._move("nextPage",event);break;case keyCode.UP:suppressKeyPress=true;this._keyEvent("previous",event);break;case keyCode.DOWN:suppressKeyPress=true;this._keyEvent("next",event);break;case keyCode.ENTER:if(this.menu.active){suppressKeyPress=true;event.preventDefault();this.menu.select(event);}
break;case keyCode.TAB:if(this.menu.active){this.menu.select(event);}
break;case keyCode.ESCAPE:if(this.menu.element.is(":visible")){if(!this.isMultiLine){this._value(this.term);}
this.close(event);event.preventDefault();}
break;default:suppressKeyPressRepeat=true;this._searchTimeout(event);break;}},keypress:function(event){if(suppressKeyPress){suppressKeyPress=false;if(!this.isMultiLine||this.menu.element.is(":visible")){event.preventDefault();}
return;}
if(suppressKeyPressRepeat){return;}
var keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.PAGE_UP:this._move("previousPage",event);break;case keyCode.PAGE_DOWN:this._move("nextPage",event);break;case keyCode.UP:this._keyEvent("previous",event);break;case keyCode.DOWN:this._keyEvent("next",event);break;}},input:function(event){if(suppressInput){suppressInput=false;event.preventDefault();return;}
this._searchTimeout(event);},focus:function(){this.selectedItem=null;this.previous=this._value();},blur:function(event){if(this.cancelBlur){delete this.cancelBlur;return;}
clearTimeout(this.searching);this.close(event);this._change(event);}});this._initSource();this.menu=$("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance");this._on(this.menu.element,{mousedown:function(event){event.preventDefault();this.cancelBlur=true;this._delay(function(){delete this.cancelBlur;});var menuElement=this.menu.element[0];if(!$(event.target).closest(".ui-menu-item").length){this._delay(function(){var that=this;this.document.one("mousedown",function(event){if(event.target!==that.element[0]&&event.target!==menuElement&&!$.contains(menuElement,event.target)){that.close();}});});}},menufocus:function(event,ui){var label,item;if(this.isNewMenu){this.isNewMenu=false;if(event.originalEvent&&/^mouse/.test(event.originalEvent.type)){this.menu.blur();this.document.one("mousemove",function(){$(event.target).trigger(event.originalEvent);});return;}}
item=ui.item.data("ui-autocomplete-item");if(false!==this._trigger("focus",event,{item:item})){if(event.originalEvent&&/^key/.test(event.originalEvent.type)){this._value(item.value);}}
label=ui.item.attr("aria-label")||item.value;if(label&&$.trim(label).length){this.liveRegion.children().hide();$("<div>").text(label).appendTo(this.liveRegion);}},menuselect:function(event,ui){var item=ui.item.data("ui-autocomplete-item"),previous=this.previous;if(this.element[0]!==this.document[0].activeElement){this.element.focus();this.previous=previous;this._delay(function(){this.previous=previous;this.selectedItem=item;});}
if(false!==this._trigger("select",event,{item:item})){this._value(item.value);}
this.term=this._value();this.close(event);this.selectedItem=item;}});this.liveRegion=$("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body);this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete");}});},_destroy:function(){clearTimeout(this.searching);this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove();},_setOption:function(key,value){this._super(key,value);if(key==="source"){this._initSource();}
if(key==="appendTo"){this.menu.element.appendTo(this._appendTo());}
if(key==="disabled"&&value&&this.xhr){this.xhr.abort();}},_appendTo:function(){var element=this.options.appendTo;if(element){element=element.jquery||element.nodeType?$(element):this.document.find(element).eq(0);}
if(!element||!element[0]){element=this.element.closest(".ui-front");}
if(!element.length){element=this.document[0].body;}
return element;},_initSource:function(){var array,url,that=this;if($.isArray(this.options.source)){array=this.options.source;this.source=function(request,response){response($.ui.autocomplete.filter(array,request.term));};}else if(typeof this.options.source==="string"){url=this.options.source;this.source=function(request,response){if(that.xhr){that.xhr.abort();}
that.xhr=$.ajax({url:url,data:request,dataType:"json",success:function(data){response(data);},error:function(){response([]);}});};}else{this.source=this.options.source;}},_searchTimeout:function(event){clearTimeout(this.searching);this.searching=this._delay(function(){var equalValues=this.term===this._value(),menuVisible=this.menu.element.is(":visible"),modifierKey=event.altKey||event.ctrlKey||event.metaKey||event.shiftKey;if(!equalValues||(equalValues&&!menuVisible&&!modifierKey)){this.selectedItem=null;this.search(null,event);}},this.options.delay);},search:function(value,event){value=value!=null?value:this._value();this.term=this._value();if(value.length<this.options.minLength){return this.close(event);}
if(this._trigger("search",event)===false){return;}
return this._search(value);},_search:function(value){this.pending++;this.element.addClass("ui-autocomplete-loading");this.cancelSearch=false;this.source({term:value},this._response());},_response:function(){var index=++this.requestIndex;return $.proxy(function(content){if(index===this.requestIndex){this.__response(content);}
this.pending--;if(!this.pending){this.element.removeClass("ui-autocomplete-loading");}},this);},__response:function(content){if(content){content=this._normalize(content);}
this._trigger("response",null,{content:content});if(!this.options.disabled&&content&&content.length&&!this.cancelSearch){this._suggest(content);this._trigger("open");}else{this._close();}},close:function(event){this.cancelSearch=true;this._close(event);},_close:function(event){if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.blur();this.isNewMenu=true;this._trigger("close",event);}},_change:function(event){if(this.previous!==this._value()){this._trigger("change",event,{item:this.selectedItem});}},_normalize:function(items){if(items.length&&items[0].label&&items[0].value){return items;}
return $.map(items,function(item){if(typeof item==="string"){return{label:item,value:item};}
return $.extend({},item,{label:item.label||item.value,value:item.value||item.label});});},_suggest:function(items){var ul=this.menu.element.empty();this._renderMenu(ul,items);this.isNewMenu=true;this.menu.refresh();ul.show();this._resizeMenu();ul.position($.extend({of:this.element},this.options.position));if(this.options.autoFocus){this.menu.next();}},_resizeMenu:function(){var ul=this.menu.element;ul.outerWidth(Math.max(ul.width("").outerWidth()+1,this.element.outerWidth()));},_renderMenu:function(ul,items){var that=this;$.each(items,function(index,item){that._renderItemData(ul,item);});},_renderItemData:function(ul,item){return this._renderItem(ul,item).data("ui-autocomplete-item",item);},_renderItem:function(ul,item){return $("<li>").text(item.label).appendTo(ul);},_move:function(direction,event){if(!this.menu.element.is(":visible")){this.search(null,event);return;}
if(this.menu.isFirstItem()&&/^previous/.test(direction)||this.menu.isLastItem()&&/^next/.test(direction)){if(!this.isMultiLine){this._value(this.term);}
this.menu.blur();return;}
this.menu[direction](event);},widget:function(){return this.menu.element;},_value:function(){return this.valueMethod.apply(this.element,arguments);},_keyEvent:function(keyEvent,event){if(!this.isMultiLine||this.menu.element.is(":visible")){this._move(keyEvent,event);event.preventDefault();}}});$.extend($.ui.autocomplete,{escapeRegex:function(value){return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");},filter:function(array,term){var matcher=new RegExp($.ui.autocomplete.escapeRegex(term),"i");return $.grep(array,function(value){return matcher.test(value.label||value.value||value);});}});$.widget("ui.autocomplete",$.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(amount){return amount+(amount>1?" results are":" result is")+" available, use up and down arrow keys to navigate.";}}},__response:function(content){var message;this._superApply(arguments);if(this.options.disabled||this.cancelSearch){return;}
if(content&&content.length){message=this.options.messages.results(content.length);}else{message=this.options.messages.noResults;}
this.liveRegion.children().hide();$("<div>").text(message).appendTo(this.liveRegion);}});var autocomplete=$.ui.autocomplete;$.extend($.ui,{datepicker:{version:"1.11.4"}});var datepicker_instActive;function datepicker_getZindex(elem){var position,value;while(elem.length&&elem[0]!==document){position=elem.css("position");if(position==="absolute"||position==="relative"||position==="fixed"){value=parseInt(elem.css("zIndex"),10);if(!isNaN(value)&&value!==0){return value;}}
elem=elem.parent();}
return 0;}
function Datepicker(){this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false,disabled:false};$.extend(this._defaults,this.regional[""]);this.regional.en=$.extend(true,{},this.regional[""]);this.regional["en-US"]=$.extend(true,{},this.regional.en);this.dpDiv=datepicker_bindHover($("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"));}
$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv;},setDefaults:function(settings){datepicker_extendRemove(this._defaults,settings||{});return this;},_attachDatepicker:function(target,settings){var nodeName,inline,inst;nodeName=target.nodeName.toLowerCase();inline=(nodeName==="div"||nodeName==="span");if(!target.id){this.uuid+=1;target.id="dp"+this.uuid;}
inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{});if(nodeName==="input"){this._connectDatepicker(target,inst);}else if(inline){this._inlineDatepicker(target,inst);}},_newInst:function(target,inline){var id=target[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:id,input:target,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:inline,dpDiv:(!inline?this.dpDiv:datepicker_bindHover($("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")))};},_connectDatepicker:function(target,inst){var input=$(target);inst.append=$([]);inst.trigger=$([]);if(input.hasClass(this.markerClassName)){return;}
this._attachments(input,inst);input.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp);this._autoSize(inst);$.data(target,"datepicker",inst);if(inst.settings.disabled){this._disableDatepicker(target);}},_attachments:function(input,inst){var showOn,buttonText,buttonImage,appendText=this._get(inst,"appendText"),isRTL=this._get(inst,"isRTL");if(inst.append){inst.append.remove();}
if(appendText){inst.append=$("<span class='"+this._appendClass+"'>"+appendText+"</span>");input[isRTL?"before":"after"](inst.append);}
input.unbind("focus",this._showDatepicker);if(inst.trigger){inst.trigger.remove();}
showOn=this._get(inst,"showOn");if(showOn==="focus"||showOn==="both"){input.focus(this._showDatepicker);}
if(showOn==="button"||showOn==="both"){buttonText=this._get(inst,"buttonText");buttonImage=this._get(inst,"buttonImage");inst.trigger=$(this._get(inst,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:buttonImage,alt:buttonText,title:buttonText}):$("<button type='button'></button>").addClass(this._triggerClass).html(!buttonImage?buttonText:$("<img/>").attr({src:buttonImage,alt:buttonText,title:buttonText})));input[isRTL?"before":"after"](inst.trigger);inst.trigger.click(function(){if($.datepicker._datepickerShowing&&$.datepicker._lastInput===input[0]){$.datepicker._hideDatepicker();}else if($.datepicker._datepickerShowing&&$.datepicker._lastInput!==input[0]){$.datepicker._hideDatepicker();$.datepicker._showDatepicker(input[0]);}else{$.datepicker._showDatepicker(input[0]);}
return false;});}},_autoSize:function(inst){if(this._get(inst,"autoSize")&&!inst.inline){var findMax,max,maxI,i,date=new Date(2009,12-1,20),dateFormat=this._get(inst,"dateFormat");if(dateFormat.match(/[DM]/)){findMax=function(names){max=0;maxI=0;for(i=0;i<names.length;i++){if(names[i].length>max){max=names[i].length;maxI=i;}}
return maxI;};date.setMonth(findMax(this._get(inst,(dateFormat.match(/MM/)?"monthNames":"monthNamesShort"))));date.setDate(findMax(this._get(inst,(dateFormat.match(/DD/)?"dayNames":"dayNamesShort")))+20-date.getDay());}
inst.input.attr("size",this._formatDate(inst,date).length);}},_inlineDatepicker:function(target,inst){var divSpan=$(target);if(divSpan.hasClass(this.markerClassName)){return;}
divSpan.addClass(this.markerClassName).append(inst.dpDiv);$.data(target,"datepicker",inst);this._setDate(inst,this._getDefaultDate(inst),true);this._updateDatepicker(inst);this._updateAlternate(inst);if(inst.settings.disabled){this._disableDatepicker(target);}
inst.dpDiv.css("display","block");},_dialogDatepicker:function(input,date,onSelect,settings,pos){var id,browserWidth,browserHeight,scrollX,scrollY,inst=this._dialogInst;if(!inst){this.uuid+=1;id="dp"+this.uuid;this._dialogInput=$("<input type='text' id='"+id+"' style='position: absolute; top: -100px; width: 0px;'/>");this._dialogInput.keydown(this._doKeyDown);$("body").append(this._dialogInput);inst=this._dialogInst=this._newInst(this._dialogInput,false);inst.settings={};$.data(this._dialogInput[0],"datepicker",inst);}
datepicker_extendRemove(inst.settings,settings||{});date=(date&&date.constructor===Date?this._formatDate(inst,date):date);this._dialogInput.val(date);this._pos=(pos?(pos.length?pos:[pos.pageX,pos.pageY]):null);if(!this._pos){browserWidth=document.documentElement.clientWidth;browserHeight=document.documentElement.clientHeight;scrollX=document.documentElement.scrollLeft||document.body.scrollLeft;scrollY=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[(browserWidth / 2)-100+scrollX,(browserHeight / 2)-150+scrollY];}
this._dialogInput.css("left",(this._pos[0]+20)+"px").css("top",this._pos[1]+"px");inst.settings.onSelect=onSelect;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);if($.blockUI){$.blockUI(this.dpDiv);}
$.data(this._dialogInput[0],"datepicker",inst);return this;},_destroyDatepicker:function(target){var nodeName,$target=$(target),inst=$.data(target,"datepicker");if(!$target.hasClass(this.markerClassName)){return;}
nodeName=target.nodeName.toLowerCase();$.removeData(target,"datepicker");if(nodeName==="input"){inst.append.remove();inst.trigger.remove();$target.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp);}else if(nodeName==="div"||nodeName==="span"){$target.removeClass(this.markerClassName).empty();}
if(datepicker_instActive===inst){datepicker_instActive=null;}},_enableDatepicker:function(target){var nodeName,inline,$target=$(target),inst=$.data(target,"datepicker");if(!$target.hasClass(this.markerClassName)){return;}
nodeName=target.nodeName.toLowerCase();if(nodeName==="input"){target.disabled=false;inst.trigger.filter("button").each(function(){this.disabled=false;}).end().filter("img").css({opacity:"1.0",cursor:""});}else if(nodeName==="div"||nodeName==="span"){inline=$target.children("."+this._inlineClass);inline.children().removeClass("ui-state-disabled");inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",false);}
this._disabledInputs=$.map(this._disabledInputs,function(value){return(value===target?null:value);});},_disableDatepicker:function(target){var nodeName,inline,$target=$(target),inst=$.data(target,"datepicker");if(!$target.hasClass(this.markerClassName)){return;}
nodeName=target.nodeName.toLowerCase();if(nodeName==="input"){target.disabled=true;inst.trigger.filter("button").each(function(){this.disabled=true;}).end().filter("img").css({opacity:"0.5",cursor:"default"});}else if(nodeName==="div"||nodeName==="span"){inline=$target.children("."+this._inlineClass);inline.children().addClass("ui-state-disabled");inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",true);}
this._disabledInputs=$.map(this._disabledInputs,function(value){return(value===target?null:value);});this._disabledInputs[this._disabledInputs.length]=target;},_isDisabledDatepicker:function(target){if(!target){return false;}
for(var i=0;i<this._disabledInputs.length;i++){if(this._disabledInputs[i]===target){return true;}}
return false;},_getInst:function(target){try{return $.data(target,"datepicker");}
catch(err){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(target,name,value){var settings,date,minDate,maxDate,inst=this._getInst(target);if(arguments.length===2&&typeof name==="string"){return(name==="defaults"?$.extend({},$.datepicker._defaults):(inst?(name==="all"?$.extend({},inst.settings):this._get(inst,name)):null));}
settings=name||{};if(typeof name==="string"){settings={};settings[name]=value;}
if(inst){if(this._curInst===inst){this._hideDatepicker();}
date=this._getDateDatepicker(target,true);minDate=this._getMinMaxDate(inst,"min");maxDate=this._getMinMaxDate(inst,"max");datepicker_extendRemove(inst.settings,settings);if(minDate!==null&&settings.dateFormat!==undefined&&settings.minDate===undefined){inst.settings.minDate=this._formatDate(inst,minDate);}
if(maxDate!==null&&settings.dateFormat!==undefined&&settings.maxDate===undefined){inst.settings.maxDate=this._formatDate(inst,maxDate);}
if("disabled"in settings){if(settings.disabled){this._disableDatepicker(target);}else{this._enableDatepicker(target);}}
this._attachments($(target),inst);this._autoSize(inst);this._setDate(inst,date);this._updateAlternate(inst);this._updateDatepicker(inst);}},_changeDatepicker:function(target,name,value){this._optionDatepicker(target,name,value);},_refreshDatepicker:function(target){var inst=this._getInst(target);if(inst){this._updateDatepicker(inst);}},_setDateDatepicker:function(target,date){var inst=this._getInst(target);if(inst){this._setDate(inst,date);this._updateDatepicker(inst);this._updateAlternate(inst);}},_getDateDatepicker:function(target,noDefault){var inst=this._getInst(target);if(inst&&!inst.inline){this._setDateFromField(inst,noDefault);}
return(inst?this._getDate(inst):null);},_doKeyDown:function(event){var onSelect,dateStr,sel,inst=$.datepicker._getInst(event.target),handled=true,isRTL=inst.dpDiv.is(".ui-datepicker-rtl");inst._keyEvent=true;if($.datepicker._datepickerShowing){switch(event.keyCode){case 9:$.datepicker._hideDatepicker();handled=false;break;case 13:sel=$("td."+$.datepicker._dayOverClass+":not(."+
$.datepicker._currentClass+")",inst.dpDiv);if(sel[0]){$.datepicker._selectDay(event.target,inst.selectedMonth,inst.selectedYear,sel[0]);}
onSelect=$.datepicker._get(inst,"onSelect");if(onSelect){dateStr=$.datepicker._formatDate(inst);onSelect.apply((inst.input?inst.input[0]:null),[dateStr,inst]);}else{$.datepicker._hideDatepicker();}
return false;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(event.target,(event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths")),"M");break;case 34:$.datepicker._adjustDate(event.target,(event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths")),"M");break;case 35:if(event.ctrlKey||event.metaKey){$.datepicker._clearDate(event.target);}
handled=event.ctrlKey||event.metaKey;break;case 36:if(event.ctrlKey||event.metaKey){$.datepicker._gotoToday(event.target);}
handled=event.ctrlKey||event.metaKey;break;case 37:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,(isRTL?+1:-1),"D");}
handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey){$.datepicker._adjustDate(event.target,(event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths")),"M");}
break;case 38:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,-7,"D");}
handled=event.ctrlKey||event.metaKey;break;case 39:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,(isRTL?-1:+1),"D");}
handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey){$.datepicker._adjustDate(event.target,(event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths")),"M");}
break;case 40:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,+7,"D");}
handled=event.ctrlKey||event.metaKey;break;default:handled=false;}}else if(event.keyCode===36&&event.ctrlKey){$.datepicker._showDatepicker(this);}else{handled=false;}
if(handled){event.preventDefault();event.stopPropagation();}},_doKeyPress:function(event){var chars,chr,inst=$.datepicker._getInst(event.target);if($.datepicker._get(inst,"constrainInput")){chars=$.datepicker._possibleChars($.datepicker._get(inst,"dateFormat"));chr=String.fromCharCode(event.charCode==null?event.keyCode:event.charCode);return event.ctrlKey||event.metaKey||(chr<" "||!chars||chars.indexOf(chr)>-1);}},_doKeyUp:function(event){var date,inst=$.datepicker._getInst(event.target);if(inst.input.val()!==inst.lastVal){try{date=$.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),(inst.input?inst.input.val():null),$.datepicker._getFormatConfig(inst));if(date){$.datepicker._setDateFromField(inst);$.datepicker._updateAlternate(inst);$.datepicker._updateDatepicker(inst);}}
catch(err){}}
return true;},_showDatepicker:function(input){input=input.target||input;if(input.nodeName.toLowerCase()!=="input"){input=$("input",input.parentNode)[0];}
if($.datepicker._isDisabledDatepicker(input)||$.datepicker._lastInput===input){return;}
var inst,beforeShow,beforeShowSettings,isFixed,offset,showAnim,duration;inst=$.datepicker._getInst(input);if($.datepicker._curInst&&$.datepicker._curInst!==inst){$.datepicker._curInst.dpDiv.stop(true,true);if(inst&&$.datepicker._datepickerShowing){$.datepicker._hideDatepicker($.datepicker._curInst.input[0]);}}
beforeShow=$.datepicker._get(inst,"beforeShow");beforeShowSettings=beforeShow?beforeShow.apply(input,[input,inst]):{};if(beforeShowSettings===false){return;}
datepicker_extendRemove(inst.settings,beforeShowSettings);inst.lastVal=null;$.datepicker._lastInput=input;$.datepicker._setDateFromField(inst);if($.datepicker._inDialog){input.value="";}
if(!$.datepicker._pos){$.datepicker._pos=$.datepicker._findPos(input);$.datepicker._pos[1]+=input.offsetHeight;}
isFixed=false;$(input).parents().each(function(){isFixed|=$(this).css("position")==="fixed";return!isFixed;});offset={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null;inst.dpDiv.empty();inst.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});$.datepicker._updateDatepicker(inst);offset=$.datepicker._checkOffset(inst,offset,isFixed);inst.dpDiv.css({position:($.datepicker._inDialog&&$.blockUI?"static":(isFixed?"fixed":"absolute")),display:"none",left:offset.left+"px",top:offset.top+"px"});if(!inst.inline){showAnim=$.datepicker._get(inst,"showAnim");duration=$.datepicker._get(inst,"duration");inst.dpDiv.css("z-index",datepicker_getZindex($(input))+1);$.datepicker._datepickerShowing=true;if($.effects&&$.effects.effect[showAnim]){inst.dpDiv.show(showAnim,$.datepicker._get(inst,"showOptions"),duration);}else{inst.dpDiv[showAnim||"show"](showAnim?duration:null);}
if($.datepicker._shouldFocusInput(inst)){inst.input.focus();}
$.datepicker._curInst=inst;}},_updateDatepicker:function(inst){this.maxRows=4;datepicker_instActive=inst;inst.dpDiv.empty().append(this._generateHTML(inst));this._attachHandlers(inst);var origyearshtml,numMonths=this._getNumberOfMonths(inst),cols=numMonths[1],width=17,activeCell=inst.dpDiv.find("."+this._dayOverClass+" a");if(activeCell.length>0){datepicker_handleMouseover.apply(activeCell.get(0));}
inst.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");if(cols>1){inst.dpDiv.addClass("ui-datepicker-multi-"+cols).css("width",(width*cols)+"em");}
inst.dpDiv[(numMonths[0]!==1||numMonths[1]!==1?"add":"remove")+"Class"]("ui-datepicker-multi");inst.dpDiv[(this._get(inst,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");if(inst===$.datepicker._curInst&&$.datepicker._datepickerShowing&&$.datepicker._shouldFocusInput(inst)){inst.input.focus();}
if(inst.yearshtml){origyearshtml=inst.yearshtml;setTimeout(function(){if(origyearshtml===inst.yearshtml&&inst.yearshtml){inst.dpDiv.find("select.ui-datepicker-year:first").replaceWith(inst.yearshtml);}
origyearshtml=inst.yearshtml=null;},0);}},_shouldFocusInput:function(inst){return inst.input&&inst.input.is(":visible")&&!inst.input.is(":disabled")&&!inst.input.is(":focus");},_checkOffset:function(inst,offset,isFixed){var dpWidth=inst.dpDiv.outerWidth(),dpHeight=inst.dpDiv.outerHeight(),inputWidth=inst.input?inst.input.outerWidth():0,inputHeight=inst.input?inst.input.outerHeight():0,viewWidth=document.documentElement.clientWidth+(isFixed?0:$(document).scrollLeft()),viewHeight=document.documentElement.clientHeight+(isFixed?0:$(document).scrollTop());offset.left-=(this._get(inst,"isRTL")?(dpWidth-inputWidth):0);offset.left-=(isFixed&&offset.left===inst.input.offset().left)?$(document).scrollLeft():0;offset.top-=(isFixed&&offset.top===(inst.input.offset().top+inputHeight))?$(document).scrollTop():0;offset.left-=Math.min(offset.left,(offset.left+dpWidth>viewWidth&&viewWidth>dpWidth)?Math.abs(offset.left+dpWidth-viewWidth):0);offset.top-=Math.min(offset.top,(offset.top+dpHeight>viewHeight&&viewHeight>dpHeight)?Math.abs(dpHeight+inputHeight):0);return offset;},_findPos:function(obj){var position,inst=this._getInst(obj),isRTL=this._get(inst,"isRTL");while(obj&&(obj.type==="hidden"||obj.nodeType!==1||$.expr.filters.hidden(obj))){obj=obj[isRTL?"previousSibling":"nextSibling"];}
position=$(obj).offset();return[position.left,position.top];},_hideDatepicker:function(input){var showAnim,duration,postProcess,onClose,inst=this._curInst;if(!inst||(input&&inst!==$.data(input,"datepicker"))){return;}
if(this._datepickerShowing){showAnim=this._get(inst,"showAnim");duration=this._get(inst,"duration");postProcess=function(){$.datepicker._tidyDialog(inst);};if($.effects&&($.effects.effect[showAnim]||$.effects[showAnim])){inst.dpDiv.hide(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess);}else{inst.dpDiv[(showAnim==="slideDown"?"slideUp":(showAnim==="fadeIn"?"fadeOut":"hide"))]((showAnim?duration:null),postProcess);}
if(!showAnim){postProcess();}
this._datepickerShowing=false;onClose=this._get(inst,"onClose");if(onClose){onClose.apply((inst.input?inst.input[0]:null),[(inst.input?inst.input.val():""),inst]);}
this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if($.blockUI){$.unblockUI();$("body").append(this.dpDiv);}}
this._inDialog=false;}},_tidyDialog:function(inst){inst.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar");},_checkExternalClick:function(event){if(!$.datepicker._curInst){return;}
var $target=$(event.target),inst=$.datepicker._getInst($target[0]);if((($target[0].id!==$.datepicker._mainDivId&&$target.parents("#"+$.datepicker._mainDivId).length===0&&!$target.hasClass($.datepicker.markerClassName)&&!$target.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&!($.datepicker._inDialog&&$.blockUI)))||($target.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!==inst)){$.datepicker._hideDatepicker();}},_adjustDate:function(id,offset,period){var target=$(id),inst=this._getInst(target[0]);if(this._isDisabledDatepicker(target[0])){return;}
this._adjustInstDate(inst,offset+
(period==="M"?this._get(inst,"showCurrentAtPos"):0),period);this._updateDatepicker(inst);},_gotoToday:function(id){var date,target=$(id),inst=this._getInst(target[0]);if(this._get(inst,"gotoCurrent")&&inst.currentDay){inst.selectedDay=inst.currentDay;inst.drawMonth=inst.selectedMonth=inst.currentMonth;inst.drawYear=inst.selectedYear=inst.currentYear;}else{date=new Date();inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();}
this._notifyChange(inst);this._adjustDate(target);},_selectMonthYear:function(id,select,period){var target=$(id),inst=this._getInst(target[0]);inst["selected"+(period==="M"?"Month":"Year")]=inst["draw"+(period==="M"?"Month":"Year")]=parseInt(select.options[select.selectedIndex].value,10);this._notifyChange(inst);this._adjustDate(target);},_selectDay:function(id,month,year,td){var inst,target=$(id);if($(td).hasClass(this._unselectableClass)||this._isDisabledDatepicker(target[0])){return;}
inst=this._getInst(target[0]);inst.selectedDay=inst.currentDay=$("a",td).html();inst.selectedMonth=inst.currentMonth=month;inst.selectedYear=inst.currentYear=year;this._selectDate(id,this._formatDate(inst,inst.currentDay,inst.currentMonth,inst.currentYear));},_clearDate:function(id){var target=$(id);this._selectDate(target,"");},_selectDate:function(id,dateStr){var onSelect,target=$(id),inst=this._getInst(target[0]);dateStr=(dateStr!=null?dateStr:this._formatDate(inst));if(inst.input){inst.input.val(dateStr);}
this._updateAlternate(inst);onSelect=this._get(inst,"onSelect");if(onSelect){onSelect.apply((inst.input?inst.input[0]:null),[dateStr,inst]);}else if(inst.input){inst.input.trigger("change");}
if(inst.inline){this._updateDatepicker(inst);}else{this._hideDatepicker();this._lastInput=inst.input[0];if(typeof(inst.input[0])!=="object"){inst.input.focus();}
this._lastInput=null;}},_updateAlternate:function(inst){var altFormat,date,dateStr,altField=this._get(inst,"altField");if(altField){altFormat=this._get(inst,"altFormat")||this._get(inst,"dateFormat");date=this._getDate(inst);dateStr=this.formatDate(altFormat,date,this._getFormatConfig(inst));$(altField).each(function(){$(this).val(dateStr);});}},noWeekends:function(date){var day=date.getDay();return[(day>0&&day<6),""];},iso8601Week:function(date){var time,checkDate=new Date(date.getTime());checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7));time=checkDate.getTime();checkDate.setMonth(0);checkDate.setDate(1);return Math.floor(Math.round((time-checkDate)/ 86400000)/ 7)+1;},parseDate:function(format,value,settings){if(format==null||value==null){throw"Invalid arguments";}
value=(typeof value==="object"?value.toString():value+"");if(value===""){return null;}
var iFormat,dim,extra,iValue=0,shortYearCutoffTemp=(settings?settings.shortYearCutoff:null)||this._defaults.shortYearCutoff,shortYearCutoff=(typeof shortYearCutoffTemp!=="string"?shortYearCutoffTemp:new Date().getFullYear()%100+parseInt(shortYearCutoffTemp,10)),dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort,dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames,monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort,monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames,year=-1,month=-1,day=-1,doy=-1,literal=false,date,lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)===match);if(matches){iFormat++;}
return matches;},getNumber=function(match){var isDoubled=lookAhead(match),size=(match==="@"?14:(match==="!"?20:(match==="y"&&isDoubled?4:(match==="o"?3:2)))),minSize=(match==="y"?size:1),digits=new RegExp("^\\d{"+minSize+","+size+"}"),num=value.substring(iValue).match(digits);if(!num){throw"Missing number at position "+iValue;}
iValue+=num[0].length;return parseInt(num[0],10);},getName=function(match,shortNames,longNames){var index=-1,names=$.map(lookAhead(match)?longNames:shortNames,function(v,k){return[[k,v]];}).sort(function(a,b){return-(a[1].length-b[1].length);});$.each(names,function(i,pair){var name=pair[1];if(value.substr(iValue,name.length).toLowerCase()===name.toLowerCase()){index=pair[0];iValue+=name.length;return false;}});if(index!==-1){return index+1;}else{throw"Unknown name at position "+iValue;}},checkLiteral=function(){if(value.charAt(iValue)!==format.charAt(iFormat)){throw"Unexpected literal at position "+iValue;}
iValue++;};for(iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)==="'"&&!lookAhead("'")){literal=false;}else{checkLiteral();}}else{switch(format.charAt(iFormat)){case"d":day=getNumber("d");break;case"D":getName("D",dayNamesShort,dayNames);break;case"o":doy=getNumber("o");break;case"m":month=getNumber("m");break;case"M":month=getName("M",monthNamesShort,monthNames);break;case"y":year=getNumber("y");break;case"@":date=new Date(getNumber("@"));year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case"!":date=new Date((getNumber("!")-this._ticksTo1970)/ 10000);year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case"'":if(lookAhead("'")){checkLiteral();}else{literal=true;}
break;default:checkLiteral();}}}
if(iValue<value.length){extra=value.substr(iValue);if(!/^\s+/.test(extra)){throw"Extra/unparsed characters found in date: "+extra;}}
if(year===-1){year=new Date().getFullYear();}else if(year<100){year+=new Date().getFullYear()-new Date().getFullYear()%100+
(year<=shortYearCutoff?0:-100);}
if(doy>-1){month=1;day=doy;do{dim=this._getDaysInMonth(year,month-1);if(day<=dim){break;}
month++;day-=dim;}while(true);}
date=this._daylightSavingAdjust(new Date(year,month-1,day));if(date.getFullYear()!==year||date.getMonth()+1!==month||date.getDate()!==day){throw"Invalid date";}
return date;},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(((1970-1)*365+Math.floor(1970 / 4)-Math.floor(1970 / 100)+
Math.floor(1970 / 400))*24*60*60*10000000),formatDate:function(format,date,settings){if(!date){return"";}
var iFormat,dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort,dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames,monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort,monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames,lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)===match);if(matches){iFormat++;}
return matches;},formatNumber=function(match,value,len){var num=""+value;if(lookAhead(match)){while(num.length<len){num="0"+num;}}
return num;},formatName=function(match,value,shortNames,longNames){return(lookAhead(match)?longNames[value]:shortNames[value]);},output="",literal=false;if(date){for(iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)==="'"&&!lookAhead("'")){literal=false;}else{output+=format.charAt(iFormat);}}else{switch(format.charAt(iFormat)){case"d":output+=formatNumber("d",date.getDate(),2);break;case"D":output+=formatName("D",date.getDay(),dayNamesShort,dayNames);break;case"o":output+=formatNumber("o",Math.round((new Date(date.getFullYear(),date.getMonth(),date.getDate()).getTime()-new Date(date.getFullYear(),0,0).getTime())/ 86400000),3);break;case"m":output+=formatNumber("m",date.getMonth()+1,2);break;case"M":output+=formatName("M",date.getMonth(),monthNamesShort,monthNames);break;case"y":output+=(lookAhead("y")?date.getFullYear():(date.getYear()%100<10?"0":"")+date.getYear()%100);break;case"@":output+=date.getTime();break;case"!":output+=date.getTime()*10000+this._ticksTo1970;break;case"'":if(lookAhead("'")){output+="'";}else{literal=true;}
break;default:output+=format.charAt(iFormat);}}}}
return output;},_possibleChars:function(format){var iFormat,chars="",literal=false,lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)===match);if(matches){iFormat++;}
return matches;};for(iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)==="'"&&!lookAhead("'")){literal=false;}else{chars+=format.charAt(iFormat);}}else{switch(format.charAt(iFormat)){case"d":case"m":case"y":case"@":chars+="0123456789";break;case"D":case"M":return null;case"'":if(lookAhead("'")){chars+="'";}else{literal=true;}
break;default:chars+=format.charAt(iFormat);}}}
return chars;},_get:function(inst,name){return inst.settings[name]!==undefined?inst.settings[name]:this._defaults[name];},_setDateFromField:function(inst,noDefault){if(inst.input.val()===inst.lastVal){return;}
var dateFormat=this._get(inst,"dateFormat"),dates=inst.lastVal=inst.input?inst.input.val():null,defaultDate=this._getDefaultDate(inst),date=defaultDate,settings=this._getFormatConfig(inst);try{date=this.parseDate(dateFormat,dates,settings)||defaultDate;}catch(event){dates=(noDefault?"":dates);}
inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();inst.currentDay=(dates?date.getDate():0);inst.currentMonth=(dates?date.getMonth():0);inst.currentYear=(dates?date.getFullYear():0);this._adjustInstDate(inst);},_getDefaultDate:function(inst){return this._restrictMinMax(inst,this._determineDate(inst,this._get(inst,"defaultDate"),new Date()));},_determineDate:function(inst,date,defaultDate){var offsetNumeric=function(offset){var date=new Date();date.setDate(date.getDate()+offset);return date;},offsetString=function(offset){try{return $.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),offset,$.datepicker._getFormatConfig(inst));}
catch(e){}
var date=(offset.toLowerCase().match(/^c/)?$.datepicker._getDate(inst):null)||new Date(),year=date.getFullYear(),month=date.getMonth(),day=date.getDate(),pattern=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,matches=pattern.exec(offset);while(matches){switch(matches[2]||"d"){case"d":case"D":day+=parseInt(matches[1],10);break;case"w":case"W":day+=parseInt(matches[1],10)*7;break;case"m":case"M":month+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break;case"y":case"Y":year+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break;}
matches=pattern.exec(offset);}
return new Date(year,month,day);},newDate=(date==null||date===""?defaultDate:(typeof date==="string"?offsetString(date):(typeof date==="number"?(isNaN(date)?defaultDate:offsetNumeric(date)):new Date(date.getTime()))));newDate=(newDate&&newDate.toString()==="Invalid Date"?defaultDate:newDate);if(newDate){newDate.setHours(0);newDate.setMinutes(0);newDate.setSeconds(0);newDate.setMilliseconds(0);}
return this._daylightSavingAdjust(newDate);},_daylightSavingAdjust:function(date){if(!date){return null;}
date.setHours(date.getHours()>12?date.getHours()+2:0);return date;},_setDate:function(inst,date,noChange){var clear=!date,origMonth=inst.selectedMonth,origYear=inst.selectedYear,newDate=this._restrictMinMax(inst,this._determineDate(inst,date,new Date()));inst.selectedDay=inst.currentDay=newDate.getDate();inst.drawMonth=inst.selectedMonth=inst.currentMonth=newDate.getMonth();inst.drawYear=inst.selectedYear=inst.currentYear=newDate.getFullYear();if((origMonth!==inst.selectedMonth||origYear!==inst.selectedYear)&&!noChange){this._notifyChange(inst);}
this._adjustInstDate(inst);if(inst.input){inst.input.val(clear?"":this._formatDate(inst));}},_getDate:function(inst){var startDate=(!inst.currentYear||(inst.input&&inst.input.val()==="")?null:this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));return startDate;},_attachHandlers:function(inst){var stepMonths=this._get(inst,"stepMonths"),id="#"+inst.id.replace(/\\\\/g,"\\");inst.dpDiv.find("[data-handler]").map(function(){var handler={prev:function(){$.datepicker._adjustDate(id,-stepMonths,"M");},next:function(){$.datepicker._adjustDate(id,+stepMonths,"M");},hide:function(){$.datepicker._hideDatepicker();},today:function(){$.datepicker._gotoToday(id);},selectDay:function(){$.datepicker._selectDay(id,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return false;},selectMonth:function(){$.datepicker._selectMonthYear(id,this,"M");return false;},selectYear:function(){$.datepicker._selectMonthYear(id,this,"Y");return false;}};$(this).bind(this.getAttribute("data-event"),handler[this.getAttribute("data-handler")]);});},_generateHTML:function(inst){var maxDraw,prevText,prev,nextText,next,currentText,gotoDate,controls,buttonPanel,firstDay,showWeek,dayNames,dayNamesMin,monthNames,monthNamesShort,beforeShowDay,showOtherMonths,selectOtherMonths,defaultDate,html,dow,row,group,col,selectedDate,cornerClass,calender,thead,day,daysInMonth,leadDays,curRows,numRows,printDate,dRow,tbody,daySettings,otherMonth,unselectable,tempDate=new Date(),today=this._daylightSavingAdjust(new Date(tempDate.getFullYear(),tempDate.getMonth(),tempDate.getDate())),isRTL=this._get(inst,"isRTL"),showButtonPanel=this._get(inst,"showButtonPanel"),hideIfNoPrevNext=this._get(inst,"hideIfNoPrevNext"),navigationAsDateFormat=this._get(inst,"navigationAsDateFormat"),numMonths=this._getNumberOfMonths(inst),showCurrentAtPos=this._get(inst,"showCurrentAtPos"),stepMonths=this._get(inst,"stepMonths"),isMultiMonth=(numMonths[0]!==1||numMonths[1]!==1),currentDate=this._daylightSavingAdjust((!inst.currentDay?new Date(9999,9,9):new Date(inst.currentYear,inst.currentMonth,inst.currentDay))),minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),drawMonth=inst.drawMonth-showCurrentAtPos,drawYear=inst.drawYear;if(drawMonth<0){drawMonth+=12;drawYear--;}
if(maxDate){maxDraw=this._daylightSavingAdjust(new Date(maxDate.getFullYear(),maxDate.getMonth()-(numMonths[0]*numMonths[1])+1,maxDate.getDate()));maxDraw=(minDate&&maxDraw<minDate?minDate:maxDraw);while(this._daylightSavingAdjust(new Date(drawYear,drawMonth,1))>maxDraw){drawMonth--;if(drawMonth<0){drawMonth=11;drawYear--;}}}
inst.drawMonth=drawMonth;inst.drawYear=drawYear;prevText=this._get(inst,"prevText");prevText=(!navigationAsDateFormat?prevText:this.formatDate(prevText,this._daylightSavingAdjust(new Date(drawYear,drawMonth-stepMonths,1)),this._getFormatConfig(inst)));prev=(this._canAdjustMonth(inst,-1,drawYear,drawMonth)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click'"+" title='"+prevText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"e":"w")+"'>"+prevText+"</span></a>":(hideIfNoPrevNext?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+prevText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"e":"w")+"'>"+prevText+"</span></a>"));nextText=this._get(inst,"nextText");nextText=(!navigationAsDateFormat?nextText:this.formatDate(nextText,this._daylightSavingAdjust(new Date(drawYear,drawMonth+stepMonths,1)),this._getFormatConfig(inst)));next=(this._canAdjustMonth(inst,+1,drawYear,drawMonth)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click'"+" title='"+nextText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"w":"e")+"'>"+nextText+"</span></a>":(hideIfNoPrevNext?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+nextText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"w":"e")+"'>"+nextText+"</span></a>"));currentText=this._get(inst,"currentText");gotoDate=(this._get(inst,"gotoCurrent")&&inst.currentDay?currentDate:today);currentText=(!navigationAsDateFormat?currentText:this.formatDate(currentText,gotoDate,this._getFormatConfig(inst)));controls=(!inst.inline?"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+
this._get(inst,"closeText")+"</button>":"");buttonPanel=(showButtonPanel)?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(isRTL?controls:"")+
(this._isInRange(inst,gotoDate)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'"+">"+currentText+"</button>":"")+(isRTL?"":controls)+"</div>":"";firstDay=parseInt(this._get(inst,"firstDay"),10);firstDay=(isNaN(firstDay)?0:firstDay);showWeek=this._get(inst,"showWeek");dayNames=this._get(inst,"dayNames");dayNamesMin=this._get(inst,"dayNamesMin");monthNames=this._get(inst,"monthNames");monthNamesShort=this._get(inst,"monthNamesShort");beforeShowDay=this._get(inst,"beforeShowDay");showOtherMonths=this._get(inst,"showOtherMonths");selectOtherMonths=this._get(inst,"selectOtherMonths");defaultDate=this._getDefaultDate(inst);html="";dow;for(row=0;row<numMonths[0];row++){group="";this.maxRows=4;for(col=0;col<numMonths[1];col++){selectedDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,inst.selectedDay));cornerClass=" ui-corner-all";calender="";if(isMultiMonth){calender+="<div class='ui-datepicker-group";if(numMonths[1]>1){switch(col){case 0:calender+=" ui-datepicker-group-first";cornerClass=" ui-corner-"+(isRTL?"right":"left");break;case numMonths[1]-1:calender+=" ui-datepicker-group-last";cornerClass=" ui-corner-"+(isRTL?"left":"right");break;default:calender+=" ui-datepicker-group-middle";cornerClass="";break;}}
calender+="'>";}
calender+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+cornerClass+"'>"+
(/all|left/.test(cornerClass)&&row===0?(isRTL?next:prev):"")+
(/all|right/.test(cornerClass)&&row===0?(isRTL?prev:next):"")+
this._generateMonthYearHeader(inst,drawMonth,drawYear,minDate,maxDate,row>0||col>0,monthNames,monthNamesShort)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>";thead=(showWeek?"<th class='ui-datepicker-week-col'>"+this._get(inst,"weekHeader")+"</th>":"");for(dow=0;dow<7;dow++){day=(dow+firstDay)%7;thead+="<th scope='col'"+((dow+firstDay+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+dayNames[day]+"'>"+dayNamesMin[day]+"</span></th>";}
calender+=thead+"</tr></thead><tbody>";daysInMonth=this._getDaysInMonth(drawYear,drawMonth);if(drawYear===inst.selectedYear&&drawMonth===inst.selectedMonth){inst.selectedDay=Math.min(inst.selectedDay,daysInMonth);}
leadDays=(this._getFirstDayOfMonth(drawYear,drawMonth)-firstDay+7)%7;curRows=Math.ceil((leadDays+daysInMonth)/ 7);numRows=(isMultiMonth?this.maxRows>curRows?this.maxRows:curRows:curRows);this.maxRows=numRows;printDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,1-leadDays));for(dRow=0;dRow<numRows;dRow++){calender+="<tr>";tbody=(!showWeek?"":"<td class='ui-datepicker-week-col'>"+
this._get(inst,"calculateWeek")(printDate)+"</td>");for(dow=0;dow<7;dow++){daySettings=(beforeShowDay?beforeShowDay.apply((inst.input?inst.input[0]:null),[printDate]):[true,""]);otherMonth=(printDate.getMonth()!==drawMonth);unselectable=(otherMonth&&!selectOtherMonths)||!daySettings[0]||(minDate&&printDate<minDate)||(maxDate&&printDate>maxDate);tbody+="<td class='"+
((dow+firstDay+6)%7>=5?" ui-datepicker-week-end":"")+
(otherMonth?" ui-datepicker-other-month":"")+
((printDate.getTime()===selectedDate.getTime()&&drawMonth===inst.selectedMonth&&inst._keyEvent)||(defaultDate.getTime()===printDate.getTime()&&defaultDate.getTime()===selectedDate.getTime())?" "+this._dayOverClass:"")+
(unselectable?" "+this._unselectableClass+" ui-state-disabled":"")+
(otherMonth&&!showOtherMonths?"":" "+daySettings[1]+
(printDate.getTime()===currentDate.getTime()?" "+this._currentClass:"")+
(printDate.getTime()===today.getTime()?" ui-datepicker-today":""))+"'"+
((!otherMonth||showOtherMonths)&&daySettings[2]?" title='"+daySettings[2].replace(/'/g,"&#39;")+"'":"")+
(unselectable?"":" data-handler='selectDay' data-event='click' data-month='"+printDate.getMonth()+"' data-year='"+printDate.getFullYear()+"'")+">"+
(otherMonth&&!showOtherMonths?"&#xa0;":(unselectable?"<span class='ui-state-default'>"+printDate.getDate()+"</span>":"<a class='ui-state-default"+
(printDate.getTime()===today.getTime()?" ui-state-highlight":"")+
(printDate.getTime()===currentDate.getTime()?" ui-state-active":"")+
(otherMonth?" ui-priority-secondary":"")+"' href='#'>"+printDate.getDate()+"</a>"))+"</td>";printDate.setDate(printDate.getDate()+1);printDate=this._daylightSavingAdjust(printDate);}
calender+=tbody+"</tr>";}
drawMonth++;if(drawMonth>11){drawMonth=0;drawYear++;}
calender+="</tbody></table>"+(isMultiMonth?"</div>"+
((numMonths[0]>0&&col===numMonths[1]-1)?"<div class='ui-datepicker-row-break'></div>":""):"");group+=calender;}
html+=group;}
html+=buttonPanel;inst._keyEvent=false;return html;},_generateMonthYearHeader:function(inst,drawMonth,drawYear,minDate,maxDate,secondary,monthNames,monthNamesShort){var inMinYear,inMaxYear,month,years,thisYear,determineYear,year,endYear,changeMonth=this._get(inst,"changeMonth"),changeYear=this._get(inst,"changeYear"),showMonthAfterYear=this._get(inst,"showMonthAfterYear"),html="<div class='ui-datepicker-title'>",monthHtml="";if(secondary||!changeMonth){monthHtml+="<span class='ui-datepicker-month'>"+monthNames[drawMonth]+"</span>";}else{inMinYear=(minDate&&minDate.getFullYear()===drawYear);inMaxYear=(maxDate&&maxDate.getFullYear()===drawYear);monthHtml+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";for(month=0;month<12;month++){if((!inMinYear||month>=minDate.getMonth())&&(!inMaxYear||month<=maxDate.getMonth())){monthHtml+="<option value='"+month+"'"+
(month===drawMonth?" selected='selected'":"")+">"+monthNamesShort[month]+"</option>";}}
monthHtml+="</select>";}
if(!showMonthAfterYear){html+=monthHtml+(secondary||!(changeMonth&&changeYear)?"&#xa0;":"");}
if(!inst.yearshtml){inst.yearshtml="";if(secondary||!changeYear){html+="<span class='ui-datepicker-year'>"+drawYear+"</span>";}else{years=this._get(inst,"yearRange").split(":");thisYear=new Date().getFullYear();determineYear=function(value){var year=(value.match(/c[+\-].*/)?drawYear+parseInt(value.substring(1),10):(value.match(/[+\-].*/)?thisYear+parseInt(value,10):parseInt(value,10)));return(isNaN(year)?thisYear:year);};year=determineYear(years[0]);endYear=Math.max(year,determineYear(years[1]||""));year=(minDate?Math.max(year,minDate.getFullYear()):year);endYear=(maxDate?Math.min(endYear,maxDate.getFullYear()):endYear);inst.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";for(;year<=endYear;year++){inst.yearshtml+="<option value='"+year+"'"+
(year===drawYear?" selected='selected'":"")+">"+year+"</option>";}
inst.yearshtml+="</select>";html+=inst.yearshtml;inst.yearshtml=null;}}
html+=this._get(inst,"yearSuffix");if(showMonthAfterYear){html+=(secondary||!(changeMonth&&changeYear)?"&#xa0;":"")+monthHtml;}
html+="</div>";return html;},_adjustInstDate:function(inst,offset,period){var year=inst.drawYear+(period==="Y"?offset:0),month=inst.drawMonth+(period==="M"?offset:0),day=Math.min(inst.selectedDay,this._getDaysInMonth(year,month))+(period==="D"?offset:0),date=this._restrictMinMax(inst,this._daylightSavingAdjust(new Date(year,month,day)));inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();if(period==="M"||period==="Y"){this._notifyChange(inst);}},_restrictMinMax:function(inst,date){var minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),newDate=(minDate&&date<minDate?minDate:date);return(maxDate&&newDate>maxDate?maxDate:newDate);},_notifyChange:function(inst){var onChange=this._get(inst,"onChangeMonthYear");if(onChange){onChange.apply((inst.input?inst.input[0]:null),[inst.selectedYear,inst.selectedMonth+1,inst]);}},_getNumberOfMonths:function(inst){var numMonths=this._get(inst,"numberOfMonths");return(numMonths==null?[1,1]:(typeof numMonths==="number"?[1,numMonths]:numMonths));},_getMinMaxDate:function(inst,minMax){return this._determineDate(inst,this._get(inst,minMax+"Date"),null);},_getDaysInMonth:function(year,month){return 32-this._daylightSavingAdjust(new Date(year,month,32)).getDate();},_getFirstDayOfMonth:function(year,month){return new Date(year,month,1).getDay();},_canAdjustMonth:function(inst,offset,curYear,curMonth){var numMonths=this._getNumberOfMonths(inst),date=this._daylightSavingAdjust(new Date(curYear,curMonth+(offset<0?offset:numMonths[0]*numMonths[1]),1));if(offset<0){date.setDate(this._getDaysInMonth(date.getFullYear(),date.getMonth()));}
return this._isInRange(inst,date);},_isInRange:function(inst,date){var yearSplit,currentYear,minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),minYear=null,maxYear=null,years=this._get(inst,"yearRange");if(years){yearSplit=years.split(":");currentYear=new Date().getFullYear();minYear=parseInt(yearSplit[0],10);maxYear=parseInt(yearSplit[1],10);if(yearSplit[0].match(/[+\-].*/)){minYear+=currentYear;}
if(yearSplit[1].match(/[+\-].*/)){maxYear+=currentYear;}}
return((!minDate||date.getTime()>=minDate.getTime())&&(!maxDate||date.getTime()<=maxDate.getTime())&&(!minYear||date.getFullYear()>=minYear)&&(!maxYear||date.getFullYear()<=maxYear));},_getFormatConfig:function(inst){var shortYearCutoff=this._get(inst,"shortYearCutoff");shortYearCutoff=(typeof shortYearCutoff!=="string"?shortYearCutoff:new Date().getFullYear()%100+parseInt(shortYearCutoff,10));return{shortYearCutoff:shortYearCutoff,dayNamesShort:this._get(inst,"dayNamesShort"),dayNames:this._get(inst,"dayNames"),monthNamesShort:this._get(inst,"monthNamesShort"),monthNames:this._get(inst,"monthNames")};},_formatDate:function(inst,day,month,year){if(!day){inst.currentDay=inst.selectedDay;inst.currentMonth=inst.selectedMonth;inst.currentYear=inst.selectedYear;}
var date=(day?(typeof day==="object"?day:this._daylightSavingAdjust(new Date(year,month,day))):this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));return this.formatDate(this._get(inst,"dateFormat"),date,this._getFormatConfig(inst));}});function datepicker_bindHover(dpDiv){var selector="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return dpDiv.delegate(selector,"mouseout",function(){$(this).removeClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1){$(this).removeClass("ui-datepicker-prev-hover");}
if(this.className.indexOf("ui-datepicker-next")!==-1){$(this).removeClass("ui-datepicker-next-hover");}}).delegate(selector,"mouseover",datepicker_handleMouseover);}
function datepicker_handleMouseover(){if(!$.datepicker._isDisabledDatepicker(datepicker_instActive.inline?datepicker_instActive.dpDiv.parent()[0]:datepicker_instActive.input[0])){$(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");$(this).addClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1){$(this).addClass("ui-datepicker-prev-hover");}
if(this.className.indexOf("ui-datepicker-next")!==-1){$(this).addClass("ui-datepicker-next-hover");}}}
function datepicker_extendRemove(target,props){$.extend(target,props);for(var name in props){if(props[name]==null){target[name]=props[name];}}
return target;}
$.fn.datepicker=function(options){if(!this.length){return this;}
if(!$.datepicker.initialized){$(document).mousedown($.datepicker._checkExternalClick);$.datepicker.initialized=true;}
if($("#"+$.datepicker._mainDivId).length===0){$("body").append($.datepicker.dpDiv);}
var otherArgs=Array.prototype.slice.call(arguments,1);if(typeof options==="string"&&(options==="isDisabled"||options==="getDate"||options==="widget")){return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs));}
if(options==="option"&&arguments.length===2&&typeof arguments[1]==="string"){return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs));}
return this.each(function(){typeof options==="string"?$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this].concat(otherArgs)):$.datepicker._attachDatepicker(this,options);});};$.datepicker=new Datepicker();$.datepicker.initialized=false;$.datepicker.uuid=new Date().getTime();$.datepicker.version="1.11.4";var datepicker=$.datepicker;var dataSpace="ui-effects-",jQuery=$;$.effects={effect:{}};(function(jQuery,undefined){var stepHooks="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",rplusequals=/^([\-+])=\s*(\d+\.?\d*)/,stringParsers=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(execResult){return[execResult[1],execResult[2],execResult[3],execResult[4]];}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(execResult){return[execResult[1]*2.55,execResult[2]*2.55,execResult[3]*2.55,execResult[4]];}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(execResult){return[parseInt(execResult[1],16),parseInt(execResult[2],16),parseInt(execResult[3],16)];}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(execResult){return[parseInt(execResult[1]+execResult[1],16),parseInt(execResult[2]+execResult[2],16),parseInt(execResult[3]+execResult[3],16)];}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(execResult){return[execResult[1],execResult[2]/ 100,execResult[3]/ 100,execResult[4]];}}],color=jQuery.Color=function(color,green,blue,alpha){return new jQuery.Color.fn.parse(color,green,blue,alpha);},spaces={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},propTypes={"byte":{floor:true,max:255},"percent":{max:1},"degrees":{mod:360,floor:true}},support=color.support={},supportElem=jQuery("<p>")[0],colors,each=jQuery.each;supportElem.style.cssText="background-color:rgba(1,1,1,.5)";support.rgba=supportElem.style.backgroundColor.indexOf("rgba")>-1;each(spaces,function(spaceName,space){space.cache="_"+spaceName;space.props.alpha={idx:3,type:"percent",def:1};});function clamp(value,prop,allowEmpty){var type=propTypes[prop.type]||{};if(value==null){return(allowEmpty||!prop.def)?null:prop.def;}
value=type.floor?~~value:parseFloat(value);if(isNaN(value)){return prop.def;}
if(type.mod){return(value+type.mod)%type.mod;}
return 0>value?0:type.max<value?type.max:value;}
function stringParse(string){var inst=color(),rgba=inst._rgba=[];string=string.toLowerCase();each(stringParsers,function(i,parser){var parsed,match=parser.re.exec(string),values=match&&parser.parse(match),spaceName=parser.space||"rgba";if(values){parsed=inst[spaceName](values);inst[spaces[spaceName].cache]=parsed[spaces[spaceName].cache];rgba=inst._rgba=parsed._rgba;return false;}});if(rgba.length){if(rgba.join()==="0,0,0,0"){jQuery.extend(rgba,colors.transparent);}
return inst;}
return colors[string];}
color.fn=jQuery.extend(color.prototype,{parse:function(red,green,blue,alpha){if(red===undefined){this._rgba=[null,null,null,null];return this;}
if(red.jquery||red.nodeType){red=jQuery(red).css(green);green=undefined;}
var inst=this,type=jQuery.type(red),rgba=this._rgba=[];if(green!==undefined){red=[red,green,blue,alpha];type="array";}
if(type==="string"){return this.parse(stringParse(red)||colors._default);}
if(type==="array"){each(spaces.rgba.props,function(key,prop){rgba[prop.idx]=clamp(red[prop.idx],prop);});return this;}
if(type==="object"){if(red instanceof color){each(spaces,function(spaceName,space){if(red[space.cache]){inst[space.cache]=red[space.cache].slice();}});}else{each(spaces,function(spaceName,space){var cache=space.cache;each(space.props,function(key,prop){if(!inst[cache]&&space.to){if(key==="alpha"||red[key]==null){return;}
inst[cache]=space.to(inst._rgba);}
inst[cache][prop.idx]=clamp(red[key],prop,true);});if(inst[cache]&&jQuery.inArray(null,inst[cache].slice(0,3))<0){inst[cache][3]=1;if(space.from){inst._rgba=space.from(inst[cache]);}}});}
return this;}},is:function(compare){var is=color(compare),same=true,inst=this;each(spaces,function(_,space){var localCache,isCache=is[space.cache];if(isCache){localCache=inst[space.cache]||space.to&&space.to(inst._rgba)||[];each(space.props,function(_,prop){if(isCache[prop.idx]!=null){same=(isCache[prop.idx]===localCache[prop.idx]);return same;}});}
return same;});return same;},_space:function(){var used=[],inst=this;each(spaces,function(spaceName,space){if(inst[space.cache]){used.push(spaceName);}});return used.pop();},transition:function(other,distance){var end=color(other),spaceName=end._space(),space=spaces[spaceName],startColor=this.alpha()===0?color("transparent"):this,start=startColor[space.cache]||space.to(startColor._rgba),result=start.slice();end=end[space.cache];each(space.props,function(key,prop){var index=prop.idx,startValue=start[index],endValue=end[index],type=propTypes[prop.type]||{};if(endValue===null){return;}
if(startValue===null){result[index]=endValue;}else{if(type.mod){if(endValue-startValue>type.mod / 2){startValue+=type.mod;}else if(startValue-endValue>type.mod / 2){startValue-=type.mod;}}
result[index]=clamp((endValue-startValue)*distance+startValue,prop);}});return this[spaceName](result);},blend:function(opaque){if(this._rgba[3]===1){return this;}
var rgb=this._rgba.slice(),a=rgb.pop(),blend=color(opaque)._rgba;return color(jQuery.map(rgb,function(v,i){return(1-a)*blend[i]+a*v;}));},toRgbaString:function(){var prefix="rgba(",rgba=jQuery.map(this._rgba,function(v,i){return v==null?(i>2?1:0):v;});if(rgba[3]===1){rgba.pop();prefix="rgb(";}
return prefix+rgba.join()+")";},toHslaString:function(){var prefix="hsla(",hsla=jQuery.map(this.hsla(),function(v,i){if(v==null){v=i>2?1:0;}
if(i&&i<3){v=Math.round(v*100)+"%";}
return v;});if(hsla[3]===1){hsla.pop();prefix="hsl(";}
return prefix+hsla.join()+")";},toHexString:function(includeAlpha){var rgba=this._rgba.slice(),alpha=rgba.pop();if(includeAlpha){rgba.push(~~(alpha*255));}
return"#"+jQuery.map(rgba,function(v){v=(v||0).toString(16);return v.length===1?"0"+v:v;}).join("");},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString();}});color.fn.parse.prototype=color.fn;function hue2rgb(p,q,h){h=(h+1)%1;if(h*6<1){return p+(q-p)*h*6;}
if(h*2<1){return q;}
if(h*3<2){return p+(q-p)*((2 / 3)-h)*6;}
return p;}
spaces.hsla.to=function(rgba){if(rgba[0]==null||rgba[1]==null||rgba[2]==null){return[null,null,null,rgba[3]];}
var r=rgba[0]/ 255,g=rgba[1]/ 255,b=rgba[2]/ 255,a=rgba[3],max=Math.max(r,g,b),min=Math.min(r,g,b),diff=max-min,add=max+min,l=add*0.5,h,s;if(min===max){h=0;}else if(r===max){h=(60*(g-b)/ diff)+360;}else if(g===max){h=(60*(b-r)/ diff)+120;}else{h=(60*(r-g)/ diff)+240;}
if(diff===0){s=0;}else if(l<=0.5){s=diff / add;}else{s=diff /(2-add);}
return[Math.round(h)%360,s,l,a==null?1:a];};spaces.hsla.from=function(hsla){if(hsla[0]==null||hsla[1]==null||hsla[2]==null){return[null,null,null,hsla[3]];}
var h=hsla[0]/ 360,s=hsla[1],l=hsla[2],a=hsla[3],q=l<=0.5?l*(1+s):l+s-l*s,p=2*l-q;return[Math.round(hue2rgb(p,q,h+(1 / 3))*255),Math.round(hue2rgb(p,q,h)*255),Math.round(hue2rgb(p,q,h-(1 / 3))*255),a];};each(spaces,function(spaceName,space){var props=space.props,cache=space.cache,to=space.to,from=space.from;color.fn[spaceName]=function(value){if(to&&!this[cache]){this[cache]=to(this._rgba);}
if(value===undefined){return this[cache].slice();}
var ret,type=jQuery.type(value),arr=(type==="array"||type==="object")?value:arguments,local=this[cache].slice();each(props,function(key,prop){var val=arr[type==="object"?key:prop.idx];if(val==null){val=local[prop.idx];}
local[prop.idx]=clamp(val,prop);});if(from){ret=color(from(local));ret[cache]=local;return ret;}else{return color(local);}};each(props,function(key,prop){if(color.fn[key]){return;}
color.fn[key]=function(value){var vtype=jQuery.type(value),fn=(key==="alpha"?(this._hsla?"hsla":"rgba"):spaceName),local=this[fn](),cur=local[prop.idx],match;if(vtype==="undefined"){return cur;}
if(vtype==="function"){value=value.call(this,cur);vtype=jQuery.type(value);}
if(value==null&&prop.empty){return this;}
if(vtype==="string"){match=rplusequals.exec(value);if(match){value=cur+parseFloat(match[2])*(match[1]==="+"?1:-1);}}
local[prop.idx]=value;return this[fn](local);};});});color.hook=function(hook){var hooks=hook.split(" ");each(hooks,function(i,hook){jQuery.cssHooks[hook]={set:function(elem,value){var parsed,curElem,backgroundColor="";if(value!=="transparent"&&(jQuery.type(value)!=="string"||(parsed=stringParse(value)))){value=color(parsed||value);if(!support.rgba&&value._rgba[3]!==1){curElem=hook==="backgroundColor"?elem.parentNode:elem;while((backgroundColor===""||backgroundColor==="transparent")&&curElem&&curElem.style){try{backgroundColor=jQuery.css(curElem,"backgroundColor");curElem=curElem.parentNode;}catch(e){}}
value=value.blend(backgroundColor&&backgroundColor!=="transparent"?backgroundColor:"_default");}
value=value.toRgbaString();}
try{elem.style[hook]=value;}catch(e){}}};jQuery.fx.step[hook]=function(fx){if(!fx.colorInit){fx.start=color(fx.elem,hook);fx.end=color(fx.end);fx.colorInit=true;}
jQuery.cssHooks[hook].set(fx.elem,fx.start.transition(fx.end,fx.pos));};});};color.hook(stepHooks);jQuery.cssHooks.borderColor={expand:function(value){var expanded={};each(["Top","Right","Bottom","Left"],function(i,part){expanded["border"+part+"Color"]=value;});return expanded;}};colors=jQuery.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"};})(jQuery);(function(){var classAnimationActions=["add","remove","toggle"],shorthandStyles={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};$.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(_,prop){$.fx.step[prop]=function(fx){if(fx.end!=="none"&&!fx.setAttr||fx.pos===1&&!fx.setAttr){jQuery.style(fx.elem,prop,fx.end);fx.setAttr=true;}};});function getElementStyles(elem){var key,len,style=elem.ownerDocument.defaultView?elem.ownerDocument.defaultView.getComputedStyle(elem,null):elem.currentStyle,styles={};if(style&&style.length&&style[0]&&style[style[0]]){len=style.length;while(len--){key=style[len];if(typeof style[key]==="string"){styles[$.camelCase(key)]=style[key];}}}else{for(key in style){if(typeof style[key]==="string"){styles[key]=style[key];}}}
return styles;}
function styleDifference(oldStyle,newStyle){var diff={},name,value;for(name in newStyle){value=newStyle[name];if(oldStyle[name]!==value){if(!shorthandStyles[name]){if($.fx.step[name]||!isNaN(parseFloat(value))){diff[name]=value;}}}}
return diff;}
if(!$.fn.addBack){$.fn.addBack=function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector));};}
$.effects.animateClass=function(value,duration,easing,callback){var o=$.speed(duration,easing,callback);return this.queue(function(){var animated=$(this),baseClass=animated.attr("class")||"",applyClassChange,allAnimations=o.children?animated.find("*").addBack():animated;allAnimations=allAnimations.map(function(){var el=$(this);return{el:el,start:getElementStyles(this)};});applyClassChange=function(){$.each(classAnimationActions,function(i,action){if(value[action]){animated[action+"Class"](value[action]);}});};applyClassChange();allAnimations=allAnimations.map(function(){this.end=getElementStyles(this.el[0]);this.diff=styleDifference(this.start,this.end);return this;});animated.attr("class",baseClass);allAnimations=allAnimations.map(function(){var styleInfo=this,dfd=$.Deferred(),opts=$.extend({},o,{queue:false,complete:function(){dfd.resolve(styleInfo);}});this.el.animate(this.diff,opts);return dfd.promise();});$.when.apply($,allAnimations.get()).done(function(){applyClassChange();$.each(arguments,function(){var el=this.el;$.each(this.diff,function(key){el.css(key,"");});});o.complete.call(animated[0]);});});};$.fn.extend({addClass:(function(orig){return function(classNames,speed,easing,callback){return speed?$.effects.animateClass.call(this,{add:classNames},speed,easing,callback):orig.apply(this,arguments);};})($.fn.addClass),removeClass:(function(orig){return function(classNames,speed,easing,callback){return arguments.length>1?$.effects.animateClass.call(this,{remove:classNames},speed,easing,callback):orig.apply(this,arguments);};})($.fn.removeClass),toggleClass:(function(orig){return function(classNames,force,speed,easing,callback){if(typeof force==="boolean"||force===undefined){if(!speed){return orig.apply(this,arguments);}else{return $.effects.animateClass.call(this,(force?{add:classNames}:{remove:classNames}),speed,easing,callback);}}else{return $.effects.animateClass.call(this,{toggle:classNames},force,speed,easing);}};})($.fn.toggleClass),switchClass:function(remove,add,speed,easing,callback){return $.effects.animateClass.call(this,{add:add,remove:remove},speed,easing,callback);}});})();(function(){$.extend($.effects,{version:"1.11.4",save:function(element,set){for(var i=0;i<set.length;i++){if(set[i]!==null){element.data(dataSpace+set[i],element[0].style[set[i]]);}}},restore:function(element,set){var val,i;for(i=0;i<set.length;i++){if(set[i]!==null){val=element.data(dataSpace+set[i]);if(val===undefined){val="";}
element.css(set[i],val);}}},setMode:function(el,mode){if(mode==="toggle"){mode=el.is(":hidden")?"show":"hide";}
return mode;},getBaseline:function(origin,original){var y,x;switch(origin[0]){case"top":y=0;break;case"middle":y=0.5;break;case"bottom":y=1;break;default:y=origin[0]/ original.height;}
switch(origin[1]){case"left":x=0;break;case"center":x=0.5;break;case"right":x=1;break;default:x=origin[1]/ original.width;}
return{x:x,y:y};},createWrapper:function(element){if(element.parent().is(".ui-effects-wrapper")){return element.parent();}
var props={width:element.outerWidth(true),height:element.outerHeight(true),"float":element.css("float")},wrapper=$("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),size={width:element.width(),height:element.height()},active=document.activeElement;try{active.id;}catch(e){active=document.body;}
element.wrap(wrapper);if(element[0]===active||$.contains(element[0],active)){$(active).focus();}
wrapper=element.parent();if(element.css("position")==="static"){wrapper.css({position:"relative"});element.css({position:"relative"});}else{$.extend(props,{position:element.css("position"),zIndex:element.css("z-index")});$.each(["top","left","bottom","right"],function(i,pos){props[pos]=element.css(pos);if(isNaN(parseInt(props[pos],10))){props[pos]="auto";}});element.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"});}
element.css(size);return wrapper.css(props).show();},removeWrapper:function(element){var active=document.activeElement;if(element.parent().is(".ui-effects-wrapper")){element.parent().replaceWith(element);if(element[0]===active||$.contains(element[0],active)){$(active).focus();}}
return element;},setTransition:function(element,list,factor,value){value=value||{};$.each(list,function(i,x){var unit=element.cssUnit(x);if(unit[0]>0){value[x]=unit[0]*factor+unit[1];}});return value;}});function _normalizeArguments(effect,options,speed,callback){if($.isPlainObject(effect)){options=effect;effect=effect.effect;}
effect={effect:effect};if(options==null){options={};}
if($.isFunction(options)){callback=options;speed=null;options={};}
if(typeof options==="number"||$.fx.speeds[options]){callback=speed;speed=options;options={};}
if($.isFunction(speed)){callback=speed;speed=null;}
if(options){$.extend(effect,options);}
speed=speed||options.duration;effect.duration=$.fx.off?0:typeof speed==="number"?speed:speed in $.fx.speeds?$.fx.speeds[speed]:$.fx.speeds._default;effect.complete=callback||options.complete;return effect;}
function standardAnimationOption(option){if(!option||typeof option==="number"||$.fx.speeds[option]){return true;}
if(typeof option==="string"&&!$.effects.effect[option]){return true;}
if($.isFunction(option)){return true;}
if(typeof option==="object"&&!option.effect){return true;}
return false;}
$.fn.extend({effect:function(){var args=_normalizeArguments.apply(this,arguments),mode=args.mode,queue=args.queue,effectMethod=$.effects.effect[args.effect];if($.fx.off||!effectMethod){if(mode){return this[mode](args.duration,args.complete);}else{return this.each(function(){if(args.complete){args.complete.call(this);}});}}
function run(next){var elem=$(this),complete=args.complete,mode=args.mode;function done(){if($.isFunction(complete)){complete.call(elem[0]);}
if($.isFunction(next)){next();}}
if(elem.is(":hidden")?mode==="hide":mode==="show"){elem[mode]();done();}else{effectMethod.call(elem[0],args,done);}}
return queue===false?this.each(run):this.queue(queue||"fx",run);},show:(function(orig){return function(option){if(standardAnimationOption(option)){return orig.apply(this,arguments);}else{var args=_normalizeArguments.apply(this,arguments);args.mode="show";return this.effect.call(this,args);}};})($.fn.show),hide:(function(orig){return function(option){if(standardAnimationOption(option)){return orig.apply(this,arguments);}else{var args=_normalizeArguments.apply(this,arguments);args.mode="hide";return this.effect.call(this,args);}};})($.fn.hide),toggle:(function(orig){return function(option){if(standardAnimationOption(option)||typeof option==="boolean"){return orig.apply(this,arguments);}else{var args=_normalizeArguments.apply(this,arguments);args.mode="toggle";return this.effect.call(this,args);}};})($.fn.toggle),cssUnit:function(key){var style=this.css(key),val=[];$.each(["em","px","%","pt"],function(i,unit){if(style.indexOf(unit)>0){val=[parseFloat(style),unit];}});return val;}});})();(function(){var baseEasings={};$.each(["Quad","Cubic","Quart","Quint","Expo"],function(i,name){baseEasings[name]=function(p){return Math.pow(p,i+2);};});$.extend(baseEasings,{Sine:function(p){return 1-Math.cos(p*Math.PI / 2);},Circ:function(p){return 1-Math.sqrt(1-p*p);},Elastic:function(p){return p===0||p===1?p:-Math.pow(2,8*(p-1))*Math.sin(((p-1)*80-7.5)*Math.PI / 15);},Back:function(p){return p*p*(3*p-2);},Bounce:function(p){var pow2,bounce=4;while(p<((pow2=Math.pow(2,--bounce))-1)/ 11){}
return 1 / Math.pow(4,3-bounce)-7.5625*Math.pow((pow2*3-2)/ 22-p,2);}});$.each(baseEasings,function(name,easeIn){$.easing["easeIn"+name]=easeIn;$.easing["easeOut"+name]=function(p){return 1-easeIn(1-p);};$.easing["easeInOut"+name]=function(p){return p<0.5?easeIn(p*2)/ 2:1-easeIn(p*-2+2)/ 2;};});})();var effect=$.effects;var effectBlind=$.effects.effect.blind=function(o,done){var el=$(this),rvertical=/up|down|vertical/,rpositivemotion=/up|left|vertical|horizontal/,props=["position","top","bottom","left","right","height","width"],mode=$.effects.setMode(el,o.mode||"hide"),direction=o.direction||"up",vertical=rvertical.test(direction),ref=vertical?"height":"width",ref2=vertical?"top":"left",motion=rpositivemotion.test(direction),animation={},show=mode==="show",wrapper,distance,margin;if(el.parent().is(".ui-effects-wrapper")){$.effects.save(el.parent(),props);}else{$.effects.save(el,props);}
el.show();wrapper=$.effects.createWrapper(el).css({overflow:"hidden"});distance=wrapper[ref]();margin=parseFloat(wrapper.css(ref2))||0;animation[ref]=show?distance:0;if(!motion){el.css(vertical?"bottom":"right",0).css(vertical?"top":"left","auto").css({position:"absolute"});animation[ref2]=show?margin:distance+margin;}
if(show){wrapper.css(ref,0);if(!motion){wrapper.css(ref2,margin+distance);}}
wrapper.animate(animation,{duration:o.duration,easing:o.easing,queue:false,complete:function(){if(mode==="hide"){el.hide();}
$.effects.restore(el,props);$.effects.removeWrapper(el);done();}});};var effectFade=$.effects.effect.fade=function(o,done){var el=$(this),mode=$.effects.setMode(el,o.mode||"toggle");el.animate({opacity:mode},{queue:false,duration:o.duration,easing:o.easing,complete:done});};var effectFold=$.effects.effect.fold=function(o,done){var el=$(this),props=["position","top","bottom","left","right","height","width"],mode=$.effects.setMode(el,o.mode||"hide"),show=mode==="show",hide=mode==="hide",size=o.size||15,percent=/([0-9]+)%/.exec(size),horizFirst=!!o.horizFirst,widthFirst=show!==horizFirst,ref=widthFirst?["width","height"]:["height","width"],duration=o.duration / 2,wrapper,distance,animation1={},animation2={};$.effects.save(el,props);el.show();wrapper=$.effects.createWrapper(el).css({overflow:"hidden"});distance=widthFirst?[wrapper.width(),wrapper.height()]:[wrapper.height(),wrapper.width()];if(percent){size=parseInt(percent[1],10)/ 100*distance[hide?0:1];}
if(show){wrapper.css(horizFirst?{height:0,width:size}:{height:size,width:0});}
animation1[ref[0]]=show?distance[0]:size;animation2[ref[1]]=show?distance[1]:0;wrapper.animate(animation1,duration,o.easing).animate(animation2,duration,o.easing,function(){if(hide){el.hide();}
$.effects.restore(el,props);$.effects.removeWrapper(el);done();});};var effectHighlight=$.effects.effect.highlight=function(o,done){var elem=$(this),props=["backgroundImage","backgroundColor","opacity"],mode=$.effects.setMode(elem,o.mode||"show"),animation={backgroundColor:elem.css("backgroundColor")};if(mode==="hide"){animation.opacity=0;}
$.effects.save(elem,props);elem.show().css({backgroundImage:"none",backgroundColor:o.color||"#ffff99"}).animate(animation,{queue:false,duration:o.duration,easing:o.easing,complete:function(){if(mode==="hide"){elem.hide();}
$.effects.restore(elem,props);done();}});};var effectPulsate=$.effects.effect.pulsate=function(o,done){var elem=$(this),mode=$.effects.setMode(elem,o.mode||"show"),show=mode==="show",hide=mode==="hide",showhide=(show||mode==="hide"),anims=((o.times||5)*2)+(showhide?1:0),duration=o.duration / anims,animateTo=0,queue=elem.queue(),queuelen=queue.length,i;if(show||!elem.is(":visible")){elem.css("opacity",0).show();animateTo=1;}
for(i=1;i<anims;i++){elem.animate({opacity:animateTo},duration,o.easing);animateTo=1-animateTo;}
elem.animate({opacity:animateTo},duration,o.easing);elem.queue(function(){if(hide){elem.hide();}
done();});if(queuelen>1){queue.splice.apply(queue,[1,0].concat(queue.splice(queuelen,anims+1)));}
elem.dequeue();};var effectShake=$.effects.effect.shake=function(o,done){var el=$(this),props=["position","top","bottom","left","right","height","width"],mode=$.effects.setMode(el,o.mode||"effect"),direction=o.direction||"left",distance=o.distance||20,times=o.times||3,anims=times*2+1,speed=Math.round(o.duration / anims),ref=(direction==="up"||direction==="down")?"top":"left",positiveMotion=(direction==="up"||direction==="left"),animation={},animation1={},animation2={},i,queue=el.queue(),queuelen=queue.length;$.effects.save(el,props);el.show();$.effects.createWrapper(el);animation[ref]=(positiveMotion?"-=":"+=")+distance;animation1[ref]=(positiveMotion?"+=":"-=")+distance*2;animation2[ref]=(positiveMotion?"-=":"+=")+distance*2;el.animate(animation,speed,o.easing);for(i=1;i<times;i++){el.animate(animation1,speed,o.easing).animate(animation2,speed,o.easing);}
el.animate(animation1,speed,o.easing).animate(animation,speed / 2,o.easing).queue(function(){if(mode==="hide"){el.hide();}
$.effects.restore(el,props);$.effects.removeWrapper(el);done();});if(queuelen>1){queue.splice.apply(queue,[1,0].concat(queue.splice(queuelen,anims+1)));}
el.dequeue();};}));var fb_pathToImage="https://d3bvw51884uqkr.cloudfront.net/1e4c1e0b0d9bb15ecfdbd1974abd7ffe91233f52/images/loading_white_64.gif";var fb_CurRequestObj=null;var fb_iRequest=0;var fb_height=64;var fb_width=64;var facebox_html='\<div id="dialog_overlay"></div>     <div id="facebox" style="display:none; overflow:visible;">        <div class="fb_popup">       <table>         <tbody>        <tr>          <td class="fb_body">         <div class="fb_main">          <div class="fb_header">            <a href="#" class="fb_close fal fa-times" onclick="return tb_remove();" title="Close" aria-label="Close dialog">            </a>            <span class="fb_title">            </span>          </div>          <div class="fb_content">          </div>         </div>          </td>        </tr>         </tbody>       </table>        </div>      </div>';$(document).ready(function(){tb_init('a.thickbox, area.thickbox, input.thickbox');});function tb_init(domChunk){$(domChunk).click(function(){var t=this.title||this.name||null;var a=this.href||this.alt;var g=this.rel||false;tb_show(t,a,g);this.blur();return false;});}
function fb_loading(loading_caption){if($('#facebox .fb_loading').length==1)return true;if(loading_caption){var loading_html='<div class="fb_loading" style="height:64px; text-align:center;"><div class="cp-spinner cp-spinner-medium"></div><!--<img src="'+fb_pathToImage+'" style="position:relative; height:32px;" />--></div>';$("#facebox .fb_title").html(loading_caption);$('#facebox .fb_main').after(loading_html);}else{var loading_html='<div class="fb_loading" style="height:64px; width:64px; text-align:center;"><div class="cp-spinner cp-spinner-medium"></div><!--<img src="'+fb_pathToImage+'" style="position:relative; top:16px; height:32px;" />--></div>';$('#facebox .fb_main').hide().after(loading_html);}
$('#facebox .fb_content').empty();if($fb_target.attr('id')=='week_cal'||$fb_target.attr('id')=='day_cal'){var $fb_dim=$fb_target.parent().parent();}
else if(!$fb_target.is('body')){var $fb_dim=$fb_target;}
else{var $fb_dim=$(window);}
var scrolltop=$fb_dim.scrollTop();var scrollleft=$fb_dim.scrollLeft();var pageheight=$fb_dim.height();var pagewidth='auto';$('#facebox').css({top:parseInt(scrolltop+(pageheight / 10),10),left:parseInt(scrollleft,10),width:parseInt(pagewidth,10)}).show();document.onkeyup=function(e){keycode=e==null?event.keyCode:keycode=e.which;if(keycode==27)tb_remove();}}
function tb_show(caption,url,fb_target,callback,type,loading_caption,post_data){$(document.activeElement).addClass('js-return_focus_to_me');type=type||'AJAX';var method='GET';if(post_data){method='POST';}
if(fb_CurRequestObj){fb_CurRequestObj.abort();}
callback=callback||function(){};if(fb_target){if($.isFunction(fb_target)){callback=fb_target;fb_target=null;}}
try{if(document.getElementById("facebox")===null){if(fb_target){$fb_target=$(fb_target);}
else{if($("div.scroll_cal").size()){$fb_target=$("div.singlecol");}
else{$fb_target=$("body");}}
$fb_target.append(facebox_html);}
if(!$('#facebox').is('.fb_visible'))fb_loading(loading_caption);if(caption===null)caption="";if(type=='HTML'){$("#facebox .fb_title").html(caption);$("#facebox .fb_content").html(url);var random_number=Math.round(Math.random()*100000);$('[id],[for]',$("#facebox .fb_content")).each(function(){$element=$(this);$.each(['id','for'],function(index,current_attr){attr=$element.attr(current_attr);if(typeof attr!=='undefined'&&attr!==false){var current_attr_value=$element.attr(current_attr);var new_attr_value=current_attr_value+'_'+random_number;$element.attr(current_attr,new_attr_value);}});});$("#facebox .fb_main").show();$('#facebox .fb_loading').css('visibility','hidden').hide().remove();if($('#facebox :input:not(:hidden)').size()){var $input=$('#facebox :input:not(:hidden):not(".modalcontrolsleft > :input"):not(".modalcontrolsleft"):first');if($input.hasClass('ui-autocomplete-input')){$input.data('skip-search-on-focus',1).focus().blur(function(){$(this).data('skip-search-on-focus',0);});}
else{$input.focus();}}
trap_focus($('#facebox'));callback();}
else{fb_CurRequestObj=$.ajax({url:url+=(url.match(/\?/)?'&':'?')+"random="+(new Date().getTime()),type:method,data:post_data,success:function(response){if(response.match(/!__TRIPWIRE__!/)){window.location='/internal/access_denied.php';}
else{$("#facebox .fb_title").html(caption);$("#facebox .fb_content").html(response);$("#facebox .fb_main").show();$('#facebox .fb_loading').css('visibility','hidden').hide().remove();if($('#facebox :input:not(:hidden)').size()){var $input=$('#facebox :input:not(:hidden):not(".modalcontrolsleft > :input"):not(".do-not-autofocus"):not(".modalcontrolsleft"):first');if($input.hasClass('ui-autocomplete-input')){$input.data('skip-search-on-focus',1).focus().blur(function(){$(this).data('skip-search-on-focus',0);});}
else{$input.focus();}}
trap_focus($('#facebox'));callback();}}});}}catch(e){}
return false;}
function fb_resize(pcurRequest,response){var h=$('#facebox .fb_main').height();var w=$('#facebox .fb_main').width();$('#facebox .fb_main').css({height:h,width:w,opacity:0}).animate({width:fb_width,height:fb_height},'normal','linear',function(){if(pcurRequest==fb_iRequest)fb_fadeIn(pcurRequest,response);});}
function fb_expand(pcurRequest,response){$('#facebox .fb_main').css({width:64,height:64,opacity:0}).animate({width:fb_width,height:fb_height},'normal','linear',function(){if(pcurRequest==fb_iRequest)fb_fadeIn(pcurRequest,response);});}
function fb_fadeIn(pcurRequest,response){$("#facebox .container, #facebox .sync_container, #facebox .tags_container, #facebox .roles_container, #facebox .faculty_container, #facebox .multi_container").css('overflow','auto');$("#facebox .fb_content").html(response);$('#facebox .fb_main').css({visibility:"visible"}).animate({opacity:1},'normal','linear',function(){if(pcurRequest==fb_iRequest)fb_finish(pcurRequest,response);});}
function fb_finish(pcurRequest){$('#facebox .fb_main').css({height:"auto",width:"auto"});if($('#facebox :input:not(:hidden)').size()){var $input=$('#facebox :input:not(:hidden):not(".modalcontrolsleft > :input"):not(".modalcontrolsleft"):first');if($input.hasClass('ui-autocomplete-input')){$input.data('skip-search-on-focus',1).focus().blur(function(){$(this).data('skip-search-on-focus',0);});}
else{$input.focus();}}
fb_CurRequestObj=null;fb_iRequest=0;}
function tb_remove(){$(document).trigger('facebox_remove');$('#facebox .fb_loading').remove();$("#facebox .fb_close").unbind("click");$("#facebox, #dialog_overlay").fadeOut("fast").removeClass('fb_visible');$(".TB_removeOnClose").remove();$('.colpick').hide();document.onkeyup="";$("#facebox .container, #facebox .sync_container, #facebox .tags_container, #facebox .roles_container, #facebox .faculty_container, #facebox .multi_container").css('overflow','auto');$('#facebox, #dialog_overlay').remove();if($('.js-return_focus_to_me').length){if($('.js-return_focus_to_me').is(':visible')){$('.js-return_focus_to_me').get(0).focus();}
else{$('.js-return_focus_to_me').closest(':visible').get(0).focus();}
$('.js-return_focus_to_me').removeClass('js-return_focus_to_me');}
return false;}
(function(factory){"use strict";if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else{factory((typeof(jQuery)!='undefined')?jQuery:window.Zepto);}}
(function($){"use strict";var feature={};feature.fileapi=$("<input type='file'/>").get(0).files!==undefined;feature.formdata=window.FormData!==undefined;var hasProp=!!$.fn.prop;$.fn.attr2=function(){if(!hasProp){return this.attr.apply(this,arguments);}
var val=this.prop.apply(this,arguments);if((val&&val.jquery)||typeof val==='string'){return val;}
return this.attr.apply(this,arguments);};$.fn.ajaxSubmit=function(options){if(!this.length){log('ajaxSubmit: skipping submit process - no element selected');return this;}
var method,action,url,$form=this;if(typeof options=='function'){options={success:options};}
else if(options===undefined){options={};}
method=options.type||this.attr2('method');action=options.url||this.attr2('action');url=(typeof action==='string')?$.trim(action):'';url=url||window.location.href||'';if(url){url=(url.match(/^([^#]+)/)||[])[1];}
options=$.extend(true,{url:url,success:$.ajaxSettings.success,type:method||$.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||'')?'javascript:false':'about:blank'},options);var veto={};this.trigger('form-pre-serialize',[this,options,veto]);if(veto.veto){log('ajaxSubmit: submit vetoed via form-pre-serialize trigger');return this;}
if(options.beforeSerialize&&options.beforeSerialize(this,options)===false){log('ajaxSubmit: submit aborted via beforeSerialize callback');return this;}
var traditional=options.traditional;if(traditional===undefined){traditional=$.ajaxSettings.traditional;}
var elements=[];var qx,a=this.formToArray(options.semantic,elements);if(options.data){options.extraData=options.data;qx=$.param(options.data,traditional);}
if(options.beforeSubmit&&options.beforeSubmit(a,this,options)===false){log('ajaxSubmit: submit aborted via beforeSubmit callback');return this;}
this.trigger('form-submit-validate',[a,this,options,veto]);if(veto.veto){log('ajaxSubmit: submit vetoed via form-submit-validate trigger');return this;}
var q=$.param(a,traditional);if(qx){q=(q?(q+'&'+qx):qx);}
if(options.type.toUpperCase()=='GET'){options.url+=(options.url.indexOf('?')>=0?'&':'?')+q;options.data=null;}
else{options.data=q;}
var callbacks=[];if(options.resetForm){callbacks.push(function(){$form.resetForm();});}
if(options.clearForm){callbacks.push(function(){$form.clearForm(options.includeHidden);});}
if(!options.dataType&&options.target){var oldSuccess=options.success||function(){};callbacks.push(function(data){var fn=options.replaceTarget?'replaceWith':'html';$(options.target)[fn](data).each(oldSuccess,arguments);});}
else if(options.success){callbacks.push(options.success);}
options.success=function(data,status,xhr){var context=options.context||this;for(var i=0,max=callbacks.length;i<max;i++){callbacks[i].apply(context,[data,status,xhr||$form,$form]);}};if(options.error){var oldError=options.error;options.error=function(xhr,status,error){var context=options.context||this;oldError.apply(context,[xhr,status,error,$form]);};}
if(options.complete){var oldComplete=options.complete;options.complete=function(xhr,status){var context=options.context||this;oldComplete.apply(context,[xhr,status,$form]);};}
var fileInputs=$('input[type=file]:enabled',this).filter(function(){return $(this).val()!=='';});var hasFileInputs=fileInputs.length>0;var mp='multipart/form-data';var multipart=($form.attr('enctype')==mp||$form.attr('encoding')==mp);var fileAPI=feature.fileapi&&feature.formdata;log("fileAPI :"+fileAPI);var shouldUseFrame=(hasFileInputs||multipart)&&!fileAPI;var jqxhr;if(options.iframe!==false&&(options.iframe||shouldUseFrame)){if(options.closeKeepAlive){$.get(options.closeKeepAlive,function(){jqxhr=fileUploadIframe(a);});}
else{jqxhr=fileUploadIframe(a);}}
else if((hasFileInputs||multipart)&&fileAPI){jqxhr=fileUploadXhr(a);}
else{jqxhr=$.ajax(options);}
$form.removeData('jqxhr').data('jqxhr',jqxhr);for(var k=0;k<elements.length;k++){elements[k]=null;}
this.trigger('form-submit-notify',[this,options]);return this;function deepSerialize(extraData){var serialized=$.param(extraData,options.traditional).split('&');var len=serialized.length;var result=[];var i,part;for(i=0;i<len;i++){serialized[i]=serialized[i].replace(/\+/g,' ');part=serialized[i].split('=');result.push([decodeURIComponent(part[0]),decodeURIComponent(part[1])]);}
return result;}
function fileUploadXhr(a){var formdata=new FormData();for(var i=0;i<a.length;i++){formdata.append(a[i].name,a[i].value);}
if(options.extraData){var serializedData=deepSerialize(options.extraData);for(i=0;i<serializedData.length;i++){if(serializedData[i]){formdata.append(serializedData[i][0],serializedData[i][1]);}}}
options.data=null;var s=$.extend(true,{},$.ajaxSettings,options,{contentType:false,processData:false,cache:false,type:method||'POST'});if(options.uploadProgress){s.xhr=function(){var xhr=$.ajaxSettings.xhr();if(xhr.upload){xhr.upload.addEventListener('progress',function(event){var percent=0;var position=event.loaded||event.position;var total=event.total;if(event.lengthComputable){percent=Math.ceil(position / total*100);}
options.uploadProgress(event,position,total,percent);},false);}
return xhr;};}
s.data=null;var beforeSend=s.beforeSend;s.beforeSend=function(xhr,o){if(options.formData){o.data=options.formData;}
else{o.data=formdata;}
if(beforeSend){beforeSend.call(this,xhr,o);}};return $.ajax(s);}
function fileUploadIframe(a){var form=$form[0],el,i,s,g,id,$io,io,xhr,sub,n,timedOut,timeoutHandle;var deferred=$.Deferred();deferred.abort=function(status){xhr.abort(status);};if(a){for(i=0;i<elements.length;i++){el=$(elements[i]);if(hasProp){el.prop('disabled',false);}
else{el.prop('disabled',false);}}}
s=$.extend(true,{},$.ajaxSettings,options);s.context=s.context||s;id='jqFormIO'+(new Date().getTime());if(s.iframeTarget){$io=$(s.iframeTarget);n=$io.attr2('name');if(!n){$io.attr2('name',id);}
else{id=n;}}
else{$io=$('<iframe name="'+id+'" src="'+s.iframeSrc+'" />');$io.css({position:'absolute',top:'-1000px',left:'-1000px'});}
io=$io[0];xhr={aborted:0,responseText:null,responseXML:null,status:0,statusText:'n/a',getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(status){var e=(status==='timeout'?'timeout':'aborted');log('aborting upload... '+e);this.aborted=1;try{if(io.contentWindow.document.execCommand){io.contentWindow.document.execCommand('Stop');}}
catch(ignore){}
$io.attr('src',s.iframeSrc);xhr.error=e;if(s.error){s.error.call(s.context,xhr,e,status);}
if(g){$.event.trigger("ajaxError",[xhr,s,e]);}
if(s.complete){s.complete.call(s.context,xhr,e);}}};g=s.global;if(g&&0===$.active++){$.event.trigger("ajaxStart");}
if(g){$.event.trigger("ajaxSend",[xhr,s]);}
if(s.beforeSend&&s.beforeSend.call(s.context,xhr,s)===false){if(s.global){$.active--;}
deferred.reject();return deferred;}
if(xhr.aborted){deferred.reject();return deferred;}
sub=form.clk;if(sub){n=sub.name;if(n&&!sub.disabled){s.extraData=s.extraData||{};s.extraData[n]=sub.value;if(sub.type=="image"){s.extraData[n+'.x']=form.clk_x;s.extraData[n+'.y']=form.clk_y;}}}
var CLIENT_TIMEOUT_ABORT=1;var SERVER_ABORT=2;function getDoc(frame){var doc=null;try{if(frame.contentWindow){doc=frame.contentWindow.document;}}catch(err){log('cannot get iframe.contentWindow document: '+err);}
if(doc){return doc;}
try{doc=frame.contentDocument?frame.contentDocument:frame.document;}catch(err){log('cannot get iframe.contentDocument: '+err);doc=frame.document;}
return doc;}
var csrf_token=$('meta[name=csrf-token]').attr('content');var csrf_param=$('meta[name=csrf-param]').attr('content');if(csrf_param&&csrf_token){s.extraData=s.extraData||{};s.extraData[csrf_param]=csrf_token;}
function doSubmit(){var t=$form.attr2('target'),a=$form.attr2('action'),mp='multipart/form-data',et=$form.attr('enctype')||$form.attr('encoding')||mp;form.setAttribute('target',id);if(!method||/post/i.test(method)){form.setAttribute('method','POST');}
if(a!=s.url){form.setAttribute('action',s.url);}
if(!s.skipEncodingOverride&&(!method||/post/i.test(method))){$form.attr({encoding:'multipart/form-data',enctype:'multipart/form-data'});}
if(s.timeout){timeoutHandle=setTimeout(function(){timedOut=true;cb(CLIENT_TIMEOUT_ABORT);},s.timeout);}
function checkState(){try{var state=getDoc(io).readyState;log('state = '+state);if(state&&state.toLowerCase()=='uninitialized'){setTimeout(checkState,50);}}
catch(e){log('Server abort: ',e,' (',e.name,')');cb(SERVER_ABORT);if(timeoutHandle){clearTimeout(timeoutHandle);}
timeoutHandle=undefined;}}
var extraInputs=[];try{if(s.extraData){for(var n in s.extraData){if(s.extraData.hasOwnProperty(n)){if($.isPlainObject(s.extraData[n])&&s.extraData[n].hasOwnProperty('name')&&s.extraData[n].hasOwnProperty('value')){extraInputs.push($('<input type="hidden" name="'+s.extraData[n].name+'">').val(s.extraData[n].value).appendTo(form)[0]);}else{extraInputs.push($('<input type="hidden" name="'+n+'">').val(s.extraData[n]).appendTo(form)[0]);}}}}
if(!s.iframeTarget){$io.appendTo('body');}
if(io.attachEvent){io.attachEvent('onload',cb);}
else{io.addEventListener('load',cb,false);}
setTimeout(checkState,15);try{form.submit();}catch(err){var submitFn=document.createElement('form').submit;submitFn.apply(form);}}
finally{form.setAttribute('action',a);form.setAttribute('enctype',et);if(t){form.setAttribute('target',t);}else{$form.removeAttr('target');}
$(extraInputs).remove();}}
if(s.forceSync){doSubmit();}
else{setTimeout(doSubmit,10);}
var data,doc,domCheckCount=50,callbackProcessed;function cb(e){if(xhr.aborted||callbackProcessed){return;}
doc=getDoc(io);if(!doc){log('cannot access response document');e=SERVER_ABORT;}
if(e===CLIENT_TIMEOUT_ABORT&&xhr){xhr.abort('timeout');deferred.reject(xhr,'timeout');return;}
else if(e==SERVER_ABORT&&xhr){xhr.abort('server abort');deferred.reject(xhr,'error','server abort');return;}
if(!doc||doc.location.href==s.iframeSrc){if(!timedOut){return;}}
if(io.detachEvent){io.detachEvent('onload',cb);}
else{io.removeEventListener('load',cb,false);}
var status='success',errMsg;try{if(timedOut){throw'timeout';}
var isXml=s.dataType=='xml'||doc.XMLDocument||$.isXMLDoc(doc);log('isXml='+isXml);if(!isXml&&window.opera&&(doc.body===null||!doc.body.innerHTML)){if(--domCheckCount){log('requeing onLoad callback, DOM not available');setTimeout(cb,250);return;}}
var docRoot=doc.body?doc.body:doc.documentElement;xhr.responseText=docRoot?docRoot.innerHTML:null;xhr.responseXML=doc.XMLDocument?doc.XMLDocument:doc;if(isXml){s.dataType='xml';}
xhr.getResponseHeader=function(header){var headers={'content-type':s.dataType};return headers[header.toLowerCase()];};if(docRoot){xhr.status=Number(docRoot.getAttribute('status'))||xhr.status;xhr.statusText=docRoot.getAttribute('statusText')||xhr.statusText;}
var dt=(s.dataType||'').toLowerCase();var scr=/(json|script|text)/.test(dt);if(scr||s.textarea){var ta=doc.getElementsByTagName('textarea')[0];if(ta){xhr.responseText=ta.value;xhr.status=Number(ta.getAttribute('status'))||xhr.status;xhr.statusText=ta.getAttribute('statusText')||xhr.statusText;}
else if(scr){var pre=doc.getElementsByTagName('pre')[0];var b=doc.getElementsByTagName('body')[0];if(pre){xhr.responseText=pre.textContent?pre.textContent:pre.innerText;}
else if(b){xhr.responseText=b.textContent?b.textContent:b.innerText;}}}
else if(dt=='xml'&&!xhr.responseXML&&xhr.responseText){xhr.responseXML=toXml(xhr.responseText);}
try{data=httpData(xhr,dt,s);}
catch(err){status='parsererror';xhr.error=errMsg=(err||status);}}
catch(err){log('error caught: ',err);status='error';xhr.error=errMsg=(err||status);}
if(xhr.aborted){log('upload aborted');status=null;}
if(xhr.status){status=(xhr.status>=200&&xhr.status<300||xhr.status===304)?'success':'error';}
if(status==='success'){if(s.success){s.success.call(s.context,data,'success',xhr);}
deferred.resolve(xhr.responseText,'success',xhr);if(g){$.event.trigger("ajaxSuccess",[xhr,s]);}}
else if(status){if(errMsg===undefined){errMsg=xhr.statusText;}
if(s.error){s.error.call(s.context,xhr,status,errMsg);}
deferred.reject(xhr,'error',errMsg);if(g){$.event.trigger("ajaxError",[xhr,s,errMsg]);}}
if(g){$.event.trigger("ajaxComplete",[xhr,s]);}
if(g&&!--$.active){$.event.trigger("ajaxStop");}
if(s.complete){s.complete.call(s.context,xhr,status);}
callbackProcessed=true;if(s.timeout){clearTimeout(timeoutHandle);}
setTimeout(function(){if(!s.iframeTarget){$io.remove();}
else{$io.attr('src',s.iframeSrc);}
xhr.responseXML=null;},100);}
var toXml=$.parseXML||function(s,doc){if(window.ActiveXObject){doc=new ActiveXObject('Microsoft.XMLDOM');doc.async='false';doc.loadXML(s);}
else{doc=(new DOMParser()).parseFromString(s,'text/xml');}
return(doc&&doc.documentElement&&doc.documentElement.nodeName!='parsererror')?doc:null;};var parseJSON=$.parseJSON||function(s){return window['eval']('('+s+')');};var httpData=function(xhr,type,s){var ct=xhr.getResponseHeader('content-type')||'',xml=type==='xml'||!type&&ct.indexOf('xml')>=0,data=xml?xhr.responseXML:xhr.responseText;if(xml&&data.documentElement.nodeName==='parsererror'){if($.error){$.error('parsererror');}}
if(s&&s.dataFilter){data=s.dataFilter(data,type);}
if(typeof data==='string'){if(type==='json'||!type&&ct.indexOf('json')>=0){data=parseJSON(data);}else if(type==="script"||!type&&ct.indexOf("javascript")>=0){$.globalEval(data);}}
return data;};return deferred;}};$.fn.ajaxForm=function(options){options=options||{};options.delegation=options.delegation&&$.isFunction($.fn.on);if(!options.delegation&&this.length===0){var o={s:this.selector,c:this.context};if(!$.isReady&&o.s){log('DOM not ready, queuing ajaxForm');$(function(){$(o.s,o.c).ajaxForm(options);});return this;}
log('terminating; zero elements found by selector'+($.isReady?'':' (DOM not ready)'));return this;}
if(options.delegation){$(document).off('submit.form-plugin',this.selector,doAjaxSubmit).off('click.form-plugin',this.selector,captureSubmittingElement).on('submit.form-plugin',this.selector,options,doAjaxSubmit).on('click.form-plugin',this.selector,options,captureSubmittingElement);return this;}
return this.ajaxFormUnbind().bind('submit.form-plugin',options,doAjaxSubmit).bind('click.form-plugin',options,captureSubmittingElement);};function doAjaxSubmit(e){var options=e.data;if(!e.isDefaultPrevented()){e.preventDefault();$(e.target).ajaxSubmit(options);}}
function captureSubmittingElement(e){var target=e.target;var $el=$(target);if(!($el.is("[type=submit],[type=image]"))){var t=$el.closest('[type=submit]');if(t.length===0){return;}
target=t[0];}
var form=this;form.clk=target;if(target.type=='image'){if(e.offsetX!==undefined){form.clk_x=e.offsetX;form.clk_y=e.offsetY;}else if(typeof $.fn.offset=='function'){var offset=$el.offset();form.clk_x=e.pageX-offset.left;form.clk_y=e.pageY-offset.top;}else{form.clk_x=e.pageX-target.offsetLeft;form.clk_y=e.pageY-target.offsetTop;}}
setTimeout(function(){form.clk=form.clk_x=form.clk_y=null;},100);}
$.fn.ajaxFormUnbind=function(){return this.unbind('submit.form-plugin click.form-plugin');};$.fn.formToArray=function(semantic,elements){var a=[];if(this.length===0){return a;}
var form=this[0];var formId=this.attr('id');var els=semantic?form.getElementsByTagName('*'):form.elements;var els2;if(els&&!/MSIE [678]/.test(navigator.userAgent)){els=$(els).get();}
if(formId){els2=$(':input[form="'+formId+'"]').get();if(els2.length){els=(els||[]).concat(els2);}}
if(!els||!els.length){return a;}
var i,j,n,v,el,max,jmax;for(i=0,max=els.length;i<max;i++){el=els[i];n=el.name;if(!n||el.disabled){continue;}
if(semantic&&form.clk&&el.type=="image"){if(form.clk==el){a.push({name:n,value:$(el).val(),type:el.type});a.push({name:n+'.x',value:form.clk_x},{name:n+'.y',value:form.clk_y});}
continue;}
v=$.fieldValue(el,true);if(v&&v.constructor==Array){if(elements){elements.push(el);}
for(j=0,jmax=v.length;j<jmax;j++){a.push({name:n,value:v[j]});}}
else if(feature.fileapi&&el.type=='file'){if(elements){elements.push(el);}
var files=el.files;if(files.length){for(j=0;j<files.length;j++){a.push({name:n,value:files[j],type:el.type});}}
else{a.push({name:n,value:'',type:el.type});}}
else if(v!==null&&typeof v!='undefined'){if(elements){elements.push(el);}
a.push({name:n,value:v,type:el.type,required:el.required});}}
if(!semantic&&form.clk){var $input=$(form.clk),input=$input[0];n=input.name;if(n&&!input.disabled&&input.type=='image'){a.push({name:n,value:$input.val()});a.push({name:n+'.x',value:form.clk_x},{name:n+'.y',value:form.clk_y});}}
return a;};$.fn.formSerialize=function(semantic){return $.param(this.formToArray(semantic));};$.fn.fieldSerialize=function(successful){var a=[];this.each(function(){var n=this.name;if(!n){return;}
var v=$.fieldValue(this,successful);if(v&&v.constructor==Array){for(var i=0,max=v.length;i<max;i++){a.push({name:n,value:v[i]});}}
else if(v!==null&&typeof v!='undefined'){a.push({name:this.name,value:v});}});return $.param(a);};$.fn.fieldValue=function(successful){for(var val=[],i=0,max=this.length;i<max;i++){var el=this[i];var v=$.fieldValue(el,successful);if(v===null||typeof v=='undefined'||(v.constructor==Array&&!v.length)){continue;}
if(v.constructor==Array){$.merge(val,v);}
else{val.push(v);}}
return val;};$.fieldValue=function(el,successful){var n=el.name,t=el.type,tag=el.tagName.toLowerCase();if(successful===undefined){successful=true;}
if(successful&&(!n||el.disabled||t=='reset'||t=='button'||(t=='checkbox'||t=='radio')&&!el.checked||(t=='submit'||t=='image')&&el.form&&el.form.clk!=el||tag=='select'&&el.selectedIndex==-1)){return null;}
if(tag=='select'){var index=el.selectedIndex;if(index<0){return null;}
var a=[],ops=el.options;var one=(t=='select-one');var max=(one?index+1:ops.length);for(var i=(one?index:0);i<max;i++){var op=ops[i];if(op.selected){var v=op.value;if(!v){v=(op.attributes&&op.attributes.value&&!(op.attributes.value.specified))?op.text:op.value;}
if(one){return v;}
a.push(v);}}
return a;}
return $(el).val();};$.fn.clearForm=function(includeHidden){return this.each(function(){$('input,select,textarea',this).clearFields(includeHidden);});};$.fn.clearFields=$.fn.clearInputs=function(includeHidden){var re=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var t=this.type,tag=this.tagName.toLowerCase();if(re.test(t)||tag=='textarea'){this.value='';}
else if(t=='checkbox'||t=='radio'){this.checked=false;}
else if(tag=='select'){this.selectedIndex=-1;}
else if(t=="file"){if(/MSIE/.test(navigator.userAgent)){$(this).replaceWith($(this).clone(true));}else{$(this).val('');}}
else if(includeHidden){if((includeHidden===true&&/hidden/.test(t))||(typeof includeHidden=='string'&&$(this).is(includeHidden))){this.value='';}}});};$.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=='function'||(typeof this.reset=='object'&&!this.reset.nodeType)){this.reset();}});};$.fn.enable=function(b){if(b===undefined){b=true;}
return this.each(function(){this.disabled=!b;});};$.fn.selected=function(select){if(select===undefined){select=true;}
return this.each(function(){var t=this.type;if(t=='checkbox'||t=='radio'){this.checked=select;}
else if(this.tagName.toLowerCase()=='option'){var $sel=$(this).parent('select');if(select&&$sel[0]&&$sel[0].type=='select-one'){$sel.find('option').selected(false);}
this.selected=select;}});};$.fn.ajaxSubmit.debug=false;function log(){if(!$.fn.ajaxSubmit.debug){return;}
var msg='[jquery.form] '+Array.prototype.join.call(arguments,'');if(window.console&&window.console.log){window.console.log(msg);}
else if(window.opera&&window.opera.postError){window.opera.postError(msg);}}}));(function(factory){if(typeof define==="function"&&define.amd){define(["jquery"],factory);}else if(typeof module==="object"&&module.exports){module.exports=factory(require("jquery"));}else{factory(jQuery);}}(function($){$.extend($.fn,{validate:function(options){if(!this.length){if(options&&options.debug&&window.console){console.warn("Nothing selected, can't validate, returning nothing.");}
return;}
var validator=$.data(this[0],"validator");if(validator){return validator;}
this.attr("novalidate","novalidate");validator=new $.validator(options,this[0]);$.data(this[0],"validator",validator);if(validator.settings.onsubmit){this.on("click.validate",":submit",function(event){if(validator.settings.submitHandler){validator.submitButton=event.target;}
if($(this).hasClass("cancel")){validator.cancelSubmit=true;}
if($(this).attr("formnovalidate")!==undefined){validator.cancelSubmit=true;}});this.on("submit.validate",function(event){if(validator.settings.debug){event.preventDefault();}
function handle(){var hidden,result;if(validator.settings.submitHandler){if(validator.submitButton){hidden=$("<input type='hidden'/>").attr("name",validator.submitButton.name).val($(validator.submitButton).val()).appendTo(validator.currentForm);}
result=validator.settings.submitHandler.call(validator,validator.currentForm,event);if(validator.submitButton){hidden.remove();}
if(result!==undefined){return result;}
return false;}
return true;}
if(validator.cancelSubmit){validator.cancelSubmit=false;return handle();}
if(validator.form()){if(validator.pendingRequest){validator.formSubmitted=true;return false;}
return handle();}else{validator.focusInvalid();return false;}});}
return validator;},valid:function(){var valid,validator,errorList;if($(this[0]).is("form")){valid=this.validate().form();}else{errorList=[];valid=true;validator=$(this[0].form).validate();this.each(function(){valid=validator.element(this)&&valid;if(!valid){errorList=errorList.concat(validator.errorList);}});validator.errorList=errorList;}
return valid;},rules:function(command,argument){if(!this.length){return;}
var element=this[0],settings,staticRules,existingRules,data,param,filtered;if(command){settings=$.data(element.form,"validator").settings;staticRules=settings.rules;existingRules=$.validator.staticRules(element);switch(command){case"add":$.extend(existingRules,$.validator.normalizeRule(argument));delete existingRules.messages;staticRules[element.name]=existingRules;if(argument.messages){settings.messages[element.name]=$.extend(settings.messages[element.name],argument.messages);}
break;case"remove":if(!argument){delete staticRules[element.name];return existingRules;}
filtered={};$.each(argument.split(/\s/),function(index,method){filtered[method]=existingRules[method];delete existingRules[method];if(method==="required"){$(element).removeAttr("aria-required");}});return filtered;}}
data=$.validator.normalizeRules($.extend({},$.validator.classRules(element),$.validator.attributeRules(element),$.validator.dataRules(element),$.validator.staticRules(element)),element);if(data.required){param=data.required;delete data.required;data=$.extend({required:param},data);$(element).attr("aria-required","true");}
if(data.remote){param=data.remote;delete data.remote;data=$.extend(data,{remote:param});}
return data;}});$.extend($.expr[":"],{blank:function(a){return!$.trim(""+$(a).val());},filled:function(a){var val=$(a).val();return val!==null&&!!$.trim(""+val);},unchecked:function(a){return!$(a).prop("checked");}});$.validator=function(options,form){this.settings=$.extend(true,{},$.validator.defaults,options);this.currentForm=form;this.init();};$.validator.format=function(source,params){if(arguments.length===1){return function(){var args=$.makeArray(arguments);args.unshift(source);return $.validator.format.apply(this,args);};}
if(params===undefined){return source;}
if(arguments.length>2&&params.constructor!==Array){params=$.makeArray(arguments).slice(1);}
if(params.constructor!==Array){params=[params];}
$.each(params,function(i,n){source=source.replace(new RegExp("\\{"+i+"\\}","g"),function(){return n;});});return source;};$.extend($.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"",errorElement:"label",focusCleanup:false,focusInvalid:true,errorContainer:$([]),errorLabelContainer:$([]),onsubmit:true,ignore:":hidden",ignoreTitle:true,onfocusin:function(element){this.lastActive=element;if(this.settings.focusCleanup){if(this.settings.unhighlight){this.settings.unhighlight.call(this,element,this.settings.errorClass,this.settings.validClass);}
this.hideThese(this.errorsFor(element));}},onfocusout:function(element){if(!this.checkable(element)&&(element.name in this.submitted||!this.optional(element))){this.element(element);}},onkeyup:function(element,event){var excludedKeys=[16,17,18,20,35,36,37,38,39,40,45,144,225];if(event.which===9&&this.elementValue(element)===""||$.inArray(event.keyCode,excludedKeys)!==-1){return;}else if(element.name in this.submitted||element.name in this.invalid){this.element(element);}},onclick:function(element){if(element.name in this.submitted){this.element(element);}else if(element.parentNode.name in this.submitted){this.element(element.parentNode);}},highlight:false,unhighlight:function(element,errorClass,validClass){if(element.type==="radio"){this.findByName(element.name).removeClass(errorClass).addClass(validClass);}else{$(element).removeClass(errorClass).addClass(validClass);}}},setDefaults:function(settings){$.extend($.validator.defaults,settings);},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:$.validator.format("Please enter no more than {0} characters."),minlength:$.validator.format("Please enter at least {0} characters."),rangelength:$.validator.format("Please enter a value between {0} and {1} characters long."),range:$.validator.format("Please enter a value between {0} and {1}."),max:$.validator.format("Please enter a value less than or equal to {0}."),min:$.validator.format("Please enter a value greater than or equal to {0}."),step:$.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:false,prototype:{init:function(){this.labelContainer=$(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||$(this.currentForm);this.containers=$(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var groups=(this.groups={}),rules;$.each(this.settings.groups,function(key,value){if(typeof value==="string"){value=value.split(/\s/);}
$.each(value,function(index,name){groups[name]=key;});});rules=this.settings.rules;$.each(rules,function(key,value){rules[key]=$.validator.normalizeRule(value);});function delegate(event){var validator=$.data(this.form,"validator"),eventType="on"+event.type.replace(/^validate/,""),settings=validator.settings;if(settings[eventType]&&!$(this).is(settings.ignore)){settings[eventType].call(validator,this,event);}}
$(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], "+"[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], "+"[type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], "+"[type='radio'], [type='checkbox'], [contenteditable]",delegate).on("click.validate","select, option, [type='radio'], [type='checkbox']",delegate);if(this.settings.invalidHandler){$(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler);}
$(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true");},form:function(){this.checkForm();$.extend(this.submitted,this.errorMap);this.invalid=$.extend({},this.errorMap);if(!this.valid()){$(this.currentForm).triggerHandler("invalid-form",[this]);}
this.showErrors();return this.valid();},checkForm:function(){this.prepareForm();for(var i=0,elements=(this.currentElements=this.elements());elements[i];i++){this.check(elements[i]);}
return this.valid();},element:function(element){var cleanElement=this.clean(element),checkElement=this.validationTargetFor(cleanElement),v=this,result=true,rs,group;if(checkElement===undefined){delete this.invalid[cleanElement.name];}else{this.prepareElement(checkElement);this.currentElements=$(checkElement);group=this.groups[checkElement.name];if(group){$.each(this.groups,function(name,testgroup){if(testgroup===group&&name!==checkElement.name){cleanElement=v.validationTargetFor(v.clean(v.findByName(name)));if(cleanElement&&cleanElement.name in v.invalid){v.currentElements.push(cleanElement);result=result&&v.check(cleanElement);}}});}
rs=this.check(checkElement)!==false;result=result&&rs;if(rs){this.invalid[checkElement.name]=false;}else{this.invalid[checkElement.name]=true;}
if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers);}
this.showErrors();$(element).attr("aria-invalid",!rs);}
return result;},showErrors:function(errors){if(errors){var validator=this;$.extend(this.errorMap,errors);this.errorList=$.map(this.errorMap,function(message,name){return{message:message,element:validator.findByName(name)[0]};});this.successList=$.grep(this.successList,function(element){return!(element.name in errors);});}
if(this.settings.showErrors){this.settings.showErrors.call(this,this.errorMap,this.errorList);}else{this.defaultShowErrors();}},resetForm:function(){if($.fn.resetForm){$(this.currentForm).resetForm();}
this.invalid={};this.submitted={};this.prepareForm();this.hideErrors();var elements=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(elements);},resetElements:function(elements){var i;if(this.settings.unhighlight){for(i=0;elements[i];i++){this.settings.unhighlight.call(this,elements[i],this.settings.errorClass,"");this.findByName(elements[i].name).removeClass(this.settings.validClass);}}else{elements.removeClass(this.settings.errorClass).removeClass(this.settings.validClass);}},numberOfInvalids:function(){return this.objectLength(this.invalid);},objectLength:function(obj){var count=0,i;for(i in obj){if(obj[i]){count++;}}
return count;},hideErrors:function(){this.hideThese(this.toHide);},hideThese:function(errors){errors.not(this.containers).text("");this.addWrapper(errors).hide();},valid:function(){return this.size()===0;},size:function(){return this.errorList.length;},focusInvalid:function(){if(this.settings.focusInvalid){try{$(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin");}catch(e){}}},findLastActive:function(){var lastActive=this.lastActive;return lastActive&&$.grep(this.errorList,function(n){return n.element.name===lastActive.name;}).length===1&&lastActive;},elements:function(){var validator=this,rulesCache={};return $(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var name=this.name||$(this).attr("name");if(!name&&validator.settings.debug&&window.console){console.error("%o has no name assigned",this);}
if(this.hasAttribute("contenteditable")){this.form=$(this).closest("form")[0];}
if(name in rulesCache||!validator.objectLength($(this).rules())){return false;}
rulesCache[name]=true;return true;});},clean:function(selector){return $(selector)[0];},errors:function(){var errorClass=this.settings.errorClass.split(" ").join(".");return $(this.settings.errorElement+"."+errorClass,this.errorContext);},resetInternals:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=$([]);this.toHide=$([]);},reset:function(){this.resetInternals();this.currentElements=$([]);},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers);},prepareElement:function(element){this.reset();this.toHide=this.errorsFor(element);},elementValue:function(element){var $element=$(element),type=element.type,val,idx;if(type==="radio"||type==="checkbox"){return this.findByName(element.name).filter(":checked").val();}else if(type==="number"&&typeof element.validity!=="undefined"){return element.validity.badInput?"NaN":$element.val();}
if(element.hasAttribute("contenteditable")){val=$element.text();}else{val=$element.val();}
if(type==="file"){if(val.substr(0,12)==="C:\\fakepath\\"){return val.substr(12);}
idx=val.lastIndexOf("/");if(idx>=0){return val.substr(idx+1);}
idx=val.lastIndexOf("\\");if(idx>=0){return val.substr(idx+1);}
return val;}
if(typeof val==="string"){return val.replace(/\r/g,"");}
return val;},check:function(element){element=this.validationTargetFor(this.clean(element));var rules=$(element).rules(),rulesCount=$.map(rules,function(n,i){return i;}).length,dependencyMismatch=false,val=this.elementValue(element),result,method,rule;if(typeof rules.normalizer==="function"){val=rules.normalizer.call(element,val);if(typeof val!=="string"){throw new TypeError("The normalizer should return a string value.");}
delete rules.normalizer;}
for(method in rules){rule={method:method,parameters:rules[method]};try{result=$.validator.methods[method].call(this,val,element,rule.parameters);if(result==="dependency-mismatch"&&rulesCount===1){dependencyMismatch=true;continue;}
dependencyMismatch=false;if(result==="pending"){this.toHide=this.toHide.not(this.errorsFor(element));return;}
if(!result){this.formatAndAdd(element,rule);return false;}}catch(e){if(this.settings.debug&&window.console){console.log("Exception occurred when checking element "+element.id+", check the '"+rule.method+"' method.",e);}
if(e instanceof TypeError){e.message+=".  Exception occurred when checking element "+element.id+", check the '"+rule.method+"' method.";}
throw e;}}
if(dependencyMismatch){return;}
if(this.objectLength(rules)){this.successList.push(element);}
return true;},customDataMessage:function(element,method){return $(element).data("msg"+method.charAt(0).toUpperCase()+
method.substring(1).toLowerCase())||$(element).data("msg");},customMessage:function(name,method){var m=this.settings.messages[name];return m&&(m.constructor===String?m:m[method]);},findDefined:function(){for(var i=0;i<arguments.length;i++){if(arguments[i]!==undefined){return arguments[i];}}
return undefined;},defaultMessage:function(element,rule){var message=this.findDefined(this.customMessage(element.name,rule.method),this.customDataMessage(element,rule.method),!this.settings.ignoreTitle&&element.title||undefined,$.validator.messages[rule.method],"<strong>Warning: No message defined for "+element.name+"</strong>"),theregex=/\$?\{(\d+)\}/g;if(typeof message==="function"){message=message.call(this,rule.parameters,element);}else if(theregex.test(message)){message=$.validator.format(message.replace(theregex,"{$1}"),rule.parameters);}
return message;},formatAndAdd:function(element,rule){var message=this.defaultMessage(element,rule);this.errorList.push({message:message,element:element,method:rule.method});this.errorMap[element.name]=message;this.submitted[element.name]=message;},addWrapper:function(toToggle){if(this.settings.wrapper){toToggle=toToggle.add(toToggle.parent(this.settings.wrapper));}
return toToggle;},defaultShowErrors:function(){var i,elements,error;for(i=0;this.errorList[i];i++){error=this.errorList[i];if(this.settings.highlight){this.settings.highlight.call(this,error.element,this.settings.errorClass,this.settings.validClass);}
this.showLabel(error.element,error.message);}
if(this.errorList.length){this.toShow=this.toShow.add(this.containers);}
if(this.settings.success){for(i=0;this.successList[i];i++){this.showLabel(this.successList[i]);}}
if(this.settings.unhighlight){for(i=0,elements=this.validElements();elements[i];i++){this.settings.unhighlight.call(this,elements[i],this.settings.errorClass,this.settings.validClass);}}
this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show();},validElements:function(){return this.currentElements.not(this.invalidElements());},invalidElements:function(){return $(this.errorList).map(function(){return this.element;});},showLabel:function(element,message){var place,group,errorID,v,error=this.errorsFor(element),elementID=this.idOrName(element),describedBy=$(element).attr("aria-describedby");if(error.length){error.removeClass(this.settings.validClass).addClass(this.settings.errorClass);error.html(message);}else{error=$("<"+this.settings.errorElement+">").attr("id",elementID+"-error").addClass(this.settings.errorClass).html(message||"");place=error;if(this.settings.wrapper){place=error.hide().show().wrap("<"+this.settings.wrapper+"/>").parent();}
if(this.labelContainer.length){this.labelContainer.append(place);}else if(this.settings.errorPlacement){this.settings.errorPlacement(place,$(element));}else{place.insertAfter(element);}
if(error.is("label")){error.attr("for",elementID);}else if(error.parents("label[for='"+this.escapeCssMeta(elementID)+"']").length===0){errorID=error.attr("id");if(!describedBy){describedBy=errorID;}else if(!describedBy.match(new RegExp("\\b"+this.escapeCssMeta(errorID)+"\\b"))){describedBy+=" "+errorID;}
$(element).attr("aria-describedby",describedBy);group=this.groups[element.name];if(group){v=this;$.each(v.groups,function(name,testgroup){if(testgroup===group){$("[name='"+v.escapeCssMeta(name)+"']",v.currentForm).attr("aria-describedby",error.attr("id"));}});}}}
if(!message&&this.settings.success){error.text("");if(typeof this.settings.success==="string"){error.addClass(this.settings.success);}else{this.settings.success(error,element);}}
this.toShow=this.toShow.add(error);},errorsFor:function(element){var name=this.escapeCssMeta(this.idOrName(element)),describer=$(element).attr("aria-describedby"),selector="label[for='"+name+"'], label[for='"+name+"'] *";if(describer){selector=selector+", #"+this.escapeCssMeta(describer).replace(/\s+/g,", #");}
return this.errors().filter(selector);},escapeCssMeta:function(string){return string.replace(/([\\!"#$%&'()*+,./:;<=>?@\[\]^`{|}~])/g,"\\$1");},idOrName:function(element){return this.groups[element.name]||(this.checkable(element)?element.name:element.id||element.name);},validationTargetFor:function(element){if(this.checkable(element)){element=this.findByName(element.name);}
return $(element).not(this.settings.ignore)[0];},checkable:function(element){return(/radio|checkbox/i).test(element.type);},findByName:function(name){return $(this.currentForm).find("[name='"+this.escapeCssMeta(name)+"']");},getLength:function(value,element){switch(element.nodeName.toLowerCase()){case"select":return $("option:selected",element).length;case"input":if(this.checkable(element)){return this.findByName(element.name).filter(":checked").length;}}
return value.length;},depend:function(param,element){return this.dependTypes[typeof param]?this.dependTypes[typeof param](param,element):true;},dependTypes:{"boolean":function(param){return param;},"string":function(param,element){return!!$(param,element.form).length;},"function":function(param,element){return param(element);}},optional:function(element){var val=this.elementValue(element);return!$.validator.methods.required.call(this,val,element)&&"dependency-mismatch";},startRequest:function(element){if(!this.pending[element.name]){this.pendingRequest++;$(element).addClass(this.settings.pendingClass);this.pending[element.name]=true;}},stopRequest:function(element,valid){this.pendingRequest--;if(this.pendingRequest<0){this.pendingRequest=0;}
delete this.pending[element.name];$(element).removeClass(this.settings.pendingClass);if(valid&&this.pendingRequest===0&&this.formSubmitted&&this.form()){$(this.currentForm).submit();this.formSubmitted=false;}else if(!valid&&this.pendingRequest===0&&this.formSubmitted){$(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=false;}},previousValue:function(element,method){return $.data(element,"previousValue")||$.data(element,"previousValue",{old:null,valid:true,message:this.defaultMessage(element,{method:method})});},destroy:function(){this.resetForm();$(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur");}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},number:{number:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(className,rules){if(className.constructor===String){this.classRuleSettings[className]=rules;}else{$.extend(this.classRuleSettings,className);}},classRules:function(element){var rules={},classes=$(element).attr("class");if(classes){$.each(classes.split(" "),function(){if(this in $.validator.classRuleSettings){$.extend(rules,$.validator.classRuleSettings[this]);}});}
return rules;},normalizeAttributeRule:function(rules,type,method,value){if(/min|max|step/.test(method)&&(type===null||/number|range|text/.test(type))){value=Number(value);if(isNaN(value)){value=undefined;}}
if(value||value===0){rules[method]=value;}else if(type===method&&type!=="range"){rules[method]=true;}},attributeRules:function(element){var rules={},$element=$(element),type=element.getAttribute("type"),method,value;for(method in $.validator.methods){if(method==="required"){value=element.getAttribute(method);if(value===""){value=true;}
value=!!value;}else{value=$element.attr(method);}
this.normalizeAttributeRule(rules,type,method,value);}
if(rules.maxlength&&/-1|2147483647|524288/.test(rules.maxlength)){delete rules.maxlength;}
return rules;},dataRules:function(element){var rules={},$element=$(element),type=element.getAttribute("type"),method,value;for(method in $.validator.methods){value=$element.data("rule"+method.charAt(0).toUpperCase()+method.substring(1).toLowerCase());this.normalizeAttributeRule(rules,type,method,value);}
return rules;},staticRules:function(element){var rules={},validator=$.data(element.form,"validator");if(validator.settings.rules){rules=$.validator.normalizeRule(validator.settings.rules[element.name])||{};}
return rules;},normalizeRules:function(rules,element){$.each(rules,function(prop,val){if(val===false){delete rules[prop];return;}
if(val.param||val.depends){var keepRule=true;switch(typeof val.depends){case"string":keepRule=!!$(val.depends,element.form).length;break;case"function":keepRule=val.depends.call(element,element);break;}
if(keepRule){rules[prop]=val.param!==undefined?val.param:true;}else{$.data(element.form,"validator").resetElements($(element));delete rules[prop];}}});$.each(rules,function(rule,parameter){rules[rule]=$.isFunction(parameter)&&rule!=="normalizer"?parameter(element):parameter;});$.each(["minlength","maxlength"],function(){if(rules[this]){rules[this]=Number(rules[this]);}});$.each(["rangelength","range"],function(){var parts;if(rules[this]){if($.isArray(rules[this])){rules[this]=[Number(rules[this][0]),Number(rules[this][1])];}else if(typeof rules[this]==="string"){parts=rules[this].replace(/[\[\]]/g,"").split(/[\s,]+/);rules[this]=[Number(parts[0]),Number(parts[1])];}}});if($.validator.autoCreateRanges){if(rules.min!=null&&rules.max!=null){rules.range=[rules.min,rules.max];delete rules.min;delete rules.max;}
if(rules.minlength!=null&&rules.maxlength!=null){rules.rangelength=[rules.minlength,rules.maxlength];delete rules.minlength;delete rules.maxlength;}}
return rules;},normalizeRule:function(data){if(typeof data==="string"){var transformed={};$.each(data.split(/\s/),function(){transformed[this]=true;});data=transformed;}
return data;},addMethod:function(name,method,message){$.validator.methods[name]=method;$.validator.messages[name]=message!==undefined?message:$.validator.messages[name];if(method.length<3){$.validator.addClassRules(name,$.validator.normalizeRule(name));}},methods:{required:function(value,element,param){if(!this.depend(param,element)){return"dependency-mismatch";}
if(element.nodeName.toLowerCase()==="select"){var val=$(element).val();return val&&val.length>0;}
if(this.checkable(element)){return this.getLength(value,element)>0;}
return value.length>0;},email:function(value,element){return this.optional(element)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(value);},url:function(value,element){return this.optional(element)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(value);},date:function(value,element){return this.optional(element)||!/Invalid|NaN/.test(new Date(value).toString());},dateISO:function(value,element){return this.optional(element)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(value);},number:function(value,element){return this.optional(element)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(value);},digits:function(value,element){return this.optional(element)||/^\d+$/.test(value);},minlength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength(value,element);return this.optional(element)||length>=param;},maxlength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength(value,element);return this.optional(element)||length<=param;},rangelength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength(value,element);return this.optional(element)||(length>=param[0]&&length<=param[1]);},min:function(value,element,param){return this.optional(element)||value>=param;},max:function(value,element,param){return this.optional(element)||value<=param;},range:function(value,element,param){return this.optional(element)||(value>=param[0]&&value<=param[1]);},step:function(value,element,param){var type=$(element).attr("type"),errorMessage="Step attribute on input type "+type+" is not supported.",supportedTypes=["text","number","range"],re=new RegExp("\\b"+type+"\\b"),notSupported=type&&!re.test(supportedTypes.join());if(notSupported){throw new Error(errorMessage);}
return this.optional(element)||(value%param===0);},equalTo:function(value,element,param){var target=$(param);if(this.settings.onfocusout&&target.not(".validate-equalTo-blur").length){target.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){$(element).valid();});}
return value===target.val();},remote:function(value,element,param,method){if(this.optional(element)){return"dependency-mismatch";}
method=typeof method==="string"&&method||"remote";var previous=this.previousValue(element,method),validator,data,optionDataString;if(!this.settings.messages[element.name]){this.settings.messages[element.name]={};}
previous.originalMessage=previous.originalMessage||this.settings.messages[element.name][method];this.settings.messages[element.name][method]=previous.message;param=typeof param==="string"&&{url:param}||param;optionDataString=$.param($.extend({data:value},param.data));if(previous.old===optionDataString){return previous.valid;}
previous.old=optionDataString;validator=this;this.startRequest(element);data={};data[element.name]=value;$.ajax($.extend(true,{mode:"abort",port:"validate"+element.name,dataType:"json",data:data,context:validator.currentForm,success:function(response){var valid=response===true||response==="true",errors,message,submitted;validator.settings.messages[element.name][method]=previous.originalMessage;if(valid){submitted=validator.formSubmitted;validator.resetInternals();validator.toHide=validator.errorsFor(element);validator.formSubmitted=submitted;validator.successList.push(element);validator.invalid[element.name]=false;validator.showErrors();}else{errors={};message=response||validator.defaultMessage(element,{method:method,parameters:value});errors[element.name]=previous.message=message;validator.invalid[element.name]=true;validator.showErrors(errors);}
previous.valid=valid;validator.stopRequest(element,valid);}},param));return"pending";}}});var pendingRequests={},ajax;if($.ajaxPrefilter){$.ajaxPrefilter(function(settings,_,xhr){var port=settings.port;if(settings.mode==="abort"){if(pendingRequests[port]){pendingRequests[port].abort();}
pendingRequests[port]=xhr;}});}else{ajax=$.ajax;$.ajax=function(settings){var mode=("mode"in settings?settings:$.ajaxSettings).mode,port=("port"in settings?settings:$.ajaxSettings).port;if(mode==="abort"){if(pendingRequests[port]){pendingRequests[port].abort();}
pendingRequests[port]=ajax.apply(this,arguments);return pendingRequests[port];}
return ajax.apply(this,arguments);};}}));(function(factory){if(typeof define==="function"&&define.amd){define(["jquery","./jquery.validate"],factory);}else if(typeof module==="object"&&module.exports){module.exports=factory(require("jquery"));}else{factory(jQuery);}}(function($){(function(){function stripHtml(value){return value.replace(/<.[^<>]*?>/g," ").replace(/&nbsp;|&#160;/gi," ").replace(/[.(),;:!?%#$'\"_+=\/\-]*/g,"");}
$.validator.addMethod("maxWords",function(value,element,params){return this.optional(element)||stripHtml(value).match(/\b\w+\b/g).length<=params;},$.validator.format("Please enter {0} words or less."));$.validator.addMethod("minWords",function(value,element,params){return this.optional(element)||stripHtml(value).match(/\b\w+\b/g).length>=params;},$.validator.format("Please enter at least {0} words."));$.validator.addMethod("rangeWords",function(value,element,params){var valueStripped=stripHtml(value),regex=/\b\w+\b/g;return this.optional(element)||valueStripped.match(regex).length>=params[0]&&valueStripped.match(regex).length<=params[1];},$.validator.format("Please enter between {0} and {1} words."));}());$.validator.addMethod("accept",function(value,element,param){var typeParam=typeof param==="string"?param.replace(/\s/g,""):"image/*",optionalValue=this.optional(element),i,file,regex;if(optionalValue){return optionalValue;}
if($(element).attr("type")==="file"){typeParam=typeParam.replace(/[\-\[\]\/\{\}\(\)\+\?\.\\\^\$\|]/g,"\\$&").replace(/,/g,"|").replace("\/*","/.*");if(element.files&&element.files.length){regex=new RegExp(".?("+typeParam+")$","i");for(i=0;i<element.files.length;i++){file=element.files[i];if(!file.type.match(regex)){return false;}}}}
return true;},$.validator.format("Please enter a value with a valid mimetype."));$.validator.addMethod("alphanumeric",function(value,element){return this.optional(element)||/^\w+$/i.test(value);},"Letters, numbers, and underscores only please");$.validator.addMethod("bankaccountNL",function(value,element){if(this.optional(element)){return true;}
if(!(/^[0-9]{9}|([0-9]{2} ){3}[0-9]{3}$/.test(value))){return false;}
var account=value.replace(/ /g,""),sum=0,len=account.length,pos,factor,digit;for(pos=0;pos<len;pos++){factor=len-pos;digit=account.substring(pos,pos+1);sum=sum+factor*digit;}
return sum%11===0;},"Please specify a valid bank account number");$.validator.addMethod("bankorgiroaccountNL",function(value,element){return this.optional(element)||($.validator.methods.bankaccountNL.call(this,value,element))||($.validator.methods.giroaccountNL.call(this,value,element));},"Please specify a valid bank or giro account number");$.validator.addMethod("bic",function(value,element){return this.optional(element)||/^([A-Z]{6}[A-Z2-9][A-NP-Z1-9])(X{3}|[A-WY-Z0-9][A-Z0-9]{2})?$/.test(value.toUpperCase());},"Please specify a valid BIC code");$.validator.addMethod("cifES",function(value){"use strict";var num=[],controlDigit,sum,i,count,tmp,secondDigit;value=value.toUpperCase();if(!value.match("((^[A-Z]{1}[0-9]{7}[A-Z0-9]{1}$|^[T]{1}[A-Z0-9]{8}$)|^[0-9]{8}[A-Z]{1}$)")){return false;}
for(i=0;i<9;i++){num[i]=parseInt(value.charAt(i),10);}
sum=num[2]+num[4]+num[6];for(count=1;count<8;count+=2){tmp=(2*num[count]).toString();secondDigit=tmp.charAt(1);sum+=parseInt(tmp.charAt(0),10)+(secondDigit===""?0:parseInt(secondDigit,10));}
if(/^[ABCDEFGHJNPQRSUVW]{1}/.test(value)){sum+="";controlDigit=10-parseInt(sum.charAt(sum.length-1),10);value+=controlDigit;return(num[8].toString()===String.fromCharCode(64+controlDigit)||num[8].toString()===value.charAt(value.length-1));}
return false;},"Please specify a valid CIF number.");$.validator.addMethod("cpfBR",function(value){value=value.replace(/([~!@#$%^&*()_+=`{}\[\]\-|\\:;'<>,.\/? ])+/g,"");if(value.length!==11){return false;}
var sum=0,firstCN,secondCN,checkResult,i;firstCN=parseInt(value.substring(9,10),10);secondCN=parseInt(value.substring(10,11),10);checkResult=function(sum,cn){var result=(sum*10)%11;if((result===10)||(result===11)){result=0;}
return(result===cn);};if(value===""||value==="00000000000"||value==="11111111111"||value==="22222222222"||value==="33333333333"||value==="44444444444"||value==="55555555555"||value==="66666666666"||value==="77777777777"||value==="88888888888"||value==="99999999999"){return false;}
for(i=1;i<=9;i++){sum=sum+parseInt(value.substring(i-1,i),10)*(11-i);}
if(checkResult(sum,firstCN)){sum=0;for(i=1;i<=10;i++){sum=sum+parseInt(value.substring(i-1,i),10)*(12-i);}
return checkResult(sum,secondCN);}
return false;},"Please specify a valid CPF number");$.validator.addMethod("creditcard",function(value,element){if(this.optional(element)){return"dependency-mismatch";}
if(/[^0-9 \-]+/.test(value)){return false;}
var nCheck=0,nDigit=0,bEven=false,n,cDigit;value=value.replace(/\D/g,"");if(value.length<13||value.length>19){return false;}
for(n=value.length-1;n>=0;n--){cDigit=value.charAt(n);nDigit=parseInt(cDigit,10);if(bEven){if((nDigit*=2)>9){nDigit-=9;}}
nCheck+=nDigit;bEven=!bEven;}
return(nCheck%10)===0;},"Please enter a valid credit card number.");$.validator.addMethod("creditcardtypes",function(value,element,param){if(/[^0-9\-]+/.test(value)){return false;}
value=value.replace(/\D/g,"");var validTypes=0x0000;if(param.mastercard){validTypes|=0x0001;}
if(param.visa){validTypes|=0x0002;}
if(param.amex){validTypes|=0x0004;}
if(param.dinersclub){validTypes|=0x0008;}
if(param.enroute){validTypes|=0x0010;}
if(param.discover){validTypes|=0x0020;}
if(param.jcb){validTypes|=0x0040;}
if(param.unknown){validTypes|=0x0080;}
if(param.all){validTypes=0x0001|0x0002|0x0004|0x0008|0x0010|0x0020|0x0040|0x0080;}
if(validTypes&0x0001&&/^(5[12345])/.test(value)){return value.length===16;}
if(validTypes&0x0002&&/^(4)/.test(value)){return value.length===16;}
if(validTypes&0x0004&&/^(3[47])/.test(value)){return value.length===15;}
if(validTypes&0x0008&&/^(3(0[012345]|[68]))/.test(value)){return value.length===14;}
if(validTypes&0x0010&&/^(2(014|149))/.test(value)){return value.length===15;}
if(validTypes&0x0020&&/^(6011)/.test(value)){return value.length===16;}
if(validTypes&0x0040&&/^(3)/.test(value)){return value.length===16;}
if(validTypes&0x0040&&/^(2131|1800)/.test(value)){return value.length===15;}
if(validTypes&0x0080){return true;}
return false;},"Please enter a valid credit card number.");$.validator.addMethod("currency",function(value,element,param){var isParamString=typeof param==="string",symbol=isParamString?param:param[0],soft=isParamString?true:param[1],regex;symbol=symbol.replace(/,/g,"");symbol=soft?symbol+"]":symbol+"]?";regex="^["+symbol+"([1-9]{1}[0-9]{0,2}(\\,[0-9]{3})*(\\.[0-9]{0,2})?|[1-9]{1}[0-9]{0,}(\\.[0-9]{0,2})?|0(\\.[0-9]{0,2})?|(\\.[0-9]{1,2})?)$";regex=new RegExp(regex);return this.optional(element)||regex.test(value);},"Please specify a valid currency");$.validator.addMethod("dateFA",function(value,element){return this.optional(element)||/^[1-4]\d{3}\/((0?[1-6]\/((3[0-1])|([1-2][0-9])|(0?[1-9])))|((1[0-2]|(0?[7-9]))\/(30|([1-2][0-9])|(0?[1-9]))))$/.test(value);},$.validator.messages.date);$.validator.addMethod("dateITA",function(value,element){var check=false,re=/^\d{1,2}\/\d{1,2}\/\d{4}$/,adata,gg,mm,aaaa,xdata;if(re.test(value)){adata=value.split("/");gg=parseInt(adata[0],10);mm=parseInt(adata[1],10);aaaa=parseInt(adata[2],10);xdata=new Date(Date.UTC(aaaa,mm-1,gg,12,0,0,0));if((xdata.getUTCFullYear()===aaaa)&&(xdata.getUTCMonth()===mm-1)&&(xdata.getUTCDate()===gg)){check=true;}else{check=false;}}else{check=false;}
return this.optional(element)||check;},$.validator.messages.date);$.validator.addMethod("dateNL",function(value,element){return this.optional(element)||/^(0?[1-9]|[12]\d|3[01])[\.\/\-](0?[1-9]|1[012])[\.\/\-]([12]\d)?(\d\d)$/.test(value);},$.validator.messages.date);$.validator.addMethod("extension",function(value,element,param){param=typeof param==="string"?param.replace(/,/g,"|"):"png|jpe?g|gif";return this.optional(element)||value.match(new RegExp("\\.("+param+")$","i"));},$.validator.format("Please enter a value with a valid extension."));$.validator.addMethod("giroaccountNL",function(value,element){return this.optional(element)||/^[0-9]{1,7}$/.test(value);},"Please specify a valid giro account number");$.validator.addMethod("iban",function(value,element){if(this.optional(element)){return true;}
var iban=value.replace(/ /g,"").toUpperCase(),ibancheckdigits="",leadingZeroes=true,cRest="",cOperator="",countrycode,ibancheck,charAt,cChar,bbanpattern,bbancountrypatterns,ibanregexp,i,p;countrycode=iban.substring(0,2);bbancountrypatterns={"AL":"\\d{8}[\\dA-Z]{16}","AD":"\\d{8}[\\dA-Z]{12}","AT":"\\d{16}","AZ":"[\\dA-Z]{4}\\d{20}","BE":"\\d{12}","BH":"[A-Z]{4}[\\dA-Z]{14}","BA":"\\d{16}","BR":"\\d{23}[A-Z][\\dA-Z]","BG":"[A-Z]{4}\\d{6}[\\dA-Z]{8}","CR":"\\d{17}","HR":"\\d{17}","CY":"\\d{8}[\\dA-Z]{16}","CZ":"\\d{20}","DK":"\\d{14}","DO":"[A-Z]{4}\\d{20}","EE":"\\d{16}","FO":"\\d{14}","FI":"\\d{14}","FR":"\\d{10}[\\dA-Z]{11}\\d{2}","GE":"[\\dA-Z]{2}\\d{16}","DE":"\\d{18}","GI":"[A-Z]{4}[\\dA-Z]{15}","GR":"\\d{7}[\\dA-Z]{16}","GL":"\\d{14}","GT":"[\\dA-Z]{4}[\\dA-Z]{20}","HU":"\\d{24}","IS":"\\d{22}","IE":"[\\dA-Z]{4}\\d{14}","IL":"\\d{19}","IT":"[A-Z]\\d{10}[\\dA-Z]{12}","KZ":"\\d{3}[\\dA-Z]{13}","KW":"[A-Z]{4}[\\dA-Z]{22}","LV":"[A-Z]{4}[\\dA-Z]{13}","LB":"\\d{4}[\\dA-Z]{20}","LI":"\\d{5}[\\dA-Z]{12}","LT":"\\d{16}","LU":"\\d{3}[\\dA-Z]{13}","MK":"\\d{3}[\\dA-Z]{10}\\d{2}","MT":"[A-Z]{4}\\d{5}[\\dA-Z]{18}","MR":"\\d{23}","MU":"[A-Z]{4}\\d{19}[A-Z]{3}","MC":"\\d{10}[\\dA-Z]{11}\\d{2}","MD":"[\\dA-Z]{2}\\d{18}","ME":"\\d{18}","NL":"[A-Z]{4}\\d{10}","NO":"\\d{11}","PK":"[\\dA-Z]{4}\\d{16}","PS":"[\\dA-Z]{4}\\d{21}","PL":"\\d{24}","PT":"\\d{21}","RO":"[A-Z]{4}[\\dA-Z]{16}","SM":"[A-Z]\\d{10}[\\dA-Z]{12}","SA":"\\d{2}[\\dA-Z]{18}","RS":"\\d{18}","SK":"\\d{20}","SI":"\\d{15}","ES":"\\d{20}","SE":"\\d{20}","CH":"\\d{5}[\\dA-Z]{12}","TN":"\\d{20}","TR":"\\d{5}[\\dA-Z]{17}","AE":"\\d{3}\\d{16}","GB":"[A-Z]{4}\\d{14}","VG":"[\\dA-Z]{4}\\d{16}"};bbanpattern=bbancountrypatterns[countrycode];if(typeof bbanpattern!=="undefined"){ibanregexp=new RegExp("^[A-Z]{2}\\d{2}"+bbanpattern+"$","");if(!(ibanregexp.test(iban))){return false;}}
ibancheck=iban.substring(4,iban.length)+iban.substring(0,4);for(i=0;i<ibancheck.length;i++){charAt=ibancheck.charAt(i);if(charAt!=="0"){leadingZeroes=false;}
if(!leadingZeroes){ibancheckdigits+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".indexOf(charAt);}}
for(p=0;p<ibancheckdigits.length;p++){cChar=ibancheckdigits.charAt(p);cOperator=""+cRest+""+cChar;cRest=cOperator%97;}
return cRest===1;},"Please specify a valid IBAN");$.validator.addMethod("integer",function(value,element){return this.optional(element)||/^-?\d+$/.test(value);},"A positive or negative non-decimal number please");$.validator.addMethod("ipv4",function(value,element){return this.optional(element)||/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$/i.test(value);},"Please enter a valid IP v4 address.");$.validator.addMethod("ipv6",function(value,element){return this.optional(element)||/^((([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){5}:([0-9A-Fa-f]{1,4}:)?[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){4}:([0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){3}:([0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){2}:([0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(([0-9A-Fa-f]{1,4}:){0,5}:((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(::([0-9A-Fa-f]{1,4}:){0,5}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|([0-9A-Fa-f]{1,4}::([0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})|(::([0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){1,7}:))$/i.test(value);},"Please enter a valid IP v6 address.");$.validator.addMethod("lettersonly",function(value,element){return this.optional(element)||/^[a-z]+$/i.test(value);},"Letters only please");$.validator.addMethod("letterswithbasicpunc",function(value,element){return this.optional(element)||/^[a-z\-.,()'"\s]+$/i.test(value);},"Letters or punctuation only please");$.validator.addMethod("mobileNL",function(value,element){return this.optional(element)||/^((\+|00(\s|\s?\-\s?)?)31(\s|\s?\-\s?)?(\(0\)[\-\s]?)?|0)6((\s|\s?\-\s?)?[0-9]){8}$/.test(value);},"Please specify a valid mobile number");$.validator.addMethod("mobileUK",function(phone_number,element){phone_number=phone_number.replace(/\(|\)|\s+|-/g,"");return this.optional(element)||phone_number.length>9&&phone_number.match(/^(?:(?:(?:00\s?|\+)44\s?|0)7(?:[1345789]\d{2}|624)\s?\d{3}\s?\d{3})$/);},"Please specify a valid mobile number");$.validator.addMethod("nieES",function(value){"use strict";value=value.toUpperCase();if(!value.match("((^[A-Z]{1}[0-9]{7}[A-Z0-9]{1}$|^[T]{1}[A-Z0-9]{8}$)|^[0-9]{8}[A-Z]{1}$)")){return false;}
if(/^[T]{1}/.test(value)){return(value[8]===/^[T]{1}[A-Z0-9]{8}$/.test(value));}
if(/^[XYZ]{1}/.test(value)){return(value[8]==="TRWAGMYFPDXBNJZSQVHLCKE".charAt(value.replace("X","0").replace("Y","1").replace("Z","2").substring(0,8)%23));}
return false;},"Please specify a valid NIE number.");$.validator.addMethod("nifES",function(value){"use strict";value=value.toUpperCase();if(!value.match("((^[A-Z]{1}[0-9]{7}[A-Z0-9]{1}$|^[T]{1}[A-Z0-9]{8}$)|^[0-9]{8}[A-Z]{1}$)")){return false;}
if(/^[0-9]{8}[A-Z]{1}$/.test(value)){return("TRWAGMYFPDXBNJZSQVHLCKE".charAt(value.substring(8,0)%23)===value.charAt(8));}
if(/^[KLM]{1}/.test(value)){return(value[8]===String.fromCharCode(64));}
return false;},"Please specify a valid NIF number.");jQuery.validator.addMethod("notEqualTo",function(value,element,param){return this.optional(element)||!$.validator.methods.equalTo.call(this,value,element,param);},"Please enter a different value, values must not be the same.");$.validator.addMethod("nowhitespace",function(value,element){return this.optional(element)||/^\S+$/i.test(value);},"No white space please");$.validator.addMethod("pattern",function(value,element,param){if(this.optional(element)){return true;}
if(typeof param==="string"){param=new RegExp("^(?:"+param+")$");}
return param.test(value);},"Invalid format.");$.validator.addMethod("phoneNL",function(value,element){return this.optional(element)||/^((\+|00(\s|\s?\-\s?)?)31(\s|\s?\-\s?)?(\(0\)[\-\s]?)?|0)[1-9]((\s|\s?\-\s?)?[0-9]){8}$/.test(value);},"Please specify a valid phone number.");$.validator.addMethod("phoneUK",function(phone_number,element){phone_number=phone_number.replace(/\(|\)|\s+|-/g,"");return this.optional(element)||phone_number.length>9&&phone_number.match(/^(?:(?:(?:00\s?|\+)44\s?)|(?:\(?0))(?:\d{2}\)?\s?\d{4}\s?\d{4}|\d{3}\)?\s?\d{3}\s?\d{3,4}|\d{4}\)?\s?(?:\d{5}|\d{3}\s?\d{3})|\d{5}\)?\s?\d{4,5})$/);},"Please specify a valid phone number");$.validator.addMethod("phoneUS",function(phone_number,element){phone_number=phone_number.replace(/\s+/g,"");return this.optional(element)||phone_number.length>9&&phone_number.match(/^(\+?1-?)?(\([2-9]([02-9]\d|1[02-9])\)|[2-9]([02-9]\d|1[02-9]))-?[2-9]([02-9]\d|1[02-9])-?\d{4}$/);},"Please specify a valid phone number");$.validator.addMethod("phonesUK",function(phone_number,element){phone_number=phone_number.replace(/\(|\)|\s+|-/g,"");return this.optional(element)||phone_number.length>9&&phone_number.match(/^(?:(?:(?:00\s?|\+)44\s?|0)(?:1\d{8,9}|[23]\d{9}|7(?:[1345789]\d{8}|624\d{6})))$/);},"Please specify a valid uk phone number");$.validator.addMethod("postalCodeCA",function(value,element){return this.optional(element)||/^[ABCEGHJKLMNPRSTVXY]\d[ABCEGHJKLMNPRSTVWXYZ] *\d[ABCEGHJKLMNPRSTVWXYZ]\d$/i.test(value);},"Please specify a valid postal code");$.validator.addMethod("postalcodeBR",function(cep_value,element){return this.optional(element)||/^\d{2}.\d{3}-\d{3}?$|^\d{5}-?\d{3}?$/.test(cep_value);},"Informe um CEP vlido.");$.validator.addMethod("postalcodeIT",function(value,element){return this.optional(element)||/^\d{5}$/.test(value);},"Please specify a valid postal code");$.validator.addMethod("postalcodeNL",function(value,element){return this.optional(element)||/^[1-9][0-9]{3}\s?[a-zA-Z]{2}$/.test(value);},"Please specify a valid postal code");$.validator.addMethod("postcodeUK",function(value,element){return this.optional(element)||/^((([A-PR-UWYZ][0-9])|([A-PR-UWYZ][0-9][0-9])|([A-PR-UWYZ][A-HK-Y][0-9])|([A-PR-UWYZ][A-HK-Y][0-9][0-9])|([A-PR-UWYZ][0-9][A-HJKSTUW])|([A-PR-UWYZ][A-HK-Y][0-9][ABEHMNPRVWXY]))\s?([0-9][ABD-HJLNP-UW-Z]{2})|(GIR)\s?(0AA))$/i.test(value);},"Please specify a valid UK postcode");$.validator.addMethod("require_from_group",function(value,element,options){var $fields=$(options[1],element.form),$fieldsFirst=$fields.eq(0),validator=$fieldsFirst.data("valid_req_grp")?$fieldsFirst.data("valid_req_grp"):$.extend({},this),isValid=$fields.filter(function(){return validator.elementValue(this);}).length>=options[0];$fieldsFirst.data("valid_req_grp",validator);if(!$(element).data("being_validated")){$fields.data("being_validated",true);$fields.each(function(){validator.element(this);});$fields.data("being_validated",false);}
return isValid;},$.validator.format("Please fill at least {0} of these fields."));$.validator.addMethod("skip_or_fill_minimum",function(value,element,options){var $fields=$(options[1],element.form),$fieldsFirst=$fields.eq(0),validator=$fieldsFirst.data("valid_skip")?$fieldsFirst.data("valid_skip"):$.extend({},this),numberFilled=$fields.filter(function(){return validator.elementValue(this);}).length,isValid=numberFilled===0||numberFilled>=options[0];$fieldsFirst.data("valid_skip",validator);if(!$(element).data("being_validated")){$fields.data("being_validated",true);$fields.each(function(){validator.element(this);});$fields.data("being_validated",false);}
return isValid;},$.validator.format("Please either skip these fields or fill at least {0} of them."));$.validator.addMethod("stateUS",function(value,element,options){var isDefault=typeof options==="undefined",caseSensitive=(isDefault||typeof options.caseSensitive==="undefined")?false:options.caseSensitive,includeTerritories=(isDefault||typeof options.includeTerritories==="undefined")?false:options.includeTerritories,includeMilitary=(isDefault||typeof options.includeMilitary==="undefined")?false:options.includeMilitary,regex;if(!includeTerritories&&!includeMilitary){regex="^(A[KLRZ]|C[AOT]|D[CE]|FL|GA|HI|I[ADLN]|K[SY]|LA|M[ADEINOST]|N[CDEHJMVY]|O[HKR]|PA|RI|S[CD]|T[NX]|UT|V[AT]|W[AIVY])$";}else if(includeTerritories&&includeMilitary){regex="^(A[AEKLPRSZ]|C[AOT]|D[CE]|FL|G[AU]|HI|I[ADLN]|K[SY]|LA|M[ADEINOPST]|N[CDEHJMVY]|O[HKR]|P[AR]|RI|S[CD]|T[NX]|UT|V[AIT]|W[AIVY])$";}else if(includeTerritories){regex="^(A[KLRSZ]|C[AOT]|D[CE]|FL|G[AU]|HI|I[ADLN]|K[SY]|LA|M[ADEINOPST]|N[CDEHJMVY]|O[HKR]|P[AR]|RI|S[CD]|T[NX]|UT|V[AIT]|W[AIVY])$";}else{regex="^(A[AEKLPRZ]|C[AOT]|D[CE]|FL|GA|HI|I[ADLN]|K[SY]|LA|M[ADEINOST]|N[CDEHJMVY]|O[HKR]|PA|RI|S[CD]|T[NX]|UT|V[AT]|W[AIVY])$";}
regex=caseSensitive?new RegExp(regex):new RegExp(regex,"i");return this.optional(element)||regex.test(value);},"Please specify a valid state");$.validator.addMethod("strippedminlength",function(value,element,param){return $(value).text().length>=param;},$.validator.format("Please enter at least {0} characters"));$.validator.addMethod("time",function(value,element){return this.optional(element)||/^([01]\d|2[0-3]|[0-9])(:[0-5]\d){1,2}$/.test(value);},"Please enter a valid time, between 00:00 and 23:59");$.validator.addMethod("time12h",function(value,element){return this.optional(element)||/^((0?[1-9]|1[012])(:[0-5]\d){1,2}(\ ?[AP]M))$/i.test(value);},"Please enter a valid time in 12-hour am/pm format");$.validator.addMethod("url2",function(value,element){return this.optional(element)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)*(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(value);},$.validator.messages.url);$.validator.addMethod("vinUS",function(v){if(v.length!==17){return false;}
var LL=["A","B","C","D","E","F","G","H","J","K","L","M","N","P","R","S","T","U","V","W","X","Y","Z"],VL=[1,2,3,4,5,6,7,8,1,2,3,4,5,7,9,2,3,4,5,6,7,8,9],FL=[8,7,6,5,4,3,2,10,0,9,8,7,6,5,4,3,2],rs=0,i,n,d,f,cd,cdv;for(i=0;i<17;i++){f=FL[i];d=v.slice(i,i+1);if(i===8){cdv=d;}
if(!isNaN(d)){d*=f;}else{for(n=0;n<LL.length;n++){if(d.toUpperCase()===LL[n]){d=VL[n];d*=f;if(isNaN(cdv)&&n===8){cdv=LL[n];}
break;}}}
rs+=d;}
cd=rs%11;if(cd===10){cd="X";}
if(cd===cdv){return true;}
return false;},"The specified vehicle identification number (VIN) is invalid.");$.validator.addMethod("zipcodeUS",function(value,element){return this.optional(element)||/^\d{5}(-\d{4})?$/.test(value);},"The specified US ZIP Code is invalid");$.validator.addMethod("ziprange",function(value,element){return this.optional(element)||/^90[2-5]\d\{2\}-\d{4}$/.test(value);},"Your ZIP-code must be in the range 902xx-xxxx to 905xx-xxxx");}));Date.dayNames=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];Date.abbrDayNames=['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];Date.monthNames=['January','February','March','April','May','June','July','August','September','October','November','December'];Date.abbrMonthNames=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];Date.firstDayOfWeek=7;Date.format='mm/dd/yyyy';(function(){function add(name,method){if(!Date.prototype[name]){Date.prototype[name]=method;}};add("isLeapYear",function(){var y=this.getFullYear();return(y%4==0&&y%100!=0)||y%400==0;});add("isWeekend",function(){return this.getDay()==0||this.getDay()==6;});add("isWeekDay",function(){return!this.isWeekend();});add("getDaysInMonth",function(){return[31,(this.isLeapYear()?29:28),31,30,31,30,31,31,30,31,30,31][this.getMonth()];});add("getDayName",function(abbreviated){return abbreviated?Date.abbrDayNames[this.getDay()]:Date.dayNames[this.getDay()];});add("getMonthName",function(abbreviated){return abbreviated?Date.abbrMonthNames[this.getMonth()]:Date.monthNames[this.getMonth()];});add("getDayOfYear",function(){var tmpdtm=new Date("1/1/"+this.getFullYear());return Math.floor((this.getTime()-tmpdtm.getTime())/ 86400000);});add("getWeekOfYear",function(){return Math.ceil(this.getDayOfYear()/ 7);});add("setDayOfYear",function(day){this.setMonth(0);this.setDate(day);return this;});add("addYears",function(num){this.setFullYear(this.getFullYear()+num);return this;});add("addMonths",function(num){var tmpdtm=this.getDate();this.setMonth(this.getMonth()+num);if(tmpdtm>this.getDate())
this.addDays(-this.getDate());return this;});add("addDays",function(num){this.setDate(this.getDate()+num);return this;});add("addHours",function(num){this.setHours(this.getHours()+num);return this;});add("addMinutes",function(num){this.setMinutes(this.getMinutes()+num);return this;});add("addSeconds",function(num){this.setSeconds(this.getSeconds()+num);return this;});add("zeroTime",function(){this.setMilliseconds(0);this.setSeconds(0);this.setMinutes(0);this.setHours(0);return this;});add("asString",function(){var r=Date.format;return r.split('yyyy').join(this.getFullYear()).split('yy').join(this.getYear()).split('mmm').join(this.getMonthName(true)).split('mm').join(_zeroPad(this.getMonth()+1)).split('dd').join(_zeroPad(this.getDate())).split('j').join(this.getDate());});Date.fromString=function(s)
{if(s){var d=Date.parse(s);if(isNaN(d.getTime())){return false;}
return d;}
return false;};var _zeroPad=function(num){var s='0'+num;return s.substring(s.length-2)};})();(function($){$.fn.extend({renderCalendar:function(s)
{var dc=function(a)
{return document.createElement(a);};s=$.extend({},$.fn.datePicker.defaults,s);if(s.showHeader!=$.dpConst.SHOW_HEADER_NONE){var headRow=$(dc('tr'));for(var i=Date.firstDayOfWeek;i<Date.firstDayOfWeek+7;i++){var weekday=i%7;var day=Date.dayNames[weekday];headRow.append(jQuery(dc('th')).attr({'scope':'col','abbr':day,'title':day,'class':(weekday==0||weekday==6?'weekend':'weekday')}).html(s.showHeader==$.dpConst.SHOW_HEADER_SHORT?day.substr(0,1):day));}};var calendarTable=$(dc('table')).attr({'cellspacing':2}).addClass('jCalendar').append((s.showHeader!=$.dpConst.SHOW_HEADER_NONE?$(dc('thead')).append(headRow):dc('thead')));var tbody=$(dc('tbody'));var today=(new Date()).zeroTime();today.setHours(12);var month=s.month==undefined?today.getMonth():s.month;var year=s.year||today.getFullYear();var currentDate=(new Date(year,month,1,12,0,0));var firstDayOffset=Date.firstDayOfWeek-currentDate.getDay()+1;if(firstDayOffset>1)firstDayOffset-=7;var weeksToDraw=Math.ceil(((-1*firstDayOffset+1)+currentDate.getDaysInMonth())/7);currentDate.addDays(firstDayOffset-1);var doHover=function(firstDayInBounds)
{return function()
{if(s.hoverClass){var $this=$(this);if(!s.selectWeek){$this.addClass(s.hoverClass);}else if(firstDayInBounds&&!$this.is('.disabled')){$this.parent().addClass('activeWeekHover');}}}};var unHover=function()
{if(s.hoverClass){var $this=$(this);$this.removeClass(s.hoverClass);$this.parent().removeClass('activeWeekHover');}};var w=0;while(w++<weeksToDraw){var r=jQuery(dc('tr'));var firstDayInBounds=s.dpController?currentDate>s.dpController.startDate:false;for(var i=0;i<7;i++){var thisMonth=currentDate.getMonth()==month;var d=$(dc('td')).text(currentDate.getDate()+'').addClass((thisMonth?'current-month ':'other-month ')+
(currentDate.isWeekend()?'weekend ':'weekday ')+
(thisMonth&&currentDate.getTime()==today.getTime()?'today ':'')).data('datePickerDate',currentDate.asString()).hover(doHover(firstDayInBounds),unHover);r.append(d);if(s.renderCallback){s.renderCallback(d,currentDate,month,year);}
currentDate=new Date(currentDate.getFullYear(),currentDate.getMonth(),currentDate.getDate()+1,12,0,0);}
tbody.append(r);}
calendarTable.append(tbody);return this.each(function()
{$(this).empty().append(calendarTable);});},datePicker:function(s)
{if(!$.event._dpCache)$.event._dpCache=[];s=$.extend({},$.fn.datePicker.defaults,s);return this.each(function()
{var $this=$(this);var alreadyExists=true;if(!this._dpId){this._dpId=$.guid++;$.event._dpCache[this._dpId]=new DatePicker(this);alreadyExists=false;}
if(s.inline){s.createButton=false;s.displayClose=false;s.closeOnSelect=false;$this.empty();}
var controller=$.event._dpCache[this._dpId];controller.init(s);if(!alreadyExists&&s.createButton){controller.button=$('<span href="#" class="dp-choose-date far fa-calendar-alt" title="'+$.dpText.TEXT_CHOOSE_DATE+'"></span>').bind('click',function()
{$this.dpDisplay(this);this.blur();return false;});$this.after(controller.button);}
if(!alreadyExists&&$this.is(':text')){$this.bind('dateSelected',function(e,selectedDate,$td)
{if(s.triggerOnChange){$this.trigger('onchange');}
this.value=selectedDate.asString();}).bind('change',function()
{if(this.value==''){controller.clearSelected();}else{var d=Date.fromString(this.value);if(d){controller.setSelected(d,true,true);}}});if(s.clickInput){$this.bind('click',function()
{$this.trigger('change');$this.dpDisplay();});}
var d=Date.fromString(this.value);if(this.value!=''&&d){controller.setSelected(d,true,true);}}
$this.addClass('dp-applied');})},dpSetDisabled:function(s)
{return _w.call(this,'setDisabled',s);},dpSetStartDate:function(d)
{return _w.call(this,'setStartDate',d);},dpSetEndDate:function(d)
{return _w.call(this,'setEndDate',d);},dpGetSelected:function()
{var c=_getController(this[0]);if(c){return c.getSelected();}
return null;},dpSetSelected:function(d,v,m,e)
{if(v==undefined)v=true;if(m==undefined)m=true;if(e==undefined)e=true;return _w.call(this,'setSelected',Date.fromString(d),v,m,e);},dpClearSelected:function()
{return _w.call(this,'clearSelected');},dpSetDisplayedMonth:function(m,y)
{return _w.call(this,'setDisplayedMonth',Number(m),Number(y),true);},dpDisplay:function(e)
{return _w.call(this,'display',e);},dpSetRenderCallback:function(a)
{return _w.call(this,'setRenderCallback',a);},dpSetPosition:function(v,h)
{return _w.call(this,'setPosition',v,h);},dpSetOffset:function(v,h)
{return _w.call(this,'setOffset',v,h);},dpClose:function()
{return _w.call(this,'_closeCalendar',false,this[0]);},dpRerenderCalendar:function()
{return _w.call(this,'_rerenderCalendar');},_dpDestroy:function()
{}});var _w=function(f,a1,a2,a3,a4)
{return this.each(function()
{var c=_getController(this);if(c){c[f](a1,a2,a3,a4);}});};function DatePicker(ele)
{this.ele=ele;this.displayedMonth=null;this.displayedYear=null;this.startDate=null;this.endDate=null;this.showYearNavigation=null;this.closeOnSelect=null;this.displayClose=null;this.rememberViewedMonth=null;this.selectMultiple=null;this.numSelectable=null;this.numSelected=null;this.verticalPosition=null;this.horizontalPosition=null;this.verticalOffset=null;this.horizontalOffset=null;this.button=null;this.renderCallback=[];this.selectedDates={};this.inline=null;this.context='#dp-popup';this.settings={};};$.extend(DatePicker.prototype,{init:function(s)
{this.setStartDate(s.startDate);this.setEndDate(s.endDate);this.setDisplayedMonth(Number(s.month),Number(s.year));this.setRenderCallback(s.renderCallback);this.showYearNavigation=s.showYearNavigation;this.closeOnSelect=s.closeOnSelect;this.displayClose=s.displayClose;this.rememberViewedMonth=s.rememberViewedMonth;this.selectMultiple=s.selectMultiple;this.numSelectable=s.selectMultiple?s.numSelectable:1;this.numSelected=0;this.verticalPosition=s.verticalPosition;this.horizontalPosition=s.horizontalPosition;this.hoverClass=s.hoverClass;this.setOffset(s.verticalOffset,s.horizontalOffset);this.inline=s.inline;this.settings=s;if(this.inline){this.context=this.ele;this.display();}},setAttachTo:function(ele){if(ele){this.attachTo=typeof ele=='string'?$(ele):ele;}
else{this.attachTo=$(this.attachTo);}},setStartDate:function(d)
{if(d){if(d instanceof Date){this.startDate=d;}else{this.startDate=Date.fromString(d);}}
if(!this.startDate){this.startDate=(new Date()).zeroTime();}
this.setDisplayedMonth(this.displayedMonth,this.displayedYear);},setEndDate:function(d)
{if(d){if(d instanceof Date){this.endDate=d;}else{this.endDate=Date.fromString(d);}}
if(!this.endDate){this.endDate=(new Date('12/31/2999'));}
if(this.endDate.getTime()<this.startDate.getTime()){this.endDate=this.startDate;}
this.setDisplayedMonth(this.displayedMonth,this.displayedYear);},setPosition:function(v,h)
{this.verticalPosition=v;this.horizontalPosition=h;},setOffset:function(v,h)
{this.verticalOffset=parseInt(v)||0;this.horizontalOffset=parseInt(h)||0;},setDisabled:function(s)
{$e=$(this.ele);$e[s?'addClass':'removeClass']('dp-disabled');if(this.button){$but=$(this.button);$but[s?'addClass':'removeClass']('dp-disabled');$but.attr('title',s?'':$.dpText.TEXT_CHOOSE_DATE);}
if($e.is(':text')){if(s){$e.prop('disabled',true);}
else{$e.prop('disabled',false);}}},setDisplayedMonth:function(m,y,rerender)
{if(this.startDate==undefined||this.endDate==undefined){return;}
var s=new Date(this.startDate.getTime());s.setDate(1);var e=new Date(this.endDate.getTime());e.setDate(1);var t;if((!m&&!y)||(isNaN(m)&&isNaN(y))){t=new Date().zeroTime();t.setDate(1);}else if(isNaN(m)){t=new Date(y,this.displayedMonth,1);}else if(isNaN(y)){t=new Date(this.displayedYear,m,1);}else{t=new Date(y,m,1)}
if(t.getTime()<s.getTime()){t=s;}else if(t.getTime()>e.getTime()){t=e;}
var oldMonth=this.displayedMonth;var oldYear=this.displayedYear;this.displayedMonth=t.getMonth();this.displayedYear=t.getFullYear();if(rerender&&(this.displayedMonth!=oldMonth||this.displayedYear!=oldYear))
{this._rerenderCalendar();$(this.ele).trigger('dpMonthChanged',[this.displayedMonth,this.displayedYear]);}},setSelected:function(d,v,moveToMonth,dispatchEvents)
{if(d<this.startDate||d.zeroTime()>this.endDate.zeroTime()){return;}
var s=this.settings;if(s.selectWeek)
{d=d.addDays(-(d.getDay()-Date.firstDayOfWeek+7)%7);if(d<this.startDate)
{return;}}
if(v==this.isSelected(d))
{return;}
if(this.selectMultiple==false){this.clearSelected();}else if(v&&this.numSelected==this.numSelectable){return;}
if(moveToMonth&&(this.displayedMonth!=d.getMonth()||this.displayedYear!=d.getFullYear())){this.setDisplayedMonth(d.getMonth(),d.getFullYear(),true);}
this.selectedDates[d.asString()]=v;this.numSelected+=v?1:-1;var selectorString='td.'+(d.getMonth()==this.displayedMonth?'current-month':'other-month');var $td;$(selectorString,this.context).each(function()
{if($(this).data('datePickerDate')==d.asString()){$td=$(this);if(s.selectWeek)
{$td.parent()[v?'addClass':'removeClass']('selectedWeek');}
$td[v?'addClass':'removeClass']('selected');}});$('td',this.context).not('.selected')[this.selectMultiple&&this.numSelected==this.numSelectable?'addClass':'removeClass']('unselectable');if(dispatchEvents)
{var s=this.isSelected(d);$e=$(this.ele);var dClone=Date.fromString(d.asString());$e.trigger('dateSelected',[dClone,$td,s]);$e.trigger('change');}},isSelected:function(d)
{return this.selectedDates[d.asString()];},getSelected:function()
{var r=[];for(var s in this.selectedDates){if(this.selectedDates[s]==true){r.push(Date.fromString(s));}}
return r;},clearSelected:function()
{this.selectedDates={};this.numSelected=0;$('td.selected',this.context).removeClass('selected').parent().removeClass('selectedWeek');},display:function(eleAlignTo)
{if($(this.ele).is('.dp-disabled'))return;eleAlignTo=eleAlignTo||this.ele;var c=this;var $ele=$(eleAlignTo);var eleOffset=$ele.offset();var $createIn;var attrs;var attrsCalendarHolder;var cssRules;if(c.inline){$createIn=$(this.ele);attrs={'id':'calendar-'+this.ele._dpId,'class':'dp-popup dp-popup-inline'};$('.dp-popup',$createIn).remove();cssRules={};}else{$createIn=$('body');attrs={'id':'dp-popup','class':'dp-popup'};cssRules={'top':eleOffset.top+c.verticalOffset,'left':eleOffset.left+c.horizontalOffset};var _checkMouse=function(e)
{var el=e.target;var cal=$('#dp-popup')[0];while(true){if(el==cal){return true;}else if(el==document){c._closeCalendar();return false;}else{el=$(el).parent()[0];}}};this._checkMouse=_checkMouse;c._closeCalendar(true);$(document).bind('keydown.datepicker',function(event)
{if(event.keyCode==27){c._closeCalendar();}});}
if(!c.rememberViewedMonth)
{var selectedDate=this.getSelected()[0];if(selectedDate){selectedDate=new Date(selectedDate);this.setDisplayedMonth(selectedDate.getMonth(),selectedDate.getFullYear(),false);}}
$createIn.append($('<div></div>').attr(attrs).css(cssRules).append($('<h2></h2>'),$('<div class="dp-nav-prev"></div>').append($('<a class="fal fa-angle-double-left fa-lg dp-nav-prev-year" href="#" title="'+$.dpText.TEXT_PREV_YEAR+'"></a>').bind('click',function()
{return c._displayNewMonth.call(c,this,0,-1);}),$('<a class="fal fa-angle-left fa-lg dp-nav-prev-month" href="#" title="'+$.dpText.TEXT_PREV_MONTH+'"></a>').bind('click',function()
{return c._displayNewMonth.call(c,this,-1,0);})),$('<div class="dp-nav-next"></div>').append($('<a class="fal fa-angle-double-right fa-lg dp-nav-next-year" href="#" title="'+$.dpText.TEXT_NEXT_YEAR+'"></a>').bind('click',function()
{return c._displayNewMonth.call(c,this,0,1);}),$('<a class="fal fa-angle-right fa-lg dp-nav-next-month" href="#" title="'+$.dpText.TEXT_NEXT_MONTH+'"></a>').bind('click',function()
{return c._displayNewMonth.call(c,this,1,0);})),$('<div class="dp-calendar"></div>')).bgIframe());var $pop=this.inline?$('.dp-popup',this.context):$('#dp-popup');if(this.showYearNavigation==false){$('.dp-nav-prev-year, .dp-nav-next-year',c.context).css('display','none');}
if(this.displayClose){$pop.append($('<a href="#" id="dp-close">'+$.dpText.TEXT_CLOSE+'</a>').bind('click',function()
{c._closeCalendar();return false;}));}
c._renderCalendar();$(this.ele).trigger('dpDisplayed',$pop);if(!c.inline){if(this.verticalPosition==$.dpConst.POS_BOTTOM){$pop.css('top',eleOffset.top+$ele.height()-$pop.height()+c.verticalOffset);}
if(this.horizontalPosition==$.dpConst.POS_RIGHT){$pop.css('left',eleOffset.left+$ele.width()-$pop.width()+c.horizontalOffset);}
$(document).bind('mousedown.datepicker',this._checkMouse);}},setRenderCallback:function(a)
{if(a==null)return;if(a&&typeof(a)=='function'){a=[a];}
this.renderCallback=this.renderCallback.concat(a);},cellRender:function($td,thisDate,month,year){var c=this.dpController;var d=new Date(thisDate.getTime());$td.bind('click',function()
{var $this=$(this);if(!$this.is('.disabled')){c.setSelected(d,!$this.is('.selected')||!c.selectMultiple,false,true);if(c.closeOnSelect){if(c.settings.autoFocusNextInput){var ele=c.ele;var found=false;$(':input',ele.form).each(function()
{if(found){$(this).focus();return false;}
if(this==ele){found=true;}});}else{c.ele.focus();}
c._closeCalendar();}}});if(c.isSelected(d)){$td.addClass('selected');if(c.settings.selectWeek)
{$td.parent().addClass('selectedWeek');}}else if(c.selectMultiple&&c.numSelected==c.numSelectable){$td.addClass('unselectable');}},_applyRenderCallbacks:function()
{var c=this;$('td',this.context).each(function()
{for(var i=0;i<c.renderCallback.length;i++){$td=$(this);c.renderCallback[i].apply(this,[$td,Date.fromString($td.data('datePickerDate')),c.displayedMonth,c.displayedYear]);}});return;},_displayNewMonth:function(ele,m,y)
{if(!$(ele).is('.disabled')){this.setDisplayedMonth(this.displayedMonth+m,this.displayedYear+y,true);}
ele.blur();return false;},_rerenderCalendar:function()
{this._clearCalendar();this._renderCalendar();},_renderCalendar:function()
{var month_names=new Array("January","February","March","April","May","June","July","August","September","October","November","December");formattedDate=new Date(this.displayedYear,this.displayedMonth);$('h2',this.context).html(month_names[formattedDate.getMonth()]+' '+formattedDate.getFullYear());$('.dp-calendar',this.context).renderCalendar($.extend({},this.settings,{month:this.displayedMonth,year:this.displayedYear,renderCallback:this.cellRender,dpController:this,hoverClass:this.hoverClass}));if(this.displayedYear==this.startDate.getFullYear()&&this.displayedMonth==this.startDate.getMonth()){$('.dp-nav-prev-year',this.context).addClass('disabled');$('.dp-nav-prev-month',this.context).addClass('disabled');$('.dp-calendar td.other-month',this.context).each(function()
{var $this=$(this);if(Number($this.text())>20){$this.addClass('disabled');}});var d=this.startDate.getDate();$('.dp-calendar td.current-month',this.context).each(function()
{var $this=$(this);if(Number($this.text())<d){$this.addClass('disabled');}});}else{$('.dp-nav-prev-year',this.context).removeClass('disabled');$('.dp-nav-prev-month',this.context).removeClass('disabled');var d=this.startDate.getDate();if(d>20){var st=this.startDate.getTime();var sd=new Date(st);sd.addMonths(1);if(this.displayedYear==sd.getFullYear()&&this.displayedMonth==sd.getMonth()){$('.dp-calendar td.other-month',this.context).each(function()
{var $this=$(this);if(Date.fromString($this.data('datePickerDate')).getTime()<st){$this.addClass('disabled');}});}}}
if(this.displayedYear==this.endDate.getFullYear()&&this.displayedMonth==this.endDate.getMonth()){$('.dp-nav-next-year',this.context).addClass('disabled');$('.dp-nav-next-month',this.context).addClass('disabled');$('.dp-calendar td.other-month',this.context).each(function()
{var $this=$(this);if(Number($this.text())<14){$this.addClass('disabled');}});var d=this.endDate.getDate();$('.dp-calendar td.current-month',this.context).each(function()
{var $this=$(this);if(Number($this.text())>d){$this.addClass('disabled');}});}else{$('.dp-nav-next-year',this.context).removeClass('disabled');$('.dp-nav-next-month',this.context).removeClass('disabled');var d=this.endDate.getDate();if(d<13){var ed=new Date(this.endDate.getTime());ed.addMonths(-1);if(this.displayedYear==ed.getFullYear()&&this.displayedMonth==ed.getMonth()){$('.dp-calendar td.other-month',this.context).each(function()
{var $this=$(this);var cellDay=Number($this.text());if(cellDay<13&&cellDay>d){$this.addClass('disabled');}});}}}
this._applyRenderCallbacks();},_closeCalendar:function(programatic,ele)
{if(!ele||ele==this.ele)
{$(document).unbind('mousedown.datepicker');$(document).unbind('keydown.datepicker');this._clearCalendar();$('#dp-popup a').unbind();$('#dp-popup').empty().remove();if(!programatic){$(this.ele).trigger('dpClosed',[this.getSelected()]);}}},_clearCalendar:function()
{$('.dp-calendar td',this.context).unbind();$('.dp-calendar',this.context).empty();}});$.dpConst={SHOW_HEADER_NONE:0,SHOW_HEADER_SHORT:1,SHOW_HEADER_LONG:2,POS_TOP:0,POS_BOTTOM:1,POS_LEFT:0,POS_RIGHT:1,DP_INTERNAL_FOCUS:'dpInternalFocusTrigger'};$.dpText={TEXT_PREV_YEAR:'Previous year',TEXT_PREV_MONTH:'Previous month',TEXT_NEXT_YEAR:'Next year',TEXT_NEXT_MONTH:'Next month',TEXT_CLOSE:'Close',TEXT_CHOOSE_DATE:'Choose date',HEADER_FORMAT:'mmmm yyyy'};$.dpVersion='$Id: jquery.datePicker.js 108 2011-11-17 21:19:57Z kelvin.luck@gmail.com $';$.fn.datePicker.defaults={month:undefined,year:undefined,showHeader:$.dpConst.SHOW_HEADER_SHORT,startDate:undefined,endDate:undefined,inline:false,renderCallback:null,createButton:true,showYearNavigation:true,closeOnSelect:true,displayClose:false,selectMultiple:false,numSelectable:Number.MAX_VALUE,clickInput:false,rememberViewedMonth:true,selectWeek:false,verticalPosition:$.dpConst.POS_TOP,horizontalPosition:$.dpConst.POS_LEFT,verticalOffset:0,horizontalOffset:10,hoverClass:'dp-hover',autoFocusNextInput:false,triggerOnChange:false};function _getController(ele)
{if(ele._dpId)return $.event._dpCache[ele._dpId];return false;};if($.fn.bgIframe==undefined){$.fn.bgIframe=function(){return this;};};$(window).bind('unload',function(){var els=$.event._dpCache||[];for(var i in els){$(els[i].ele)._dpDestroy();}});})(jQuery);Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]};(function(){var $D=Date,$P=$D.prototype,$C=$D.CultureInfo,p=function(s,l){if(!l){l=2;}
return("000"+s).slice(l*-1);};$P.clearTime=function(){this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);return this;};$P.setTimeToNow=function(){var n=new Date();this.setHours(n.getHours());this.setMinutes(n.getMinutes());this.setSeconds(n.getSeconds());this.setMilliseconds(n.getMilliseconds());return this;};$D.today=function(){return new Date().clearTime();};$D.compare=function(date1,date2){if(isNaN(date1)||isNaN(date2)){throw new Error(date1+" - "+date2);}else if(date1 instanceof Date&&date2 instanceof Date){return(date1<date2)?-1:(date1>date2)?1:0;}else{throw new TypeError(date1+" - "+date2);}};$D.equals=function(date1,date2){return(date1.compareTo(date2)===0);};$D.getDayNumberFromName=function(name){var n=$C.dayNames,m=$C.abbreviatedDayNames,o=$C.shortestDayNames,s=name.toLowerCase();for(var i=0;i<n.length;i++){if(n[i].toLowerCase()==s||m[i].toLowerCase()==s||o[i].toLowerCase()==s){return i;}}
return-1;};$D.getMonthNumberFromName=function(name){var n=$C.monthNames,m=$C.abbreviatedMonthNames,s=name.toLowerCase();for(var i=0;i<n.length;i++){if(n[i].toLowerCase()==s||m[i].toLowerCase()==s){return i;}}
return-1;};$D.isLeapYear=function(year){return((year%4===0&&year%100!==0)||year%400===0);};$D.getDaysInMonth=function(year,month){return[31,($D.isLeapYear(year)?29:28),31,30,31,30,31,31,30,31,30,31][month];};$D.getTimezoneAbbreviation=function(offset){var z=$C.timezones,p;for(var i=0;i<z.length;i++){if(z[i].offset===offset){return z[i].name;}}
return null;};$D.getTimezoneOffset=function(name){var z=$C.timezones,p;for(var i=0;i<z.length;i++){if(z[i].name===name.toUpperCase()){return z[i].offset;}}
return null;};$P.clone=function(){return new Date(this.getTime());};$P.compareTo=function(date){return Date.compare(this,date);};$P.equals=function(date){return Date.equals(this,date||new Date());};$P.between=function(start,end){return this.getTime()>=start.getTime()&&this.getTime()<=end.getTime();};$P.isAfter=function(date){return this.compareTo(date||new Date())===1;};$P.isBefore=function(date){return(this.compareTo(date||new Date())===-1);};$P.isToday=function(){return this.isSameDay(new Date());};$P.isSameDay=function(date){return this.clone().clearTime().equals(date.clone().clearTime());};$P.addMilliseconds=function(value){this.setMilliseconds(this.getMilliseconds()+value);return this;};$P.addSeconds=function(value){return this.addMilliseconds(value*1000);};$P.addMinutes=function(value){return this.addMilliseconds(value*60000);};$P.addHours=function(value){return this.addMilliseconds(value*3600000);};$P.addDays=function(value){this.setDate(this.getDate()+value);return this;};$P.addWeeks=function(value){return this.addDays(value*7);};$P.addMonths=function(value){var n=this.getDate();this.setDate(1);this.setMonth(this.getMonth()+value);this.setDate(Math.min(n,$D.getDaysInMonth(this.getFullYear(),this.getMonth())));return this;};$P.addYears=function(value){return this.addMonths(value*12);};$P.add=function(config){if(typeof config=="number"){this._orient=config;return this;}
var x=config;if(x.milliseconds){this.addMilliseconds(x.milliseconds);}
if(x.seconds){this.addSeconds(x.seconds);}
if(x.minutes){this.addMinutes(x.minutes);}
if(x.hours){this.addHours(x.hours);}
if(x.weeks){this.addWeeks(x.weeks);}
if(x.months){this.addMonths(x.months);}
if(x.years){this.addYears(x.years);}
if(x.days){this.addDays(x.days);}
return this;};var $y,$m,$d;$P.getWeek=function(){var a,b,c,d,e,f,g,n,s,w;$y=(!$y)?this.getFullYear():$y;$m=(!$m)?this.getMonth()+1:$m;$d=(!$d)?this.getDate():$d;if($m<=2){a=$y-1;b=(a/4|0)-(a/100|0)+(a/400|0);c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0);s=b-c;e=0;f=$d-1+(31*($m-1));}else{a=$y;b=(a/4|0)-(a/100|0)+(a/400|0);c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0);s=b-c;e=s+1;f=$d+((153*($m-3)+2)/5)+58+s;}
g=(a+b)%7;d=(f+g-e)%7;n=(f+3-d)|0;if(n<0){w=53-((g-s)/5|0);}else if(n>364+s){w=1;}else{w=(n/7|0)+1;}
$y=$m=$d=null;return w;};$P.getISOWeek=function(){$y=this.getUTCFullYear();$m=this.getUTCMonth()+1;$d=this.getUTCDate();return p(this.getWeek());};$P.setWeek=function(n){return this.moveToDayOfWeek(1).addWeeks(n-this.getWeek());};$D._validate=function(n,min,max,name){if(typeof n=="undefined"){return false;}else if(typeof n!="number"){throw new TypeError(n+" is not a Number.");}else if(n<min||n>max){throw new RangeError(n+" is not a valid value for "+name+".");}
return true;};$D.validateMillisecond=function(value){return $D._validate(value,0,999,"millisecond");};$D.validateSecond=function(value){return $D._validate(value,0,59,"second");};$D.validateMinute=function(value){return $D._validate(value,0,59,"minute");};$D.validateHour=function(value){return $D._validate(value,0,23,"hour");};$D.validateDay=function(value,year,month){return $D._validate(value,1,$D.getDaysInMonth(year,month),"day");};$D.validateMonth=function(value){return $D._validate(value,0,11,"month");};$D.validateYear=function(value){return $D._validate(value,0,9999,"year");};$P.set=function(config){if($D.validateMillisecond(config.millisecond)){this.addMilliseconds(config.millisecond-this.getMilliseconds());}
if($D.validateSecond(config.second)){this.addSeconds(config.second-this.getSeconds());}
if($D.validateMinute(config.minute)){this.addMinutes(config.minute-this.getMinutes());}
if($D.validateHour(config.hour)){this.addHours(config.hour-this.getHours());}
if($D.validateMonth(config.month)){this.addMonths(config.month-this.getMonth());}
if($D.validateYear(config.year)){this.addYears(config.year-this.getFullYear());}
if($D.validateDay(config.day,this.getFullYear(),this.getMonth())){this.addDays(config.day-this.getDate());}
if(config.timezone){this.setTimezone(config.timezone);}
if(config.timezoneOffset){this.setTimezoneOffset(config.timezoneOffset);}
if(config.week&&$D._validate(config.week,0,53,"week")){this.setWeek(config.week);}
return this;};$P.moveToFirstDayOfMonth=function(){return this.set({day:1});};$P.moveToLastDayOfMonth=function(){return this.set({day:$D.getDaysInMonth(this.getFullYear(),this.getMonth())});};$P.moveToNthOccurrence=function(dayOfWeek,occurrence){var shift=0;if(occurrence>0){shift=occurrence-1;}
else if(occurrence===-1){this.moveToLastDayOfMonth();if(this.getDay()!==dayOfWeek){this.moveToDayOfWeek(dayOfWeek,-1);}
return this;}
return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(dayOfWeek,+1).addWeeks(shift);};$P.moveToDayOfWeek=function(dayOfWeek,orient){var diff=(dayOfWeek-this.getDay()+7*(orient||+1))%7;return this.addDays((diff===0)?diff+=7*(orient||+1):diff);};$P.moveToMonth=function(month,orient){var diff=(month-this.getMonth()+12*(orient||+1))%12;return this.addMonths((diff===0)?diff+=12*(orient||+1):diff);};$P.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/86400000)+1;};$P.getTimezone=function(){return $D.getTimezoneAbbreviation(this.getUTCOffset());};$P.setTimezoneOffset=function(offset){var here=this.getTimezoneOffset(),there=Number(offset)*-6/10;return this.addMinutes(there-here);};$P.setTimezone=function(offset){return this.setTimezoneOffset($D.getTimezoneOffset(offset));};$P.hasDaylightSavingTime=function(){return(Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset());};$P.isDaylightSavingTime=function(){return(this.hasDaylightSavingTime()&&new Date().getTimezoneOffset()===Date.today().set({month:6,day:1}).getTimezoneOffset());};$P.getUTCOffset=function(){var n=this.getTimezoneOffset()*-10/6,r;if(n<0){r=(n-10000).toString();return r.charAt(0)+r.substr(2);}else{r=(n+10000).toString();return"+"+r.substr(1);}};$P.getElapsed=function(date){return(date||new Date())-this;};if(!$P.toISOString){$P.toISOString=function(){function f(n){return n<10?'0'+n:n;}
return'"'+this.getUTCFullYear()+'-'+
f(this.getUTCMonth()+1)+'-'+
f(this.getUTCDate())+'T'+
f(this.getUTCHours())+':'+
f(this.getUTCMinutes())+':'+
f(this.getUTCSeconds())+'Z"';};}
$P._toString=$P.toString;$P.toString=function(format){var x=this;if(format&&format.length==1){var c=$C.formatPatterns;x.t=x.toString;switch(format){case"d":return x.t(c.shortDate);case"D":return x.t(c.longDate);case"F":return x.t(c.fullDateTime);case"m":return x.t(c.monthDay);case"r":return x.t(c.rfc1123);case"s":return x.t(c.sortableDateTime);case"t":return x.t(c.shortTime);case"T":return x.t(c.longTime);case"u":return x.t(c.universalSortableDateTime);case"y":return x.t(c.yearMonth);}}
var ord=function(n){switch(n*1){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th";}};return format?format.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(m){if(m.charAt(0)==="\\"){return m.replace("\\","");}
x.h=x.getHours;switch(m){case"hh":return p(x.h()<13?(x.h()===0?12:x.h()):(x.h()-12));case"h":return x.h()<13?(x.h()===0?12:x.h()):(x.h()-12);case"HH":return p(x.h());case"H":return x.h();case"mm":return p(x.getMinutes());case"m":return x.getMinutes();case"ss":return p(x.getSeconds());case"s":return x.getSeconds();case"yyyy":return p(x.getFullYear(),4);case"yy":return p(x.getFullYear());case"dddd":return $C.dayNames[x.getDay()];case"ddd":return $C.abbreviatedDayNames[x.getDay()];case"dd":return p(x.getDate());case"d":return x.getDate();case"MMMM":return $C.monthNames[x.getMonth()];case"MMM":return $C.abbreviatedMonthNames[x.getMonth()];case"MM":return p((x.getMonth()+1));case"M":return x.getMonth()+1;case"t":return x.h()<12?$C.amDesignator.substring(0,1):$C.pmDesignator.substring(0,1);case"tt":return x.h()<12?$C.amDesignator:$C.pmDesignator;case"S":return ord(x.getDate());default:return m;}}):this._toString();};}());(function(){var $D=Date,$P=$D.prototype,$C=$D.CultureInfo,$N=Number.prototype;$P._orient=+1;$P._nth=null;$P._is=false;$P._same=false;$P._isSecond=false;$N._dateElement="day";$P.next=function(){this._orient=+1;return this;};$D.next=function(){return $D.today().next();};$P.last=$P.prev=$P.previous=function(){this._orient=-1;return this;};$D.last=$D.prev=$D.previous=function(){return $D.today().last();};$P.is=function(){this._is=true;return this;};$P.same=function(){this._same=true;this._isSecond=false;return this;};$P.today=function(){return this.same().day();};$P.weekday=function(){if(this._is){this._is=false;return(!this.is().sat()&&!this.is().sun());}
return false;};$P.at=function(time){return(typeof time==="string")?$D.parse(this.toString("d")+" "+time):this.set(time);};$N.fromNow=$N.after=function(date){var c={};c[this._dateElement]=this;return((!date)?new Date():date.clone()).add(c);};$N.ago=$N.before=function(date){var c={};c[this._dateElement]=this*-1;return((!date)?new Date():date.clone()).add(c);};var dx=("sunday monday tuesday wednesday thursday friday saturday").split(/\s/),mx=("january february march april may june july august september october november december").split(/\s/),px=("Millisecond Second Minute Hour Day Week Month Year").split(/\s/),pxf=("Milliseconds Seconds Minutes Hours Date Week Month FullYear").split(/\s/),nth=("final first second third fourth fifth").split(/\s/),de;$P.toObject=function(){var o={};for(var i=0;i<px.length;i++){o[px[i].toLowerCase()]=this["get"+pxf[i]]();}
return o;};$D.fromObject=function(config){config.week=null;return Date.today().set(config);};var df=function(n){return function(){if(this._is){this._is=false;return this.getDay()==n;}
if(this._nth!==null){if(this._isSecond){this.addSeconds(this._orient*-1);}
this._isSecond=false;var ntemp=this._nth;this._nth=null;var temp=this.clone().moveToLastDayOfMonth();this.moveToNthOccurrence(n,ntemp);if(this>temp){throw new RangeError($D.getDayName(n)+" does not occur "+ntemp+" times in the month of "+$D.getMonthName(temp.getMonth())+" "+temp.getFullYear()+".");}
return this;}
return this.moveToDayOfWeek(n,this._orient);};};var sdf=function(n){return function(){var t=$D.today(),shift=n-t.getDay();if(n===0&&$C.firstDayOfWeek===1&&t.getDay()!==0){shift=shift+7;}
return t.addDays(shift);};};for(var i=0;i<dx.length;i++){$D[dx[i].toUpperCase()]=$D[dx[i].toUpperCase().substring(0,3)]=i;$D[dx[i]]=$D[dx[i].substring(0,3)]=sdf(i);$P[dx[i]]=$P[dx[i].substring(0,3)]=df(i);}
var mf=function(n){return function(){if(this._is){this._is=false;return this.getMonth()===n;}
return this.moveToMonth(n,this._orient);};};var smf=function(n){return function(){return $D.today().set({month:n,day:1});};};for(var j=0;j<mx.length;j++){$D[mx[j].toUpperCase()]=$D[mx[j].toUpperCase().substring(0,3)]=j;$D[mx[j]]=$D[mx[j].substring(0,3)]=smf(j);$P[mx[j]]=$P[mx[j].substring(0,3)]=mf(j);}
var ef=function(j){return function(){if(this._isSecond){this._isSecond=false;return this;}
if(this._same){this._same=this._is=false;var o1=this.toObject(),o2=(arguments[0]||new Date()).toObject(),v="",k=j.toLowerCase();for(var m=(px.length-1);m>-1;m--){v=px[m].toLowerCase();if(o1[v]!=o2[v]){return false;}
if(k==v){break;}}
return true;}
if(j.substring(j.length-1)!="s"){j+="s";}
return this["add"+j](this._orient);};};var nf=function(n){return function(){this._dateElement=n;return this;};};for(var k=0;k<px.length;k++){de=px[k].toLowerCase();$P[de]=$P[de+"s"]=ef(px[k]);$N[de]=$N[de+"s"]=nf(de);}
$P._ss=ef("Second");var nthfn=function(n){return function(dayOfWeek){if(this._same){return this._ss(arguments[0]);}
if(dayOfWeek||dayOfWeek===0){return this.moveToNthOccurrence(dayOfWeek,n);}
this._nth=n;if(n===2&&(dayOfWeek===undefined||dayOfWeek===null)){this._isSecond=true;return this.addSeconds(this._orient);}
return this;};};for(var l=0;l<nth.length;l++){$P[nth[l]]=(l===0)?nthfn(-1):nthfn(l);}}());(function(){Date.Parsing={Exception:function(s){this.message="Parse error at '"+s.substring(0,10)+" ...'";}};var $P=Date.Parsing;var _=$P.Operators={rtoken:function(r){return function(s){var mx=s.match(r);if(mx){return([mx[0],s.substring(mx[0].length)]);}else{throw new $P.Exception(s);}};},token:function(s){return function(s){return _.rtoken(new RegExp("^\s*"+s+"\s*"))(s);};},stoken:function(s){return _.rtoken(new RegExp("^"+s));},until:function(p){return function(s){var qx=[],rx=null;while(s.length){try{rx=p.call(this,s);}catch(e){qx.push(rx[0]);s=rx[1];continue;}
break;}
return[qx,s];};},many:function(p){return function(s){var rx=[],r=null;while(s.length){try{r=p.call(this,s);}catch(e){return[rx,s];}
rx.push(r[0]);s=r[1];}
return[rx,s];};},optional:function(p){return function(s){var r=null;try{r=p.call(this,s);}catch(e){return[null,s];}
return[r[0],r[1]];};},not:function(p){return function(s){try{p.call(this,s);}catch(e){return[null,s];}
throw new $P.Exception(s);};},ignore:function(p){return p?function(s){var r=null;r=p.call(this,s);return[null,r[1]];}:null;},product:function(){var px=arguments[0],qx=Array.prototype.slice.call(arguments,1),rx=[];for(var i=0;i<px.length;i++){rx.push(_.each(px[i],qx));}
return rx;},cache:function(rule){var cache={},r=null;return function(s){try{r=cache[s]=(cache[s]||rule.call(this,s));}catch(e){r=cache[s]=e;}
if(r instanceof $P.Exception){throw r;}else{return r;}};},any:function(){var px=arguments;return function(s){var r=null;for(var i=0;i<px.length;i++){if(px[i]==null){continue;}
try{r=(px[i].call(this,s));}catch(e){r=null;}
if(r){return r;}}
throw new $P.Exception(s);};},each:function(){var px=arguments;return function(s){var rx=[],r=null;for(var i=0;i<px.length;i++){if(px[i]==null){continue;}
try{r=(px[i].call(this,s));}catch(e){throw new $P.Exception(s);}
rx.push(r[0]);s=r[1];}
return[rx,s];};},all:function(){var px=arguments,_=_;return _.each(_.optional(px));},sequence:function(px,d,c){d=d||_.rtoken(/^\s*/);c=c||null;if(px.length==1){return px[0];}
return function(s){var r=null,q=null;var rx=[];for(var i=0;i<px.length;i++){try{r=px[i].call(this,s);}catch(e){break;}
rx.push(r[0]);try{q=d.call(this,r[1]);}catch(ex){q=null;break;}
s=q[1];}
if(!r){throw new $P.Exception(s);}
if(q){throw new $P.Exception(q[1]);}
if(c){try{r=c.call(this,r[1]);}catch(ey){throw new $P.Exception(r[1]);}}
return[rx,(r?r[1]:s)];};},between:function(d1,p,d2){d2=d2||d1;var _fn=_.each(_.ignore(d1),p,_.ignore(d2));return function(s){var rx=_fn.call(this,s);return[[rx[0][0],r[0][2]],rx[1]];};},list:function(p,d,c){d=d||_.rtoken(/^\s*/);c=c||null;return(p instanceof Array?_.each(_.product(p.slice(0,-1),_.ignore(d)),p.slice(-1),_.ignore(c)):_.each(_.many(_.each(p,_.ignore(d))),px,_.ignore(c)));},set:function(px,d,c){d=d||_.rtoken(/^\s*/);c=c||null;return function(s){var r=null,p=null,q=null,rx=null,best=[[],s],last=false;for(var i=0;i<px.length;i++){q=null;p=null;r=null;last=(px.length==1);try{r=px[i].call(this,s);}catch(e){continue;}
rx=[[r[0]],r[1]];if(r[1].length>0&&!last){try{q=d.call(this,r[1]);}catch(ex){last=true;}}else{last=true;}
if(!last&&q[1].length===0){last=true;}
if(!last){var qx=[];for(var j=0;j<px.length;j++){if(i!=j){qx.push(px[j]);}}
p=_.set(qx,d).call(this,q[1]);if(p[0].length>0){rx[0]=rx[0].concat(p[0]);rx[1]=p[1];}}
if(rx[1].length<best[1].length){best=rx;}
if(best[1].length===0){break;}}
if(best[0].length===0){return best;}
if(c){try{q=c.call(this,best[1]);}catch(ey){throw new $P.Exception(best[1]);}
best[1]=q[1];}
return best;};},forward:function(gr,fname){return function(s){return gr[fname].call(this,s);};},replace:function(rule,repl){return function(s){var r=rule.call(this,s);return[repl,r[1]];};},process:function(rule,fn){return function(s){var r=rule.call(this,s);return[fn.call(this,r[0]),r[1]];};},min:function(min,rule){return function(s){var rx=rule.call(this,s);if(rx[0].length<min){throw new $P.Exception(s);}
return rx;};}};var _generator=function(op){return function(){var args=null,rx=[];if(arguments.length>1){args=Array.prototype.slice.call(arguments);}else if(arguments[0]instanceof Array){args=arguments[0];}
if(args){for(var i=0,px=args.shift();i<px.length;i++){args.unshift(px[i]);rx.push(op.apply(null,args));args.shift();return rx;}}else{return op.apply(null,arguments);}};};var gx="optional not ignore cache".split(/\s/);for(var i=0;i<gx.length;i++){_[gx[i]]=_generator(_[gx[i]]);}
var _vector=function(op){return function(){if(arguments[0]instanceof Array){return op.apply(null,arguments[0]);}else{return op.apply(null,arguments);}};};var vx="each any all".split(/\s/);for(var j=0;j<vx.length;j++){_[vx[j]]=_vector(_[vx[j]]);}}());(function(){var $D=Date,$P=$D.prototype,$C=$D.CultureInfo;var flattenAndCompact=function(ax){var rx=[];for(var i=0;i<ax.length;i++){if(ax[i]instanceof Array){rx=rx.concat(flattenAndCompact(ax[i]));}else{if(ax[i]){rx.push(ax[i]);}}}
return rx;};$D.Grammar={};$D.Translator={hour:function(s){return function(){this.hour=Number(s);};},minute:function(s){return function(){this.minute=Number(s);};},second:function(s){return function(){this.second=Number(s);};},meridian:function(s){return function(){this.meridian=s.slice(0,1).toLowerCase();};},timezone:function(s){return function(){var n=s.replace(/[^\d\+\-]/g,"");if(n.length){this.timezoneOffset=Number(n);}else{this.timezone=s.toLowerCase();}};},day:function(x){var s=x[0];return function(){this.day=Number(s.match(/\d+/)[0]);};},month:function(s){return function(){this.month=(s.length==3)?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(s)/4:Number(s)-1;};},year:function(s){return function(){var n=Number(s);this.year=((s.length>2)?n:(n+(((n+2000)<$C.twoDigitYearMax)?2000:1900)));};},rday:function(s){return function(){switch(s){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0;this.now=true;break;}};},finishExact:function(x){x=(x instanceof Array)?x:[x];for(var i=0;i<x.length;i++){if(x[i]){x[i].call(this);}}
var now=new Date();if((this.hour||this.minute)&&(!this.month&&!this.year&&!this.day)){this.day=now.getDate();}
if(!this.year){this.year=now.getFullYear();}
if(!this.month&&this.month!==0){this.month=now.getMonth();}
if(!this.day){this.day=1;}
if(!this.hour){this.hour=0;}
if(!this.minute){this.minute=0;}
if(!this.second){this.second=0;}
if(this.meridian&&this.hour){if(this.meridian=="p"&&this.hour<12){this.hour=this.hour+12;}else if(this.meridian=="a"&&this.hour==12){this.hour=0;}}
if(this.day>$D.getDaysInMonth(this.year,this.month)){throw new RangeError(this.day+" is not a valid value for days.");}
var r=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);if(this.timezone){r.set({timezone:this.timezone});}else if(this.timezoneOffset){r.set({timezoneOffset:this.timezoneOffset});}
return r;},finish:function(x){x=(x instanceof Array)?flattenAndCompact(x):[x];if(x.length===0){return null;}
for(var i=0;i<x.length;i++){if(typeof x[i]=="function"){x[i].call(this);}}
var today=$D.today();if(this.now&&!this.unit&&!this.operator){return new Date();}else if(this.now){today=new Date();}
var expression=!!(this.days&&this.days!==null||this.orient||this.operator);var gap,mod,orient;orient=((this.orient=="past"||this.operator=="subtract")?-1:1);if(!this.now&&"hour minute second".indexOf(this.unit)!=-1){today.setTimeToNow();}
if(this.month||this.month===0){if("year day hour minute second".indexOf(this.unit)!=-1){this.value=this.month+1;this.month=null;expression=true;}}
if(!expression&&this.weekday&&!this.day&&!this.days){var temp=Date[this.weekday]();this.day=temp.getDate();if(!this.month){this.month=temp.getMonth();}
this.year=temp.getFullYear();}
if(expression&&this.weekday&&this.unit!="month"){this.unit="day";gap=($D.getDayNumberFromName(this.weekday)-today.getDay());mod=7;this.days=gap?((gap+(orient*mod))%mod):(orient*mod);}
if(this.month&&this.unit=="day"&&this.operator){this.value=(this.month+1);this.month=null;}
if(this.value!=null&&this.month!=null&&this.year!=null){this.day=this.value*1;}
if(this.month&&!this.day&&this.value){today.set({day:this.value*1});if(!expression){this.day=this.value*1;}}
if(!this.month&&this.value&&this.unit=="month"&&!this.now){this.month=this.value;expression=true;}
if(expression&&(this.month||this.month===0)&&this.unit!="year"){this.unit="month";gap=(this.month-today.getMonth());mod=12;this.months=gap?((gap+(orient*mod))%mod):(orient*mod);this.month=null;}
if(!this.unit){this.unit="day";}
if(!this.value&&this.operator&&this.operator!==null&&this[this.unit+"s"]&&this[this.unit+"s"]!==null){this[this.unit+"s"]=this[this.unit+"s"]+((this.operator=="add")?1:-1)+(this.value||0)*orient;}else if(this[this.unit+"s"]==null||this.operator!=null){if(!this.value){this.value=1;}
this[this.unit+"s"]=this.value*orient;}
if(this.meridian&&this.hour){if(this.meridian=="p"&&this.hour<12){this.hour=this.hour+12;}else if(this.meridian=="a"&&this.hour==12){this.hour=0;}}
if(this.weekday&&!this.day&&!this.days){var temp=Date[this.weekday]();this.day=temp.getDate();if(temp.getMonth()!==today.getMonth()){this.month=temp.getMonth();}}
if((this.month||this.month===0)&&!this.day){this.day=1;}
if(!this.orient&&!this.operator&&this.unit=="week"&&this.value&&!this.day&&!this.month){return Date.today().setWeek(this.value);}
if(expression&&this.timezone&&this.day&&this.days){this.day=this.days;}
return(expression)?today.add(this):today.set(this);}};var _=$D.Parsing.Operators,g=$D.Grammar,t=$D.Translator,_fn;g.datePartDelimiter=_.rtoken(/^([\s\-\.\,\/\x27]+)/);g.timePartDelimiter=_.stoken(":");g.whiteSpace=_.rtoken(/^\s*/);g.generalDelimiter=_.rtoken(/^(([\s\,]|at|@|on)+)/);var _C={};g.ctoken=function(keys){var fn=_C[keys];if(!fn){var c=$C.regexPatterns;var kx=keys.split(/\s+/),px=[];for(var i=0;i<kx.length;i++){px.push(_.replace(_.rtoken(c[kx[i]]),kx[i]));}
fn=_C[keys]=_.any.apply(null,px);}
return fn;};g.ctoken2=function(key){return _.rtoken($C.regexPatterns[key]);};g.h=_.cache(_.process(_.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),t.hour));g.hh=_.cache(_.process(_.rtoken(/^(0[0-9]|1[0-2])/),t.hour));g.H=_.cache(_.process(_.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),t.hour));g.HH=_.cache(_.process(_.rtoken(/^([0-1][0-9]|2[0-3])/),t.hour));g.m=_.cache(_.process(_.rtoken(/^([0-5][0-9]|[0-9])/),t.minute));g.mm=_.cache(_.process(_.rtoken(/^[0-5][0-9]/),t.minute));g.s=_.cache(_.process(_.rtoken(/^([0-5][0-9]|[0-9])/),t.second));g.ss=_.cache(_.process(_.rtoken(/^[0-5][0-9]/),t.second));g.hms=_.cache(_.sequence([g.H,g.m,g.s],g.timePartDelimiter));g.t=_.cache(_.process(g.ctoken2("shortMeridian"),t.meridian));g.tt=_.cache(_.process(g.ctoken2("longMeridian"),t.meridian));g.z=_.cache(_.process(_.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),t.timezone));g.zz=_.cache(_.process(_.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),t.timezone));g.zzz=_.cache(_.process(g.ctoken2("timezone"),t.timezone));g.timeSuffix=_.each(_.ignore(g.whiteSpace),_.set([g.tt,g.zzz]));g.time=_.each(_.optional(_.ignore(_.stoken("T"))),g.hms,g.timeSuffix);g.d=_.cache(_.process(_.each(_.rtoken(/^([0-2]\d|3[0-1]|\d)/),_.optional(g.ctoken2("ordinalSuffix"))),t.day));g.dd=_.cache(_.process(_.each(_.rtoken(/^([0-2]\d|3[0-1])/),_.optional(g.ctoken2("ordinalSuffix"))),t.day));g.ddd=g.dddd=_.cache(_.process(g.ctoken("sun mon tue wed thu fri sat"),function(s){return function(){this.weekday=s;};}));g.M=_.cache(_.process(_.rtoken(/^(1[0-2]|0\d|\d)/),t.month));g.MM=_.cache(_.process(_.rtoken(/^(1[0-2]|0\d)/),t.month));g.MMM=g.MMMM=_.cache(_.process(g.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),t.month));g.y=_.cache(_.process(_.rtoken(/^(\d\d?)/),t.year));g.yy=_.cache(_.process(_.rtoken(/^(\d\d)/),t.year));g.yyy=_.cache(_.process(_.rtoken(/^(\d\d?\d?\d?)/),t.year));g.yyyy=_.cache(_.process(_.rtoken(/^(\d\d\d\d)/),t.year));_fn=function(){return _.each(_.any.apply(null,arguments),_.not(g.ctoken2("timeContext")));};g.day=_fn(g.d,g.dd);g.month=_fn(g.M,g.MMM);g.year=_fn(g.yyyy,g.yy);g.orientation=_.process(g.ctoken("past future"),function(s){return function(){this.orient=s;};});g.operator=_.process(g.ctoken("add subtract"),function(s){return function(){this.operator=s;};});g.rday=_.process(g.ctoken("yesterday tomorrow today now"),t.rday);g.unit=_.process(g.ctoken("second minute hour day week month year"),function(s){return function(){this.unit=s;};});g.value=_.process(_.rtoken(/^\d\d?(st|nd|rd|th)?/),function(s){return function(){this.value=s.replace(/\D/g,"");};});g.expression=_.set([g.rday,g.operator,g.value,g.unit,g.orientation,g.ddd,g.MMM]);_fn=function(){return _.set(arguments,g.datePartDelimiter);};g.mdy=_fn(g.ddd,g.month,g.day,g.year);g.ymd=_fn(g.ddd,g.year,g.month,g.day);g.dmy=_fn(g.ddd,g.day,g.month,g.year);g.date=function(s){return((g[$C.dateElementOrder]||g.mdy).call(this,s));};g.format=_.process(_.many(_.any(_.process(_.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(fmt){if(g[fmt]){return g[fmt];}else{throw $D.Parsing.Exception(fmt);}}),_.process(_.rtoken(/^[^dMyhHmstz]+/),function(s){return _.ignore(_.stoken(s));}))),function(rules){return _.process(_.each.apply(null,rules),t.finishExact);});var _F={};var _get=function(f){return _F[f]=(_F[f]||g.format(f)[0]);};g.formats=function(fx){if(fx instanceof Array){var rx=[];for(var i=0;i<fx.length;i++){rx.push(_get(fx[i]));}
return _.any.apply(null,rx);}else{return _get(fx);}};g._formats=g.formats(["\"yyyy-MM-ddTHH:mm:ssZ\"","yyyy-MM-ddTHH:mm:ssZ","yyyy-MM-ddTHH:mm:ssz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mmZ","yyyy-MM-ddTHH:mmz","yyyy-MM-ddTHH:mm","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","MMddyyyy","ddMMyyyy","Mddyyyy","ddMyyyy","Mdyyyy","dMyyyy","yyyy","Mdyy","dMyy","d"]);g._start=_.process(_.set([g.date,g.time,g.expression],g.generalDelimiter,g.whiteSpace),t.finish);g.start=function(s){try{var r=g._formats.call({},s);if(r[1].length===0){return r;}}catch(e){}
return g._start.call({},s);};$D._parse=$D.parse;$D.parse=function(s){var r=null;if(!s){return null;}
if(s instanceof Date){return s;}
try{r=$D.Grammar.start.call({},s.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"));}catch(e){return null;}
return((r[1].length===0)?r[0]:null);};$D.getParseFunction=function(fx){var fn=$D.Grammar.formats(fx);return function(s){var r=null;try{r=fn.call({},s);}catch(e){return null;}
return((r[1].length===0)?r[0]:null);};};$D.parseExact=function(s,fx){return $D.getParseFunction(fx)(s);};}());(function($){$.jGrowl=function(m,o){if($('#jGrowl').length===0)
$('<div id="jGrowl"></div>').addClass((o&&o.position)?o.position:$.jGrowl.defaults.position).appendTo((o&&o.appendTo)?o.appendTo:$.jGrowl.defaults.appendTo);$('#jGrowl').jGrowl(m,o);};$.fn.jGrowl=function(m,o){if(o===undefined&&$.isPlainObject(m)){o=m;m=o.message;}
if($.isFunction(this.each)){var args=arguments;return this.each(function(){if($(this).data('jGrowl.instance')===undefined){$(this).data('jGrowl.instance',$.extend(new $.fn.jGrowl(),{notifications:[],element:null,interval:null}));$(this).data('jGrowl.instance').startup(this);}
if($.isFunction($(this).data('jGrowl.instance')[m])){$(this).data('jGrowl.instance')[m].apply($(this).data('jGrowl.instance'),$.makeArray(args).slice(1));}else{$(this).data('jGrowl.instance').create(m,o);}});}};$.extend($.fn.jGrowl.prototype,{defaults:{pool:0,header:'',group:'',sticky:false,position:'center',appendTo:'body',glue:'after',theme:'default',themeState:'highlight',corners:'10px',check:250,life:3000,closeDuration:'normal',openDuration:'normal',easing:'swing',closer:true,closeTemplate:'&times;',closerTemplate:'<div>[ close all ]</div>',log:function(){},beforeOpen:function(){},afterOpen:function(){},open:function(){},beforeClose:function(){},close:function(){},click:function(){},animateOpen:{opacity:'show'},animateClose:{opacity:'hide'}},notifications:[],element:null,interval:null,create:function(message,options){var o=$.extend({},this.defaults,options);if(typeof o.speed!=='undefined'){o.openDuration=o.speed;o.closeDuration=o.speed;}
this.notifications.push({message:message,options:o});o.log.apply(this.element,[this.element,message,o]);},render:function(n){var self=this;var message=n.message;var o=n.options;o.themeState=(o.themeState==='')?'':'ui-state-'+o.themeState;var notification=$('<div/>').addClass('jGrowl-notification alert '+o.themeState+' ui-corner-all'+((o.group!==undefined&&o.group!=='')?' '+o.group:'')).append($('<div/>').addClass('jGrowl-close').html(o.closeTemplate)).append($('<div/>').addClass('jGrowl-header').html(o.header)).append($('<div/>').addClass('jGrowl-message').html(message)).data("jGrowl",o).addClass(o.theme).children('.jGrowl-close').bind("click.jGrowl",function(){$(this).parent().trigger('jGrowl.beforeClose');return false;}).parent();$(notification).bind("mouseover.jGrowl",function(){$('.jGrowl-notification',self.element).data("jGrowl.pause",true);}).bind("mouseout.jGrowl",function(){$('.jGrowl-notification',self.element).data("jGrowl.pause",false);}).bind('jGrowl.beforeOpen',function(){if(o.beforeOpen.apply(notification,[notification,message,o,self.element])!==false){$(this).trigger('jGrowl.open');}}).bind('jGrowl.open',function(){if(o.open.apply(notification,[notification,message,o,self.element])!==false){if(o.glue=='after'){$('.jGrowl-notification:last',self.element).after(notification);}else{$('.jGrowl-notification:first',self.element).before(notification);}
$(this).animate(o.animateOpen,o.openDuration,o.easing,function(){if($.support.opacity===false)
this.style.removeAttribute('filter');if($(this).data("jGrowl")!==null&&typeof $(this).data("jGrowl")!=='undefined')
$(this).data("jGrowl").created=new Date();$(this).trigger('jGrowl.afterOpen');});}}).bind('jGrowl.afterOpen',function(){o.afterOpen.apply(notification,[notification,message,o,self.element]);}).bind('click',function(){o.click.apply(notification,[notification.message,o,self.element]);}).bind('jGrowl.beforeClose',function(){if(o.beforeClose.apply(notification,[notification,message,o,self.element])!==false)
$(this).trigger('jGrowl.close');}).bind('jGrowl.close',function(){$(this).data('jGrowl.pause',true);$(this).animate(o.animateClose,o.closeDuration,o.easing,function(){if($.isFunction(o.close)){if(o.close.apply(notification,[notification,message,o,self.element])!==false)
$(this).remove();}else{$(this).remove();}});}).trigger('jGrowl.beforeOpen');if(o.corners!==''&&$.fn.corner!==undefined)$(notification).corner(o.corners);if($('.jGrowl-notification:parent',self.element).length>1&&$('.jGrowl-closer',self.element).length===0&&this.defaults.closer!==false){$(this.defaults.closerTemplate).addClass('jGrowl-closer '+this.defaults.themeState+' ui-corner-all').addClass(this.defaults.theme).appendTo(self.element).animate(this.defaults.animateOpen,this.defaults.speed,this.defaults.easing).bind("click.jGrowl",function(){$(this).siblings().trigger("jGrowl.beforeClose");if($.isFunction(self.defaults.closer)){self.defaults.closer.apply($(this).parent()[0],[$(this).parent()[0]]);}});}},update:function(){$(this.element).find('.jGrowl-notification:parent').each(function(){if($(this).data("jGrowl")!==undefined&&$(this).data("jGrowl").created!==undefined&&($(this).data("jGrowl").created.getTime()+parseInt($(this).data("jGrowl").life,10))<(new Date()).getTime()&&$(this).data("jGrowl").sticky!==true&&($(this).data("jGrowl.pause")===undefined||$(this).data("jGrowl.pause")!==true)){$(this).trigger('jGrowl.beforeClose');}});if(this.notifications.length>0&&(this.defaults.pool===0||$(this.element).find('.jGrowl-notification:parent').length<this.defaults.pool))
this.render(this.notifications.shift());if($(this.element).find('.jGrowl-notification:parent').length<2){$(this.element).find('.jGrowl-closer').animate(this.defaults.animateClose,this.defaults.speed,this.defaults.easing,function(){$(this).remove();});}},startup:function(e){this.element=$(e).addClass('jGrowl').append('<div class="jGrowl-notification"></div>');this.interval=setInterval(function(){var instance=$(e).data('jGrowl.instance');if(undefined!==instance){instance.update();}},parseInt(this.defaults.check,10));},shutdown:function(){$(this.element).removeClass('jGrowl').find('.jGrowl-notification').trigger('jGrowl.close').parent().empty();clearInterval(this.interval);},close:function(){$(this.element).find('.jGrowl-notification').each(function(){$(this).trigger('jGrowl.beforeClose');});}});$.jGrowl.defaults=$.fn.jGrowl.prototype.defaults;})(jQuery);(function($){$.extend({tablesorter:new function(){var parsers=[],widgets=[];this.defaults={cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:false,cancelSelection:true,sortList:[],headerList:[],dateFormat:"us",decimal:'.',debug:false};function benchmark(s,d){log(s+","+(new Date().getTime()-d.getTime())+"ms");}
this.benchmark=benchmark;function log(s){if(typeof console!="undefined"&&typeof console.debug!="undefined"){console.log(s);}else{alert(s);}}
function buildParserCache(table,$headers){if(table.config.debug){var parsersDebug="";}
var rows=table.tBodies[0].rows;if(table.tBodies[0].rows[0]){var list=[],cells=rows[0].cells,l=cells.length;for(var i=0;i<l;i++){var p=false;if($.metadata&&($($headers[i]).metadata()&&$($headers[i]).metadata().sorter)){p=getParserById($($headers[i]).metadata().sorter);}else if((table.config.headers[i]&&table.config.headers[i].sorter)){p=getParserById(table.config.headers[i].sorter);}
if(!p){for(var r=0;r<rows.length;r++){var v=$.trim(getElementText(table.config,rows[r].cells[i]));if(v){p=detectParserForColumn(table,rows[r].cells[i]);break;}}
if(!p){p=detectParserForColumn(table,cells[i]);}}
if(table.config.debug){parsersDebug+="column:"+i+" parser:"+p.id+"\n";}
list.push(p);}}
if(table.config.debug){log(parsersDebug);}
return list;};function detectParserForColumn(table,node){var l=parsers.length;for(var i=1;i<l;i++){if(parsers[i].is($.trim(getElementText(table.config,node)),table,node)){return parsers[i];}}
return parsers[0];}
function getParserById(name){var l=parsers.length;for(var i=0;i<l;i++){if(parsers[i].id.toLowerCase()==name.toLowerCase()){return parsers[i];}}
return false;}
function buildCache(table){if(table.config.debug){var cacheTime=new Date();}
var totalRows=(table.tBodies[0]&&table.tBodies[0].rows.length)||0,totalCells=(table.tBodies[0].rows[0]&&table.tBodies[0].rows[0].cells.length)||0,parsers=table.config.parsers,cache={row:[],normalized:[]};for(var i=0;i<totalRows;++i){var c=table.tBodies[0].rows[i],cols=[];cache.row.push($(c));for(var j=0;j<totalCells;++j){cols.push(parsers[j].format(getElementText(table.config,c.cells[j]),table,c.cells[j]));}
cols.push(i);cache.normalized.push(cols);cols=null;};if(table.config.debug){benchmark("Building cache for "+totalRows+" rows:",cacheTime);}
return cache;};function getElementText(config,node){if(!node)return"";var t="";if(config.textExtraction=="simple"){if(node.childNodes[0]&&node.childNodes[0].hasChildNodes()){t=node.childNodes[0].innerHTML;}else{t=node.innerHTML;}}else{if(typeof(config.textExtraction)=="function"){t=config.textExtraction(node);}else{t=$(node).text();}}
return t;}
function appendToTable(table,cache){if(table.config.debug){var appendTime=new Date()}
var c=cache,r=c.row,n=c.normalized,totalRows=n.length,checkCell=(n[0].length-1),tableBody=$(table.tBodies[0]),rows=[];for(var i=0;i<totalRows;i++){rows.push(r[n[i][checkCell]]);if(!table.config.appender){var o=r[n[i][checkCell]];var l=o.length;for(var j=0;j<l;j++){tableBody[0].appendChild(o[j]);}}}
if(table.config.appender){table.config.appender(table,rows);}
rows=null;if(table.config.debug){benchmark("Rebuilt table:",appendTime);}
applyWidget(table);setTimeout(function(){$(table).trigger("sortEnd");},0);};function buildHeaders(table){if(table.config.debug){var time=new Date();}
var meta=($.metadata)?true:false,tableHeadersRows=[];for(var i=0;i<table.tHead.rows.length;i++){tableHeadersRows[i]=0;};$tableHeaders=$("thead th",table);$tableHeaders.each(function(index){this.count=0;this.column=index;this.order=formatSortingOrder(table.config.sortInitialOrder);if(checkHeaderMetadata(this)||checkHeaderOptions(table,index))this.sortDisabled=true;if(!this.sortDisabled){$(this).append('<span></span>');$(this).addClass(table.config.cssHeader);}
table.config.headerList[index]=this;});if(table.config.debug){benchmark("Built headers:",time);log($tableHeaders);}
return $tableHeaders;};function checkCellColSpan(table,rows,row){var arr=[],r=table.tHead.rows,c=r[row].cells;for(var i=0;i<c.length;i++){var cell=c[i];if(cell.colSpan>1){arr=arr.concat(checkCellColSpan(table,headerArr,row++));}else{if(table.tHead.length==1||(cell.rowSpan>1||!r[row+1])){arr.push(cell);}}}
return arr;};function checkHeaderMetadata(cell){if(($.metadata)&&($(cell).metadata().sorter===false)){return true;};return false;}
function checkHeaderOptions(table,i){if((table.config.headers[i])&&(table.config.headers[i].sorter===false)){return true;};return false;}
function applyWidget(table){var c=table.config.widgets;var l=c.length;for(var i=0;i<l;i++){getWidgetById(c[i]).format(table);}}
function getWidgetById(name){var l=widgets.length;for(var i=0;i<l;i++){if(widgets[i].id.toLowerCase()==name.toLowerCase()){return widgets[i];}}};function formatSortingOrder(v){if(typeof(v)!="Number"){i=(v.toLowerCase()=="desc")?1:0;}else{i=(v==(0||1))?v:0;}
return i;}
function isValueInArray(v,a){var l=a.length;for(var i=0;i<l;i++){if(a[i][0]==v){return true;}}
return false;}
function setHeadersCss(table,$headers,list,css){$headers.removeClass(css[0]).removeClass(css[1]);var h=[];$headers.each(function(offset){if(!this.sortDisabled){h[this.column]=$(this);}});var l=list.length;for(var i=0;i<l;i++){h[list[i][0]].addClass(css[list[i][1]]);}}
function fixColumnWidth(table,$headers){var c=table.config;if(c.widthFixed){var colgroup=$('<colgroup>');$("tr:first td",table.tBodies[0]).each(function(){colgroup.append($('<col>').css('width',$(this).width()));});$(table).prepend(colgroup);};}
function updateHeaderSortCount(table,sortList){var c=table.config,l=sortList.length;for(var i=0;i<l;i++){var s=sortList[i],o=c.headerList[s[0]];o.count=s[1];o.count++;}}
function multisort(table,sortList,cache){if(table.config.debug){var sortTime=new Date();}
var dynamicExp="var sortWrapper = function(a,b) {",l=sortList.length;for(var i=0;i<l;i++){var c=sortList[i][0];var order=sortList[i][1];var s=(getCachedSortType(table.config.parsers,c)=="text")?((order==0)?"sortText":"sortTextDesc"):((order==0)?"sortNumeric":"sortNumericDesc");var e="e"+i;dynamicExp+="var "+e+" = "+s+"(a["+c+"],b["+c+"]); ";dynamicExp+="if("+e+") { return "+e+"; } ";dynamicExp+="else { ";}
var orgOrderCol=cache.normalized[0].length-1;dynamicExp+="return a["+orgOrderCol+"]-b["+orgOrderCol+"];";for(var i=0;i<l;i++){dynamicExp+="}; ";}
dynamicExp+="return 0; ";dynamicExp+="}; ";eval(dynamicExp);cache.normalized.sort(sortWrapper);if(table.config.debug){benchmark("Sorting on "+sortList.toString()+" and dir "+order+" time:",sortTime);}
return cache;};function sortText(a,b){return((a<b)?-1:((a>b)?1:0));};function sortTextDesc(a,b){return((b<a)?-1:((b>a)?1:0));};function sortNumeric(a,b){return a-b;};function sortNumericDesc(a,b){return b-a;};function getCachedSortType(parsers,i){return parsers[i].type;};this.construct=function(settings){return this.each(function(){if(!this.tHead||!this.tBodies)return;var $this,$document,$headers,cache,config,shiftDown=0,sortOrder;this.config={};config=$.extend(this.config,$.tablesorter.defaults,settings);$this=$(this);$headers=buildHeaders(this);this.config.parsers=buildParserCache(this,$headers);cache=buildCache(this);var sortCSS=[config.cssDesc,config.cssAsc];fixColumnWidth(this);$headers.click(function(e){$this.trigger("sortStart");var totalRows=($this[0].tBodies[0]&&$this[0].tBodies[0].rows.length)||0;if(!this.sortDisabled&&totalRows>0){var $cell=$(this);var i=this.column;this.order=this.count++%2;if(!e[config.sortMultiSortKey]){config.sortList=[];if(config.sortForce!=null){var a=config.sortForce;for(var j=0;j<a.length;j++){if(a[j][0]!=i){config.sortList.push(a[j]);}}}
config.sortList.push([i,this.order]);}else{if(isValueInArray(i,config.sortList)){for(var j=0;j<config.sortList.length;j++){var s=config.sortList[j],o=config.headerList[s[0]];if(s[0]==i){o.count=s[1];o.count++;s[1]=o.count%2;}}}else{config.sortList.push([i,this.order]);}};setTimeout(function(){setHeadersCss($this[0],$headers,config.sortList,sortCSS);appendToTable($this[0],multisort($this[0],config.sortList,cache));},1);return false;}}).mousedown(function(){if(config.cancelSelection){this.onselectstart=function(){return false};return false;}});$this.bind("update",function(){this.config.parsers=buildParserCache(this,$headers);cache=buildCache(this);}).bind("sorton",function(e,list){$(this).trigger("sortStart");config.sortList=list;var sortList=config.sortList;updateHeaderSortCount(this,sortList);setHeadersCss(this,$headers,sortList,sortCSS);appendToTable(this,multisort(this,sortList,cache));}).bind("appendCache",function(){appendToTable(this,cache);}).bind("applyWidgetId",function(e,id){getWidgetById(id).format(this);}).bind("applyWidgets",function(){applyWidget(this);});if($.metadata&&($(this).metadata()&&$(this).metadata().sortlist)){config.sortList=$(this).metadata().sortlist;}
if(config.sortList.length>0){$this.trigger("sorton",[config.sortList]);}
applyWidget(this);});};this.addParser=function(parser){var l=parsers.length,a=true;for(var i=0;i<l;i++){if(parsers[i].id.toLowerCase()==parser.id.toLowerCase()){a=false;}}
if(a){parsers.push(parser);};};this.addWidget=function(widget){widgets.push(widget);};this.formatFloat=function(s){var i=parseFloat(s);return(isNaN(i))?0:i;};this.formatInt=function(s){var i=parseInt(s);return(isNaN(i))?0:i;};this.isDigit=function(s,config){var DECIMAL='\\'+config.decimal;var exp='(^[+]?0('+DECIMAL+'0+)?$)|(^([-+]?[1-9][0-9]*)$)|(^([-+]?((0?|[1-9][0-9]*)'+DECIMAL+'(0*[1-9][0-9]*)))$)|(^[-+]?[1-9]+[0-9]*'+DECIMAL+'0+$)';return RegExp(exp).test($.trim(s));};this.clearTableBody=function(table){table.tBodies[0].innerHTML="";};}});$.fn.extend({tablesorter:$.tablesorter.construct});var ts=$.tablesorter;ts.addParser({id:"text",is:function(s){return true;},format:function(s){return $.trim(s.toLowerCase());},type:"text"});ts.addParser({id:"digit",is:function(s,table){var c=table.config;return $.tablesorter.isDigit(s,c);},format:function(s){return $.tablesorter.formatFloat(s);},type:"numeric"});ts.addParser({id:"duration",is:function(s){return new RegExp(/^[0-9]+ (years?|days?|hours?|minutes?|seconds?)/).test(s.toLowerCase());},format:function(s){s=s.toLowerCase();var iYears=s.match(/([0-9]+) years?/)?RegExp.$1:0;var iMonths=s.match(/([0-9]+) months?/)?RegExp.$1:0;var iWeeks=s.match(/([0-9]+) weeks?/)?RegExp.$1:0;var iDays=s.match(/([0-9]+) days?/)?RegExp.$1:0;var iHours=s.match(/([0-9]+) hours?/)?RegExp.$1:0;var iMinutes=s.match(/([0-9]+) minutes?/)?RegExp.$1:0;var iSeconds=s.match(/([0-9]+) seconds?/)?RegExp.$1:0;return(iYears*31556926)+(iMonths*2629743)+(iWeeks*604800)+(iDays*86400)+(iHours*3600)+(iMinutes*60)+iSeconds;},type:"numeric"});ts.addParser({id:"currency",is:function(s){return /^[$?.]/.test(s);},format:function(s){return $.tablesorter.formatFloat(s.replace(new RegExp(/[^0-9.]/g),""));},type:"numeric"});ts.addParser({id:"url",is:function(s){return /^(https?|ftp|file):\/\/$/.test(s);},format:function(s){return jQuery.trim(s.replace(new RegExp(/(https?|ftp|file):\/\//),''));},type:"text"});ts.addParser({id:"percent",is:function(s){return /\%$/.test($.trim(s));},format:function(s){return $.tablesorter.formatFloat(s.replace(new RegExp(/%/g),""));},type:"numeric"});ts.addParser({id:"usLongDate",is:function(s){return s.match(new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/));},format:function(s){return $.tablesorter.formatFloat(new Date(s).getTime());},type:"numeric"});ts.addParser({id:"shortDate",is:function(s){return /\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(s);},format:function(s,table){var c=table.config;s=s.replace(/\-/g,"/");if(c.dateFormat=="us"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2");}else if(c.dateFormat=="uk"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1");}else if(c.dateFormat=="dd/mm/yy"||c.dateFormat=="dd-mm-yy"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3");}
return $.tablesorter.formatFloat(new Date(s).getTime());},type:"numeric"});ts.addParser({id:"time",is:function(s){return /^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(s);},format:function(s){return $.tablesorter.formatFloat(new Date("2000/01/01 "+s).getTime());},type:"numeric"});ts.addParser({id:"metadata",is:function(s){return false;},format:function(s,table,cell){var c=table.config,p=(!c.parserMetadataName)?'sortValue':c.parserMetadataName;return $(cell).metadata()[p];},type:"numeric"});ts.addWidget({id:"zebra",format:function(table){if(table.config.debug){var time=new Date();}
$("tr:visible",table.tBodies[0]).filter(':even').removeClass(table.config.widgetZebra.css[1]).addClass(table.config.widgetZebra.css[0]).end().filter(':odd').removeClass(table.config.widgetZebra.css[0]).addClass(table.config.widgetZebra.css[1]);if(table.config.debug){$.tablesorter.benchmark("Applying Zebra widget",time);}}});ts.addWidget({id:"striped",format:function(table){$('.altrow',table).removeClass('altrow');$('tbody tr:even',table).addClass('altrow');}});})(jQuery);(function($){$.fn.alphanumeric=function(p){p=$.extend({ichars:"!@#$%^&*()+=[]\\\';,/{}|\":<>?~`.-_ ",nchars:"",allow:"",valid:[37,38,39,40]},p);return this.addClass('alphanumeric_setup').each
(function(){if(p.nocaps)p.nchars+="ABCDEFGHIJKLMNOPQRSTUVWXYZ";if(p.allcaps)p.nchars+="abcdefghijklmnopqrstuvwxyz";s=p.allow.split('');for(i=0;i<s.length;i++)if(p.ichars.indexOf(s[i])!=-1)s[i]="\\"+s[i];p.allow=s.join('|');var reg=new RegExp(p.allow,'gi');var ch=p.ichars+p.nchars;ch=ch.replace(reg,'');$(this).keypress(function(e){var keynum='';if(window.event){keynum=e.keyCode;}
else if(e.which){keynum=e.which;}
if(!in_array(keynum,p.valid)||e.charCode!=0){k=(!e.charCode)?String.fromCharCode(e.which):String.fromCharCode(e.charCode);var is_paste=((e.metaKey||e.ctrlKey)&&k=='v')?1:0;if(!is_paste&&ch.indexOf(k)!=-1){e.preventDefault();}}}).bind('paste',function(e){try{var pasted_value=e.originalEvent.clipboardData.getData('text');}
catch(err){var pasted_value=null;}
if(pasted_value!==null){var scrubbed_pasted_value='';for(var x=0;x<pasted_value.length;x++){var k=pasted_value.charAt(x);if(ch.indexOf(k)==-1){scrubbed_pasted_value+=k;}}
$(this).val(scrubbed_pasted_value);e.preventDefault();}});});};$.fn.numeric=function(p){var az="abcdefghijklmnopqrstuvwxyz";az+=az.toUpperCase();p=$.extend({nchars:az,allow:".-"},p);return this.each(function()
{$(this).alphanumeric(p);});};$.fn.alpha=function(p){var nm="1234567890";p=$.extend({nchars:nm},p);return this.each(function()
{$(this).alphanumeric(p);});};})(jQuery);(function(factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else if(typeof module==='object'&&typeof module.exports==='object'){factory(require('jquery'));}else{factory(jQuery);}}(function($){$.timeago=function(timestamp){if(timestamp instanceof Date){return inWords(timestamp);}else if(typeof timestamp==="string"){return inWords($.timeago.parse(timestamp));}else if(typeof timestamp==="number"){return inWords(new Date(timestamp));}else{return inWords($.timeago.datetime(timestamp));}};var $t=$.timeago;$.extend($.timeago,{settings:{refreshMillis:60000,allowPast:true,allowFuture:false,localeTitle:false,cutoff:0,autoDispose:true,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",inPast:'any moment now',seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}},inWords:function(distanceMillis){if(!this.settings.allowPast&&!this.settings.allowFuture){throw'timeago allowPast and allowFuture settings can not both be set to false.';}
var $l=this.settings.strings;var prefix=$l.prefixAgo;var suffix=$l.suffixAgo;if(this.settings.allowFuture){if(distanceMillis<0){prefix=$l.prefixFromNow;suffix=$l.suffixFromNow;}}
if(!this.settings.allowPast&&distanceMillis>=0){return this.settings.strings.inPast;}
var seconds=Math.abs(distanceMillis)/ 1000;var minutes=seconds / 60;var hours=minutes / 60;var days=hours / 24;var years=days / 365;function substitute(stringOrFunction,number){var string=$.isFunction(stringOrFunction)?stringOrFunction(number,distanceMillis):stringOrFunction;var value=($l.numbers&&$l.numbers[number])||number;return string.replace(/%d/i,value);}
var words=seconds<45&&substitute($l.seconds,Math.round(seconds))||seconds<90&&substitute($l.minute,1)||minutes<45&&substitute($l.minutes,Math.round(minutes))||minutes<90&&substitute($l.hour,1)||hours<24&&substitute($l.hours,Math.round(hours))||hours<42&&substitute($l.day,1)||days<30&&substitute($l.days,Math.round(days))||days<45&&substitute($l.month,1)||days<365&&substitute($l.months,Math.round(days / 30))||years<1.5&&substitute($l.year,1)||substitute($l.years,Math.round(years));var separator=$l.wordSeparator||"";if($l.wordSeparator===undefined){separator=" ";}
return $.trim([prefix,words,suffix].join(separator));},parse:function(iso8601){var s=$.trim(iso8601);s=s.replace(/\.\d+/,"");s=s.replace(/-/,"/").replace(/-/,"/");s=s.replace(/T/," ").replace(/Z/," UTC");s=s.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2");s=s.replace(/([\+\-]\d\d)$/," $100");return new Date(s);},datetime:function(elem){var iso8601=$t.isTime(elem)?$(elem).attr("datetime"):$(elem).attr("title");return $t.parse(iso8601);},isTime:function(elem){return $(elem).get(0).tagName.toLowerCase()==="time";}});var functions={init:function(){var refresh_el=$.proxy(refresh,this);refresh_el();var $s=$t.settings;if($s.refreshMillis>0){this._timeagoInterval=setInterval(refresh_el,$s.refreshMillis);}},update:function(timestamp){var date=(timestamp instanceof Date)?timestamp:$t.parse(timestamp);$(this).data('timeago',{datetime:date});if($t.settings.localeTitle)$(this).attr("title",date.toLocaleString());refresh.apply(this);},updateFromDOM:function(){$(this).data('timeago',{datetime:$t.parse($t.isTime(this)?$(this).attr("datetime"):$(this).attr("title"))});refresh.apply(this);},dispose:function(){if(this._timeagoInterval){window.clearInterval(this._timeagoInterval);this._timeagoInterval=null;}}};$.fn.timeago=function(action,options){var fn=action?functions[action]:functions.init;if(!fn){throw new Error("Unknown function name '"+action+"' for timeago");}
this.each(function(){fn.call(this,options);});return this;};function refresh(){var $s=$t.settings;if($s.autoDispose&&!$.contains(document.documentElement,this)){$(this).timeago("dispose");return this;}
var data=prepareData(this);if(!isNaN(data.datetime)){if($s.cutoff==0||Math.abs(distance(data.datetime))<$s.cutoff){$(this).text(inWords(data.datetime));}}
return this;}
function prepareData(element){element=$(element);if(!element.data("timeago")){element.data("timeago",{datetime:$t.datetime(element)});var text=$.trim(element.text());if($t.settings.localeTitle){element.attr("title",element.data('timeago').datetime.toLocaleString());}else if(text.length>0&&!($t.isTime(element)&&element.attr("title"))){element.attr("title",text);}}
return element.data("timeago");}
function inWords(date){return $t.inWords(distance(date));}
function distance(date){return(new Date().getTime()-date.getTime());}
document.createElement("abbr");document.createElement("time");}));;(function(f){"use strict";"function"===typeof define&&define.amd?define(["jquery"],f):"undefined"!==typeof module&&module.exports?module.exports=f(require("jquery")):f(jQuery)})(function($){"use strict";function n(a){return!a.nodeName||-1!==$.inArray(a.nodeName.toLowerCase(),["iframe","#document","html","body"])}function h(a){return $.isFunction(a)||$.isPlainObject(a)?a:{top:a,left:a}}var p=$.scrollTo=function(a,d,b){return $(window).scrollTo(a,d,b)};p.defaults={axis:"xy",duration:0,limit:!0};$.fn.scrollTo=function(a,d,b){"object"===typeof d&&(b=d,d=0);"function"===typeof b&&(b={onAfter:b});"max"===a&&(a=9E9);b=$.extend({},p.defaults,b);d=d||b.duration;var u=b.queue&&1<b.axis.length;u&&(d/=2);b.offset=h(b.offset);b.over=h(b.over);return this.each(function(){function k(a){var k=$.extend({},b,{queue:!0,duration:d,complete:a&&function(){a.call(q,e,b)}});r.animate(f,k)}if(null!==a){var l=n(this),q=l?this.contentWindow||window:this,r=$(q),e=a,f={},t;switch(typeof e){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(e)){e=h(e);break}e=l?$(e):$(e,q);case"object":if(e.length===0)return;if(e.is||e.style)t=(e=$(e)).offset()}var v=$.isFunction(b.offset)&&b.offset(q,e)||b.offset;$.each(b.axis.split(""),function(a,c){var d="x"===c?"Left":"Top",m=d.toLowerCase(),g="scroll"+d,h=r[g](),n=p.max(q,c);t?(f[g]=t[m]+(l?0:h-r.offset()[m]),b.margin&&(f[g]-=parseInt(e.css("margin"+d),10)||0,f[g]-=parseInt(e.css("border"+d+"Width"),10)||0),f[g]+=v[m]||0,b.over[m]&&(f[g]+=e["x"===c?"width":"height"]()*b.over[m])):(d=e[m],f[g]=d.slice&&"%"===d.slice(-1)?parseFloat(d)/100*n:d);b.limit&&/^\d+$/.test(f[g])&&(f[g]=0>=f[g]?0:Math.min(f[g],n));!a&&1<b.axis.length&&(h===f[g]?f={}:u&&(k(b.onAfterFirst),f={}))});k(b.onAfter)}})};p.max=function(a,d){var b="x"===d?"Width":"Height",h="scroll"+b;if(!n(a))return a[h]-$(a)[b.toLowerCase()]();var b="client"+b,k=a.ownerDocument||a.document,l=k.documentElement,k=k.body;return Math.max(l[h],k[h])-Math.min(l[b],k[b])};$.Tween.propHooks.scrollLeft=$.Tween.propHooks.scrollTop={get:function(a){return $(a.elem)[a.prop]()},set:function(a){var d=this.get(a);if(a.options.interrupt&&a._last&&a._last!==d)return $(a.elem).stop();var b=Math.round(a.now);d!==b&&($(a.elem)[a.prop](b),a._last=this.get(a))}};return p});(function(){function b(a,h){var e=this;this.options=h||{};this.key=a;this.channels=new b.Channels;this.global_emitter=new b.EventsDispatcher;this.sessionID=Math.floor(Math.random()*1E9);c(this.key);this.connection=new b.ConnectionManager(this.key,b.Util.extend({getStrategy:function(a){return b.StrategyBuilder.build(b.getDefaultStrategy(),b.Util.extend({},e.options,a))},getTimeline:function(){return new b.Timeline(e.key,e.sessionID,{features:b.Util.getClientFeatures(),params:e.options.timelineParams||{},limit:25,level:b.Timeline.INFO,version:b.VERSION})},getTimelineSender:function(a,d){return e.options.disableStats?null:new b.TimelineSender(a,{encrypted:e.isEncrypted()||!!d.encrypted,host:b.stats_host,path:"/timeline"})},activityTimeout:b.activity_timeout,pongTimeout:b.pong_timeout,unavailableTimeout:b.unavailable_timeout},this.options,{encrypted:this.isEncrypted()}));this.connection.bind("connected",function(){e.subscribeAll()});this.connection.bind("message",function(a){var d=a.event.indexOf("pusher_internal:")===0;if(a.channel){var b=e.channel(a.channel);b&&b.emit(a.event,a.data)}d||e.global_emitter.emit(a.event,a.data)});this.connection.bind("disconnected",function(){e.channels.disconnect()});this.connection.bind("error",function(a){b.warn("Error",a)});b.instances.push(this);b.isReady&&e.connect()}function c(a){(a===null||a===void 0)&&b.warn("Warning","You must pass your app key when you instantiate Pusher.")}var a=b.prototype;b.instances=[];b.isReady=!1;b.debug=function(){b.log&&b.log(b.Util.stringify.apply(this,arguments))};b.warn=function(){window.console&&window.console.warn?window.console.warn(b.Util.stringify.apply(this,arguments)):b.log&&b.log(b.Util.stringify.apply(this,arguments))};b.ready=function(){b.isReady=!0;for(var a=0,c=b.instances.length;a<c;a++)b.instances[a].connect()};a.channel=function(a){return this.channels.find(a)};a.connect=function(){this.connection.connect()};a.disconnect=function(){this.connection.disconnect()};a.bind=function(a,b){this.global_emitter.bind(a,b);return this};a.bind_all=function(a){this.global_emitter.bind_all(a);return this};a.subscribeAll=function(){for(var a in this.channels.channels)this.channels.channels.hasOwnProperty(a)&&this.subscribe(a)};a.subscribe=function(a){var b=this,c=this.channels.add(a,this);this.connection.state==="connected"&&c.authorize(this.connection.socket_id,this.options,function(f,g){f?c.emit("pusher:subscription_error",g):b.send_event("pusher:subscribe",{channel:a,auth:g.auth,channel_data:g.channel_data})});return c};a.unsubscribe=function(a){this.channels.remove(a);this.connection.state==="connected"&&this.send_event("pusher:unsubscribe",{channel:a})};a.send_event=function(a,b,c){return this.connection.send_event(a,b,c)};a.isEncrypted=function(){return b.Util.getDocumentLocation().protocol==="https:"?!0:!!this.options.encrypted};this.Pusher=b}).call(this);(function(){Pusher.Util={now:function(){return Date.now?Date.now():(new Date).valueOf()},extend:function(b){for(var c=1;c<arguments.length;c++){var a=arguments[c],d;for(d in a)b[d]=a[d]&&a[d].constructor&&a[d].constructor===Object?Pusher.Util.extend(b[d]||{},a[d]):a[d]}return b},stringify:function(){for(var b=["Pusher"],c=0;c<arguments.length;c++)typeof arguments[c]==="string"?b.push(arguments[c]):window.JSON===void 0?b.push(arguments[c].toString()):b.push(JSON.stringify(arguments[c]));return b.join(" : ")},arrayIndexOf:function(b,c){var a=Array.prototype.indexOf;if(b===null)return-1;if(a&&b.indexOf===a)return b.indexOf(c);for(var a=0,d=b.length;a<d;a++)if(b[a]===c)return a;return-1},keys:function(b){var c=[],a;for(a in b)Object.prototype.hasOwnProperty.call(b,a)&&c.push(a);return c},apply:function(b,c){for(var a=0;a<b.length;a++)c(b[a],a,b)},objectApply:function(b,c){for(var a in b)Object.prototype.hasOwnProperty.call(b,a)&&c(b[a],a,b)},map:function(b,c){for(var a=[],d=0;d<b.length;d++)a.push(c(b[d],d,b,a));return a},mapObject:function(b,c){var a={},d;for(d in b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=c(b[d]));return a},filter:function(b,c){for(var c=c||function(a){return!!a},a=[],d=0;d<b.length;d++)c(b[d],d,b,a)&&a.push(b[d]);return a},filterObject:function(b,c){var c=c||function(a){return!!a},a={},d;for(d in b)Object.prototype.hasOwnProperty.call(b,d)&&c(b[d],d,b,a)&&(a[d]=b[d]);return a},flatten:function(b){var c=[],a;for(a in b)Object.prototype.hasOwnProperty.call(b,a)&&c.push([a,b[a]]);return c},any:function(b,c){for(var a=0;a<b.length;a++)if(c(b[a],a,b))return!0;return!1},all:function(b,c){for(var a=0;a<b.length;a++)if(!c(b[a],a,b))return!1;return!0},method:function(b){var c=Array.prototype.slice.call(arguments,1);return function(a){return a[b].apply(a,c.concat(arguments))}},getDocument:function(){return document},getDocumentLocation:function(){return Pusher.Util.getDocument().location},getLocalStorage:function(){return window.localStorage},getClientFeatures:function(){return Pusher.Util.keys(Pusher.Util.filterObject({ws:Pusher.WSTransport,flash:Pusher.FlashTransport},function(b){return b.isSupported()}))}}}).call(this);(function(){Pusher.VERSION="2.0.0";Pusher.PROTOCOL=6;Pusher.host="ws.pusherapp.com";Pusher.ws_port=80;Pusher.wss_port=443;Pusher.sockjs_host="sockjs.pusher.com";Pusher.sockjs_http_port=80;Pusher.sockjs_https_port=443;Pusher.sockjs_path="/pusher";Pusher.stats_host="stats.pusher.com";Pusher.channel_auth_endpoint="/pusher/auth";Pusher.cdn_http="http://js.pusher.com/";Pusher.cdn_https="https://d3dy5gmtp8yhk7.cloudfront.net/";Pusher.dependency_suffix=".min";Pusher.channel_auth_transport="ajax";Pusher.activity_timeout=12E4;Pusher.pong_timeout=3E4;Pusher.unavailable_timeout=1E4;Pusher.getDefaultStrategy=function(){return[[":def","ws_options",{hostUnencrypted:Pusher.host+":"+Pusher.ws_port,hostEncrypted:Pusher.host+":"+Pusher.wss_port}],[":def","sockjs_options",{hostUnencrypted:Pusher.sockjs_host+":"+Pusher.sockjs_http_port,hostEncrypted:Pusher.sockjs_host+":"+Pusher.sockjs_https_port}],[":def","timeouts",{loop:!0,timeout:15E3,timeoutLimit:6E4}],[":def","ws_manager",[":transport_manager",{lives:2}]],[":def_transport","ws","ws",3,":ws_options",":ws_manager"],[":def_transport","flash","flash",2,":ws_options",":ws_manager"],[":def_transport","sockjs","sockjs",1,":sockjs_options"],[":def","ws_loop",[":sequential",":timeouts",":ws"]],[":def","flash_loop",[":sequential",":timeouts",":flash"]],[":def","sockjs_loop",[":sequential",":timeouts",":sockjs"]],[":def","strategy",[":cached",18E5,[":first_connected",[":if",[":is_supported",":ws"],[":best_connected_ever",":ws_loop",[":delayed",2E3,[":sockjs_loop"]]],[":if",[":is_supported",":flash"],[":best_connected_ever",":flash_loop",[":delayed",2E3,[":sockjs_loop"]]],[":sockjs_loop"]]]]]]]}}).call(this);(function(){function b(b){var a=function(a){Error.call(this,a);this.name=b};Pusher.Util.extend(a.prototype,Error.prototype);return a}Pusher.Errors={UnsupportedTransport:b("UnsupportedTransport"),UnsupportedStrategy:b("UnsupportedStrategy"),TransportPriorityTooLow:b("TransportPriorityTooLow"),TransportClosed:b("TransportClosed")}}).call(this);(function(){function b(a){this.callbacks=new c;this.global_callbacks=[];this.failThrough=a}function c(){this._callbacks={}}var a=b.prototype;a.bind=function(a,b){this.callbacks.add(a,b);return this};a.bind_all=function(a){this.global_callbacks.push(a);return this};a.unbind=function(a,b){this.callbacks.remove(a,b);return this};a.emit=function(a,b){var c;for(c=0;c<this.global_callbacks.length;c++)this.global_callbacks[c](a,b);var f=this.callbacks.get(a);if(f&&f.length>0)for(c=0;c<f.length;c++)f[c](b);else this.failThrough&&this.failThrough(a,b);return this};c.prototype.get=function(a){return this._callbacks[this._prefix(a)]};c.prototype.add=function(a,b){var c=this._prefix(a);this._callbacks[c]=this._callbacks[c]||[];this._callbacks[c].push(b)};c.prototype.remove=function(a,b){if(this.get(a)){var c=Pusher.Util.arrayIndexOf(this.get(a),b),f=this._callbacks[this._prefix(a)].slice(0);f.splice(c,1);this._callbacks[this._prefix(a)]=f}};c.prototype._prefix=function(a){return"_"+a};Pusher.EventsDispatcher=b}).call(this);(function(){function b(a){this.options=a;this.loading={};this.loaded={}}function c(a,d){Pusher.Util.getDocument().addEventListener?a.addEventListener("load",d,!1):a.attachEvent("onreadystatechange",function(){(a.readyState==="loaded"||a.readyState==="complete")&&d()})}function a(a,d){var b=Pusher.Util.getDocument(),g=b.getElementsByTagName("head")[0],b=b.createElement("script");b.setAttribute("src",a);b.setAttribute("type","text/javascript");b.setAttribute("async",!0);c(b,function(){setTimeout(d,0)});g.appendChild(b)}var d=b.prototype;d.load=function(d,b){var c=this;this.loaded[d]?b():(this.loading[d]||(this.loading[d]=[]),this.loading[d].push(b),this.loading[d].length>1||a(this.getPath(d),function(){for(var a=0;a<c.loading[d].length;a++)c.loading[d][a]();delete c.loading[d];c.loaded[d]=!0}))};d.getRoot=function(a){var d=Pusher.Util.getDocumentLocation().protocol;return(a&&a.encrypted||d==="https:"?this.options.cdn_https:this.options.cdn_http).replace(/\/*$/,"")+"/"+this.options.version};d.getPath=function(a,d){return this.getRoot(d)+"/"+a+this.options.suffix+".js"};Pusher.DependencyLoader=b}).call(this);(function(){function b(){Pusher.ready()}function c(a){document.body?a():setTimeout(function(){c(a)},0)}function a(){c(b)}Pusher.Dependencies=new Pusher.DependencyLoader({cdn_http:Pusher.cdn_http,cdn_https:Pusher.cdn_https,version:Pusher.VERSION,suffix:Pusher.dependency_suffix});if(!window.WebSocket&&window.MozWebSocket)window.WebSocket=window.MozWebSocket;window.JSON?a():Pusher.Dependencies.load("json2",a)})();(function(){function b(a,d){var b=this;this.timeout=setTimeout(function(){if(b.timeout!==null)d(),b.timeout=null},a)}var c=b.prototype;c.isRunning=function(){return this.timeout!==null};c.ensureAborted=function(){if(this.timeout)clearTimeout(this.timeout),this.timeout=null};Pusher.Timer=b}).call(this);(function(){for(var b=String.fromCharCode,c=0;c<64;c++)"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(c);var a=function(a){var d=a.charCodeAt(0);return d<128?a:d<2048?b(192|d>>>6)+b(128|d&63):b(224|d>>>12&15)+b(128|d>>>6&63)+b(128|d&63)},d=function(a){var d=[0,2,1][a.length%3],a=a.charCodeAt(0)<<16|(a.length>1?a.charCodeAt(1):0)<<8|(a.length>2?a.charCodeAt(2):0);return["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a>>>18),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a>>>12&63),d>=2?"=":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a>>>6&63),d>=1?"=":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a&63)].join("")},h=window.btoa||function(a){return a.replace(/[\s\S]{1,3}/g,d)};Pusher.Base64={encode:function(d){return h(d.replace(/[^\x00-\x7F]/g,a))}}}).call(this);(function(){function b(a){this.options=a}function c(a){return Pusher.Util.mapObject(a,function(a){typeof a==="object"&&(a=JSON.stringify(a));return encodeURIComponent(Pusher.Base64.encode(a.toString()))})}b.send=function(a,b){var c=new Pusher.JSONPRequest({url:a.url,receiver:a.receiverName,tagPrefix:a.tagPrefix}),f=a.receiver.register(function(a,d){c.cleanup();b(a,d)});return c.send(f,a.data,function(b){var c=a.receiver.unregister(f);c&&c(b)})};var a=b.prototype;a.send=function(a,b,e){if(this.script)return!1;var f=this.options.tagPrefix||"_pusher_jsonp_",b=Pusher.Util.extend({},b,{receiver:this.options.receiver}),b=Pusher.Util.map(Pusher.Util.flatten(c(Pusher.Util.filterObject(b,function(a){return a!==void 0}))),Pusher.Util.method("join","=")).join("&");this.script=document.createElement("script");this.script.id=f+a;this.script.src=this.options.url+"/"+a+"?"+b;this.script.type="text/javascript";this.script.charset="UTF-8";this.script.onerror=this.script.onload=e;if(this.script.async===void 0&&document.attachEvent&&/opera/i.test(navigator.userAgent))f=this.options.receiver||"Pusher.JSONP.receive",this.errorScript=document.createElement("script"),this.errorScript.text=f+"("+a+", true);",this.script.async=this.errorScript.async=!1;var g=this;this.script.onreadystatechange=function(){g.script&&/loaded|complete/.test(g.script.readyState)&&e(!0)};a=document.getElementsByTagName("head")[0];a.insertBefore(this.script,a.firstChild);this.errorScript&&a.insertBefore(this.errorScript,this.script.nextSibling);return!0};a.cleanup=function(){if(this.script&&this.script.parentNode)this.script.parentNode.removeChild(this.script),this.script=null;if(this.errorScript&&this.errorScript.parentNode)this.errorScript.parentNode.removeChild(this.errorScript),this.errorScript=null};Pusher.JSONPRequest=b}).call(this);(function(){function b(){this.lastId=0;this.callbacks={}}var c=b.prototype;c.register=function(a){this.lastId++;var b=this.lastId;this.callbacks[b]=a;return b};c.unregister=function(a){if(this.callbacks[a]){var b=this.callbacks[a];delete this.callbacks[a];return b}else return null};c.receive=function(a,b,c){(a=this.unregister(a))&&a(b,c)};Pusher.JSONPReceiver=b;Pusher.JSONP=new b}).call(this);(function(){function b(a,b,c){this.key=a;this.session=b;this.events=[];this.options=c||{};this.uniqueID=this.sent=0}var c=b.prototype;b.ERROR=3;b.INFO=6;b.DEBUG=7;c.log=function(a,b){if(this.options.level===void 0||a<=this.options.level)this.events.push(Pusher.Util.extend({},b,{timestamp:Pusher.Util.now(),level:a})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift()};c.error=function(a){this.log(b.ERROR,a)};c.info=function(a){this.log(b.INFO,a)};c.debug=function(a){this.log(b.DEBUG,a)};c.isEmpty=function(){return this.events.length===0};c.send=function(a,b){var c=this,e={};this.sent===0&&(e=Pusher.Util.extend({key:this.key,features:this.options.features,version:this.options.version},this.options.params||{}));e.session=this.session;e.timeline=this.events;e=Pusher.Util.filterObject(e,function(a){return a!==void 0});this.events=[];a(e,function(a,e){a||c.sent++;b(a,e)});return!0};c.generateUniqueID=function(){this.uniqueID++;return this.uniqueID};Pusher.Timeline=b}).call(this);(function(){function b(a,b){this.timeline=a;this.options=b||{}}var c=b.prototype;c.send=function(a){if(!this.timeline.isEmpty()){var b=this.options,c="http"+(this.isEncrypted()?"s":"")+"://";this.timeline.send(function(a,f){return Pusher.JSONPRequest.send({data:a,url:c+b.host+b.path,receiver:Pusher.JSONP},f)},a)}};c.isEncrypted=function(){return!!this.options.encrypted};Pusher.TimelineSender=b}).call(this);(function(){function b(a){this.strategies=a}function c(a,b,c){var h=Pusher.Util.map(a,function(a,d,h,e){return a.connect(b,c(d,e))});return{abort:function(){Pusher.Util.apply(h,d)},forceMinPriority:function(a){Pusher.Util.apply(h,function(b){b.forceMinPriority(a)})}}}function a(a){return Pusher.Util.all(a,function(a){return Boolean(a.error)})}function d(a){if(!a.error&&!a.aborted)a.abort(),a.aborted=!0}var h=b.prototype;h.isSupported=function(){return Pusher.Util.any(this.strategies,Pusher.Util.method("isSupported"))};h.connect=function(b,d){return c(this.strategies,b,function(b,c){return function(h,e){(c[b].error=h)?a(c)&&d(!0):(Pusher.Util.apply(c,function(a){a.forceMinPriority(e.priority)}),d(null,e))}})};Pusher.BestConnectedEverStrategy=b}).call(this);(function(){function b(a,b,c){this.strategy=a;this.transports=b;this.ttl=c.ttl||18E5;this.timeline=c.timeline}function c(){var a=Pusher.Util.getLocalStorage();return a&&a.pusherTransport?JSON.parse(a.pusherTransport):null}var a=b.prototype;a.isSupported=function(){return this.strategy.isSupported()};a.connect=function(a,b){var e=c(),f=[this.strategy];if(e&&e.timestamp+this.ttl>=Pusher.Util.now()){var g=this.transports[e.transport];g&&(this.timeline.info({cached:!0,transport:e.transport}),f.push(new Pusher.SequentialStrategy([g],{timeout:e.latency*2,failFast:!0})))}var i=Pusher.Util.now(),j=f.pop().connect(a,function k(c,e){if(c){var g=Pusher.Util.getLocalStorage();g&&delete g.pusherTransport;f.length>0?(i=Pusher.Util.now(),j=f.pop().connect(a,k)):b(c)}else{var g=Pusher.Util.now()-i,o=e.name,n=Pusher.Util.getLocalStorage();if(n)n.pusherTransport=JSON.stringify({timestamp:Pusher.Util.now(),transport:o,latency:g});b(null,e)}});return{abort:function(){j.abort()},forceMinPriority:function(b){a=b;j&&j.forceMinPriority(b)}}};Pusher.CachedStrategy=b}).call(this);(function(){function b(a,b){this.strategy=a;this.options={delay:b.delay}}var c=b.prototype;c.isSupported=function(){return this.strategy.isSupported()};c.connect=function(a,b){var c=this.strategy,e,f=new Pusher.Timer(this.options.delay,function(){e=c.connect(a,b)});return{abort:function(){f.ensureAborted();e&&e.abort()},forceMinPriority:function(b){a=b;e&&e.forceMinPriority(b)}}};Pusher.DelayedStrategy=b}).call(this);(function(){function b(a){this.strategy=a}var c=b.prototype;c.isSupported=function(){return this.strategy.isSupported()};c.connect=function(a,b){var c=this.strategy.connect(a,function(a,f){f&&c.abort();b(a,f)});return c};Pusher.FirstConnectedStrategy=b}).call(this);(function(){function b(a,b,c){this.test=a;this.trueBranch=b;this.falseBranch=c}var c=b.prototype;c.isSupported=function(){return(this.test()?this.trueBranch:this.falseBranch).isSupported()};c.connect=function(a,b){return(this.test()?this.trueBranch:this.falseBranch).connect(a,b)};Pusher.IfStrategy=b}).call(this);(function(){function b(a,b){this.strategies=a;this.loop=Boolean(b.loop);this.failFast=Boolean(b.failFast);this.timeout=b.timeout;this.timeoutLimit=b.timeoutLimit}var c=b.prototype;c.isSupported=function(){return Pusher.Util.any(this.strategies,Pusher.Util.method("isSupported"))};c.connect=function(a,b){var c=this,e=this.strategies,f=0,g=this.timeout,i=null,j=function(l,k){k?b(null,k):(f+=1,c.loop&&(f%=e.length),f<e.length?(g&&(g*=2,c.timeoutLimit&&(g=Math.min(g,c.timeoutLimit))),i=c.tryStrategy(e[f],a,{timeout:g,failFast:c.failFast},j)):b(!0))},i=this.tryStrategy(e[f],a,{timeout:g,failFast:this.failFast},j);return{abort:function(){i.abort()},forceMinPriority:function(b){a=b;i&&i.forceMinPriority(b)}}};c.tryStrategy=function(a,b,c,e){var f=null,g=null,g=a.connect(b,function(a,b){if(!a||!f||!f.isRunning()||c.failFast)f&&f.ensureAborted(),e(a,b)});c.timeout>0&&(f=new Pusher.Timer(c.timeout,function(){g.abort();e(!0)}));return{abort:function(){f&&f.ensureAborted();g.abort()},forceMinPriority:function(a){g.forceMinPriority(a)}}};Pusher.SequentialStrategy=b}).call(this);(function(){function b(a,b,c,f){this.name=a;this.priority=b;this.transport=c;this.options=f||{}}function c(a,b){new Pusher.Timer(0,function(){b(a)});return{abort:function(){},forceMinPriority:function(){}}}var a=b.prototype;a.isSupported=function(){return this.transport.isSupported({disableFlash:!!this.options.disableFlash})};a.connect=function(a,b){if(this.transport.isSupported()){if(this.priority<a)return c(new Pusher.Errors.TransportPriorityTooLow,b)}else return c(new Pusher.Errors.UnsupportedStrategy,b);var e=this,f=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),g=function(){f.unbind("initialized",g);f.connect()},i=function(){k();b(null,f)},j=function(a){k();b(a)},l=function(){k();b(new Pusher.Errors.TransportClosed(this.transport))},k=function(){f.unbind("initialized",g);f.unbind("open",i);f.unbind("error",j);f.unbind("closed",l)};f.bind("initialized",g);f.bind("open",i);f.bind("error",j);f.bind("closed",l);f.initialize();return{abort:function(){f.state!=="open"&&(k(),f.close())},forceMinPriority:function(a){f.state!=="open"&&e.priority<a&&f.close()}}};Pusher.TransportStrategy=b}).call(this);(function(){function b(a,b,c,f){Pusher.EventsDispatcher.call(this);this.name=a;this.priority=b;this.key=c;this.state="new";this.timeline=f.timeline;this.id=this.timeline.generateUniqueID();this.options={encrypted:Boolean(f.encrypted),hostUnencrypted:f.hostUnencrypted,hostEncrypted:f.hostEncrypted}}function c(a){return typeof a==="string"?a:typeof a==="object"?Pusher.Util.mapObject(a,function(a){var b=typeof a;return b==="object"||b=="function"?b:a}):typeof a}var a=b.prototype;Pusher.Util.extend(a,Pusher.EventsDispatcher.prototype);b.isSupported=function(){return!1};a.supportsPing=function(){return!1};a.initialize=function(){this.timeline.info(this.buildTimelineMessage({transport:this.name+(this.options.encrypted?"s":"")}));this.timeline.debug(this.buildTimelineMessage({method:"initialize"}));this.changeState("initialized")};a.connect=function(){var a=this.getURL(this.key,this.options);this.timeline.debug(this.buildTimelineMessage({method:"connect",url:a}));if(this.socket||this.state!=="initialized")return!1;this.socket=this.createSocket(a);this.bindListeners();Pusher.debug("Connecting",{transport:this.name,url:a});this.changeState("connecting");return!0};a.close=function(){this.timeline.debug(this.buildTimelineMessage({method:"close"}));return this.socket?(this.socket.close(),!0):!1};a.send=function(a){this.timeline.debug(this.buildTimelineMessage({method:"send",data:a}));if(this.state==="open"){var b=this;setTimeout(function(){b.socket.send(a)},0);return!0}else return!1};a.requestPing=function(){this.emit("ping_request")};a.onOpen=function(){this.changeState("open");this.socket.onopen=void 0};a.onError=function(a){this.emit("error",{type:"WebSocketError",error:a});this.timeline.error(this.buildTimelineMessage({error:c(a)}))};a.onClose=function(a){this.changeState("closed",a);this.socket=void 0};a.onMessage=function(a){this.timeline.debug(this.buildTimelineMessage({message:a.data}));this.emit("message",a)};a.bindListeners=function(){var a=this;this.socket.onopen=function(){a.onOpen()};this.socket.onerror=function(b){a.onError(b)};this.socket.onclose=function(b){a.onClose(b)};this.socket.onmessage=function(b){a.onMessage(b)}};a.createSocket=function(){return null};a.getScheme=function(){return this.options.encrypted?"wss":"ws"};a.getBaseURL=function(){var a;a=this.options.encrypted?this.options.hostEncrypted:this.options.hostUnencrypted;return this.getScheme()+"://"+a};a.getPath=function(){return"/app/"+this.key};a.getQueryString=function(){return"?protocol="+Pusher.PROTOCOL+"&client=js&version="+Pusher.VERSION};a.getURL=function(){return this.getBaseURL()+
this.getPath()+this.getQueryString()};a.changeState=function(a,b){this.state=a;this.timeline.info(this.buildTimelineMessage({state:a,params:b}));this.emit(a,b)};a.buildTimelineMessage=function(a){return Pusher.Util.extend({cid:this.id},a)};Pusher.AbstractTransport=b}).call(this);(function(){function b(a,b,c,e){Pusher.AbstractTransport.call(this,a,b,c,e)}var c=b.prototype;Pusher.Util.extend(c,Pusher.AbstractTransport.prototype);b.createConnection=function(a,c,h,e){return new b(a,c,h,e)};b.isSupported=function(a){if(a&&a.disableFlash)return!1;try{return!!new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(b){return navigator.mimeTypes["application/x-shockwave-flash"]!==void 0}};c.initialize=function(){var a=this;this.timeline.info(this.buildTimelineMessage({transport:this.name+
(this.options.encrypted?"s":"")}));this.timeline.debug(this.buildTimelineMessage({method:"initialize"}));this.changeState("initializing");if(window.WEB_SOCKET_SUPPRESS_CROSS_DOMAIN_SWF_ERROR===void 0)window.WEB_SOCKET_SUPPRESS_CROSS_DOMAIN_SWF_ERROR=!0;window.WEB_SOCKET_SWF_LOCATION=Pusher.Dependencies.getRoot()+"/WebSocketMain.swf";Pusher.Dependencies.load("flashfallback",function(){a.changeState("initialized")})};c.createSocket=function(a){return new FlashWebSocket(a)};c.getQueryString=function(){return Pusher.AbstractTransport.prototype.getQueryString.call(this)+"&flash=true"};Pusher.FlashTransport=b}).call(this);(function(){function b(a,b,c,e){Pusher.AbstractTransport.call(this,a,b,c,e)}var c=b.prototype;Pusher.Util.extend(c,Pusher.AbstractTransport.prototype);b.createConnection=function(a,c,h,e){return new b(a,c,h,e)};b.isSupported=function(){return!0};c.initialize=function(){var a=this;this.timeline.info(this.buildTimelineMessage({transport:this.name+(this.options.encrypted?"s":"")}));this.timeline.debug(this.buildTimelineMessage({method:"initialize"}));this.changeState("initializing");Pusher.Dependencies.load("sockjs",function(){a.changeState("initialized")})};c.supportsPing=function(){return!0};c.createSocket=function(a){return new SockJS(a,null,{js_path:Pusher.Dependencies.getPath("sockjs",{encrypted:this.options.encrypted})})};c.getScheme=function(){return this.options.encrypted?"https":"http"};c.getPath=function(){return"/pusher"};c.getQueryString=function(){return""};c.onOpen=function(){this.socket.send(JSON.stringify({path:Pusher.AbstractTransport.prototype.getPath.call(this)+Pusher.AbstractTransport.prototype.getQueryString.call(this)}));this.changeState("open");this.socket.onopen=void 0};Pusher.SockJSTransport=b}).call(this);(function(){function b(a,b,c,e){Pusher.AbstractTransport.call(this,a,b,c,e)}var c=b.prototype;Pusher.Util.extend(c,Pusher.AbstractTransport.prototype);b.createConnection=function(a,c,h,e){return new b(a,c,h,e)};b.isSupported=function(){return window.WebSocket!==void 0||window.MozWebSocket!==void 0};c.createSocket=function(a){return new(window.WebSocket||window.MozWebSocket)(a)};c.getQueryString=function(){return Pusher.AbstractTransport.prototype.getQueryString.call(this)+"&flash=false"};Pusher.WSTransport=b}).call(this);(function(){function b(a,b,c){this.manager=a;this.transport=b;this.minPingDelay=c.minPingDelay||1E4;this.maxPingDelay=c.maxPingDelay||Pusher.activity_timeout;this.pingDelay=null}var c=b.prototype;c.createConnection=function(a,b,c,e){var f=this.transport.createConnection(a,b,c,e),g=this,i=null,j=null,l=function(){f.unbind("open",l);i=Pusher.Util.now();g.pingDelay&&(j=setInterval(function(){j&&f.requestPing()},g.pingDelay));f.bind("closed",k)},k=function(a){f.unbind("closed",k);j&&(clearInterval(j),j=null);if(!a.wasClean&&i&&(a=Pusher.Util.now()-i,a<2*g.maxPingDelay))g.manager.reportDeath(),g.pingDelay=Math.max(a/2,g.minPingDelay)};f.bind("open",l);return f};c.isSupported=function(){return this.manager.isAlive()&&this.transport.isSupported()};Pusher.AssistantToTheTransportManager=b}).call(this);(function(){function b(a){this.options=a||{};this.livesLeft=this.options.lives||Infinity}var c=b.prototype;c.getAssistant=function(a){return new Pusher.AssistantToTheTransportManager(this,a,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})};c.isAlive=function(){return this.livesLeft>0};c.reportDeath=function(){this.livesLeft-=1};Pusher.TransportManager=b}).call(this);(function(){function b(a){return function(b){return[a.apply(this,arguments),b]}}function c(a,b){if(a.length===0)return[[],b];var e=d(a[0],b),h=c(a.slice(1),e[1]);return[[e[0]].concat(h[0]),h[1]]}function a(a,b){if(typeof a[0]==="string"&&a[0].charAt(0)===":"){var e=b[a[0].slice(1)];if(a.length>1){if(typeof e!=="function")throw"Calling non-function "+a[0];var h=[Pusher.Util.extend({},b)].concat(Pusher.Util.map(a.slice(1),function(a){return d(a,Pusher.Util.extend({},b))[0]}));return e.apply(this,h)}else return[e,b]}else return c(a,b)}function d(b,c){if(typeof b==="string"){var d;if(typeof b==="string"&&b.charAt(0)===":"){d=c[b.slice(1)];if(d===void 0)throw"Undefined symbol "+b;d=[d,c]}else d=[b,c];return d}else if(typeof b==="object"&&b instanceof Array&&b.length>0)return a(b,c);return[b,c]}var h={ws:Pusher.WSTransport,flash:Pusher.FlashTransport,sockjs:Pusher.SockJSTransport},e={def:function(a,b,c){if(a[b]!==void 0)throw"Redefining symbol "+b;a[b]=c;return[void 0,a]},def_transport:function(a,b,c,d,e,k){var m=h[c];if(!m)throw new Pusher.Errors.UnsupportedTransport(c);c=Pusher.Util.extend({},{key:a.key,encrypted:a.encrypted,timeline:a.timeline,disableFlash:a.disableFlash},e);k&&(m=k.getAssistant(m));d=new Pusher.TransportStrategy(b,d,m,c);k=a.def(a,b,d)[1];k.transports=a.transports||{};k.transports[b]=d;return[void 0,k]},transport_manager:b(function(a,b){return new Pusher.TransportManager(b)}),sequential:b(function(a,b){var c=Array.prototype.slice.call(arguments,2);return new Pusher.SequentialStrategy(c,b)}),cached:b(function(a,b,c){return new Pusher.CachedStrategy(c,a.transports,{ttl:b,timeline:a.timeline})}),first_connected:b(function(a,b){return new Pusher.FirstConnectedStrategy(b)}),best_connected_ever:b(function(){var a=Array.prototype.slice.call(arguments,1);return new Pusher.BestConnectedEverStrategy(a)}),delayed:b(function(a,b,c){return new Pusher.DelayedStrategy(c,{delay:b})}),"if":b(function(a,b,c,d){return new Pusher.IfStrategy(b,c,d)}),is_supported:b(function(a,b){return function(){return b.isSupported()}})};Pusher.StrategyBuilder={build:function(a,b){var c=Pusher.Util.extend({},e,b);return d(a,c)[1].strategy}}}).call(this);(function(){function b(a){Pusher.EventsDispatcher.call(this);this.transport=a;this.bindListeners()}var c=b.prototype;Pusher.Util.extend(c,Pusher.EventsDispatcher.prototype);c.supportsPing=function(){return this.transport.supportsPing()};c.send=function(a){return this.transport.send(a)};c.send_event=function(a,b,c){a={event:a,data:b};if(c)a.channel=c;Pusher.debug("Event sent",a);return this.send(JSON.stringify(a))};c.close=function(){this.transport.close()};c.bindListeners=function(){var a=this,b=function(f){f=a.parseMessage(f);if(f!==void 0)f.event==="pusher:connection_established"?(a.id=f.data.socket_id,a.transport.unbind("message",b),a.transport.bind("message",c),a.transport.bind("ping_request",e),a.emit("connected",a.id)):f.event==="pusher:error"&&(a.handleCloseCode(f.data.code,f.data.message),a.transport.close())},c=function(b){b=a.parseMessage(b);if(b!==void 0){Pusher.debug("Event recd",b);switch(b.event){case"pusher:error":a.emit("error",{type:"PusherError",data:b.data});break;case"pusher:ping":a.emit("ping");break;case"pusher:pong":a.emit("pong")}a.emit("message",b)}},e=function(){a.emit("ping_request")},f=function(b){a.emit("error",{type:"WebSocketError",error:b})},g=function(i){i&&i.code&&a.handleCloseCode(i.code,i.reason);a.transport.unbind("message",b);a.transport.unbind("message",c);a.transport.unbind("ping_request",e);a.transport.unbind("error",f);a.transport.unbind("closed",g);a.transport=null;a.emit("closed")};this.transport.bind("message",b);this.transport.bind("error",f);this.transport.bind("closed",g)};c.parseMessage=function(a){try{var b=JSON.parse(a.data);if(typeof b.data==="string")try{b.data=JSON.parse(b.data)}catch(c){if(!(c instanceof SyntaxError))throw c;}return b}catch(e){this.emit("error",{type:"MessageParseError",error:e,data:a.data})}};c.handleCloseCode=function(a,b){this.emit("error",{type:"PusherError",data:{code:a,message:b}});a<4E3?a>=1002&&a<=1004&&this.emit("backoff"):a===4E3?this.emit("ssl_only"):a<4100?this.emit("refused"):a<4200?this.emit("backoff"):a<4300?this.emit("retry"):this.emit("refused")};Pusher.ProtocolWrapper=b}).call(this);(function(){function b(a,b){Pusher.EventsDispatcher.call(this);this.key=a;this.options=b||{};this.state="initialized";this.connection=null;this.encrypted=!!b.encrypted;this.timeline=this.options.getTimeline();var c=this;Pusher.Network.bind("online",function(){c.state==="unavailable"&&c.connect()});Pusher.Network.bind("offline",function(){c.shouldRetry()&&(c.disconnect(),c.updateState("unavailable"))});var e=function(){c.timelineSender&&c.timelineSender.send(function(){})};this.bind("connected",e);setInterval(e,6E4)}var c=b.prototype;Pusher.Util.extend(c,Pusher.EventsDispatcher.prototype);c.connect=function(){if(!this.connection&&this.state!=="connecting"){var a=this.options.getStrategy({key:this.key,timeline:this.timeline,encrypted:this.encrypted});if(a.isSupported())if(Pusher.Network.isOnline()===!1)this.updateState("unavailable");else{this.updateState("connecting");this.timelineSender=this.options.getTimelineSender(this.timeline,{encrypted:this.encrypted},this);var b=this,c=function(e,f){e?b.runner=a.connect(0,c):(b.runner.abort(),b.setConnection(b.wrapTransport(f)))};this.runner=a.connect(0,c);this.setUnavailableTimer()}else this.updateState("failed")}};c.send=function(a){return this.connection?this.connection.send(a):!1};c.send_event=function(a,b,c){return this.connection?this.connection.send_event(a,b,c):!1};c.disconnect=function(){this.runner&&this.runner.abort();this.clearRetryTimer();this.clearUnavailableTimer();this.stopActivityCheck();this.updateState("disconnected");if(this.connection)this.connection.close(),this.connection=null};c.retryIn=function(a){var b=this;this.retryTimer=setTimeout(function(){if(b.retryTimer!==null)b.retryTimer=null,b.disconnect(),b.connect()},a||0)};c.clearRetryTimer=function(){if(this.retryTimer)clearTimeout(this.retryTimer),this.retryTimer=null};c.setUnavailableTimer=function(){var a=this;this.unavailableTimer=setTimeout(function(){if(a.unavailableTimer)a.updateState("unavailable"),a.unavailableTimer=null},this.options.unavailableTimeout)};c.clearUnavailableTimer=function(){if(this.unavailableTimer)clearTimeout(this.unavailableTimer),this.unavailableTimer=null};c.resetActivityCheck=function(){this.stopActivityCheck();if(!this.connection.supportsPing()){var a=this;this.activityTimer=setTimeout(function(){a.send_event("pusher:ping",{});a.activityTimer=setTimeout(function(){a.connection.close()},a.options.pongTimeout)},this.options.activityTimeout)}};c.stopActivityCheck=function(){if(this.activityTimer)clearTimeout(this.activityTimer),this.activityTimer=null};c.setConnection=function(a){this.connection=a;var b=this,c=function(a){b.clearUnavailableTimer();b.socket_id=a;b.updateState("connected");b.resetActivityCheck()},e=function(a){b.resetActivityCheck();b.emit("message",a)},f=function(){b.send_event("pusher:pong",{})},g=function(){b.send_event("pusher:ping",{})},i=function(a){b.emit("error",{type:"WebSocketError",error:a})},j=function(){a.unbind("connected",c);a.unbind("message",e);a.unbind("ping",f);a.unbind("ping_request",g);a.unbind("error",i);a.unbind("closed",j);b.connection=null;b.shouldRetry()&&b.retryIn(1E3)};a.bind("connected",c);a.bind("message",e);a.bind("ping",f);a.bind("ping_request",g);a.bind("error",i);a.bind("closed",j);a.bind("ssl_only",function(){b.encrypted=!0;b.retryIn(0)});a.bind("refused",function(){b.disconnect()});a.bind("backoff",function(){b.retryIn(1E3)});a.bind("retry",function(){b.retryIn(0)});this.resetActivityCheck()};c.updateState=function(a,b){var c=this.state;this.state=a;c!==a&&(Pusher.debug("State changed",c+" -> "+a),this.emit("state_change",{previous:c,current:a}),this.emit(a,b))};c.shouldRetry=function(){return this.state==="connecting"||this.state==="connected"};c.wrapTransport=function(a){return new Pusher.ProtocolWrapper(a)};Pusher.ConnectionManager=b}).call(this);(function(){function b(){Pusher.EventsDispatcher.call(this);var b=this;window.addEventListener!==void 0&&(window.addEventListener("online",function(){b.emit("online")},!1),window.addEventListener("offline",function(){b.emit("offline")},!1))}Pusher.Util.extend(b.prototype,Pusher.EventsDispatcher.prototype);b.prototype.isOnline=function(){return window.navigator.onLine===void 0?!0:window.navigator.onLine};Pusher.NetInfo=b;Pusher.Network=new b}).call(this);(function(){Pusher.Channels=function(){this.channels={}};Pusher.Channels.prototype={add:function(b,a){var d=this.find(b);d||(d=Pusher.Channel.factory(b,a),this.channels[b]=d);return d},find:function(b){return this.channels[b]},remove:function(b){delete this.channels[b]},disconnect:function(){for(var b in this.channels)this.channels[b].disconnect()}};Pusher.Channel=function(b,a){var d=this;Pusher.EventsDispatcher.call(this,function(a){Pusher.debug("No callbacks on "+b+" for "+a)});this.pusher=a;this.name=b;this.subscribed=!1;this.bind("pusher_internal:subscription_succeeded",function(a){d.onSubscriptionSucceeded(a)})};Pusher.Channel.prototype={init:function(){},disconnect:function(){this.subscribed=!1;this.emit("pusher_internal:disconnected")},onSubscriptionSucceeded:function(){this.subscribed=!0;this.emit("pusher:subscription_succeeded")},authorize:function(b,a,d){return d(!1,{})},trigger:function(b,a){return this.pusher.send_event(b,a,this.name)}};Pusher.Util.extend(Pusher.Channel.prototype,Pusher.EventsDispatcher.prototype);Pusher.Channel.PrivateChannel={authorize:function(b,a,d){var h=this;return(new Pusher.Channel.Authorizer(this,Pusher.channel_auth_transport,a)).authorize(b,function(a,b){a||h.emit("pusher_internal:authorized",b);d(a,b)})}};Pusher.Channel.PresenceChannel={init:function(){this.members=new b(this)},onSubscriptionSucceeded:function(){this.subscribed=!0}};var b=function(b){var a=this,d=null,h=function(){a._members_map={};a.count=0;d=a.me=null};h();var e=function(f){a._members_map=f.presence.hash;a.count=f.presence.count;a.me=a.get(d.user_id);b.emit("pusher:subscription_succeeded",a)};b.bind("pusher_internal:authorized",function(a){d=JSON.parse(a.channel_data);b.bind("pusher_internal:subscription_succeeded",e)});b.bind("pusher_internal:member_added",function(d){a.get(d.user_id)===null&&a.count++;a._members_map[d.user_id]=d.user_info;b.emit("pusher:member_added",a.get(d.user_id))});b.bind("pusher_internal:member_removed",function(d){var e=a.get(d.user_id);e&&(delete a._members_map[d.user_id],a.count--,b.emit("pusher:member_removed",e))});b.bind("pusher_internal:disconnected",function(){h();b.unbind("pusher_internal:subscription_succeeded",e)})};b.prototype={each:function(b){for(var a in this._members_map)b(this.get(a))},get:function(b){return this._members_map.hasOwnProperty(b)?{id:b,info:this._members_map[b]}:null}};Pusher.Channel.factory=function(b,a){var d=new Pusher.Channel(b,a);b.indexOf("private-")===0?Pusher.Util.extend(d,Pusher.Channel.PrivateChannel):b.indexOf("presence-")===0&&(Pusher.Util.extend(d,Pusher.Channel.PrivateChannel),Pusher.Util.extend(d,Pusher.Channel.PresenceChannel));d.init();return d}}).call(this);(function(){Pusher.Channel.Authorizer=function(b,c,a){this.channel=b;this.type=c;this.authOptions=(a||{}).auth||{}};Pusher.Channel.Authorizer.prototype={composeQuery:function(b){var b="&socket_id="+encodeURIComponent(b)+"&channel_name="+encodeURIComponent(this.channel.name),c;for(c in this.authOptions.params)b+="&"+encodeURIComponent(c)+"="+encodeURIComponent(this.authOptions.params[c]);return b},authorize:function(b,c){return Pusher.authorizers[this.type].call(this,b,c)}};Pusher.auth_callbacks={};Pusher.authorizers={ajax:function(b,c){var a;a=Pusher.XHR?new Pusher.XHR:window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");a.open("POST",Pusher.channel_auth_endpoint,!0);a.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var d in this.authOptions.headers)a.setRequestHeader(d,this.authOptions.headers[d]);a.onreadystatechange=function(){if(a.readyState==4)if(a.status==200){var b,d=!1;try{b=JSON.parse(a.responseText),d=!0}catch(f){c(!0,"JSON returned from webapp was invalid, yet status code was 200. Data was: "+
a.responseText)}d&&c(!1,b)}else Pusher.warn("Couldn't get auth info from your webapp",a.status),c(!0,a.status)};a.send(this.composeQuery(b));return a},jsonp:function(b,c){this.authOptions.headers!==void 0&&Pusher.warn("Warn","To send headers with the auth request, you must use AJAX, rather than JSONP.");var a=document.createElement("script");Pusher.auth_callbacks[this.channel.name]=function(a){c(!1,a)};a.src=Pusher.channel_auth_endpoint+"?callback="+encodeURIComponent("Pusher.auth_callbacks['"+this.channel.name+"']")+this.composeQuery(b);var d=document.getElementsByTagName("head")[0]||document.documentElement;d.insertBefore(a,d.firstChild)}}}).call(this);(function(){var AjaxMonitor,Bar,DocumentMonitor,ElementMonitor,ElementTracker,EventLagMonitor,Evented,Events,NoTargetError,Pace,RequestIntercept,SOURCE_KEYS,Scaler,SocketRequestTracker,XHRRequestTracker,animation,avgAmplitude,bar,cancelAnimation,cancelAnimationFrame,defaultOptions,extend,extendNative,getFromDOM,getIntercept,handlePushState,ignoreStack,init,now,options,requestAnimationFrame,result,runAnimation,scalers,shouldIgnoreURL,shouldTrack,source,sources,uniScaler,_WebSocket,_XDomainRequest,_XMLHttpRequest,_i,_intercept,_len,_pushState,_ref,_ref1,_replaceState,__slice=[].slice,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item)return i;}return-1;};defaultOptions={catchupTime:100,initialRate:.03,minTime:250,ghostTime:100,maxProgressPerFrame:20,easeFactor:1.25,startOnPageLoad:true,restartOnPushState:true,restartOnRequestAfter:500,target:'body',elements:{checkInterval:100,selectors:['body']},eventLag:{minSamples:10,sampleCount:3,lagThreshold:3},ajax:{trackMethods:['GET'],trackWebSockets:true,ignoreURLs:[]}};now=function(){var _ref;return(_ref=typeof performance!=="undefined"&&performance!==null?typeof performance.now==="function"?performance.now():void 0:void 0)!=null?_ref:+(new Date);};requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame;if(requestAnimationFrame==null){requestAnimationFrame=function(fn){return setTimeout(fn,50);};cancelAnimationFrame=function(id){return clearTimeout(id);};}
runAnimation=function(fn){var last,tick;last=now();tick=function(){var diff;diff=now()-last;if(diff>=33){last=now();return fn(diff,function(){return requestAnimationFrame(tick);});}else{return setTimeout(tick,33-diff);}};return tick();};result=function(){var args,key,obj;obj=arguments[0],key=arguments[1],args=3<=arguments.length?__slice.call(arguments,2):[];if(typeof obj[key]==='function'){return obj[key].apply(obj,args);}else{return obj[key];}};extend=function(){var key,out,source,sources,val,_i,_len;out=arguments[0],sources=2<=arguments.length?__slice.call(arguments,1):[];for(_i=0,_len=sources.length;_i<_len;_i++){source=sources[_i];if(source){for(key in source){if(!__hasProp.call(source,key))continue;val=source[key];if((out[key]!=null)&&typeof out[key]==='object'&&(val!=null)&&typeof val==='object'){extend(out[key],val);}else{out[key]=val;}}}}
return out;};avgAmplitude=function(arr){var count,sum,v,_i,_len;sum=count=0;for(_i=0,_len=arr.length;_i<_len;_i++){v=arr[_i];sum+=Math.abs(v);count++;}
return sum / count;};getFromDOM=function(key,json){var data,e,el;if(key==null){key='options';}
if(json==null){json=true;}
el=document.querySelector("[data-pace-"+key+"]");if(!el){return;}
data=el.getAttribute("data-pace-"+key);if(!json){return data;}
try{return JSON.parse(data);}catch(_error){e=_error;return typeof console!=="undefined"&&console!==null?console.error("Error parsing inline pace options",e):void 0;}};Evented=(function(){function Evented(){}
Evented.prototype.on=function(event,handler,ctx,once){var _base;if(once==null){once=false;}
if(this.bindings==null){this.bindings={};}
if((_base=this.bindings)[event]==null){_base[event]=[];}
return this.bindings[event].push({handler:handler,ctx:ctx,once:once});};Evented.prototype.once=function(event,handler,ctx){return this.on(event,handler,ctx,true);};Evented.prototype.off=function(event,handler){var i,_ref,_results;if(((_ref=this.bindings)!=null?_ref[event]:void 0)==null){return;}
if(handler==null){return delete this.bindings[event];}else{i=0;_results=[];while(i<this.bindings[event].length){if(this.bindings[event][i].handler===handler){_results.push(this.bindings[event].splice(i,1));}else{_results.push(i++);}}
return _results;}};Evented.prototype.trigger=function(){var args,ctx,event,handler,i,once,_ref,_ref1,_results;event=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[];if((_ref=this.bindings)!=null?_ref[event]:void 0){i=0;_results=[];while(i<this.bindings[event].length){_ref1=this.bindings[event][i],handler=_ref1.handler,ctx=_ref1.ctx,once=_ref1.once;handler.apply(ctx!=null?ctx:this,args);if(once){_results.push(this.bindings[event].splice(i,1));}else{_results.push(i++);}}
return _results;}};return Evented;})();Pace=window.Pace||{};window.Pace=Pace;extend(Pace,Evented.prototype);options=Pace.options=extend({},defaultOptions,window.paceOptions,getFromDOM());_ref=['ajax','document','eventLag','elements'];for(_i=0,_len=_ref.length;_i<_len;_i++){source=_ref[_i];if(options[source]===true){options[source]=defaultOptions[source];}}
NoTargetError=(function(_super){__extends(NoTargetError,_super);function NoTargetError(){_ref1=NoTargetError.__super__.constructor.apply(this,arguments);return _ref1;}
return NoTargetError;})(Error);Bar=(function(){function Bar(){this.progress=0;}
Bar.prototype.getElement=function(){var targetElement;if(this.el==null){targetElement=document.querySelector(options.target);if(!targetElement){throw new NoTargetError;}
this.el=document.createElement('div');this.el.className="pace pace-active";document.body.className=document.body.className.replace(/pace-done/g,'');document.body.className+=' pace-running';this.el.innerHTML='<div class="pace-progress">\n  <div class="pace-progress-inner"></div>\n</div>\n<div class="pace-activity"></div>';if(targetElement.firstChild!=null){targetElement.insertBefore(this.el,targetElement.firstChild);}else{targetElement.appendChild(this.el);}}
return this.el;};Bar.prototype.finish=function(){var el;el=this.getElement();el.className=el.className.replace('pace-active','');el.className+=' pace-inactive';document.body.className=document.body.className.replace('pace-running','');return document.body.className+=' pace-done';};Bar.prototype.update=function(prog){this.progress=prog;return this.render();};Bar.prototype.destroy=function(){try{this.getElement().parentNode.removeChild(this.getElement());}catch(_error){NoTargetError=_error;}
return this.el=void 0;};Bar.prototype.render=function(){var el,key,progressStr,transform,_j,_len1,_ref2;if(document.querySelector(options.target)==null){return false;}
el=this.getElement();transform="translate3d("+this.progress+"%, 0, 0)";_ref2=['webkitTransform','msTransform','transform'];for(_j=0,_len1=_ref2.length;_j<_len1;_j++){key=_ref2[_j];el.children[0].style[key]=transform;}
if(!this.lastRenderedProgress||this.lastRenderedProgress|0!==this.progress|0){el.children[0].setAttribute('data-progress-text',""+(this.progress|0)+"%");if(this.progress>=100){progressStr='99';}else{progressStr=this.progress<10?"0":"";progressStr+=this.progress|0;}
el.children[0].setAttribute('data-progress',""+progressStr);}
return this.lastRenderedProgress=this.progress;};Bar.prototype.done=function(){return this.progress>=100;};return Bar;})();Events=(function(){function Events(){this.bindings={};}
Events.prototype.trigger=function(name,val){var binding,_j,_len1,_ref2,_results;if(this.bindings[name]!=null){_ref2=this.bindings[name];_results=[];for(_j=0,_len1=_ref2.length;_j<_len1;_j++){binding=_ref2[_j];_results.push(binding.call(this,val));}
return _results;}};Events.prototype.on=function(name,fn){var _base;if((_base=this.bindings)[name]==null){_base[name]=[];}
return this.bindings[name].push(fn);};return Events;})();_XMLHttpRequest=window.XMLHttpRequest;_XDomainRequest=window.XDomainRequest;_WebSocket=window.WebSocket;extendNative=function(to,from){var e,key,_results;_results=[];for(key in from.prototype){try{if((to[key]==null)&&typeof from[key]!=='function'){if(typeof Object.defineProperty==='function'){_results.push(Object.defineProperty(to,key,{get:function(){return from.prototype[key];},configurable:true,enumerable:true}));}else{_results.push(to[key]=from.prototype[key]);}}else{_results.push(void 0);}}catch(_error){e=_error;}}
return _results;};ignoreStack=[];Pace.ignore=function(){var args,fn,ret;fn=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[];ignoreStack.unshift('ignore');ret=fn.apply(null,args);ignoreStack.shift();return ret;};Pace.track=function(){var args,fn,ret;fn=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[];ignoreStack.unshift('track');ret=fn.apply(null,args);ignoreStack.shift();return ret;};shouldTrack=function(method){var _ref2;if(method==null){method='GET';}
if(ignoreStack[0]==='track'){return'force';}
if(!ignoreStack.length&&options.ajax){if(method==='socket'&&options.ajax.trackWebSockets){return true;}else if(_ref2=method.toUpperCase(),__indexOf.call(options.ajax.trackMethods,_ref2)>=0){return true;}}
return false;};RequestIntercept=(function(_super){__extends(RequestIntercept,_super);function RequestIntercept(){var monitorXHR,_this=this;RequestIntercept.__super__.constructor.apply(this,arguments);monitorXHR=function(req){var _open;_open=req.open;return req.open=function(type,url,async){if(shouldTrack(type)){_this.trigger('request',{type:type,url:url,request:req});}
return _open.apply(req,arguments);};};window.XMLHttpRequest=function(flags){var req;req=new _XMLHttpRequest(flags);monitorXHR(req);return req;};try{extendNative(window.XMLHttpRequest,_XMLHttpRequest);}catch(_error){}
if(_XDomainRequest!=null){window.XDomainRequest=function(){var req;req=new _XDomainRequest;monitorXHR(req);return req;};try{extendNative(window.XDomainRequest,_XDomainRequest);}catch(_error){}}
if((_WebSocket!=null)&&options.ajax.trackWebSockets){window.WebSocket=function(url,protocols){var req;if(protocols!=null){req=new _WebSocket(url,protocols);}else{req=new _WebSocket(url);}
if(shouldTrack('socket')){_this.trigger('request',{type:'socket',url:url,protocols:protocols,request:req});}
return req;};try{extendNative(window.WebSocket,_WebSocket);}catch(_error){}}}
return RequestIntercept;})(Events);_intercept=null;getIntercept=function(){if(_intercept==null){_intercept=new RequestIntercept;}
return _intercept;};shouldIgnoreURL=function(url){var pattern,_j,_len1,_ref2;_ref2=options.ajax.ignoreURLs;for(_j=0,_len1=_ref2.length;_j<_len1;_j++){pattern=_ref2[_j];if(typeof pattern==='string'){if(url.indexOf(pattern)!==-1){return true;}}else{if(pattern.test(url)){return true;}}}
return false;};getIntercept().on('request',function(_arg){var after,args,request,type,url;type=_arg.type,request=_arg.request,url=_arg.url;if(shouldIgnoreURL(url)){return;}
if(!Pace.running&&(options.restartOnRequestAfter!==false||shouldTrack(type)==='force')){args=arguments;after=options.restartOnRequestAfter||0;if(typeof after==='boolean'){after=0;}
return setTimeout(function(){var stillActive,_j,_len1,_ref2,_ref3,_results;if(type==='socket'){stillActive=request.readyState<2;}else{stillActive=(0<(_ref2=request.readyState)&&_ref2<4);}
if(stillActive){Pace.restart();_ref3=Pace.sources;_results=[];for(_j=0,_len1=_ref3.length;_j<_len1;_j++){source=_ref3[_j];if(source instanceof AjaxMonitor){source.watch.apply(source,args);break;}else{_results.push(void 0);}}
return _results;}},after);}});AjaxMonitor=(function(){function AjaxMonitor(){var _this=this;this.elements=[];getIntercept().on('request',function(){return _this.watch.apply(_this,arguments);});}
AjaxMonitor.prototype.watch=function(_arg){var request,tracker,type,url;type=_arg.type,request=_arg.request,url=_arg.url;if(shouldIgnoreURL(url)){return;}
if(type==='socket'){tracker=new SocketRequestTracker(request);}else{tracker=new XHRRequestTracker(request);}
return this.elements.push(tracker);};return AjaxMonitor;})();XHRRequestTracker=(function(){function XHRRequestTracker(request){var event,size,_j,_len1,_onreadystatechange,_ref2,_this=this;this.progress=0;if(window.ProgressEvent!=null){size=null;request.addEventListener('progress',function(evt){if(evt.lengthComputable){return _this.progress=100*evt.loaded / evt.total;}else{return _this.progress=_this.progress+(100-_this.progress)/ 2;}},false);_ref2=['load','abort','timeout','error'];for(_j=0,_len1=_ref2.length;_j<_len1;_j++){event=_ref2[_j];request.addEventListener(event,function(){return _this.progress=100;},false);}}else{_onreadystatechange=request.onreadystatechange;request.onreadystatechange=function(){var _ref3;if((_ref3=request.readyState)===0||_ref3===4){_this.progress=100;}else if(request.readyState===3){_this.progress=50;}
return typeof _onreadystatechange==="function"?_onreadystatechange.apply(null,arguments):void 0;};}}
return XHRRequestTracker;})();SocketRequestTracker=(function(){function SocketRequestTracker(request){var event,_j,_len1,_ref2,_this=this;this.progress=0;_ref2=['error','open'];for(_j=0,_len1=_ref2.length;_j<_len1;_j++){event=_ref2[_j];request.addEventListener(event,function(){return _this.progress=100;},false);}}
return SocketRequestTracker;})();ElementMonitor=(function(){function ElementMonitor(options){var selector,_j,_len1,_ref2;if(options==null){options={};}
this.elements=[];if(options.selectors==null){options.selectors=[];}
_ref2=options.selectors;for(_j=0,_len1=_ref2.length;_j<_len1;_j++){selector=_ref2[_j];this.elements.push(new ElementTracker(selector));}}
return ElementMonitor;})();ElementTracker=(function(){function ElementTracker(selector){this.selector=selector;this.progress=0;this.check();}
ElementTracker.prototype.check=function(){var _this=this;if(document.querySelector(this.selector)){return this.done();}else{return setTimeout((function(){return _this.check();}),options.elements.checkInterval);}};ElementTracker.prototype.done=function(){return this.progress=100;};return ElementTracker;})();DocumentMonitor=(function(){DocumentMonitor.prototype.states={loading:0,interactive:50,complete:100};function DocumentMonitor(){var _onreadystatechange,_ref2,_this=this;this.progress=(_ref2=this.states[document.readyState])!=null?_ref2:100;_onreadystatechange=document.onreadystatechange;document.onreadystatechange=function(){if(_this.states[document.readyState]!=null){_this.progress=_this.states[document.readyState];}
return typeof _onreadystatechange==="function"?_onreadystatechange.apply(null,arguments):void 0;};}
return DocumentMonitor;})();EventLagMonitor=(function(){function EventLagMonitor(){var avg,interval,last,points,samples,_this=this;this.progress=0;avg=0;samples=[];points=0;last=now();interval=setInterval(function(){var diff;diff=now()-last-50;last=now();samples.push(diff);if(samples.length>options.eventLag.sampleCount){samples.shift();}
avg=avgAmplitude(samples);if(++points>=options.eventLag.minSamples&&avg<options.eventLag.lagThreshold){_this.progress=100;return clearInterval(interval);}else{return _this.progress=100*(3 /(avg+3));}},50);}
return EventLagMonitor;})();Scaler=(function(){function Scaler(source){this.source=source;this.last=this.sinceLastUpdate=0;this.rate=options.initialRate;this.catchup=0;this.progress=this.lastProgress=0;if(this.source!=null){this.progress=result(this.source,'progress');}}
Scaler.prototype.tick=function(frameTime,val){var scaling;if(val==null){val=result(this.source,'progress');}
if(val>=100){this.done=true;}
if(val===this.last){this.sinceLastUpdate+=frameTime;}else{if(this.sinceLastUpdate){this.rate=(val-this.last)/ this.sinceLastUpdate;}
this.catchup=(val-this.progress)/ options.catchupTime;this.sinceLastUpdate=0;this.last=val;}
if(val>this.progress){this.progress+=this.catchup*frameTime;}
scaling=1-Math.pow(this.progress / 100,options.easeFactor);this.progress+=scaling*this.rate*frameTime;this.progress=Math.min(this.lastProgress+options.maxProgressPerFrame,this.progress);this.progress=Math.max(0,this.progress);this.progress=Math.min(100,this.progress);this.lastProgress=this.progress;return this.progress;};return Scaler;})();sources=null;scalers=null;bar=null;uniScaler=null;animation=null;cancelAnimation=null;Pace.running=false;handlePushState=function(){if(options.restartOnPushState){return Pace.restart();}};if(window.history.pushState!=null){_pushState=window.history.pushState;window.history.pushState=function(){handlePushState();return _pushState.apply(window.history,arguments);};}
if(window.history.replaceState!=null){_replaceState=window.history.replaceState;window.history.replaceState=function(){handlePushState();return _replaceState.apply(window.history,arguments);};}
SOURCE_KEYS={ajax:AjaxMonitor,elements:ElementMonitor,document:DocumentMonitor,eventLag:EventLagMonitor};(init=function(){var type,_j,_k,_len1,_len2,_ref2,_ref3,_ref4;Pace.sources=sources=[];_ref2=['ajax','elements','document','eventLag'];for(_j=0,_len1=_ref2.length;_j<_len1;_j++){type=_ref2[_j];if(options[type]!==false){sources.push(new SOURCE_KEYS[type](options[type]));}}
_ref4=(_ref3=options.extraSources)!=null?_ref3:[];for(_k=0,_len2=_ref4.length;_k<_len2;_k++){source=_ref4[_k];sources.push(new source(options));}
Pace.bar=bar=new Bar;scalers=[];return uniScaler=new Scaler;})();Pace.stop=function(){Pace.trigger('stop');Pace.running=false;bar.destroy();cancelAnimation=true;if(animation!=null){if(typeof cancelAnimationFrame==="function"){cancelAnimationFrame(animation);}
animation=null;}
return init();};Pace.restart=function(){Pace.trigger('restart');Pace.stop();return Pace.start();};Pace.go=function(){var start;Pace.running=true;bar.render();start=now();cancelAnimation=false;return animation=runAnimation(function(frameTime,enqueueNextFrame){var avg,count,done,element,elements,i,j,remaining,scaler,scalerList,sum,_j,_k,_len1,_len2,_ref2;remaining=100-bar.progress;count=sum=0;done=true;for(i=_j=0,_len1=sources.length;_j<_len1;i=++_j){source=sources[i];scalerList=scalers[i]!=null?scalers[i]:scalers[i]=[];elements=(_ref2=source.elements)!=null?_ref2:[source];for(j=_k=0,_len2=elements.length;_k<_len2;j=++_k){element=elements[j];scaler=scalerList[j]!=null?scalerList[j]:scalerList[j]=new Scaler(element);done&=scaler.done;if(scaler.done){continue;}
count++;sum+=scaler.tick(frameTime);}}
avg=sum / count;bar.update(uniScaler.tick(frameTime,avg));if(bar.done()||done||cancelAnimation){bar.update(100);Pace.trigger('done');return setTimeout(function(){bar.finish();Pace.running=false;return Pace.trigger('hide');},Math.max(options.ghostTime,Math.max(options.minTime-(now()-start),0)));}else{return enqueueNextFrame();}});};Pace.start=function(_options){extend(options,_options);Pace.running=true;try{bar.render();}catch(_error){NoTargetError=_error;}
if(!document.querySelector('.pace')){return setTimeout(Pace.start,50);}else{Pace.trigger('start');return Pace.go();}};if(typeof define==='function'&&define.amd){define(['pace'],function(){return Pace;});}else if(typeof exports==='object'){module.exports=Pace;}else{if(options.startOnPageLoad){Pace.start();}}}).call(this);(function(p,t,h){function u(a,b,d){a.addEventListener?a.addEventListener(b,d,!1):a.attachEvent("on"+b,d)}function y(a){if("keypress"==a.type){var b=String.fromCharCode(a.which);a.shiftKey||(b=b.toLowerCase());return b}return m[a.which]?m[a.which]:q[a.which]?q[a.which]:String.fromCharCode(a.which).toLowerCase()}function E(a){var b=[];a.shiftKey&&b.push("shift");a.altKey&&b.push("alt");a.ctrlKey&&b.push("ctrl");a.metaKey&&b.push("meta");return b}function v(a){return"shift"==a||"ctrl"==a||"alt"==a||"meta"==a}function z(a,b){var d,e=[];var c=a;"+"===c?c=["+"]:(c=c.replace(/\+{2}/g,"+plus"),c=c.split("+"));for(d=0;d<c.length;++d){var k=c[d];A[k]&&(k=A[k]);b&&"keypress"!=b&&B[k]&&(k=B[k],e.push("shift"));v(k)&&e.push(k)}c=k;d=b;if(!d){if(!n){n={};for(var h in m)95<h&&112>h||m.hasOwnProperty(h)&&(n[m[h]]=h)}d=n[c]?"keydown":"keypress"}"keypress"==d&&e.length&&(d="keydown");return{key:k,modifiers:e,action:d}}function C(a,b){return null===a||a===t?!1:a===b?!0:C(a.parentNode,b)}function e(a){function b(a){a=a||{};var b=!1,l;for(l in n)a[l]?b=!0:n[l]=0;b||(w=!1)}function d(a,b,r,g,F,e){var l,D=[],h=r.type;if(!f._callbacks[a])return[];"keyup"==h&&v(a)&&(b=[a]);for(l=0;l<f._callbacks[a].length;++l){var d=f._callbacks[a][l];if((g||!d.seq||n[d.seq]==d.level)&&h==d.action){var c;(c="keypress"==h&&!r.metaKey&&!r.ctrlKey)||(c=d.modifiers,c=b.sort().join(",")===c.sort().join(","));c&&(c=g&&d.seq==g&&d.level==e,(!g&&d.combo==F||c)&&f._callbacks[a].splice(l,1),D.push(d))}}return D}function h(a,b,d,g){f.stopCallback(b,b.target||b.srcElement,d,g)||!1!==a(b,d)||(b.preventDefault?b.preventDefault():b.returnValue=!1,b.stopPropagation?b.stopPropagation():b.cancelBubble=!0)}function c(a){"number"!==typeof a.which&&(a.which=a.keyCode);var b=y(a);b&&("keyup"==a.type&&x===b?x=!1:f.handleKey(b,E(a),a))}function k(a,d,r,g){function l(d){return function(){w=d;++n[a];clearTimeout(p);p=setTimeout(b,1E3)}}function e(d){h(r,d,a);"keyup"!==g&&(x=y(d));setTimeout(b,10)}for(var c=n[a]=0;c<d.length;++c){var f=c+1===d.length?e:l(g||z(d[c+1]).action);m(d[c],f,g,a,c)}}function m(a,b,c,g,e){f._directMap[a+":"+c]=b;a=a.replace(/\s+/g," ");var h=a.split(" ");1<h.length?k(a,h,b,c):(c=z(a,c),f._callbacks[c.key]=f._callbacks[c.key]||[],d(c.key,c.modifiers,{type:c.action},g,a,e),f._callbacks[c.key][g?"unshift":"push"]({callback:b,modifiers:c.modifiers,action:c.action,seq:g,level:e,combo:a}))}var f=this;a=a||t;if(!(f instanceof e))return new e(a);f.target=a;f._callbacks={};f._directMap={};var n={},p,x=!1,q=!1,w=!1;f._handleKey=function(a,c,e){var g=d(a,c,e),f;c={};var l=0,k=!1;for(f=0;f<g.length;++f)g[f].seq&&(l=Math.max(l,g[f].level));for(f=0;f<g.length;++f)g[f].seq?g[f].level==l&&(k=!0,c[g[f].seq]=1,h(g[f].callback,e,g[f].combo,g[f].seq)):k||h(g[f].callback,e,g[f].combo);g="keypress"==e.type&&q;e.type!=w||v(a)||g||b(c);q=k&&"keydown"==e.type};f._bindMultiple=function(a,b,c){for(var d=0;d<a.length;++d)m(a[d],b,c)};u(a,"keypress",c);u(a,"keydown",c);u(a,"keyup",c)}if(p){var m={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},q={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},B={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},A={option:"alt",command:"meta","return":"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},n;for(h=1;20>h;++h)m[111+h]="f"+h;for(h=0;9>=h;++h)m[h+96]=h.toString();e.prototype.bind=function(a,b,d){a=a instanceof Array?a:[a];this._bindMultiple.call(this,a,b,d);return this};e.prototype.unbind=function(a,b){return this.bind.call(this,a,function(){},b)};e.prototype.trigger=function(a,b){if(this._directMap[a+":"+b])this._directMap[a+":"+b]({},a);return this};e.prototype.reset=function(){this._callbacks={};this._directMap={};return this};e.prototype.stopCallback=function(a,b){return-1<(" "+b.className+" ").indexOf(" mousetrap ")||C(b,this.target)?!1:"INPUT"==b.tagName||"SELECT"==b.tagName||"TEXTAREA"==b.tagName||b.isContentEditable};e.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)};e.addKeycodes=function(a){for(var b in a)a.hasOwnProperty(b)&&(m[b]=a[b]);n=null};e.init=function(){var a=e(t),b;for(b in a)"_"!==b.charAt(0)&&(e[b]=function(b){return function(){return a[b].apply(a,arguments)}}(b))};e.init();p.Mousetrap=e;"undefined"!==typeof module&&module.exports&&(module.exports=e);"function"===typeof define&&define.amd&&define(function(){return e})}})("undefined"!==typeof window?window:null,"undefined"!==typeof window?document:null);function PusherChatWidget(pusher,options){PusherChatWidget.instances.push(this);var self=this;this._pusher=pusher;this._autoScroll=true;options=options||{};this.settings=$.extend({maxItems:50,chatEndPoint:'',channelName:'',chatContainer:document.body,currentUser:null,currentChatSessionID:null,lastEventTime:null,lastTimestamp:null,addMemberCallback:null,removeMemberCallback:null,initialMemberCountCallback:null,messageCallback:null,fileCallback:null,timestampCallback:null,chatSessionChangeCallback:null,sessionEndCallback:null,debug:true,timezone_offset:null},options);if(this.settings.debug&&!Pusher.log){Pusher.log=function(msg){if(console&&console.log){console.log(msg);}}}
this._lastActivity=this.settings.lastEventTime?new Date(this.settings.lastEventTime):this._getCurDate();this._lastTimestamp=this.settings.lastTimestamp?new Date(this.settings.lastTimestamp):this._getCurDate();this._chatSessionID=this.settings.currentChatSessionID;this._chatChannel=this._pusher.subscribe(this.settings.channelName);this._chatChannel.bind('message',function(data){self._send_message(data);});this._chatChannel.bind('file',function(data){if(typeof self.settings.fileCallback=='function'){self.settings.fileCallback(data);}
self._eventReceived('file',data);});this._chatChannel.bind('session_end',function(data){if(typeof self.settings.sessionEndCallback=='function'){self.settings.sessionEndCallback(data);}});this._chatChannel.bind('pusher:subscription_succeeded',function(members){if(typeof self.settings.initialMemberCountCallback=='function'){self.settings.initialMemberCountCallback(members.count);}
self._eventReceived('sign_in',members.me);members.each(function(member){if(typeof self.settings.addMemberCallback=='function'){self.settings.addMemberCallback(member.id,member.info);}});});this._chatChannel.bind('pusher:member_added',function(member){self._eventReceived('sign_in',member);if(typeof self.settings.addMemberCallback=='function'){self.settings.addMemberCallback(member.id,member.info);}});this._chatChannel.bind('pusher:member_removed',function(member){self._eventReceived('sign_out',member);if(typeof self.settings.removeMemberCallback=='function'){self.settings.removeMemberCallback(member.id,member.info);}});this._chatChannel.bind('delete_event',function(data){self._messagesEl.find('tr.event_'+data.id).trigger('chat_event_deleted.populi');});var chat_container=$(this.settings.appendTo);var existing_table=chat_container.find('div.chat_wrapper');this._widget=existing_table.length?existing_table:PusherChatWidget._createHTML(this.settings.appendTo);this._messageInputEl=this._widget.find('textarea');this._messagesEl=this._widget.find('.js-chat-events-tbody');this._sendButton=this._widget.find('.js-chat-compose-send');this._scrollEl=this._widget.find('.chat_table_wrapper');this._uploader=this._widget.find('.js-uploader-container');pusher.connection.bind('failed',function(){chat_container.trigger('connection_failed.chat');});pusher.connection.bind('unavailable',function(){chat_container.trigger('connection_unavailable.chat');});this._itemCount=$('.chat_event',this._messagesEl).length;this._sendButton.click(function(){self._sendChatButtonClicked();});window.setTimeout(function(){PusherChatWidget._scroll_down(self,true);},500);var _scrollEl=this._scrollEl;_scrollEl.scroll(function(){var el=_scrollEl.get(0);var scrollableHeight=(el.scrollHeight-_scrollEl.height());self._autoScroll=(scrollableHeight===_scrollEl.scrollTop());});};PusherChatWidget.instances=[];PusherChatWidget.prototype._eventReceived=function(type,data){var self=this;if(this._itemCount===0){this._messagesEl.html('');}
var rows=[];switch(type){case'message':case'file':case'image':rows.push($(data.content));break;case'sign_in':var last_signout=this._messagesEl.find('tr.chat_sign_out[data-user-id="'+data.id.toString()+'"]').last();var time_now=Math.round(self._getCurDate().getTime()/ 1000);if(time_now<(last_signout.data('timestamp')+60)){last_signout.remove();var last_row=this._messagesEl.find('tr:last');if(last_row.hasClass('chat_timestamp')){last_row.remove();}}else{rows.push(self._buildSignInHtml(data));}
break;case'sign_out':rows.push(self._buildSignOutHtml(data));break;}
if(rows.length>0){if(typeof data.timestamp!='undefined'){var timestamp=Date.parse(data.timestamp);}else{var timestamp=self._getCurDate();}
if(this._autoScroll){$.each(rows,function(index,row){row.find('img').each(function(){$(this).load(function(){PusherChatWidget._scroll_down(self,true);});});});}
if((data.chat_session_id&&self._chatSessionID)&&data.chat_session_id!=self._chatSessionID){self._chatSessionID=data.chat_session_id;if(typeof self.settings.chatSessionChangeCallback=='function'){self.settings.chatSessionChangeCallback(data);}}
var last_activity_threshold=new Date(this._lastActivity.getTime()).add(5).minutes();var last_timestamp_threshold=new Date(this._lastTimestamp.getTime()).add(5).minutes();if(timestamp>last_activity_threshold||timestamp>last_timestamp_threshold){this._lastTimestamp=timestamp;rows.unshift(self._buildTimestampHtml(timestamp));}
for(var i=0;i<rows.length;i++){var row=rows[i];this._messagesEl.append(row);row.slideDown(function(){PusherChatWidget._scroll_down(self);});++this._itemCount;if(this._itemCount>this.settings.maxItems){this._scrollEl.find('.show_earlier_messages').show();this._messagesEl.children().slice(0,(this._itemCount-this.settings.maxItems)).remove();this._itemCount=this.settings.maxItems;}}
this._lastActivity=timestamp;}else{Pusher.log("Unknown event type: "+type+" or no event added.");}};PusherChatWidget.prototype._sendChatButtonClicked=function(){if(!this._sendButton.hasClass('disabled')){var self=this;var message=$.trim(this._messageInputEl.val());var $file=this._uploader.find('.js-uploader-queue-file');if(!message.length&&!$file.length){this._messageInputEl.focus();return;}
var chatInfo={content:message};if(this._uploader.find('.js-is-uploading').length){this._uploader.one('uploader_complete',function(){self._sendChatMessage(chatInfo);});}
else{this._sendChatMessage(chatInfo);}}};PusherChatWidget.prototype._send_message=function(data){var self=this;if(!$('.event_'+data.id).length){if(typeof self.settings.messageCallback=='function'){self.settings.messageCallback(data);}
self._eventReceived('message',data);}};PusherChatWidget.prototype._sendChatMessage=function(message_data){var self=this;this._messageInputEl.prop('readOnly',true);this._sendButton.addClass('disabled');this._sendButton.find('.js-chat-message-send-text').hide();this._sendButton.find('.js-chat-message-sending').show();var $file_inputs=this._uploader.find('input.js-uploader-file-hidden');if($file_inputs.length){var file_info_array=$file_inputs.serializeArray();$.each(file_info_array,function(){message_data[this.name]=this.value});this._uploader.find('.js-uploader-remove-file').hide();}
$.ajax({url:self.settings.chatEndPoint+'/create',type:'post',data:message_data,complete:function(xhr,status){var uploader_id=self._uploader.data('uploader-id');window[uploader_id].splice();self._messageInputEl.prop('readOnly',false);self._sendButton.removeClass('disabled');self._sendButton.find('.js-chat-message-send-text').show();self._sendButton.find('.js-chat-message-sending').hide();if(xhr.status===200){self._messageInputEl.val('');if(xhr.responseText.length){json_response=$.parseJSON(xhr.responseText);self._send_message(json_response);$.ajax({url:self.settings.chatEndPoint+'/send_to_pusher',type:'post',data:{chat_event_id:json_response.id},complete:function(xhr,status){Pusher.log('Chat message sent. Result: '+status+' : '+xhr.responseText);}});}}}});};PusherChatWidget._createHTML=function(appendTo){var html=''+'<div class="chat_wrapper">'+'<div class="chat_table_wrapper">'+'<table class="chat">'+'<tbody class="js-chat-events-tbody"></tbody>'+'</table>'+'</div>'+'<div class="js-chat-compose chat-compose">'+'<textarea name="message" placeholder="Your message here..."></textarea>'+'<button class="js-chat-compose-send">Send</button>'+'</div>'+'</div>';var widget=$(html);$('textarea',widget).keydown(PusherChatWidget.on_enter_keydown);$(appendTo).append(widget);return widget;};PusherChatWidget._scroll_down=function(self,force){force=typeof force=='undefined'?false:force;if(self._autoScroll||force){self._scrollEl[0].scrollTop=self._scrollEl[0].scrollHeight;}}
PusherChatWidget.on_enter_keydown=function(e){if(e.keyCode==13){e.preventDefault();var send_button=$(this).closest('.js-chat-compose').find('.js-chat-compose-send');if(!send_button.is(':disabled')){send_button.click();}}}
PusherChatWidget.prototype._buildSignInHtml=function(member){var event_timestamp=Math.round(this._getCurDate().getTime()/ 1000);var tr=$('<tr class="chat_event chat_sign_in" style="display:none;" data-user-id="'+member.id+'" data-timestamp="'+event_timestamp+'"></tr>');var td=$('<td class="chat_event_actor"></td>');td.attr('title',member.info.name);td.html(member.info.short_name);tr.append(td);var td=$('<td></td>');td.text('entered the room');tr.append(td);return tr;};PusherChatWidget.prototype._buildSignOutHtml=function(member){var event_timestamp=Math.round(this._getCurDate().getTime()/ 1000);var tr=$('<tr class="chat_event chat_sign_out" style="display:none;" data-user-id="'+member.id+'" data-timestamp="'+event_timestamp+'"></tr>');var td=$('<td class="chat_event_actor"></td>');td.attr('title',member.info.name);td.html(member.info.short_name);tr.append(td);var td=$('<td></td>');td.text('left the room');tr.append(td);return tr;};PusherChatWidget.prototype._buildTimestampHtml=function(timestamp){var tr=$('<tr class="chat_event chat_timestamp" style="display:none;"><td class="chat_event_date"></td></tr>');var timestamp_td=$('<td class="chat_event_time"></td>');timestamp_td.text(timestamp.toString('h:mm tt').toLowerCase());tr.append(timestamp_td);return tr;};PusherChatWidget.prototype._getCurDate=function(){if(this.settings.timezone_offset){var date=new Date();var utc_time=date.getTime()+(date.getTimezoneOffset()*60000);var cur_date=new Date(utc_time+(3600000*this.settings.timezone_offset));}
else{var cur_date=new Date();}
return cur_date;};(function(){var isDebugMode=false;var isCanvasSupported=!!document.createElement("canvas").getContext;var defaultOptions={Chart:{width:"100%",height:400,zoomEnabled:false,backgroundColor:"white",theme:"theme1",animationEnabled:false,animationDuration:600,colorSet:"colorSet1",culture:"en",creditHref:"",creditText:"CanvasJS.com",interactivityEnabled:true,exportEnabled:false,exportFileName:"Chart"},Title:{padding:0,text:null,verticalAlign:"top",horizontalAlign:"center",fontSize:20,fontFamily:"PopuLato, 'Helvetica Neue', Helvetica, Arial, sans-serif",fontWeight:"bold",fontColor:"#222222",fontStyle:"normal",borderThickness:0,borderColor:"black",cornerRadius:0,backgroundColor:null,margin:10},Legend:{name:null,verticalAlign:"center",horizontalAlign:"right",fontSize:14,fontFamily:"PopuLato, 'Helvetica Neue', Helvetica, Arial, sans-serif",fontWeight:"normal",fontColor:"black",fontStyle:"normal",cursor:null,itemmouseover:null,itemmouseout:null,itemmousemove:null,itemclick:null},ToolTip:{enabled:true,borderColor:null,shared:false,animationEnabled:true,content:null},Axis:{minimum:null,maximum:null,interval:null,intervalType:null,title:null,titleFontColor:"#222222",titleFontSize:20,titleFontFamily:"PopuLato, 'Helvetica Neue', Helvetica, Arial, sans-serif",titleFontWeight:"normal",titleFontStyle:"normal",labelAngle:0,labelFontFamily:"PopuLato, 'Helvetica Neue', Helvetica, Arial, sans-serif",labelFontColor:"#777777",labelFontSize:18,labelFontWeight:"normal",labelFontStyle:"normal",labelAutoFit:false,labelWrap:true,labelMaxWidth:null,prefix:"",suffix:"",includeZero:true,tickLength:5,tickColor:"#cccccc",tickThickness:1,lineColor:"#cccccc",lineThickness:1,gridColor:"#cccccc",gridThickness:0,interlacedColor:null,valueFormatString:null,labelFormatter:null,margin:2,stripLines:[]},StripLine:{value:null,startValue:null,endValue:null,color:"orange",thickness:2,label:"",labelBackgroundColor:"#EEEEEE",labelFontFamily:"PopuLato, 'Helvetica Neue', Helvetica, Arial, sans-serif",labelFontColor:"orange",labelFontSize:12,labelFontWeight:"normal",labelFontStyle:"normal"},DataSeries:{name:null,dataPoints:null,label:"",bevelEnabled:false,cursor:null,indexLabel:"",indexLabelPlacement:"auto",indexLabelOrientation:"horizontal",indexLabelFontColor:"black",indexLabelFontSize:12,indexLabelFontStyle:"normal",indexLabelFontFamily:"PopuLato, 'Helvetica Neue', Helvetica, Arial, sans-serif",indexLabelFontWeight:"normal",indexLabelBackgroundColor:null,indexLabelLineColor:null,indexLabelLineThickness:1,indexLabelMaxWidth:null,indexLabelWrap:true,lineThickness:2,color:null,risingColor:"white",fillOpacity:null,startAngle:0,type:"column",xValueType:"number",axisYType:"primary",xValueFormatString:null,yValueFormatString:null,zValueFormatString:null,percentFormatString:null,showInLegend:null,legendMarkerType:null,legendMarkerColor:null,legendText:null,legendMarkerBorderColor:null,legendMarkerBorderThickness:null,markerType:"circle",markerColor:null,markerSize:null,markerBorderColor:null,markerBorderThickness:null,mouseover:null,mouseout:null,mousemove:null,click:null,toolTipContent:null,visible:true},CultureInfo:{decimalSeparator:".",digitGroupSeparator:",",zoomText:"Zoom",panText:"Pan",resetText:"Reset",menuText:"More Options",saveJPGText:"Save as JPG",savePNGText:"Save as PNG",days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},TextBlock:{x:0,y:0,width:null,height:null,maxWidth:null,maxHeight:null,padding:0,angle:0,text:"",horizontalAlign:"center",fontSize:12,fontFamily:"PopuLato, 'Helvetica Neue', Helvetica, Arial, sans-serif",fontWeight:"normal",fontColor:"black",fontStyle:"normal",borderThickness:0,borderColor:"black",cornerRadius:0,backgroundColor:null,textBaseline:"top"}};var cultures={"en":{}};var colorSets={"colorSet1":['#3366CC','#DC3912','#FF9900','#109618','#990099','#3B3EAC','#0099C6','#DD4477','#66AA00','#B82E2E','#316395','#994499','#22AA99','#AAAA11','#6633CC','#E67300','#8B0707','#329262','#5574A6','#3B3EAC',]};var themes={"theme1":{Legend:{verticalAlign:"bottom",horizontalAlign:"center",},DataSeries:{indexLabelFontSize:16,indexLabelLineThickness:1}}}
var constants={numberDuration:1,yearDuration:1000*60*60*24*364,monthDuration:1000*60*60*24*30,weekDuration:1000*60*60*24*7,dayDuration:1000*60*60*24,hourDuration:1000*60*60,minuteDuration:1000*60,secondDuration:1000,millisecondDuration:1,dayOfWeekFromInt:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]};function extend(Child,Parent){Child.prototype=inherit(Parent.prototype);Child.prototype.constructor=Child;Child.parent=Parent.prototype;}
function inherit(proto){function F(){}
F.prototype=proto;return new F();}
function addToDateTime(dateTime,num,type){if(type==="millisecond")
dateTime.setMilliseconds(dateTime.getMilliseconds()+1*num);else if(type==="second")
dateTime.setSeconds(dateTime.getSeconds()+1*num);else if(type==="minute")
dateTime.setMinutes(dateTime.getMinutes()+1*num);else if(type==="hour")
dateTime.setHours(dateTime.getHours()+1*num);else if(type==="day")
dateTime.setDate(dateTime.getDate()+1*num);else if(type==="week")
dateTime.setDate(dateTime.getDate()+7*num);else if(type==="month")
dateTime.setMonth(dateTime.getMonth()+1*num);else if(type==="year")
dateTime.setFullYear(dateTime.getFullYear()+1*num);return dateTime;}
function convertToNumber(num,type){return constants[type+"Duration"]*num;}
function pad(value,length){var isNegative=false;if(value<0){isNegative=true;value*=-1;}
value=""+value;length=!length?1:length;while(value.length<length)value="0"+value;return isNegative?"-"+value:value;}
function trimString(str){if(!str)
return str;str=str.replace(/^\s\s*/,'');var ws=/\s/;var i=str.length;while(ws.test(str.charAt(--i))){}
return str.slice(0,i+1);}
function extendCtx(context){context.roundRect=function(x,y,width,height,radius,borderThickness,backgroundColor,borderColor){if(backgroundColor){this.fillStyle=backgroundColor;}
if(borderColor){this.strokeStyle=borderColor;}
if(typeof radius==="undefined"){radius=5;}
this.lineWidth=borderThickness;this.beginPath();this.moveTo(x+radius,y);this.lineTo(x+width-radius,y);this.quadraticCurveTo(x+width,y,x+width,y+radius);this.lineTo(x+width,y+height-radius);this.quadraticCurveTo(x+width,y+height,x+width-radius,y+height);this.lineTo(x+radius,y+height);this.quadraticCurveTo(x,y+height,x,y+height-radius);this.lineTo(x,y+radius);this.quadraticCurveTo(x,y,x+radius,y);this.closePath();if(backgroundColor){this.fill();}
if(borderColor&&borderThickness>0){this.stroke();}};}
function compareNumbers(a,b){return a-b;}
function compareDataPointX(dataPoint1,dataPoint2){return dataPoint1.x-dataPoint2.x;}
function intToHexColorString(num){var r=((num&0xFF0000)>>16).toString(16);var g=((num&0x00FF00)>>8).toString(16);var b=((num&0x0000FF)>>0).toString(16);r=r.length<2?"0"+r:r;g=g.length<2?"0"+g:g;b=b.length<2?"0"+b:b;return"#"+r+g+b;}
function RGBToInt(r,g,b){var num=(r<<16)|(g<<8)|(b);return num;}
function intToRGB(num){var rgb=[];var r=((num&0xFF0000)>>16);var g=((num&0x00FF00)>>8);var b=((num&0x0000FF)>>0);rgb[0]=r;rgb[1]=g;rgb[2]=b;return rgb;}
var fontHeightInPixels={};var textMeasureEl=null;function getFontHeightInPixels(fontFamily,fontSize,fontWeight){fontWeight=fontWeight||"normal";var entry=fontFamily+"_"+fontSize+"_"+fontWeight;var height=fontHeightInPixels[entry];if(isNaN(height)){try{var style="position:absolute; left:0px; top:-20000px; padding:0px;margin:0px;border:none;white-space:pre;line-height:normal;"+"font-family:"+fontFamily+"; "+"font-size:"+fontSize+"px; font-weight:"+fontWeight+";";if(!textMeasureEl){var body=document.body;textMeasureEl=document.createElement("span");textMeasureEl.innerHTML="";var textNode=document.createTextNode("Mpgyi");textMeasureEl.appendChild(textNode);body.appendChild(textMeasureEl);}
textMeasureEl.style.display="";textMeasureEl.setAttribute("style",style);height=Math.round(textMeasureEl.offsetHeight);textMeasureEl.style.display="none";}
catch(e){height=Math.ceil(fontSize*1.1);}
height=Math.max(height,fontSize);fontHeightInPixels[entry]=height;}
return height;}
function addEvent(obj,eventType,fn,useCapture){if(obj.addEventListener){obj.addEventListener(eventType,fn,useCapture||false);}
else if(obj.attachEvent){obj.attachEvent("on"+eventType,function(e){e=e||window.event;e.preventDefault=e.preventDefault||function(){e.returnValue=false;};e.stopPropagation=e.stopPropagation||function(){e.cancelBubble=true;};fn.call(obj,e);});}else
return false;}
var dateFormat=function(){var reg=/D{1,4}|M{1,4}|Y{1,4}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|f{1,3}|t{1,2}|T{1,2}|K|z{1,3}|"[^"]*"|'[^']*'/g;var defDays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];var defShortDays=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];var defMonths=["January","February","March","April","May","June","July","August","September","October","November","December"];var defShortMonths=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var timezone=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g;var timezoneClip=/[^-+\dA-Z]/g;return function(dt,formatString,cultureInfo){var days=cultureInfo?cultureInfo.days:defDays;var months=cultureInfo?cultureInfo.months:defMonths;var shortDays=cultureInfo?cultureInfo.shortDays:defShortDays;var shortMonths=cultureInfo?cultureInfo.shortMonths:defShortMonths;var result="";var utc=false;dt=dt&&dt.getTime?dt:dt?new Date(dt):new Date;if(isNaN(dt))throw SyntaxError("invalid date");if(formatString.slice(0,4)==="UTC:"){formatString=formatString.slice(4);utc=true;}
var pre=utc?"getUTC":"get";var date=dt[pre+"Date"]();var day=dt[pre+"Day"]();var month=dt[pre+"Month"]();var year=dt[pre+"FullYear"]();var hours=dt[pre+"Hours"]();var minutes=dt[pre+"Minutes"]();var seconds=dt[pre+"Seconds"]();var milliseconds=dt[pre+"Milliseconds"]();var offset=utc?0:dt.getTimezoneOffset();result=formatString.replace(reg,function(key){switch(key){case"D":return date;case"DD":return pad(date,2);case"DDD":return shortDays[day];case"DDDD":return days[day];case"M":return month+1;case"MM":return pad(month+1,2);case"MMM":return shortMonths[month];case"MMMM":return months[month];case"Y":return parseInt(String(year).slice(-2));case"YY":return pad(String(year).slice(-2),2);case"YYY":return pad(String(year).slice(-3),3);case"YYYY":return pad(year,4);case"h":return hours%12||12;case"hh":return pad(hours%12||12,2);case"H":return hours;case"HH":return pad(hours,2);case"m":return minutes;case"mm":return pad(minutes,2);case"s":return seconds;case"ss":return pad(seconds,2);case"f":return String(milliseconds).slice(0,1);case"ff":return pad(String(milliseconds).slice(0,2),2);case"fff":return pad(String(milliseconds).slice(0,3),3);case"t":return hours<12?"a":"p";case"tt":return hours<12?"am":"pm";case"T":return hours<12?"A":"P";case"TT":return hours<12?"AM":"PM";case"K":return utc?"UTC":(String(dt).match(timezone)||[""]).pop().replace(timezoneClip,"");case"z":return(offset>0?"-":"+")+Math.floor(Math.abs(offset)/ 60);case"zz":return(offset>0?"-":"+")+pad(Math.floor(Math.abs(offset)/ 60),2);case"zzz":return(offset>0?"-":"+")+pad(Math.floor(Math.abs(offset)/ 60),2)+pad(Math.abs(offset)%60,2);default:return key.slice(1,key.length-1);}});return result;};}();var numberFormat=function(v,fs,cultureInfo){if(v===null)
return"";v=Number(v);var isNegative=v<0?true:false;if(isNegative)v*=-1;var decimalSeparator=cultureInfo?cultureInfo.decimalSeparator:".";var digitGroupSeparator=cultureInfo?cultureInfo.digitGroupSeparator:",";var vString="";fs=String(fs);var multiplier=1;var temp;var result="";var matches="";var decimalPosition=-1;var fsBeforeDecimal=[];var fsAfterDecimal=[];var noPhBeforeDecimal=0;var noPhAfterDecimal=0;var noComma=0;var isScientificNotation=false;var exponent=0;matches=fs.match(/"[^"]*"|'[^']*'|[eE][+-]*[0]+|[,]+[.]||./g);var match=null;for(var i=0;matches&&i<matches.length;i++){match=matches[i];if(match==="."&&decimalPosition<0){decimalPosition=i;continue;}else if(match==="%"){multiplier*=100;}else if(match===""){multiplier*=1000;continue;}else if(match[0]===","&&match[match.length-1]==="."){multiplier /=Math.pow(1000,match.length-1);decimalPosition=i+match.length-1;continue;}else if((match[0]==="E"||match[0]==="e")&&match[match.length-1]==="0"){isScientificNotation=true;}
if(decimalPosition<0){fsBeforeDecimal.push(match);if(match==="#"||match==="0")
noPhBeforeDecimal++;else if(match===",")
noComma++;}
else{fsAfterDecimal.push(match);if(match==="#"||match==="0")
noPhAfterDecimal++;}}
if(isScientificNotation){var integer=Math.floor(v);exponent=(integer===0?"":String(integer)).length-noPhBeforeDecimal;multiplier /=Math.pow(10,exponent);}
v*=multiplier;if(decimalPosition<0)
decimalPosition=i;vString=v.toFixed(noPhAfterDecimal);var split=vString.split(".");var vStringBeforeDecimal=(split[0]+"").split("");var vStringAfterDecimal=(split[1]+"").split("");if(vStringBeforeDecimal&&vStringBeforeDecimal[0]==="0")
vStringBeforeDecimal.shift();var noPhProcessed=0;var noDigitsAdded=0;var noCommaAdded=0;var commaDistance=0;var distanceFromLastComma=0;while(fsBeforeDecimal.length>0){match=fsBeforeDecimal.pop();if(match==="#"||match==="0"){noPhProcessed++;if(noPhProcessed===noPhBeforeDecimal){var digits=vStringBeforeDecimal;vStringBeforeDecimal=[];if(match==="0"){var toPad=noPhBeforeDecimal-noDigitsAdded-(digits?digits.length:0);while(toPad>0){digits.unshift("0");toPad--;}}
while(digits.length>0){result=digits.pop()+result;distanceFromLastComma++;if(distanceFromLastComma%commaDistance===0&&noCommaAdded===noComma&&digits.length>0)
result=digitGroupSeparator+result;}
if(isNegative)
result="-"+result;}else{if(vStringBeforeDecimal.length>0){result=vStringBeforeDecimal.pop()+result;noDigitsAdded++;distanceFromLastComma++;}
else if(match==="0"){result="0"+result;noDigitsAdded++;distanceFromLastComma++;}
if(distanceFromLastComma%commaDistance===0&&noCommaAdded===noComma&&vStringBeforeDecimal.length>0)
result=digitGroupSeparator+result;}}else if((match[0]==="E"||match[0]==="e")&&match[match.length-1]==="0"&&/[eE][+-]*[0]+/.test(match)){if(exponent<0)
match=match.replace("+","").replace("-","");else
match=match.replace("-","");result+=match.replace(/[0]+/,function($0){return pad(exponent,$0.length);});}else{if(match===","){noCommaAdded++;commaDistance=distanceFromLastComma;distanceFromLastComma=0;if(vStringBeforeDecimal.length>0)
result=digitGroupSeparator+result;}else if(match.length>1&&((match[0]==="\""&&match[match.length-1]==="\"")||(match[0]==="'"&&match[match.length-1]==="'"))){result=match.slice(1,match.length-1)+result;}
else
result=match+result;}}
var charCount=0;var resultAfterDecimal="";var addDecimalSeparator=false;while(fsAfterDecimal.length>0){match=fsAfterDecimal.shift();if(match==="#"||match==="0"){if(vStringAfterDecimal.length>0&&Number(vStringAfterDecimal.join(""))!==0){resultAfterDecimal+=vStringAfterDecimal.shift();addDecimalSeparator=true;}
else if(match==="0"){resultAfterDecimal+="0";addDecimalSeparator=true;}}else if(match.length>1&&((match[0]==="\""&&match[match.length-1]==="\"")||(match[0]==="'"&&match[match.length-1]==="'"))){resultAfterDecimal+=match.slice(1,match.length-1);}else if((match[0]==="E"||match[0]==="e")&&match[match.length-1]==="0"&&/[eE][+-]*[0]+/.test(match)){if(exponent<0)
match=match.replace("+","").replace("-","");else
match=match.replace("-","");resultAfterDecimal+=match.replace(/[0]+/,function($0){return pad(exponent,$0.length);});}else{resultAfterDecimal+=match;}}
result+=(addDecimalSeparator?decimalSeparator:"")+resultAfterDecimal;return result;};function getObjectId(x,y,ctx){x*=devicePixelBackingStoreRatio;y*=devicePixelBackingStoreRatio;var pixels=ctx.getImageData(x,y,2,2).data;var isObject=true;for(var i=0;i<4;i++){if(pixels[i]!==pixels[i+4]|pixels[i]!==pixels[i+8]|pixels[i]!==pixels[i+12]){isObject=false;break;}}
if(isObject){return RGBToInt(pixels[0],pixels[1],pixels[2]);}else{return 0;}}
var getMouseCoordinates=function(ev){var x=0;var y=0;ev=ev||window.event;if(ev.offsetX||ev.offsetX===0){x=ev.offsetX;y=ev.offsetY;}else if(ev.layerX||ev.layerX==0){x=ev.layerX;y=ev.layerY;}
else{x=ev.pageX-ev.target.offsetLeft;y=ev.pageY-ev.target.offsetTop;}
return{x:x,y:y};};function getFontString(prefix,object,fallbackObject){var fontString="";var fontStyleString=prefix?prefix+"FontStyle":"fontStyle";var fontWeightString=prefix?prefix+"FontWeight":"fontWeight";var fontSizeString=prefix?prefix+"FontSize":"fontSize";var fontFamilyString=prefix?prefix+"FontFamily":"fontFamily";fontString+=object[fontStyleString]?object[fontStyleString]+" ":(fallbackObject&&fallbackObject[fontStyleString])?(fallbackObject[fontStyleString]+" "):"";fontString+=object[fontWeightString]?object[fontWeightString]+" ":(fallbackObject&&fallbackObject[fontWeightString])?(fallbackObject[fontWeightString]+" "):"";fontString+=object[fontSizeString]?object[fontSizeString]+"px ":(fallbackObject&&fallbackObject[fontSizeString])?(fallbackObject[fontSizeString]+"px "):"";var fontFamily=object[fontFamilyString]?object[fontFamilyString]+"":(fallbackObject&&fallbackObject[fontFamilyString])?(fallbackObject[fontFamilyString]+""):"";if(!isCanvasSupported&&fontFamily){var firstFontFamily=fontFamily.split(",")[0];if(firstFontFamily[0]!=="'"&&firstFontFamily[0]!=="\"")
firstFontFamily="'"+firstFontFamily+"'";fontString+=firstFontFamily;}else
fontString+=fontFamily;return fontString;}
function getProperty(propertyName,object,fallbackObject){var value=propertyName in object?object[propertyName]:fallbackObject[propertyName];return value;}
var optimizeForHiDPI=true;var devicePixelRatio=window.devicePixelRatio||1;var backingStoreRatio=1;var devicePixelBackingStoreRatio=optimizeForHiDPI?devicePixelRatio / backingStoreRatio:1;function setCanvasSize(canvas,width,height){if(isCanvasSupported&&!!optimizeForHiDPI){var ctx=canvas.getContext("2d");backingStoreRatio=ctx.webkitBackingStorePixelRatio||ctx.mozBackingStorePixelRatio||ctx.msBackingStorePixelRatio||ctx.oBackingStorePixelRatio||ctx.backingStorePixelRatio||1;devicePixelBackingStoreRatio=devicePixelRatio / backingStoreRatio;canvas.width=width*devicePixelBackingStoreRatio;canvas.height=height*devicePixelBackingStoreRatio;if(devicePixelRatio!==backingStoreRatio){canvas.style.width=width+'px';canvas.style.height=height+'px';ctx.scale(devicePixelBackingStoreRatio,devicePixelBackingStoreRatio);}}else{canvas.width=width;canvas.height=height;}}
function createCanvas(width,height){var canvas=document.createElement("canvas");canvas.setAttribute("class","canvasjs-chart-canvas");setCanvasSize(canvas,width,height);if(!isCanvasSupported&&typeof(G_vmlCanvasManager)!=="undefined"){G_vmlCanvasManager.initElement(canvas);}
return canvas;}
function exportCanvas(canvas,format,fileName){if(!canvas||!format||!fileName)
return;var fullFileName=fileName+"."+(format==="jpeg"?"jpg":format);var mimeType="image/"+format;var img=canvas.toDataURL(mimeType);var saved=false;var downloadLink=document.createElement("a");downloadLink.download=fullFileName;downloadLink.href=img;downloadLink.target="_blank";var e;if(typeof(Blob)!=="undefined"&&!!new Blob()){var imgData=img.replace(/^data:[a-z]*;base64,/,'');var byteString=atob(imgData);var buffer=new ArrayBuffer(byteString.length);var intArray=new Uint8Array(buffer);for(var i=0;i<byteString.length;i++){intArray[i]=byteString.charCodeAt(i);}
var blob=new Blob([buffer],{type:"image/"+format});try{window.navigator.msSaveBlob(blob,fullFileName);saved=true;}
catch(e){downloadLink.dataset.downloadurl=[mimeType,downloadLink.download,downloadLink.href].join(':');downloadLink.href=window.URL.createObjectURL(blob);}}
if(!saved){try{event=document.createEvent("MouseEvents");event.initMouseEvent("click",true,false,window,0,0,0,0,0,false,false,false,false,0,null);if(downloadLink.dispatchEvent){downloadLink.dispatchEvent(event);}
else if(downloadLink.fireEvent){downloadLink.fireEvent("onclick");}}catch(e){var win=window.open();win.document.write("<img src='"+img+"'></img><div>Please right click on the image and save it to your device</div>");win.document.close();}}}
var base64Images={reset:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAcCAYAAAAAwr0iAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAKRSURBVEiJrdY/iF1FFMfxzwnZrGISUSR/JLGIhoh/QiRNBLWxMLIWEkwbgiAoFgoW2mhlY6dgpY2IlRBRxBSKhSAKIklWJRYuMZKAhiyopAiaTY7FvRtmZ+/ed9/zHRjezLw5v/O9d86cuZGZpmURAfdn5o9DfdZNLXpjz+LziPgyIl6MiG0jPTJzZBuyDrP4BVm0P/AKbljTb4ToY/gGewYA7KyCl+1b3DUYANvwbiHw0gCAGRzBOzjTAXEOu0cC4Ch+r5x/HrpdrcZmvIDFSucMtnYCYC++6HmNDw8FKDT34ETrf639/azOr5vwRk/g5fbeuABtgC04XWk9VQLciMP4EH/3AFzErRNC7MXlQmsesSoHsGPE23hmEoBW+61K66HMXFmIMvN8myilXS36R01ub+KfYvw43ZXwYDX+AHP4BAci4pFJomfmr/ihmNofESsBImJGk7mlncrM45n5JPbhz0kAWpsv+juxaX21YIPmVJS2uNzJMS6ZNexC0d+I7fUWXLFyz2kSZlpWPvASlmqAf/FXNXf3FAF2F/1LuFifAlionB6dRuSI2IwHi6lzmXmp6xR8XY0fiIh7psAwh+3FuDkRHQVjl+a8lkXjo0kLUKH7XaV5oO86PmZ1FTzyP4K/XGl9v/zwfbW7BriiuETGCP5ch9bc9f97HF/vcFzCa5gdEPgWq+t/4v0V63oE1uF4h0DiFJ7HnSWMppDdh1dxtsPvJ2wcBNAKbsJXa0Ck5opdaBPsRNu/usba09i1KsaAVzmLt3sghrRjuK1Tf4xkegInxwy8gKf7dKMVH2QRsV5zXR/Cftyu+aKaKbbkQrsdH+PTzLzcqzkOQAVzM+7FHdiqqe2/YT4zF/t8S/sPmawyvC974vcAAAAASUVORK5CYII="},pan:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAJVSURBVFiFvZe7a1RBGMV/x2hWI4JpfKCIiSBKOoOCkID/wP4BFqIIFkE02ChIiC8QDKlSiI3YqRBsBVGwUNAUdiIEUgjiAzQIIsuKJsfizsXr5t7d+8jmwLDfzHz3nLOzc7+ZxTZlGyDgZiWOCuJ9wH2gCUyuqQFgF/AGcKJNrYkBYBj40CIet+muGQi/96kM4WS7C/Tm5VUg7whJg8BkEGkCR4BDYfodsADUgP6wErO5iCtswsuJb32hdbXy8qzL5TIdmzJinHdZoZIBZcSFkGlAKs1Z3YCketZcBtouuaQNkrblMiBpBrhme7mAgU4wMCvpcFsDkq4C54DFVRTH9h+i6vlE0r5UA5ImgCuh28jB28iIs7BIVCOeStoZD64P4uPAjUTygKSx2FsK2TIwkugfk9Qkfd/E+yMWHQCeSRqx/R3gOp3LazfaS2C4B5gHDgD7U9x3E3uAH7KNpC3AHHAwTL4FHgM9GQ8vAaPA0dB/Abxqk2/gBLA9MXba9r1k/d4LfA3JtwueBeM58ucS+edXnAW23wP10N3advEi9CXizTnyN4bPS7Zn4sH/dq3t18AY4e1YLYSy3g/csj2VnFshZPuOpOeSKHCodUINuGj7YetE6je1PV9QoNPJ9StNHKodx7nRbiWrGHBGXAi5DUiqtQwtpcWK0Jubt8CltA5MEV1IfwO7+VffPwGfia5m34CT4bXujIIX0Qna1/cGMNqV/wUJE2czxD8CQ4X5Sl7Jz7SILwCDpbjKPBRMHAd+EtX4HWV5Spdc2w8kDQGPbH8py/MXMygM69/FKz4AAAAASUVORK5CYII="},zoom:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAK6wAACusBgosNWgAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAMqSURBVFiFvdfbj91TFMDxz57U6GUEMS1aYzyMtCSSDhWjCZMInpAI3khE/QHtgzdRkXgSCS8SES9epKLi0oRKNETjRahREq2KS1stdRujtDPtbA97n5zdn9+5zJxTK9k5v3POXmt991p7r71+IcaoGwkhTOIebMRqzOBTvIG3Y4zTXRmqSoyx5cAKbMJOHMFJnMZ8/jyFaXyMR7G6nb1aH22cP4BvcBxziG3GKfyTIR9D6BYg1KUghPBCDveFlb/24Av8iuUYw41YVsz5G7uxKcZ4aMEpwGt5NY3V/YbHsQ6rcAHOw/kYxigewr5CZw4fYGxBKcCLOFEYehXrMdRhr5yLETxVScsOLOkKAPfn1TYMPIvLFrShUlS2FDZm8XRHACzFAWl3R2xbqPMCYhmeLCAOYEMngAczbcTvuHYxzguIy/FesR9e6gSwU/OoPYHBHgHgviIKX2Flq7k34KhmcVnbi/PC8JX4MgMcxb118wZwdz5aISscqx7VRcox7MrPQ7i+btIAJrAkf9+bI9EPmZY2IAxiTSuAldLq4Y9+AcSUh78KP0tbAcwU35cXMD1JCIFUoGiehlqAz6TNB1f1C0DK+0h+nsNPrQC2a4bqGmlD9kOGcWt+Po6pVgDvSxfJaSkFd4UQBvoAsBYbCoB3a2flM7slA0R8iyt6rAFDeDPbm8eOTpVwGD9qVq7nLbIaZnmksPU1JtsCZMXNmpdRxFasWITzh6Xj3LCzra1OxcD2QjHiGVzdpfORnMqZio2PcF23ABdJF1Np4BPptlyPi6WzPYBzpJZtHe7A6xW9cnyP8TqA//SEIYRL8Bxul7rihvwgtVn78WcGGZXa9HGd5TDujDHuOePXNiHdKjWgZX/YbsxLx/ktqbjVzTlcjUSnvI5JrdlUVp6WesZZ6R1hRrpq9+EVTGS9jTjYAuKIouGpbcurEkIYxC051KNSamazsc+xK8b4S0VnEi/j0hqTP+M27O258egQwZuzs7pI7Mf4WQXIEDc5s9sux+5+1Py2EmP8UOq6GvWhIScxfdYjUERiAt9Jd84J6a16zf8JEKT3yCm8g1UxRv8CC4pyRhzR1uUAAAAASUVORK5CYII="},menu:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAgCAYAAAAbifjMAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAK6wAACusBgosNWgAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAAWdEVYdENyZWF0aW9uIFRpbWUAMDcvMTUvMTTPsvU0AAAAP0lEQVRIie2SMQoAIBDDUvH/X667g8sJJ9KOhYYOkW0qGaU1MPdC0vGSbV19EACo3YMPAFH5BUBUjsqfAPpVXtNgGDfxEDCtAAAAAElFTkSuQmCC"}}
function setButtonState(chart,button,state){if(button.getAttribute("state")!==state){button.setAttribute("state",state);button.setAttribute("type",'button');button.style.position="relative";button.style.margin="0px 0px 0px 0px";button.style.padding="3px 4px 0px 4px";button.style.cssFloat="left";button.setAttribute("title",chart._cultureInfo[state+"Text"]);button.innerHTML="<img style='height:16px;' src='"+base64Images[state].image+"' alt='"+chart._cultureInfo[state+"Text"]+"' />";}}
function show(){var element=null;for(var i=0;i<arguments.length;i++){element=arguments[i];if(element.style)
element.style.display="inline";}}
function hide(){var element=null;for(var i=0;i<arguments.length;i++){element=arguments[i];if(element&&element.style)
element.style.display="none";}}
function CanvasJSObject(defaultsKey,options,theme){this._defaultsKey=defaultsKey;var currentThemeOptions={};if(theme&&themes[theme]&&themes[theme][defaultsKey])
currentThemeOptions=themes[theme][defaultsKey];this._options=options?options:{};this.setOptions(this._options,currentThemeOptions);}
CanvasJSObject.prototype.setOptions=function(options,currentThemeOptions){if(!defaultOptions[this._defaultsKey]){if(isDebugMode&&window.console)
console.log("defaults not set");}
else{var defaults=defaultOptions[this._defaultsKey];for(var prop in defaults){if(options&&prop in options)
this[prop]=options[prop];else if(currentThemeOptions&&prop in currentThemeOptions)
this[prop]=currentThemeOptions[prop];else this[prop]=defaults[prop];}}};CanvasJSObject.prototype.updateOption=function(prop){if(!defaultOptions[this._defaultsKey]&&isDebugMode&&window.console)
console.log("defaults not set");var defaults=defaultOptions[this._defaultsKey];var theme=this._options.theme?this._options.theme:(this.chart&&this.chart._options.theme)?this.chart._options.theme:"theme1";var currentThemeOptions={};var newValue=this[prop];if(theme&&themes[theme]&&themes[theme][this._defaultsKey])
currentThemeOptions=themes[theme][this._defaultsKey];if(prop in defaults){if(prop in this._options)
newValue=this._options[prop];else if(currentThemeOptions&&prop in currentThemeOptions)
newValue=currentThemeOptions[prop];else newValue=defaults[prop];}
if(newValue===this[prop])
return false;this[prop]=newValue;return true;}
CanvasJSObject.prototype.trackChanges=function(option){if(!this._options._oldOptions)
this._options._oldOptions={};this._options._oldOptions[option]=this._options[option];};CanvasJSObject.prototype.isBeingTracked=function(option){if(!this._options._oldOptions)
this._options._oldOptions={};if(this._options._oldOptions[option])
return true;else
return false;};CanvasJSObject.prototype.hasOptionChanged=function(option){if(!this._options._oldOptions)
this._options._oldOptions={};var hasChanged=!(this._options._oldOptions[option]===this._options[option]);return hasChanged;};function Chart(containerId,options,publicChartReference){this._publicChartReference=publicChartReference;options=options||{};Chart.parent.constructor.call(this,"Chart",options,options.theme?options.theme:"theme1");var _this=this;this._containerId=containerId;this._objectsInitialized=false;this.ctx=null;this.overlaidCanvasCtx=null;this._indexLabels=[];this._panTimerId=0;this._lastTouchEventType="";this._lastTouchData=null;this.isAnimating=false;this.renderCount=0;this.animatedRender=false;this.disableToolTip=false;this.panEnabled=false;this._defaultCursor="default";this.plotArea={canvas:null,ctx:null,x1:0,y1:0,x2:0,y2:0,width:0,height:0};this._dataInRenderedOrder=[];this._container=typeof(this._containerId)==="string"?document.getElementById(this._containerId):this._containerId;if(!this._container){if(window.console)
window.console.log("CanvasJS Error: Chart Container with id \""+this._containerId+"\" was not found");return;}
this._container.innerHTML="";var width=0;var height=0;if(this._options.width)
width=this.width;else
width=this._container.clientWidth>0?this._container.clientWidth:this.width;if(this._options.height)
height=this.height;else
height=this._container.clientHeight>0?this._container.clientHeight:this.height;this.width=width;this.height=height;this._selectedColorSet=typeof(colorSets[this.colorSet])!=="undefined"?colorSets[this.colorSet]:colorSets["colorSet1"];this._canvasJSContainer=document.createElement("div");this._canvasJSContainer.setAttribute("class","canvasjs-chart-container");this._canvasJSContainer.style.position="relative";this._canvasJSContainer.style.textAlign="left";this._canvasJSContainer.style.cursor="auto";if(!isCanvasSupported){this._canvasJSContainer.style.height="0px";}
this._container.appendChild(this._canvasJSContainer);this.canvas=createCanvas(width,height);this.canvas.style.position="absolute";if(this.canvas.getContext){this._canvasJSContainer.appendChild(this.canvas);this.ctx=this.canvas.getContext("2d");this.ctx.textBaseline="top";extendCtx(this.ctx);}else
return;if(!isCanvasSupported){this.plotArea.canvas=createCanvas(width,height);this.plotArea.canvas.style.position="absolute";this.plotArea.canvas.setAttribute("class","plotAreaCanvas");this._canvasJSContainer.appendChild(this.plotArea.canvas);this.plotArea.ctx=this.plotArea.canvas.getContext("2d");}else{this.plotArea.ctx=this.ctx;}
this.overlaidCanvas=createCanvas(width,height);this.overlaidCanvas.style.position="absolute";this._canvasJSContainer.appendChild(this.overlaidCanvas);this.overlaidCanvasCtx=this.overlaidCanvas.getContext("2d");this.overlaidCanvasCtx.textBaseline="top";this._eventManager=new EventManager(this);addEvent(window,"resize",function(){if(_this._updateSize())
_this.render();});this._toolBar=document.createElement("div");this._toolBar.setAttribute("class","canvasjs-chart-toolbar");this._toolBar.style.cssText="position: absolute; right: 2px; top: 0px;";this._canvasJSContainer.appendChild(this._toolBar);this.bounds={x1:0,y1:0,x2:this.width,y2:this.height};addEvent(this.overlaidCanvas,'click',function(e){_this._mouseEventHandler(e);});addEvent(this.overlaidCanvas,'mousemove',function(e){_this._mouseEventHandler(e);});addEvent(this.overlaidCanvas,'mouseup',function(e){_this._mouseEventHandler(e);});addEvent(this.overlaidCanvas,'mousedown',function(e){_this._mouseEventHandler(e);hide(_this._dropdownMenu);});addEvent(this.overlaidCanvas,'mouseout',function(e){_this._mouseEventHandler(e);});addEvent(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerDown":"touchstart",function(e){_this._touchEventHandler(e);});addEvent(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerMove":'touchmove',function(e){_this._touchEventHandler(e);});addEvent(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerUp":'touchend',function(e){_this._touchEventHandler(e);});addEvent(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerCancel":'touchcancel',function(e){_this._touchEventHandler(e);});if(!this._creditLink){this._creditLink=document.createElement("a");this._creditLink.setAttribute("class","canvasjs-chart-credit");this._creditLink.setAttribute("style","outline:none;margin:0px;position:absolute;right:3px;top:"+(this.height-14)+"px;color:dimgrey;text-decoration:none;font-size:10px;font-family:Lucida Grande, Lucida Sans Unicode, Arial, sans-serif");this._creditLink.setAttribute("tabIndex",-1);this._creditLink.setAttribute("target","_blank");}
this._toolTip=new ToolTip(this,this._options.toolTip,this.theme);this.layoutManager=new LayoutManager(this);this.data=null;this.axisX=null;this.axisY=null;this.axisY2=null;this.sessionVariables={axisX:{internalMinimum:null,internalMaximum:null},axisY:{internalMinimum:null,internalMaximum:null},axisY2:{internalMinimum:null,internalMaximum:null}};}
extend(Chart,CanvasJSObject);Chart.prototype._updateOptions=function(){var _this=this;this.updateOption("width");this.updateOption("height");this.updateOption("theme");if(this.updateOption("colorSet"))
this._selectedColorSet=typeof(colorSets[this.colorSet])!=="undefined"?colorSets[this.colorSet]:colorSets["colorSet1"];this.updateOption("backgroundColor");if(!this.backgroundColor)
this.backgroundColor="rgba(0,0,0,0)";this.updateOption("culture");this._cultureInfo=new CultureInfo(this,this._options.culture);this.updateOption("animationEnabled");this.animationEnabled=this.animationEnabled&&isCanvasSupported;if(this._options.zoomEnabled){if(!this._zoomButton){hide(this._zoomButton=document.createElement("button"));setButtonState(this,this._zoomButton,"pan");this._toolBar.appendChild(this._zoomButton);addEvent(this._zoomButton,"click",function(){if(_this.zoomEnabled){_this.zoomEnabled=false;_this.panEnabled=true;setButtonState(_this,_this._zoomButton,"zoom");}else{_this.zoomEnabled=true;_this.panEnabled=false;setButtonState(_this,_this._zoomButton,"pan");}
_this.render();});}
if(!this._resetButton){hide(this._resetButton=document.createElement("button"));setButtonState(this,this._resetButton,"reset");this._toolBar.appendChild(this._resetButton);addEvent(this._resetButton,"click",function(){_this._toolTip.hide();if(_this.zoomEnabled||_this.panEnabled){_this.zoomEnabled=true;_this.panEnabled=false;setButtonState(_this,_this._zoomButton,"pan");_this._defaultCursor="default";_this.overlaidCanvas.style.cursor=_this._defaultCursor;}else{_this.zoomEnabled=false;_this.panEnabled=false;}
if(_this._options.axisX&&_this._options.axisX.minimum)
_this.sessionVariables.axisX.internalMinimum=_this._options.axisX.minimum;else
_this.sessionVariables.axisX.internalMinimum=null;if(_this._options.axisX&&_this._options.axisX.maximum)
_this.sessionVariables.axisX.internalMaximum=_this._options.axisX.maximum;else
_this.sessionVariables.axisX.internalMaximum=null;_this.resetOverlayedCanvas();hide(_this._zoomButton,_this._resetButton);_this.render();});this.overlaidCanvas.style.cursor=_this._defaultCursor;}
if(!this.zoomEnabled&&!this.panEnabled){if(!this._zoomButton){this.zoomEnabled=true;this.panEnabled=false;}else{if(_this._zoomButton.getAttribute("state")===_this._cultureInfo.zoomText){this.panEnabled=true;this.zoomEnabled=false;}
else{this.zoomEnabled=true;this.panEnabled=false;}
show(_this._zoomButton,_this._resetButton);}}}else{this.zoomEnabled=false;this.panEnabled=false;}
if(typeof(this._options.exportFileName)!=="undefined"){this.exportFileName=this._options.exportFileName;}
if(typeof(this._options.exportEnabled)!=="undefined"){this.exportEnabled=this._options.exportEnabled;}
if(this._menuButton){if(this.exportEnabled)
show(this._menuButton);else
hide(this._menuButton);}else if(this.exportEnabled&&isCanvasSupported){this._menuButton=document.createElement("button");setButtonState(this,this._menuButton,"menu");this._toolBar.appendChild(this._menuButton);addEvent(this._menuButton,"click",function(){if(_this._dropdownMenu.style.display==="none"){if(_this._dropDownCloseTime&&((new Date()).getTime()-_this._dropDownCloseTime.getTime()<=500))
return;_this._dropdownMenu.style.display="block";_this._menuButton.blur();_this._dropdownMenu.focus();}},true);}
if(!this._dropdownMenu&&this.exportEnabled&&isCanvasSupported){this._dropdownMenu=document.createElement("div");this._dropdownMenu.setAttribute("tabindex",-1);this._dropdownMenu.style.cssText="position: absolute; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; cursor: pointer;right: 1px;top: 25px;min-width: 120px;outline: 0;border: 1px solid silver;font-size: 14px;font-family: PopuLato, 'Helvetica Neue', Helvetica, sans-serif;padding: 5px 0px 5px 0px;text-align: left;background-color: #fff;line-height: 20px;box-shadow: 2px 2px 10px #888888;";_this._dropdownMenu.style.display="none";this._toolBar.appendChild(this._dropdownMenu);addEvent(this._dropdownMenu,"blur",function(){hide(_this._dropdownMenu);_this._dropDownCloseTime=new Date();},true);var exportOption=document.createElement("div");exportOption.style.cssText="padding: 2px 15px 2px 10px"
exportOption.innerHTML=this._cultureInfo.saveJPGText;this._dropdownMenu.appendChild(exportOption);addEvent(exportOption,"mouseover",function(){this.style.backgroundColor="#EEEEEE";},true);addEvent(exportOption,"mouseout",function(){this.style.backgroundColor="transparent";},true);addEvent(exportOption,"click",function(){exportCanvas(_this.canvas,"jpg",_this.exportFileName);hide(_this._dropdownMenu);},true);var exportOption=document.createElement("div");exportOption.style.cssText="padding: 2px 15px 2px 10px"
exportOption.innerHTML=this._cultureInfo.savePNGText;this._dropdownMenu.appendChild(exportOption);addEvent(exportOption,"mouseover",function(){this.style.backgroundColor="#EEEEEE";},true);addEvent(exportOption,"mouseout",function(){this.style.backgroundColor="transparent";},true);addEvent(exportOption,"click",function(){exportCanvas(_this.canvas,"png",_this.exportFileName);hide(_this._dropdownMenu);},true);}
if(this._toolBar.style.display!=="none"&&this._zoomButton){this.panEnabled?setButtonState(_this,_this._zoomButton,"zoom"):setButtonState(_this,_this._zoomButton,"pan");if(_this._resetButton.getAttribute("state")!==_this._cultureInfo.resetText)
setButtonState(_this,_this._resetButton,"reset");}
if(typeof(defaultOptions.Chart.creditHref)==="undefined"){this.creditHref="http://canvasjs.com/";this.creditText="CanvasJS.com";}else{var creditTextChanged=this.updateOption("creditText");var creditHrefChanged=this.updateOption("creditHref");}
if(this.renderCount===0||(creditTextChanged||creditHrefChanged)){this._creditLink.setAttribute("href",this.creditHref);this._creditLink.innerHTML=this.creditText;}
if(this.creditHref&&this.creditText){if(!this._creditLink.parentElement)
this._canvasJSContainer.appendChild(this._creditLink);}
else if(this._creditLink.parentElement)
this._canvasJSContainer.removeChild(this._creditLink);if(this._options.toolTip&&this._toolTip._options!==this._options.toolTip)
this._toolTip._options=this._options.toolTip
this._toolTip.updateOption("enabled");this._toolTip.updateOption("shared");this._toolTip.updateOption("animationEnabled");this._toolTip.updateOption("borderColor");this._toolTip.updateOption("content");}
Chart.prototype._updateSize=function(){var width=0;var height=0;if(this._options.width)
width=this.width;else
this.width=width=this._container.clientWidth>0?this._container.clientWidth:this.width;if(this._options.height)
height=this.height;else
this.height=height=this._container.clientHeight>0?this._container.clientHeight:this.height;if(this.canvas.width!==width*devicePixelBackingStoreRatio||this.canvas.height!==height*devicePixelBackingStoreRatio){setCanvasSize(this.canvas,width,height);setCanvasSize(this.overlaidCanvas,width,height);setCanvasSize(this._eventManager.ghostCanvas,width,height);return true;}
return false;}
Chart.prototype._initialize=function(){if(!this._animator)
this._animator=new Animator(this);else{this._animator.cancelAllAnimations();}
this.disableToolTip=false;this.pieDoughnutClickHandler=null;if(this.animationRequestId)
this.cancelRequestAnimFrame.call(window,this.animationRequestId);this._updateOptions();this.animatedRender=isCanvasSupported&&this.animationEnabled&&(this.renderCount===0);this._updateSize();this.clearCanvas();this.ctx.beginPath();this.axisX=null;this.axisY=null;this.axisY2=null;this._indexLabels=[];this._dataInRenderedOrder=[];this._events=[];if(this._eventManager)
this._eventManager.reset();this.plotInfo={axisPlacement:null,axisXValueType:null,plotTypes:[]};this.layoutManager.reset();this.data=[];var dataSeriesIndex=0;for(var series=0;series<this._options.data.length;series++){dataSeriesIndex++;if(!(!this._options.data[series].type||Chart._supportedChartTypes.indexOf(this._options.data[series].type)>=0))
continue;var dataSeries=new DataSeries(this,this._options.data[series],this.theme,dataSeriesIndex-1,++this._eventManager.lastObjectId);if(dataSeries.name===null)
dataSeries.name="DataSeries "+(dataSeriesIndex);if(dataSeries.color===null){if(this._options.data.length>1){dataSeries._colorSet=[this._selectedColorSet[dataSeries.index%this._selectedColorSet.length]];dataSeries.color=this._selectedColorSet[dataSeries.index%this._selectedColorSet.length];}else{if(dataSeries.type==="line"||dataSeries.type==="stepLine"||dataSeries.type==="spline"||dataSeries.type==="area"||dataSeries.type==="stepArea"||dataSeries.type==="splineArea"||dataSeries.type==="stackedArea"||dataSeries.type==="stackedArea100"||dataSeries.type==="rangeArea"||dataSeries.type==="rangeSplineArea"||dataSeries.type==="candlestick"||dataSeries.type==="ohlc"){dataSeries._colorSet=[this._selectedColorSet[0]];}
else
dataSeries._colorSet=this._selectedColorSet;}}else{dataSeries._colorSet=[dataSeries.color];}
if(dataSeries.markerSize===null){if(((dataSeries.type==="line"||dataSeries.type==="stepLine"||dataSeries.type==="spline")&&dataSeries.dataPoints&&dataSeries.dataPoints.length<this.width / 16)||dataSeries.type==="scatter"){dataSeries.markerSize=8;}}
if((dataSeries.type==="bubble"||dataSeries.type==="scatter")&&dataSeries.dataPoints){dataSeries.dataPoints.sort(compareDataPointX)}
this.data.push(dataSeries);var seriesAxisPlacement=dataSeries.axisPlacement;var errorMessage;if(seriesAxisPlacement==="normal"){if(this.plotInfo.axisPlacement==="xySwapped"){errorMessage="You cannot combine \""+dataSeries.type+"\" with bar chart";}else if(this.plotInfo.axisPlacement==="none"){errorMessage="You cannot combine \""+dataSeries.type+"\" with pie chart";}else if(this.plotInfo.axisPlacement===null)
this.plotInfo.axisPlacement="normal";}
else if(seriesAxisPlacement==="xySwapped"){if(this.plotInfo.axisPlacement==="normal"){errorMessage="You cannot combine \""+dataSeries.type+"\" with line, area, column or pie chart";}else if(this.plotInfo.axisPlacement==="none"){errorMessage="You cannot combine \""+dataSeries.type+"\" with pie chart";}else if(this.plotInfo.axisPlacement===null)
this.plotInfo.axisPlacement="xySwapped";}
else if(seriesAxisPlacement=="none"){if(this.plotInfo.axisPlacement==="normal"){errorMessage="You cannot combine \""+dataSeries.type+"\" with line, area, column or bar chart";}else if(this.plotInfo.axisPlacement==="xySwapped"){errorMessage="You cannot combine \""+dataSeries.type+"\" with bar chart";}else if(this.plotInfo.axisPlacement===null)
this.plotInfo.axisPlacement="none";}
if(errorMessage&&window.console){window.console.log(errorMessage);return;}}
this._objectsInitialized=true;}
Chart._supportedChartTypes=["line","stepLine","spline","column","area","stepArea","splineArea","bar","bubble","scatter","stackedColumn","stackedColumn100","stackedBar","stackedBar100","stackedArea","stackedArea100","candlestick","ohlc","rangeColumn","rangeBar","rangeArea","rangeSplineArea","pie","doughnut","funnel"];if(!Chart._supportedChartTypes.indexOf){Chart._supportedChartTypes.indexOf=function(elt){var len=this.length>>>0;var from=Number(arguments[1])||0;from=(from<0)?Math.ceil(from):Math.floor(from);if(from<0)
from+=len;for(;from<len;from++){if(from in this&&this[from]===elt)
return from;}
return-1;};}
Chart.prototype.render=function(options){if(options)
this._options=options;this._initialize();for(var i=0;i<this.data.length;i++){if(this.plotInfo.axisPlacement==="normal"||this.plotInfo.axisPlacement==="xySwapped"){if(!this.data[i].axisYType||this.data[i].axisYType==="primary"){if(!this.axisY){if(this.plotInfo.axisPlacement==="normal"){this.axisY=new Axis(this,this._options.axisY,"axisY","left");}
else if(this.plotInfo.axisPlacement==="xySwapped"){this.axisY=new Axis(this,this._options.axisY,"axisY","bottom");}}
this.data[i].axisY=this.axisY;}
else if(this.data[i].axisYType==="secondary"){if(!this.axisY2){if(this.plotInfo.axisPlacement==="normal"){this.axisY2=new Axis(this,this._options.axisY2,"axisY","right");}
else if(this.plotInfo.axisPlacement==="xySwapped"){this.axisY2=new Axis(this,this._options.axisY2,"axisY","top");}}
this.data[i].axisY=this.axisY2;}
if(!this.axisX){if(this.plotInfo.axisPlacement==="normal"){this.axisX=new Axis(this,this._options.axisX,"axisX","bottom");}else if(this.plotInfo.axisPlacement==="xySwapped"){this.axisX=new Axis(this,this._options.axisX,"axisX","left");}}
this.data[i].axisX=this.axisX;}}
this._processData();if(this._options.title){this._title=new Title(this,this._options.title);this._title.render();}
this.legend=new Legend(this,this._options.legend,this.theme);for(var i=0;i<this.data.length;i++){if(this.data[i].showInLegend)
this.legend.dataSeries.push(this.data[i]);}
this.legend.render();if(this.plotInfo.axisPlacement==="normal"||this.plotInfo.axisPlacement==="xySwapped"){var freeSpace=this.layoutManager.getFreeSpace();Axis.setLayoutAndRender(this.axisX,this.axisY,this.axisY2,this.plotInfo.axisPlacement,this.layoutManager.getFreeSpace());}else if(this.plotInfo.axisPlacement==="none"){this.preparePlotArea();}
else{return;}
var animations=[];if(this.animatedRender){var initialState=createCanvas(this.width,this.height);var initialStateCtx=initialState.getContext("2d");initialStateCtx.drawImage(this.canvas,0,0,this.width,this.height);}
for(var i=0;i<this.plotInfo.plotTypes.length;i++){var plotType=this.plotInfo.plotTypes[i];for(var j=0;j<plotType.plotUnits.length;j++){var plotUnit=plotType.plotUnits[j];var animationInfo=null;plotUnit.targetCanvas=null;if(this.animatedRender){plotUnit.targetCanvas=createCanvas(this.width,this.height);plotUnit.targetCanvasCtx=plotUnit.targetCanvas.getContext("2d");}
if(plotUnit.type==="line")
animationInfo=this.renderLine(plotUnit);else if(plotUnit.type==="stepLine")
animationInfo=this.renderStepLine(plotUnit);else if(plotUnit.type==="spline")
animationInfo=this.renderSpline(plotUnit);else if(plotUnit.type==="column")
animationInfo=this.renderColumn(plotUnit);else if(plotUnit.type==="bar")
animationInfo=this.renderBar(plotUnit);else if(plotUnit.type==="area")
animationInfo=this.renderArea(plotUnit);else if(plotUnit.type==="stepArea")
animationInfo=this.renderStepArea(plotUnit);else if(plotUnit.type==="splineArea")
animationInfo=this.renderSplineArea(plotUnit);else if(plotUnit.type==="stackedColumn")
animationInfo=this.renderStackedColumn(plotUnit);else if(plotUnit.type==="stackedColumn100")
animationInfo=this.renderStackedColumn100(plotUnit);else if(plotUnit.type==="stackedBar")
animationInfo=this.renderStackedBar(plotUnit);else if(plotUnit.type==="stackedBar100")
animationInfo=this.renderStackedBar100(plotUnit);else if(plotUnit.type==="stackedArea")
animationInfo=this.renderStackedArea(plotUnit);else if(plotUnit.type==="stackedArea100")
animationInfo=this.renderStackedArea100(plotUnit);else if(plotUnit.type==="bubble")
animationInfo=animationInfo=this.renderBubble(plotUnit);else if(plotUnit.type==="scatter")
animationInfo=this.renderScatter(plotUnit);else if(plotUnit.type==="pie")
this.renderPie(plotUnit);else if(plotUnit.type==="doughnut")
this.renderPie(plotUnit);else if(plotUnit.type==="candlestick")
animationInfo=this.renderCandlestick(plotUnit);else if(plotUnit.type==="ohlc")
animationInfo=this.renderCandlestick(plotUnit);else if(plotUnit.type==="rangeColumn")
animationInfo=this.renderRangeColumn(plotUnit);else if(plotUnit.type==="rangeBar")
animationInfo=this.renderRangeBar(plotUnit);else if(plotUnit.type==="rangeArea")
animationInfo=this.renderRangeArea(plotUnit);else if(plotUnit.type==="rangeSplineArea")
animationInfo=this.renderRangeSplineArea(plotUnit);for(var k=0;k<plotUnit.dataSeriesIndexes.length;k++){this._dataInRenderedOrder.push(this.data[plotUnit.dataSeriesIndexes[k]]);}
if(this.animatedRender&&animationInfo)
animations.push(animationInfo);}}
if(this.animatedRender&&this._indexLabels.length>0){var indexLabelCanvas=createCanvas(this.width,this.height);var indexLabelCanvasCtx=indexLabelCanvas.getContext("2d");animations.push(this.renderIndexLabels(indexLabelCanvasCtx));}
var _this=this;if(animations.length>0){_this.disableToolTip=true;_this._animator.animate(200,_this.animationDuration,function(fractionComplete){_this.ctx.clearRect(0,0,_this.width,_this.height);_this.ctx.drawImage(initialState,0,0,_this.width*devicePixelBackingStoreRatio,_this.height*devicePixelBackingStoreRatio,0,0,_this.width,_this.height);for(var l=0;l<animations.length;l++){animationInfo=animations[l];if(fractionComplete<1&&typeof(animationInfo.startTimePercent)!=="undefined"){if(fractionComplete>=animationInfo.startTimePercent){animationInfo.animationCallback(animationInfo.easingFunction(fractionComplete-animationInfo.startTimePercent,0,1,1-animationInfo.startTimePercent),animationInfo);}}else{animationInfo.animationCallback(animationInfo.easingFunction(fractionComplete,0,1,1),animationInfo);}}},function(){animations=[];var count=0;for(var i=0;i<_this.plotInfo.plotTypes.length;i++){var plotType=_this.plotInfo.plotTypes[i];for(var j=0;j<plotType.plotUnits.length;j++){var plotUnit=plotType.plotUnits[j];plotUnit.targetCanvas=null;}}
initialState=null;_this.disableToolTip=false;});}else{if(_this._indexLabels.length>0)
_this.renderIndexLabels();}
this.attachPlotAreaEventHandlers();if(!this.zoomEnabled&&!this.panEnabled&&this._zoomButton&&this._zoomButton.style.display!=="none"){hide(this._zoomButton,this._resetButton);}
this._toolTip._updateToolTip();this.renderCount++;if(isDebugMode){var _this=this;setTimeout(function(){var ghostCanvasCopy=document.getElementById("ghostCanvasCopy");if(ghostCanvasCopy){setCanvasSize(ghostCanvasCopy,_this.width,_this.height);var ghostCanvasCopyCtx=ghostCanvasCopy.getContext("2d");ghostCanvasCopyCtx.drawImage(_this._eventManager.ghostCanvas,0,0);}},2000);}}
Chart.prototype.attachPlotAreaEventHandlers=function(){this.attachEvent({context:this,chart:this,mousedown:this._plotAreaMouseDown,mouseup:this._plotAreaMouseUp,mousemove:this._plotAreaMouseMove,cursor:this.zoomEnabled?"col-resize":"move",cursor:this.panEnabled?"move":"default",capture:true,bounds:this.plotArea});}
Chart.prototype.categoriseDataSeries=function(){var dataSeries="";for(var i=0;i<this.data.length;i++){dataSeries=this.data[i]
if(!dataSeries.dataPoints||dataSeries.dataPoints.length===0||!dataSeries.visible)
continue;if(Chart._supportedChartTypes.indexOf(dataSeries.type)>=0){var plotType=null;var plotTypeExists=false;var plotUnit=null;var plotUnitExists=false;for(var j=0;j<this.plotInfo.plotTypes.length;j++){if(this.plotInfo.plotTypes[j].type===dataSeries.type){plotTypeExists=true;var plotType=this.plotInfo.plotTypes[j];break;}}
if(!plotTypeExists){plotType={type:dataSeries.type,totalDataSeries:0,plotUnits:[]};this.plotInfo.plotTypes.push(plotType)}
for(var j=0;j<plotType.plotUnits.length;j++){if(plotType.plotUnits[j].axisYType===dataSeries.axisYType){plotUnitExists=true;var plotUnit=plotType.plotUnits[j];break;}}
if(!plotUnitExists){plotUnit={type:dataSeries.type,previousDataSeriesCount:0,index:plotType.plotUnits.length,plotType:plotType,axisYType:dataSeries.axisYType,axisY:dataSeries.axisYType==="primary"?this.axisY:this.axisY2,axisX:this.axisX,dataSeriesIndexes:[],yTotals:[]}
plotType.plotUnits.push(plotUnit);}
plotType.totalDataSeries++;plotUnit.dataSeriesIndexes.push(i);dataSeries.plotUnit=plotUnit;}}
for(var i=0;i<this.plotInfo.plotTypes.length;i++){var plotType=this.plotInfo.plotTypes[i];var previousDataSeriesCount=0;for(var j=0;j<plotType.plotUnits.length;j++){plotType.plotUnits[j].previousDataSeriesCount=previousDataSeriesCount;previousDataSeriesCount+=plotType.plotUnits[j].dataSeriesIndexes.length;}}}
Chart.prototype.assignIdToDataPoints=function(){for(var i=0;i<this.data.length;i++){var dataSeries=this.data[i];if(!dataSeries.dataPoints)
continue;var length=dataSeries.dataPoints.length;for(var j=0;j<length;j++){dataSeries.dataPointIds[j]=++this._eventManager.lastObjectId;}}}
Chart.prototype._processData=function(){this.assignIdToDataPoints();this.categoriseDataSeries();for(var i=0;i<this.plotInfo.plotTypes.length;i++){var plotType=this.plotInfo.plotTypes[i];for(var j=0;j<plotType.plotUnits.length;j++){var plotUnit=plotType.plotUnits[j];if(plotUnit.type==="line"||plotUnit.type==="stepLine"||plotUnit.type==="spline"||plotUnit.type==="column"||plotUnit.type==="area"||plotUnit.type==="stepArea"||plotUnit.type==="splineArea"||plotUnit.type==="bar"||plotUnit.type==="bubble"||plotUnit.type==="scatter")
this._processMultiseriesPlotUnit(plotUnit);else if(plotUnit.type==="stackedColumn"||plotUnit.type==="stackedBar"||plotUnit.type==="stackedArea")
this._processStackedPlotUnit(plotUnit);else if(plotUnit.type==="stackedColumn100"||plotUnit.type==="stackedBar100"||plotUnit.type==="stackedArea100")
this._processStacked100PlotUnit(plotUnit);else if(plotUnit.type==="candlestick"||plotUnit.type==="ohlc"||plotUnit.type==="rangeColumn"||plotUnit.type==="rangeBar"||plotUnit.type==="rangeArea"||plotUnit.type==="rangeSplineArea")
this._processMultiYPlotUnit(plotUnit);}}}
Chart.prototype._processMultiseriesPlotUnit=function(plotUnit){if(!plotUnit.dataSeriesIndexes||plotUnit.dataSeriesIndexes.length<1)
return;var axisYDataInfo=plotUnit.axisY.dataInfo;var axisXDataInfo=plotUnit.axisX.dataInfo;var dataPointX,dataPointY;var isDateTime=false;for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeries=this.data[plotUnit.dataSeriesIndexes[j]];var i=0;var isFirstDPInViewPort=false;var isLastDPInViewPort=false;if(dataSeries.axisPlacement==="normal"||dataSeries.axisPlacement==="xySwapped"){var plotAreaXMin=this.sessionVariables.axisX.internalMinimum?this.sessionVariables.axisX.internalMinimum:(this._options.axisX&&this._options.axisX.minimum)?this._options.axisX.minimum:-Infinity;var plotAreaXMax=this.sessionVariables.axisX.internalMaximum?this.sessionVariables.axisX.internalMaximum:(this._options.axisX&&this._options.axisX.maximum)?this._options.axisX.maximum:Infinity;}
if(dataSeries.dataPoints[i].x&&dataSeries.dataPoints[i].x.getTime||dataSeries.xValueType==="dateTime"){isDateTime=true;}
for(i=0;i<dataSeries.dataPoints.length;i++){if(typeof dataSeries.dataPoints[i].x==="undefined"){dataSeries.dataPoints[i].x=i;}
if(dataSeries.dataPoints[i].x.getTime){isDateTime=true;dataPointX=dataSeries.dataPoints[i].x.getTime();}
else
dataPointX=dataSeries.dataPoints[i].x;dataPointY=dataSeries.dataPoints[i].y;if(dataPointX<axisXDataInfo.min)
axisXDataInfo.min=dataPointX;if(dataPointX>axisXDataInfo.max)
axisXDataInfo.max=dataPointX;if(dataPointY<axisYDataInfo.min)
axisYDataInfo.min=dataPointY;if(dataPointY>axisYDataInfo.max)
axisYDataInfo.max=dataPointY;if(i>0){var xDiff=dataPointX-dataSeries.dataPoints[i-1].x;xDiff<0&&(xDiff=xDiff*-1);if(axisXDataInfo.minDiff>xDiff&&xDiff!==0){axisXDataInfo.minDiff=xDiff;}}
if(dataPointX<plotAreaXMin&&!isFirstDPInViewPort){continue;}else if(!isFirstDPInViewPort){isFirstDPInViewPort=true;if(i>0){i-=2;continue;}}
if(dataPointX>plotAreaXMax&&!isLastDPInViewPort){isLastDPInViewPort=true;}else if(dataPointX>plotAreaXMax&&isLastDPInViewPort){continue;}
if(dataSeries.dataPoints[i].label)
plotUnit.axisX.labels[dataPointX]=dataSeries.dataPoints[i].label;if(dataPointX<axisXDataInfo.viewPortMin)
axisXDataInfo.viewPortMin=dataPointX;if(dataPointX>axisXDataInfo.viewPortMax)
axisXDataInfo.viewPortMax=dataPointX;if(dataPointY===null)
continue;if(dataPointY<axisYDataInfo.viewPortMin)
axisYDataInfo.viewPortMin=dataPointY;if(dataPointY>axisYDataInfo.viewPortMax)
axisYDataInfo.viewPortMax=dataPointY;}
this.plotInfo.axisXValueType=dataSeries.xValueType=isDateTime?"dateTime":"number";}}
Chart.prototype._processStackedPlotUnit=function(plotUnit){if(!plotUnit.dataSeriesIndexes||plotUnit.dataSeriesIndexes.length<1)
return;var axisYDataInfo=plotUnit.axisY.dataInfo;var axisXDataInfo=plotUnit.axisX.dataInfo;var dataPointX,dataPointY;var isDateTime=false;var dataPointYPositiveSums=[];var dataPointYNegativeSums=[];for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeries=this.data[plotUnit.dataSeriesIndexes[j]];var i=0;var isFirstDPInViewPort=false;var isLastDPInViewPort=false;if(dataSeries.axisPlacement==="normal"||dataSeries.axisPlacement==="xySwapped"){var plotAreaXMin=this.sessionVariables.axisX.internalMinimum?this.sessionVariables.axisX.internalMinimum:(this._options.axisX&&this._options.axisX.minimum)?this._options.axisX.minimum:-Infinity;var plotAreaXMax=this.sessionVariables.axisX.internalMaximum?this.sessionVariables.axisX.internalMaximum:(this._options.axisX&&this._options.axisX.maximum)?this._options.axisX.maximum:Infinity;}
if(dataSeries.dataPoints[i].x&&dataSeries.dataPoints[i].x.getTime||dataSeries.xValueType==="dateTime"){isDateTime=true;}
for(i=0;i<dataSeries.dataPoints.length;i++){if(typeof dataSeries.dataPoints[i].x==="undefined"){dataSeries.dataPoints[i].x=i;}
if(dataSeries.dataPoints[i].x.getTime){isDateTime=true;dataPointX=dataSeries.dataPoints[i].x.getTime();}
else
dataPointX=dataSeries.dataPoints[i].x;dataPointY=dataSeries.dataPoints[i].y;if(dataPointX<axisXDataInfo.min)
axisXDataInfo.min=dataPointX;if(dataPointX>axisXDataInfo.max)
axisXDataInfo.max=dataPointX;if(i>0){var xDiff=dataPointX-dataSeries.dataPoints[i-1].x;xDiff<0&&(xDiff=xDiff*-1);if(axisXDataInfo.minDiff>xDiff&&xDiff!==0){axisXDataInfo.minDiff=xDiff;}}
if(dataPointX<plotAreaXMin&&!isFirstDPInViewPort){continue;}else if(!isFirstDPInViewPort){isFirstDPInViewPort=true;if(i>0){i-=2;continue;}}
if(dataPointX>plotAreaXMax&&!isLastDPInViewPort){isLastDPInViewPort=true;}else if(dataPointX>plotAreaXMax&&isLastDPInViewPort){continue;}
if(dataSeries.dataPoints[i].label)
plotUnit.axisX.labels[dataPointX]=dataSeries.dataPoints[i].label;if(dataPointX<axisXDataInfo.viewPortMin)
axisXDataInfo.viewPortMin=dataPointX;if(dataPointX>axisXDataInfo.viewPortMax)
axisXDataInfo.viewPortMax=dataPointX;if(dataPointY===null)
continue;plotUnit.yTotals[dataPointX]=(!plotUnit.yTotals[dataPointX]?0:plotUnit.yTotals[dataPointX])+Math.abs(dataPointY);if(dataPointY>=0){if(dataPointYPositiveSums[dataPointX])
dataPointYPositiveSums[dataPointX]+=dataPointY;else
dataPointYPositiveSums[dataPointX]=dataPointY;}else{if(dataPointYNegativeSums[dataPointX])
dataPointYNegativeSums[dataPointX]+=dataPointY;else
dataPointYNegativeSums[dataPointX]=dataPointY;}}
this.plotInfo.axisXValueType=dataSeries.xValueType=isDateTime?"dateTime":"number";}
for(i in dataPointYPositiveSums){if(isNaN(i)){continue;}
var ySum=dataPointYPositiveSums[i];if(ySum<axisYDataInfo.min)
axisYDataInfo.min=ySum;if(ySum>axisYDataInfo.max)
axisYDataInfo.max=ySum;if(i<axisXDataInfo.viewPortMin||i>axisXDataInfo.viewPortMax)
continue;if(ySum<axisYDataInfo.viewPortMin)
axisYDataInfo.viewPortMin=ySum;if(ySum>axisYDataInfo.viewPortMax)
axisYDataInfo.viewPortMax=ySum;}
for(i in dataPointYNegativeSums){if(isNaN(i)){continue;}
var ySum=dataPointYNegativeSums[i];if(ySum<axisYDataInfo.min)
axisYDataInfo.min=ySum;if(ySum>axisYDataInfo.max)
axisYDataInfo.max=ySum;if(i<axisXDataInfo.viewPortMin||i>axisXDataInfo.viewPortMax)
continue;if(ySum<axisYDataInfo.viewPortMin)
axisYDataInfo.viewPortMin=ySum;if(ySum>axisYDataInfo.viewPortMax)
axisYDataInfo.viewPortMax=ySum;}}
Chart.prototype._processStacked100PlotUnit=function(plotUnit){if(!plotUnit.dataSeriesIndexes||plotUnit.dataSeriesIndexes.length<1)
return;var axisYDataInfo=plotUnit.axisY.dataInfo;var axisXDataInfo=plotUnit.axisX.dataInfo;var dataPointX,dataPointY;var isDateTime=false;var containsPositiveY=false;var containsNegativeY=false;var dataPointYSums=[];for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeries=this.data[plotUnit.dataSeriesIndexes[j]];var i=0;var isFirstDPInViewPort=false;var isLastDPInViewPort=false;if(dataSeries.axisPlacement==="normal"||dataSeries.axisPlacement==="xySwapped"){var plotAreaXMin=this.sessionVariables.axisX.internalMinimum?this.sessionVariables.axisX.internalMinimum:(this._options.axisX&&this._options.axisX.minimum)?this._options.axisX.minimum:-Infinity;var plotAreaXMax=this.sessionVariables.axisX.internalMaximum?this.sessionVariables.axisX.internalMaximum:(this._options.axisX&&this._options.axisX.maximum)?this._options.axisX.maximum:Infinity;}
if(dataSeries.dataPoints[i].x&&dataSeries.dataPoints[i].x.getTime||dataSeries.xValueType==="dateTime"){isDateTime=true;}
for(i=0;i<dataSeries.dataPoints.length;i++){if(typeof dataSeries.dataPoints[i].x==="undefined"){dataSeries.dataPoints[i].x=i;}
if(dataSeries.dataPoints[i].x.getTime){isDateTime=true;dataPointX=dataSeries.dataPoints[i].x.getTime();}
else
dataPointX=dataSeries.dataPoints[i].x;dataPointY=dataSeries.dataPoints[i].y;if(dataPointX<axisXDataInfo.min)
axisXDataInfo.min=dataPointX;if(dataPointX>axisXDataInfo.max)
axisXDataInfo.max=dataPointX;if(i>0){var xDiff=dataPointX-dataSeries.dataPoints[i-1].x;xDiff<0&&(xDiff=xDiff*-1);if(axisXDataInfo.minDiff>xDiff&&xDiff!==0){axisXDataInfo.minDiff=xDiff;}}
if(dataPointX<plotAreaXMin&&!isFirstDPInViewPort){continue;}else if(!isFirstDPInViewPort){isFirstDPInViewPort=true;if(i>0){i-=2;continue;}}
if(dataPointX>plotAreaXMax&&!isLastDPInViewPort){isLastDPInViewPort=true;}else if(dataPointX>plotAreaXMax&&isLastDPInViewPort){continue;}
if(dataSeries.dataPoints[i].label)
plotUnit.axisX.labels[dataPointX]=dataSeries.dataPoints[i].label;if(dataPointX<axisXDataInfo.viewPortMin)
axisXDataInfo.viewPortMin=dataPointX;if(dataPointX>axisXDataInfo.viewPortMax)
axisXDataInfo.viewPortMax=dataPointX;if(dataPointY===null)
continue;plotUnit.yTotals[dataPointX]=(!plotUnit.yTotals[dataPointX]?0:plotUnit.yTotals[dataPointX])+Math.abs(dataPointY);if(dataPointY>=0){containsPositiveY=true;}else{containsNegativeY=true;}
if(dataPointYSums[dataPointX])
dataPointYSums[dataPointX]+=Math.abs(dataPointY);else
dataPointYSums[dataPointX]=Math.abs(dataPointY);}
this.plotInfo.axisXValueType=dataSeries.xValueType=isDateTime?"dateTime":"number";}
if(containsPositiveY&&!containsNegativeY){axisYDataInfo.max=99;axisYDataInfo.min=1;}else if(containsPositiveY&&containsNegativeY){axisYDataInfo.max=99;axisYDataInfo.min=-99;}else if(!containsPositiveY&&containsNegativeY){axisYDataInfo.max=-1;axisYDataInfo.min=-99;}
axisYDataInfo.viewPortMin=axisYDataInfo.min;axisYDataInfo.viewPortMax=axisYDataInfo.max;plotUnit.dataPointYSums=dataPointYSums;}
Chart.prototype._processMultiYPlotUnit=function(plotUnit){if(!plotUnit.dataSeriesIndexes||plotUnit.dataSeriesIndexes.length<1)
return;var axisYDataInfo=plotUnit.axisY.dataInfo;var axisXDataInfo=plotUnit.axisX.dataInfo;var dataPointX,dataPointY,dataPointYMin,dataPointYMax;var isDateTime=false;for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeries=this.data[plotUnit.dataSeriesIndexes[j]];var i=0;var isFirstDPInViewPort=false;var isLastDPInViewPort=false;if(dataSeries.axisPlacement==="normal"||dataSeries.axisPlacement==="xySwapped"){var plotAreaXMin=this.sessionVariables.axisX.internalMinimum?this.sessionVariables.axisX.internalMinimum:(this._options.axisX&&this._options.axisX.minimum)?this._options.axisX.minimum:-Infinity;var plotAreaXMax=this.sessionVariables.axisX.internalMaximum?this.sessionVariables.axisX.internalMaximum:(this._options.axisX&&this._options.axisX.maximum)?this._options.axisX.maximum:Infinity;}
if(dataSeries.dataPoints[i].x&&dataSeries.dataPoints[i].x.getTime||dataSeries.xValueType==="dateTime"){isDateTime=true;}
for(i=0;i<dataSeries.dataPoints.length;i++){if(typeof dataSeries.dataPoints[i].x==="undefined"){dataSeries.dataPoints[i].x=i;}
if(dataSeries.dataPoints[i].x.getTime){isDateTime=true;dataPointX=dataSeries.dataPoints[i].x.getTime();}
else
dataPointX=dataSeries.dataPoints[i].x;dataPointY=dataSeries.dataPoints[i].y;if(dataPointY&&dataPointY.length){dataPointYMin=Math.min.apply(null,dataPointY);dataPointYMax=Math.max.apply(null,dataPointY);}
if(dataPointX<axisXDataInfo.min)
axisXDataInfo.min=dataPointX;if(dataPointX>axisXDataInfo.max)
axisXDataInfo.max=dataPointX;if(dataPointYMin<axisYDataInfo.min)
axisYDataInfo.min=dataPointYMin;if(dataPointYMax>axisYDataInfo.max)
axisYDataInfo.max=dataPointYMax;if(i>0){var xDiff=dataPointX-dataSeries.dataPoints[i-1].x;xDiff<0&&(xDiff=xDiff*-1);if(axisXDataInfo.minDiff>xDiff&&xDiff!==0){axisXDataInfo.minDiff=xDiff;}}
if(dataPointX<plotAreaXMin&&!isFirstDPInViewPort){continue;}else if(!isFirstDPInViewPort){isFirstDPInViewPort=true;if(i>0){i-=2;continue;}}
if(dataPointX>plotAreaXMax&&!isLastDPInViewPort){isLastDPInViewPort=true;}else if(dataPointX>plotAreaXMax&&isLastDPInViewPort){continue;}
if(dataSeries.dataPoints[i].label)
plotUnit.axisX.labels[dataPointX]=dataSeries.dataPoints[i].label;if(dataPointX<axisXDataInfo.viewPortMin)
axisXDataInfo.viewPortMin=dataPointX;if(dataPointX>axisXDataInfo.viewPortMax)
axisXDataInfo.viewPortMax=dataPointX;if(dataPointY===null)
continue;if(dataPointYMin<axisYDataInfo.viewPortMin)
axisYDataInfo.viewPortMin=dataPointYMin;if(dataPointYMax>axisYDataInfo.viewPortMax)
axisYDataInfo.viewPortMax=dataPointYMax;}
this.plotInfo.axisXValueType=dataSeries.xValueType=isDateTime?"dateTime":"number";}}
Chart.prototype.getDataPointAtXY=function(mouseX,mouseY,getClosest){getClosest=getClosest||false;var results=[];for(var i=this._dataInRenderedOrder.length-1;i>=0;i--){var dataSeries=this._dataInRenderedOrder[i];var result=null;result=dataSeries.getDataPointAtXY(mouseX,mouseY,getClosest);if(result)
results.push(result);}
var closestResult=null;var onlyLineAreaTypes=false;for(var m=0;m<results.length;m++){if(results[m].dataSeries.type==="line"||results[m].dataSeries.type==="stepLine"||results[m].dataSeries.type==="area"||results[m].dataSeries.type==="stepArea"){var markerSize=getProperty("markerSize",results[m].dataPoint,results[m].dataSeries)||8;if(results[m].distance<=markerSize / 2){onlyLineAreaTypes=true;break;}}}
for(m=0;m<results.length;m++){if(onlyLineAreaTypes&&results[m].dataSeries.type!=="line"&&results[m].dataSeries.type!=="stepLine"&&results[m].dataSeries.type!=="area"&&results[m].dataSeries.type!=="stepArea")
continue;if(!closestResult){closestResult=results[m];}else if(results[m].distance<=closestResult.distance){closestResult=results[m];}}
return closestResult;}
Chart.prototype.getObjectAtXY=function(mouseX,mouseY,getClosest){getClosest=getClosest||false;var id=null;var dataPointInfo=this.getDataPointAtXY(mouseX,mouseY,getClosest);if(dataPointInfo){id=dataPointInfo.dataSeries.dataPointIds[dataPointInfo.dataPointIndex];}else if(isCanvasSupported){id=getObjectId(mouseX,mouseY,this._eventManager.ghostCtx);}
else{for(var i=0;i<this.legend.items.length;i++){var item=this.legend.items[i];if(mouseX>=item.x1&&mouseX<=item.x2&&mouseY>=item.y1&&mouseY<=item.y2){id=item.id;}}}
return id;}
Chart.prototype.getAutoFontSize=function(standardSize,width,height){width=width||this.width;height=height||this.height;var fontSizeScaleFactor=standardSize / 400;return Math.round(Math.min(this.width,this.height)*fontSizeScaleFactor);}
Chart.prototype.resetOverlayedCanvas=function(){this.overlaidCanvasCtx.clearRect(0,0,this.width,this.height);}
Chart.prototype.clearCanvas=function(){this.ctx.clearRect(0,0,this.width,this.height);if(this.backgroundColor){this.ctx.fillStyle=this.backgroundColor;this.ctx.fillRect(0,0,this.width,this.height);}}
Chart.prototype.attachEvent=function(param){this._events.push(param);}
Chart.prototype._touchEventHandler=function(ev){if(!ev.changedTouches||!this.interactivityEnabled)
return;var mouseEvents=[];var touches=ev.changedTouches;var first=touches?touches[0]:ev;var touchCurrentCoordinates=null;switch(ev.type){case"touchstart":case"MSPointerDown":mouseEvents=["mousemove","mousedown"];this._lastTouchData=getMouseCoordinates(first);this._lastTouchData.time=new Date();break;case"touchmove":case"MSPointerMove":mouseEvents=["mousemove"];break;case"touchend":case"MSPointerUp":mouseEvents=(this._lastTouchEventType==="touchstart"||this._lastTouchEventType==="MSPointerDown")?["mouseup","click"]:["mouseup"];break;default:return;}
if(touches&&touches.length>1)return;touchCurrentCoordinates=getMouseCoordinates(first);touchCurrentCoordinates.time=new Date();try{var dy=touchCurrentCoordinates.y-this._lastTouchData.y;var dx=touchCurrentCoordinates.x-this._lastTouchData.x;var dt=touchCurrentCoordinates.time-this._lastTouchData.time;if(Math.abs(dy)>15&&(!!this._lastTouchData.scroll||dt<200)){this._lastTouchData.scroll=true;var win=window.parent||window;if(win&&win.scrollBy)
win.scrollBy(0,-dy);}}catch(e){};this._lastTouchEventType=ev.type;if(!!this._lastTouchData.scroll&&this.zoomEnabled){if(this.isDrag)
this.resetOverlayedCanvas();this.isDrag=false;return;}
for(var i=0;i<mouseEvents.length;i++){var type=mouseEvents[i];var simulatedEvent=document.createEvent("MouseEvent");simulatedEvent.initMouseEvent(type,true,true,window,1,first.screenX,first.screenY,first.clientX,first.clientY,false,false,false,false,0,null);first.target.dispatchEvent(simulatedEvent);if(ev.preventManipulation){ev.preventManipulation();}
if(ev.preventDefault){ev.preventDefault();}}}
Chart.prototype._mouseEventHandler=function(ev){if(!this.interactivityEnabled)
return;if(this._ignoreNextEvent){this._ignoreNextEvent=false;return;}
if(ev.preventManipulation){ev.preventManipulation();}
if(ev.preventDefault){ev.preventDefault();}
if(typeof(ev.target)==="undefined"&&ev.srcElement)
ev.target=ev.srcElement;var xy=getMouseCoordinates(ev);var type=ev.type;var eventParam;var rightclick;if(!ev)var e=window.event;if(ev.which)rightclick=(ev.which==3);else if(ev.button)rightclick=(ev.button==2);if(isDebugMode&&window.console){window.console.log(type+" --> x: "+xy.x+"; y:"+xy.y);if(rightclick)
window.console.log(ev.which);if(type==="mouseup")
window.console.log("mouseup");}
if(rightclick)
return;if(Chart.capturedEventParam){eventParam=Chart.capturedEventParam;if(type==="mouseup"){Chart.capturedEventParam=null;if(eventParam.chart.overlaidCanvas.releaseCapture)
eventParam.chart.overlaidCanvas.releaseCapture();else
document.body.removeEventListener("mouseup",eventParam.chart._mouseEventHandler,false);}
if(eventParam.hasOwnProperty(type))
eventParam[type].call(eventParam.context,xy.x,xy.y);}
else if(this._events){for(var i=0;i<this._events.length;i++){if(!this._events[i].hasOwnProperty(type))
continue;eventParam=this._events[i];var bounds=eventParam.bounds;if(xy.x>=bounds.x1&&xy.x<=bounds.x2&&xy.y>=bounds.y1&&xy.y<=bounds.y2){eventParam[type].call(eventParam.context,xy.x,xy.y);if(type==="mousedown"&&eventParam.capture===true){Chart.capturedEventParam=eventParam;if(this.overlaidCanvas.setCapture)
this.overlaidCanvas.setCapture();else{document.body.addEventListener("mouseup",this._mouseEventHandler,false);}}else if(type==="mouseup"){if(eventParam.chart.overlaidCanvas.releaseCapture)
eventParam.chart.overlaidCanvas.releaseCapture();else
document.body.removeEventListener("mouseup",this._mouseEventHandler,false);}
break;}
else
eventParam=null;}
if(eventParam&&eventParam.cursor){ev.target.style.cursor=eventParam.cursor;}
else
ev.target.style.cursor=this._defaultCursor;}
if(this._toolTip&&this._toolTip.enabled){var plotArea=this.plotArea;if(xy.x<plotArea.x1||xy.x>plotArea.x2||xy.y<plotArea.y1||xy.y>plotArea.y2)
this._toolTip.hide();}
if((!this.isDrag||!this.zoomEnabled)&&this._eventManager){this._eventManager.mouseEventHandler(ev);}}
Chart.prototype._plotAreaMouseDown=function(x,y){this.isDrag=true;if(this.plotInfo.axisPlacement!=="none"){this.dragStartPoint={x:x,y:y,xMinimum:this.axisX.minimum,xMaximum:this.axisX.maximum};}else{this.dragStartPoint={x:x,y:y};}}
Chart.prototype._plotAreaMouseUp=function(x,y){if(this.plotInfo.axisPlacement==="normal"||this.plotInfo.axisPlacement==="xySwapped"){if(this.isDrag){var dragDelta=0;var dragValue=0;var axisXProps=this.axisX.lineCoordinates;if(this.plotInfo.axisPlacement==="xySwapped"){dragDelta=y-this.dragStartPoint.y;dragValue=Math.abs(this.axisX.maximum-this.axisX.minimum)/ axisXProps.height*dragDelta;}
else{dragDelta=this.dragStartPoint.x-x;dragValue=Math.abs(this.axisX.maximum-this.axisX.minimum)/ axisXProps.width*dragDelta;}
if(Math.abs(dragDelta)>2){if(this.panEnabled){var reRender=false;var overFlow=0;if(this.axisX.sessionVariables.internalMinimum<this.axisX._absoluteMinimum){overFlow=this.axisX._absoluteMinimum-this.axisX.sessionVariables.internalMinimum;this.axisX.sessionVariables.internalMinimum+=overFlow;this.axisX.sessionVariables.internalMaximum+=overFlow;reRender=true;}else if(this.axisX.sessionVariables.internalMaximum>this.axisX._absoluteMaximum){overFlow=this.axisX.sessionVariables.internalMaximum-this.axisX._absoluteMaximum;this.axisX.sessionVariables.internalMaximum-=overFlow;this.axisX.sessionVariables.internalMinimum-=overFlow;reRender=true;}
if(reRender)
this.render();}else if(this.zoomEnabled){this.resetOverlayedCanvas();if(!this.dragStartPoint)
return;if(this.plotInfo.axisPlacement==="xySwapped"){var selectedRegion={y1:Math.min(this.dragStartPoint.y,y),y2:Math.max(this.dragStartPoint.y,y)};if(Math.abs(selectedRegion.y1-selectedRegion.y2)>1){var axisXProps=this.axisX.lineCoordinates;var minX=this.axisX.maximum-(this.axisX.maximum-this.axisX.minimum)/ axisXProps.height*(selectedRegion.y2-axisXProps.y1);var maxX=this.axisX.maximum-(this.axisX.maximum-this.axisX.minimum)/ axisXProps.height*(selectedRegion.y1-axisXProps.y1);minX=Math.max(minX,this.axisX.dataInfo.min);maxX=Math.min(maxX,this.axisX.dataInfo.max);if(Math.abs(maxX-minX)>2*Math.abs(this.axisX.dataInfo.minDiff)){this.axisX.sessionVariables.internalMinimum=minX;this.axisX.sessionVariables.internalMaximum=maxX;this.render();}}}else if(this.plotInfo.axisPlacement==="normal"){var selectedRegion={x1:Math.min(this.dragStartPoint.x,x),x2:Math.max(this.dragStartPoint.x,x)};if(Math.abs(selectedRegion.x1-selectedRegion.x2)>1){var axisXProps=this.axisX.lineCoordinates;var minX=(this.axisX.maximum-this.axisX.minimum)/ axisXProps.width*(selectedRegion.x1-axisXProps.x1)+this.axisX.minimum;var maxX=(this.axisX.maximum-this.axisX.minimum)/ axisXProps.width*(selectedRegion.x2-axisXProps.x1)+this.axisX.minimum;minX=Math.max(minX,this.axisX.dataInfo.min);maxX=Math.min(maxX,this.axisX.dataInfo.max);if(Math.abs(maxX-minX)>2*Math.abs(this.axisX.dataInfo.minDiff)){this.axisX.sessionVariables.internalMinimum=minX;this.axisX.sessionVariables.internalMaximum=maxX;this.render();}}}}
this._ignoreNextEvent=true;if(this.zoomEnabled&&this._zoomButton.style.display==="none"){show(this._zoomButton,this._resetButton);setButtonState(this,this._zoomButton,"pan");setButtonState(this,this._resetButton,"reset");}}}}
this.isDrag=false;}
Chart.prototype._plotAreaMouseMove=function(x,y){if(this.isDrag&&this.plotInfo.axisPlacement!=="none"){var dragDelta=0;var dragValue=0;var axisXProps=this.axisX.lineCoordinates;if(this.plotInfo.axisPlacement==="xySwapped"){dragDelta=y-this.dragStartPoint.y;dragValue=Math.abs(this.axisX.maximum-this.axisX.minimum)/ axisXProps.height*dragDelta;}
else{dragDelta=this.dragStartPoint.x-x;dragValue=Math.abs(this.axisX.maximum-this.axisX.minimum)/ axisXProps.width*dragDelta;}
if(Math.abs(dragDelta)>2&&Math.abs(dragDelta)<8&&(this.panEnabled||this.zoomEnabled)){this._toolTip.hide();}else if(this._toolTip.enabled&&!this.panEnabled&&!this.zoomEnabled){this._toolTip.mouseMoveHandler(x,y);}
if(Math.abs(dragDelta)>2&&(this.panEnabled||this.zoomEnabled)){if(this.panEnabled){this.axisX.sessionVariables.internalMinimum=this.dragStartPoint.xMinimum+dragValue;this.axisX.sessionVariables.internalMaximum=this.dragStartPoint.xMaximum+dragValue;var overFlow=0;if(this.axisX.sessionVariables.internalMinimum<this.axisX._absoluteMinimum-convertToNumber(this.axisX.interval,this.axisX.intervalType)){overFlow=(this.axisX._absoluteMinimum-convertToNumber(this.axisX.interval,this.axisX.intervalType))-this.axisX.sessionVariables.internalMinimum;this.axisX.sessionVariables.internalMinimum+=overFlow;this.axisX.sessionVariables.internalMaximum+=overFlow;}else if(this.axisX.sessionVariables.internalMaximum>this.axisX._absoluteMaximum+convertToNumber(this.axisX.interval,this.axisX.intervalType)){overFlow=this.axisX.sessionVariables.internalMaximum-(this.axisX._absoluteMaximum+convertToNumber(this.axisX.interval,this.axisX.intervalType));this.axisX.sessionVariables.internalMaximum-=overFlow;this.axisX.sessionVariables.internalMinimum-=overFlow;}
var _this=this;clearTimeout(this._panTimerId);this._panTimerId=setTimeout(function(){_this.render();},0);}else if(this.zoomEnabled){var plotAreaBounds=this.plotArea;this.resetOverlayedCanvas();var alpha=this.overlaidCanvasCtx.globalAlpha;this.overlaidCanvasCtx.globalAlpha=.7;this.overlaidCanvasCtx.fillStyle="#A0ABB8";if(this.plotInfo.axisPlacement==="xySwapped"){this.overlaidCanvasCtx.fillRect(plotAreaBounds.x1,this.dragStartPoint.y,plotAreaBounds.x2-plotAreaBounds.x1,y-this.dragStartPoint.y);}
else if(this.plotInfo.axisPlacement==="normal"){this.overlaidCanvasCtx.fillRect(this.dragStartPoint.x,plotAreaBounds.y1,x-this.dragStartPoint.x,plotAreaBounds.y2-plotAreaBounds.y1);}
this.overlaidCanvasCtx.globalAlpha=alpha;}}}else if(this._toolTip.enabled)
this._toolTip.mouseMoveHandler(x,y);}
Chart.prototype.preparePlotArea=function(){var plotArea=this.plotArea;var yAxis=this.axisY?this.axisY:this.axisY2;if(!isCanvasSupported&&(plotArea.x1>0||plotArea.y1>0)){plotArea.ctx.translate(plotArea.x1,plotArea.y1);}
if(this.axisX&&yAxis){plotArea.x1=this.axisX.lineCoordinates.x1<this.axisX.lineCoordinates.x2?this.axisX.lineCoordinates.x1:yAxis.lineCoordinates.x1;plotArea.y1=(this.axisX.lineCoordinates.y1<yAxis.lineCoordinates.y1?this.axisX.lineCoordinates.y1:yAxis.lineCoordinates.y1);plotArea.x2=(this.axisX.lineCoordinates.x2>yAxis.lineCoordinates.x2?this.axisX.lineCoordinates.x2:yAxis.lineCoordinates.x2);plotArea.y2=this.axisX.lineCoordinates.y2>this.axisX.lineCoordinates.y1?this.axisX.lineCoordinates.y2:yAxis.lineCoordinates.y2;plotArea.width=plotArea.x2-plotArea.x1;plotArea.height=plotArea.y2-plotArea.y1;}else{var freeSpace=this.layoutManager.getFreeSpace();plotArea.x1=freeSpace.x1;plotArea.x2=freeSpace.x2;plotArea.y1=freeSpace.y1;plotArea.y2=freeSpace.y2;plotArea.width=freeSpace.width;plotArea.height=freeSpace.height;}
if(!isCanvasSupported){plotArea.canvas.width=plotArea.width;plotArea.canvas.height=plotArea.height;plotArea.canvas.style.left=plotArea.x1+"px";plotArea.canvas.style.top=plotArea.y1+"px";if(plotArea.x1>0||plotArea.y1>0){plotArea.ctx.translate(-plotArea.x1,-plotArea.y1);}}}
Chart.prototype.getPixelCoordinatesOnPlotArea=function(x,y){return{x:this.axisX.getPixelCoordinatesOnAxis(x).x,y:this.axisY.getPixelCoordinatesOnAxis(y).y}}
Chart.prototype.renderIndexLabels=function(targetCtx){var ctx=targetCtx||this.plotArea.ctx;ctx.textBaseline="middle";var plotArea=this.plotArea;for(var i=0;i<this._indexLabels.length;i++){var indexLabel=this._indexLabels[i];var x,y,angle;ctx.fillStyle=getProperty("indexLabelFontColor",indexLabel.dataPoint,indexLabel.dataSeries);ctx.font=getFontString("indexLabel",indexLabel.dataPoint,indexLabel.dataSeries);var indexLabelText=this.replaceKeywordsWithValue(getProperty("indexLabel",indexLabel.dataPoint,indexLabel.dataSeries),indexLabel.dataPoint,indexLabel.dataSeries,null,indexLabel.indexKeyword);var textSize={width:ctx.measureText(indexLabelText).width,height:getProperty("indexLabelFontSize",indexLabel.dataPoint,indexLabel.dataSeries)};var placement=getProperty("indexLabelPlacement",indexLabel.dataPoint,indexLabel.dataSeries);var orientation=getProperty("indexLabelOrientation",indexLabel.dataPoint,indexLabel.dataSeries);var angle=0;var yMinLimit=0;var yMaxLimit=0;var xMinLimit=0;var xMaxLimit=0;var offsetX=0,offsetY=0;var direction=indexLabel.direction;var axisX=indexLabel.dataSeries.axisX;var axisY=indexLabel.dataSeries.axisY;if(indexLabel.dataPoint.x<axisX.minimum||indexLabel.dataPoint.x>axisX.maximum||indexLabel.dataPoint.y<axisY.minimum||indexLabel.dataPoint.y>axisY.maximum)
continue;if(indexLabel.chartType==="column"||indexLabel.chartType==="stackedColumn"||indexLabel.chartType==="stackedColumn100"||indexLabel.chartType==="bar"||indexLabel.chartType==="stackedBar"||indexLabel.chartType==="stackedBar100"||indexLabel.chartType==="candlestick"||indexLabel.chartType==="ohlc"||indexLabel.chartType==="rangeColumn"||indexLabel.chartType==="rangeBar"){offsetY=5;offsetX=5;var width=Math.abs(indexLabel.bounds.x1,indexLabel.bounds.x2)
var height=Math.abs(indexLabel.bounds.y1,indexLabel.bounds.y2)
if(this.plotInfo.axisPlacement==="normal"){if(placement!=="inside"){yMinLimit=plotArea.y1;yMaxLimit=plotArea.y2;}else{yMinLimit=indexLabel.bounds.y1;yMaxLimit=indexLabel.bounds.y2;}
if(orientation==="horizontal"){x=indexLabel.point.x-textSize.width / 2;if(direction>=0){if(indexLabel.point.y-textSize.height / 2-offsetY<yMinLimit+textSize.height / 2){if(placement==="auto")
y=Math.min(Math.max(indexLabel.point.y,yMinLimit)+textSize.height / 2+1,yMaxLimit-textSize.height / 2-offsetY);else
y=Math.min(yMinLimit+textSize.height / 2+1,yMaxLimit-textSize.height / 2-offsetY);}else{y=Math.min(indexLabel.point.y-textSize.height / 2-offsetY+1,yMaxLimit-textSize.height / 2-offsetY);}}
else{if(indexLabel.point.y+textSize.height / 2+offsetY>yMaxLimit-textSize.height / 2-1){if(placement==="auto")
y=Math.max(Math.min(indexLabel.point.y,yMaxLimit)-textSize.height / 2-1,yMinLimit+textSize.height / 2+offsetY);else
y=Math.max(yMaxLimit-textSize.height / 2-1,yMinLimit+textSize.height / 2+offsetY);}else{y=Math.max(indexLabel.point.y+textSize.height / 2+offsetY,yMinLimit+textSize.height / 2+offsetY);}}}
else if(orientation==="vertical"){x=indexLabel.point.x;if(direction>=0){if(indexLabel.point.y-offsetY<yMinLimit+textSize.width+1){if(placement==="auto")
y=Math.min(Math.max(indexLabel.point.y,yMinLimit)+textSize.width+1,yMaxLimit);else
y=Math.min(yMinLimit+textSize.width+1,yMaxLimit);}else{y=Math.min(indexLabel.point.y-offsetY,yMaxLimit-1);}}
else{if(indexLabel.point.y+textSize.width+offsetY>yMaxLimit-1){if(placement==="auto")
y=Math.max(Math.min(indexLabel.point.y,yMaxLimit)-offsetY,yMinLimit);else
y=Math.max(yMaxLimit-1,yMinLimit);}else{y=Math.max(indexLabel.point.y+textSize.width+offsetY,yMinLimit);}}
angle=-90;}}else if(this.plotInfo.axisPlacement==="xySwapped"){if(placement!=="inside"){xMinLimit=plotArea.x1;xMaxLimit=plotArea.x2;}else{xMinLimit=indexLabel.bounds.x1;xMaxLimit=indexLabel.bounds.x2;}
if(orientation==="horizontal"){y=indexLabel.point.y;if(direction>=0){if(indexLabel.point.x+offsetX>xMaxLimit-textSize.width){if(placement==="auto")
x=Math.max(Math.min(indexLabel.point.x,xMaxLimit)-textSize.width,xMinLimit);else
x=Math.max(xMaxLimit-textSize.width,xMinLimit);}
else{x=Math.max(indexLabel.point.x+offsetX,xMinLimit);}}
else{if(indexLabel.point.x-textSize.width-offsetX<xMinLimit){if(placement==="auto")
x=Math.min(Math.max(indexLabel.point.x,xMinLimit)+1,xMaxLimit);else
x=Math.min(xMinLimit+1,xMaxLimit);}else{x=Math.min(indexLabel.point.x-textSize.width-offsetX,xMaxLimit);}}}
else if(orientation==="vertical"){y=indexLabel.point.y+textSize.width / 2;if(direction>=0){if(indexLabel.point.x+textSize.height / 2+offsetX>xMaxLimit-textSize.height / 2){if(placement==="auto")
x=Math.max(Math.min(indexLabel.point.x,xMaxLimit)-textSize.height / 2,xMinLimit);else
x=Math.max(xMaxLimit-textSize.height / 2,xMinLimit);}else{x=Math.max(indexLabel.point.x+textSize.height / 2+offsetX,xMinLimit);}}
else{if(indexLabel.point.x-textSize.height / 2-offsetX<xMinLimit+textSize.height / 2){if(placement==="auto")
x=Math.min(Math.max(indexLabel.point.x,xMinLimit)+textSize.height / 2,xMaxLimit+textSize.height / 2);else
x=Math.min(xMinLimit+textSize.height / 2,xMaxLimit+textSize.height / 2);}else{x=Math.min(indexLabel.point.x-textSize.height / 2-offsetX,xMaxLimit+textSize.height / 2);}}
angle=-90;}}}else{offsetY=5;if(orientation==="horizontal"){x=indexLabel.point.x-textSize.width / 2;if(indexLabel.chartType==="bubble"){offsetY=-textSize.height / 2;}
if(direction>0)
y=Math.max(indexLabel.point.y-textSize.height / 2-offsetY,plotArea.y1+textSize.height / 2);else
y=Math.min(indexLabel.point.y+textSize.height / 2+offsetY,plotArea.y2-textSize.height / 2);}else if(orientation==="vertical"){x=indexLabel.point.x;if(indexLabel.chartType==="bubble"){offsetY=-textSize.width / 2;}
if(direction>0)
y=Math.max(indexLabel.point.y-offsetY,plotArea.y1+textSize.width);else
y=Math.min(indexLabel.point.y+textSize.width+offsetY,plotArea.y2);angle=-90;}}
ctx.save();ctx.translate(x,y);ctx.rotate(Math.PI / 180*angle);ctx.fillText(indexLabelText,0,0);ctx.restore();}
var animationInfo={source:ctx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.fadeInAnimation,easingFunction:AnimationHelper.easing.easeInQuad,animationBase:0,startTimePercent:.7};return animationInfo;}
Chart.prototype.renderLine=function(plotUnit){var ctx=plotUnit.targetCanvasCtx||this.plotArea.ctx;var totalDataSeries=plotUnit.dataSeriesIndexes.length;if(totalDataSeries<=0)
return;var ghostCtx=this._eventManager.ghostCtx;ctx.save();var plotArea=this.plotArea;ctx.beginPath();ctx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height);ctx.clip();var markers=[];for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeriesIndex=plotUnit.dataSeriesIndexes[j];var dataSeries=this.data[dataSeriesIndex];ctx.lineWidth=dataSeries.lineThickness;var dataPoints=dataSeries.dataPoints;var seriesId=dataSeries.id;this._eventManager.objectMap[seriesId]={objectType:"dataSeries",dataSeriesIndex:dataSeriesIndex};var hexColor=intToHexColorString(seriesId);ghostCtx.strokeStyle=hexColor;ghostCtx.lineWidth=dataSeries.lineThickness>0?Math.max(dataSeries.lineThickness,4):0;var colorSet=dataSeries._colorSet;var color=colorSet[0];ctx.strokeStyle=color;var isFirstDataPointInPlotArea=true;var i=0,x,y;var dataPointX;ctx.beginPath();if(dataPoints.length>0){var prevDataNull=false;for(i=0;i<dataPoints.length;i++){dataPointX=dataPoints[i].x.getTime?dataPoints[i].x.getTime():dataPoints[i].x;if(dataPointX<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax)
continue;if(typeof(dataPoints[i].y)!=="number"){if(i>0){ctx.stroke();if(isCanvasSupported){ghostCtx.stroke();}}
prevDataNull=true;continue;}
x=(plotUnit.axisX.conversionParameters.reference+plotUnit.axisX.conversionParameters.pixelPerUnit*(dataPointX-plotUnit.axisX.conversionParameters.minimum)+.5)<<0;y=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(dataPoints[i].y-plotUnit.axisY.conversionParameters.minimum)+.5)<<0;var id=dataSeries.dataPointIds[i];this._eventManager.objectMap[id]={id:id,objectType:"dataPoint",dataSeriesIndex:dataSeriesIndex,dataPointIndex:i,x1:x,y1:y};if(isFirstDataPointInPlotArea||prevDataNull){ctx.beginPath();ctx.moveTo(x,y);if(isCanvasSupported){ghostCtx.beginPath();ghostCtx.moveTo(x,y);}
isFirstDataPointInPlotArea=false;prevDataNull=false;}else{ctx.lineTo(x,y);if(isCanvasSupported)
ghostCtx.lineTo(x,y);if(i%500==0){ctx.stroke();ctx.beginPath();ctx.moveTo(x,y);if(isCanvasSupported){ghostCtx.stroke();ghostCtx.beginPath();ghostCtx.moveTo(x,y);}}}
if(dataPoints[i].markerSize>0||dataSeries.markerSize>0){var markerProps=dataSeries.getMarkerProperties(i,x,y,ctx);markers.push(markerProps);var markerColor=intToHexColorString(id);if(isCanvasSupported){markers.push({x:x,y:y,ctx:ghostCtx,type:markerProps.type,size:markerProps.size,color:markerColor,borderColor:markerColor,borderThickness:markerProps.borderThickness});}}
if(dataPoints[i].indexLabel||dataSeries.indexLabel){this._indexLabels.push({chartType:"line",dataPoint:dataPoints[i],dataSeries:dataSeries,point:{x:x,y:y},direction:dataPoints[i].y>=0?1:-1,color:color});}}
ctx.stroke();if(isCanvasSupported)
ghostCtx.stroke();}}
RenderHelper.drawMarkers(markers);ctx.restore();ctx.beginPath();if(isCanvasSupported)
ghostCtx.beginPath();var animationInfo={source:ctx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.xClipAnimation,easingFunction:AnimationHelper.easing.linear,animationBase:0};return animationInfo;}
Chart.prototype.renderStepLine=function(plotUnit){var ctx=plotUnit.targetCanvasCtx||this.plotArea.ctx;var totalDataSeries=plotUnit.dataSeriesIndexes.length;if(totalDataSeries<=0)
return;var ghostCtx=this._eventManager.ghostCtx;ctx.save();var plotArea=this.plotArea;ctx.beginPath();ctx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height);ctx.clip();var markers=[];for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeriesIndex=plotUnit.dataSeriesIndexes[j];var dataSeries=this.data[dataSeriesIndex];ctx.lineWidth=dataSeries.lineThickness;var dataPoints=dataSeries.dataPoints;var seriesId=dataSeries.id;this._eventManager.objectMap[seriesId]={objectType:"dataSeries",dataSeriesIndex:dataSeriesIndex};var hexColor=intToHexColorString(seriesId);ghostCtx.strokeStyle=hexColor;ghostCtx.lineWidth=dataSeries.lineThickness>0?Math.max(dataSeries.lineThickness,4):0;var colorSet=dataSeries._colorSet;var color=colorSet[0];ctx.strokeStyle=color;var isFirstDataPointInPlotArea=true;var i=0,x,y;var dataPointX;ctx.beginPath();if(dataPoints.length>0){var prevDataNull=false;for(i=0;i<dataPoints.length;i++){dataPointX=dataPoints[i].getTime?dataPoints[i].x.getTime():dataPoints[i].x;if(dataPointX<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax)
continue;if(typeof(dataPoints[i].y)!=="number"){if(i>0){ctx.stroke();if(isCanvasSupported){ghostCtx.stroke();}}
prevDataNull=true;continue;}
var prevY=y;x=(plotUnit.axisX.conversionParameters.reference+plotUnit.axisX.conversionParameters.pixelPerUnit*(dataPointX-plotUnit.axisX.conversionParameters.minimum)+.5)<<0;y=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(dataPoints[i].y-plotUnit.axisY.conversionParameters.minimum)+.5)<<0;var id=dataSeries.dataPointIds[i];this._eventManager.objectMap[id]={id:id,objectType:"dataPoint",dataSeriesIndex:dataSeriesIndex,dataPointIndex:i,x1:x,y1:y};if(isFirstDataPointInPlotArea||prevDataNull){ctx.beginPath();ctx.moveTo(x,y);if(isCanvasSupported){ghostCtx.beginPath();ghostCtx.moveTo(x,y);}
isFirstDataPointInPlotArea=false;prevDataNull=false;}else{ctx.lineTo(x,prevY);if(isCanvasSupported)
ghostCtx.lineTo(x,prevY);ctx.lineTo(x,y);if(isCanvasSupported)
ghostCtx.lineTo(x,y);if(i%500==0){ctx.stroke();ctx.beginPath();ctx.moveTo(x,y);if(isCanvasSupported){ghostCtx.stroke();ghostCtx.beginPath();ghostCtx.moveTo(x,y);}}}
if(dataPoints[i].markerSize>0||dataSeries.markerSize>0){var markerProps=dataSeries.getMarkerProperties(i,x,y,ctx);markers.push(markerProps);var markerColor=intToHexColorString(id);if(isCanvasSupported){markers.push({x:x,y:y,ctx:ghostCtx,type:markerProps.type,size:markerProps.size,color:markerColor,borderColor:markerColor,borderThickness:markerProps.borderThickness});}}
if(dataPoints[i].indexLabel||dataSeries.indexLabel){this._indexLabels.push({chartType:"stepLine",dataPoint:dataPoints[i],dataSeries:dataSeries,point:{x:x,y:y},direction:dataPoints[i].y>=0?1:-1,color:color});}}
ctx.stroke();if(isCanvasSupported)
ghostCtx.stroke();}}
RenderHelper.drawMarkers(markers);ctx.restore();ctx.beginPath();if(isCanvasSupported)
ghostCtx.beginPath();var animationInfo={source:ctx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.xClipAnimation,easingFunction:AnimationHelper.easing.linear,animationBase:0};return animationInfo;}
function getBezierPoints(points,tension){var bezierPoints=[];for(var i=0;i<points.length;i++){if(i==0){bezierPoints.push(points[0]);continue;}
var i1,i2,pointIndex;pointIndex=i-1;i1=pointIndex===0?0:pointIndex-1;i2=pointIndex===points.length-1?pointIndex:pointIndex+1;var drv1={x:(points[i2].x-points[i1].x)/ tension,y:(points[i2].y-points[i1].y)/ tension}
var cp1={x:points[pointIndex].x+drv1.x / 3,y:points[pointIndex].y+drv1.y / 3}
bezierPoints[bezierPoints.length]=cp1;pointIndex=i;i1=pointIndex===0?0:pointIndex-1;i2=pointIndex===points.length-1?pointIndex:pointIndex+1;var drv2={x:(points[i2].x-points[i1].x)/ tension,y:(points[i2].y-points[i1].y)/ tension}
var cp2={x:points[pointIndex].x-drv2.x / 3,y:points[pointIndex].y-drv2.y / 3}
bezierPoints[bezierPoints.length]=cp2;bezierPoints[bezierPoints.length]=points[i];}
return bezierPoints;}
Chart.prototype.renderSpline=function(plotUnit){var ctx=plotUnit.targetCanvasCtx||this.plotArea.ctx;var totalDataSeries=plotUnit.dataSeriesIndexes.length;if(totalDataSeries<=0)
return;var ghostCtx=this._eventManager.ghostCtx;ctx.save();var plotArea=this.plotArea;ctx.beginPath();ctx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height);ctx.clip();var markers=[];for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeriesIndex=plotUnit.dataSeriesIndexes[j];var dataSeries=this.data[dataSeriesIndex];ctx.lineWidth=dataSeries.lineThickness;var dataPoints=dataSeries.dataPoints;var seriesId=dataSeries.id;this._eventManager.objectMap[seriesId]={objectType:"dataSeries",dataSeriesIndex:dataSeriesIndex};var hexColor=intToHexColorString(seriesId);ghostCtx.strokeStyle=hexColor;ghostCtx.lineWidth=dataSeries.lineThickness>0?Math.max(dataSeries.lineThickness,4):0;var colorSet=dataSeries._colorSet;var color=colorSet[0];ctx.strokeStyle=color;var isFirstDataPointInPlotArea=true;var i=0,x,y;var dataPointX;var pixels=[];ctx.beginPath();if(dataPoints.length>0){for(i=0;i<dataPoints.length;i++){dataPointX=dataPoints[i].getTime?dataPoints[i].x.getTime():dataPoints[i].x;if(dataPointX<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax)
continue;if(typeof(dataPoints[i].y)!=="number"){if(i>0){renderBezier(pixels);pixels=[];}
continue;}
x=(plotUnit.axisX.conversionParameters.reference+plotUnit.axisX.conversionParameters.pixelPerUnit*(dataPointX-plotUnit.axisX.conversionParameters.minimum)+.5)<<0;y=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(dataPoints[i].y-plotUnit.axisY.conversionParameters.minimum)+.5)<<0;var id=dataSeries.dataPointIds[i];this._eventManager.objectMap[id]={id:id,objectType:"dataPoint",dataSeriesIndex:dataSeriesIndex,dataPointIndex:i,x1:x,y1:y};pixels[pixels.length]={x:x,y:y};if(dataPoints[i].markerSize>0||dataSeries.markerSize>0){var markerProps=dataSeries.getMarkerProperties(i,x,y,ctx);markers.push(markerProps);var markerColor=intToHexColorString(id);if(isCanvasSupported){markers.push({x:x,y:y,ctx:ghostCtx,type:markerProps.type,size:markerProps.size,color:markerColor,borderColor:markerColor,borderThickness:markerProps.borderThickness});}}
if(dataPoints[i].indexLabel||dataSeries.indexLabel){this._indexLabels.push({chartType:"spline",dataPoint:dataPoints[i],dataSeries:dataSeries,point:{x:x,y:y},direction:dataPoints[i].y>=0?1:-1,color:color});}}}
renderBezier(pixels);}
RenderHelper.drawMarkers(markers);ctx.restore();ctx.beginPath();if(isCanvasSupported)
ghostCtx.beginPath();function renderBezier(pixels){var bp=getBezierPoints(pixels,2);if(bp.length>0){ctx.beginPath();if(isCanvasSupported)
ghostCtx.beginPath();ctx.moveTo(bp[0].x,bp[0].y);if(isCanvasSupported)
ghostCtx.moveTo(bp[0].x,bp[0].y);for(var i=0;i<bp.length-3;i+=3){ctx.bezierCurveTo(bp[i+1].x,bp[i+1].y,bp[i+2].x,bp[i+2].y,bp[i+3].x,bp[i+3].y);if(isCanvasSupported)
ghostCtx.bezierCurveTo(bp[i+1].x,bp[i+1].y,bp[i+2].x,bp[i+2].y,bp[i+3].x,bp[i+3].y);if(i>0&&i%3000===0){ctx.stroke();ctx.beginPath();ctx.moveTo(bp[i+3].x,bp[i+3].y);if(isCanvasSupported){ghostCtx.stroke();ghostCtx.beginPath();ghostCtx.moveTo(bp[i+3].x,bp[i+3].y);}}}
ctx.stroke();if(isCanvasSupported)
ghostCtx.stroke();}}
var animationInfo={source:ctx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.xClipAnimation,easingFunction:AnimationHelper.easing.linear,animationBase:0};return animationInfo;}
var drawRect=function(ctx,x1,y1,x2,y2,color,borderThickness,borderColor,top,bottom,left,right,fillOpacity){if(typeof(fillOpacity)==="undefined")
fillOpacity=1;borderThickness=borderThickness||0;borderColor=borderColor||"black";var a1=x1,a2=x2,b1=y1,b2=y2,edgeY,edgeX;if(x2-x1>15&&y2-y1>15)
var bevelDepth=8;else
var bevelDepth=0.35*Math.min((x2-x1),(y2-y1));var color2="rgba(255, 255, 255, .4)";var color3="rgba(255, 255, 255, 0.1)";var color1=color;ctx.beginPath();ctx.moveTo(x1,y1);ctx.save();ctx.fillStyle=color1;ctx.globalAlpha=fillOpacity;ctx.fillRect(x1,y1,x2-x1,y2-y1);ctx.globalAlpha=1;if(borderThickness>0){var offset=borderThickness%2===0?0:.5;ctx.beginPath();ctx.lineWidth=borderThickness;ctx.strokeStyle=borderColor;ctx.moveTo(x1,y1);ctx.rect(x1-offset,y1-offset,x2-x1+2*offset,y2-y1+2*offset);ctx.stroke();}
ctx.restore();if(top===true){ctx.save();ctx.beginPath();ctx.moveTo(x1,y1);ctx.lineTo(x1+bevelDepth,y1+bevelDepth);ctx.lineTo(x2-bevelDepth,y1+bevelDepth);ctx.lineTo(x2,y1);ctx.closePath();var grd=ctx.createLinearGradient((x2+x1)/ 2,b1+bevelDepth,(x2+x1)/ 2,b1);grd.addColorStop(0,color1);grd.addColorStop(1,color2);ctx.fillStyle=grd;ctx.fill();ctx.restore();}
if(bottom===true){ctx.save();ctx.beginPath();ctx.moveTo(x1,y2);ctx.lineTo(x1+bevelDepth,y2-bevelDepth);ctx.lineTo(x2-bevelDepth,y2-bevelDepth);ctx.lineTo(x2,y2);ctx.closePath();var grd=ctx.createLinearGradient((x2+x1)/ 2,b2-bevelDepth,(x2+x1)/ 2,b2);grd.addColorStop(0,color1);grd.addColorStop(1,color2);ctx.fillStyle=grd;ctx.fill();ctx.restore();}
if(left===true){ctx.save();ctx.beginPath();ctx.moveTo(x1,y1)
ctx.lineTo(x1+bevelDepth,y1+bevelDepth);ctx.lineTo(x1+bevelDepth,y2-bevelDepth);ctx.lineTo(x1,y2);ctx.closePath();var grd=ctx.createLinearGradient(a1+bevelDepth,(y2+y1)/ 2,a1,(y2+y1)/ 2);grd.addColorStop(0,color1);grd.addColorStop(1,color3);ctx.fillStyle=grd;ctx.fill();ctx.restore();}
if(right===true){ctx.save();ctx.beginPath();ctx.moveTo(x2,y1)
ctx.lineTo(x2-bevelDepth,y1+bevelDepth);ctx.lineTo(x2-bevelDepth,y2-bevelDepth);ctx.lineTo(x2,y2);var grd=ctx.createLinearGradient(a2-bevelDepth,(y2+y1)/ 2,a2,(y2+y1)/ 2);grd.addColorStop(0,color1);grd.addColorStop(1,color3);ctx.fillStyle=grd;grd.addColorStop(0,color1);grd.addColorStop(1,color3);ctx.fillStyle=grd;ctx.fill();ctx.closePath();ctx.restore();}}
Chart.prototype.renderColumn=function(plotUnit){var ctx=plotUnit.targetCanvasCtx||this.plotArea.ctx;var totalDataSeries=plotUnit.dataSeriesIndexes.length;if(totalDataSeries<=0)
return;var color=null;var plotArea=this.plotArea;var i=0,x,y;var dataPointX;var yZeroToPixel=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(0-plotUnit.axisY.conversionParameters.minimum))<<0;var maxBarWidth=Math.min((this.width*.15),this.plotArea.width / plotUnit.plotType.totalDataSeries*.9)<<0;var xMinDiff=plotUnit.axisX.dataInfo.minDiff;var barWidth=(((plotArea.width / Math.abs(plotUnit.axisX.maximum-plotUnit.axisX.minimum))*Math.abs(xMinDiff))/ plotUnit.plotType.totalDataSeries*.9)<<0;if(barWidth>maxBarWidth)
barWidth=maxBarWidth;else if(xMinDiff===Infinity){barWidth=maxBarWidth;}else if(barWidth<1)
barWidth=1;ctx.save();if(isCanvasSupported)
this._eventManager.ghostCtx.save();ctx.beginPath();ctx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height);ctx.clip();if(isCanvasSupported){this._eventManager.ghostCtx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height);this._eventManager.ghostCtx.clip();}
for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeriesIndex=plotUnit.dataSeriesIndexes[j];var dataSeries=this.data[dataSeriesIndex];var dataPoints=dataSeries.dataPoints;var isFirstDataPointInPlotArea=true;if(dataPoints.length>0){var bevelEnabled=(barWidth>5)&&dataSeries.bevelEnabled?true:false;for(i=0;i<dataPoints.length;i++){dataPoints[i].getTime?dataPointX=dataPoints[i].x.getTime():dataPointX=dataPoints[i].x;if(dataPointX<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax){continue;}
if(typeof(dataPoints[i].y)!=="number")
continue;x=(plotUnit.axisX.conversionParameters.reference+plotUnit.axisX.conversionParameters.pixelPerUnit*(dataPointX-plotUnit.axisX.conversionParameters.minimum)+.5)<<0;y=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(dataPoints[i].y-plotUnit.axisY.conversionParameters.minimum)+.5)<<0;var x1=x-(plotUnit.plotType.totalDataSeries*barWidth / 2)+((plotUnit.previousDataSeriesCount+j)*barWidth)<<0;var x2=x1+barWidth<<0;var y1;var y2;if(dataPoints[i].y>=0){y1=y;y2=yZeroToPixel;if(y1>y2){var temp=y1;y1=y2;y2=y1;}}else{y2=y;y1=yZeroToPixel;if(y1>y2){var temp=y1;y1=y2;y2=y1;}}
color=dataPoints[i].color?dataPoints[i].color:dataSeries._colorSet[i%dataSeries._colorSet.length];drawRect(ctx,x1,y1,x2,y2,color,0,null,bevelEnabled&&(dataPoints[i].y>=0),(dataPoints[i].y<0)&&bevelEnabled,false,false,dataSeries.fillOpacity);var id=dataSeries.dataPointIds[i];this._eventManager.objectMap[id]={id:id,objectType:"dataPoint",dataSeriesIndex:dataSeriesIndex,dataPointIndex:i,x1:x1,y1:y1,x2:x2,y2:y2};color=intToHexColorString(id);if(isCanvasSupported)
drawRect(this._eventManager.ghostCtx,x1,y1,x2,y2,color,0,null,false,false,false,false);if(dataPoints[i].indexLabel||dataSeries.indexLabel){this._indexLabels.push({chartType:"column",dataPoint:dataPoints[i],dataSeries:dataSeries,point:{x:x1+(x2-x1)/ 2,y:dataPoints[i].y>=0?y1:y2},direction:dataPoints[i].y>=0?1:-1,bounds:{x1:x1,y1:Math.min(y1,y2),x2:x2,y2:Math.max(y1,y2)},color:color});}}}}
ctx.restore();if(isCanvasSupported)
this._eventManager.ghostCtx.restore();var animationBase=Math.min(yZeroToPixel,plotUnit.axisY.boundingRect.y2);var animationInfo={source:ctx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.yScaleAnimation,easingFunction:AnimationHelper.easing.easeOutQuart,animationBase:animationBase};return animationInfo;}
Chart.prototype.renderStackedColumn=function(plotUnit){var ctx=plotUnit.targetCanvasCtx||this.plotArea.ctx;var totalDataSeries=plotUnit.dataSeriesIndexes.length;if(totalDataSeries<=0)
return;var color=null;var plotArea=this.plotArea;var offsetPositiveY=[];var offsetNegativeY=[];var i=0,x,y;var dataPointX;var yZeroToPixel=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(0-plotUnit.axisY.conversionParameters.minimum))<<0;var maxBarWidth=this.width*.15<<0;var xMinDiff=plotUnit.axisX.dataInfo.minDiff;var barWidth=(((plotArea.width / Math.abs(plotUnit.axisX.maximum-plotUnit.axisX.minimum))*Math.abs(xMinDiff))/ plotUnit.plotType.plotUnits.length*.9)<<0;if(barWidth>maxBarWidth)
barWidth=maxBarWidth;else if(xMinDiff===Infinity){barWidth=maxBarWidth;}else if(barWidth<1)
barWidth=1;ctx.save();if(isCanvasSupported)
this._eventManager.ghostCtx.save();ctx.beginPath();ctx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height);ctx.clip();if(isCanvasSupported){this._eventManager.ghostCtx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height);this._eventManager.ghostCtx.clip();}
for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeriesIndex=plotUnit.dataSeriesIndexes[j];var dataSeries=this.data[dataSeriesIndex];var dataPoints=dataSeries.dataPoints;var isFirstDataPointInPlotArea=true;if(dataPoints.length>0){var bevelEnabled=(barWidth>5)&&dataSeries.bevelEnabled?true:false;ctx.strokeStyle="#4572A7 ";for(i=0;i<dataPoints.length;i++){dataPointX=dataPoints[i].x.getTime?dataPoints[i].x.getTime():dataPoints[i].x;if(dataPointX<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax){continue;}
if(typeof(dataPoints[i].y)!=="number")
continue;x=(plotUnit.axisX.conversionParameters.reference+plotUnit.axisX.conversionParameters.pixelPerUnit*(dataPointX-plotUnit.axisX.conversionParameters.minimum)+.5)<<0;y=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(dataPoints[i].y-plotUnit.axisY.conversionParameters.minimum));var x1=x-(plotUnit.plotType.plotUnits.length*barWidth / 2)+(plotUnit.index*barWidth)<<0;var x2=x1+barWidth<<0;var y1;var y2;if(dataPoints[i].y>=0){var offset=offsetPositiveY[dataPointX]?offsetPositiveY[dataPointX]:0;y1=y-offset;y2=yZeroToPixel-offset;offsetPositiveY[dataPointX]=offset+(y2-y1);}else{var offset=offsetNegativeY[dataPointX]?offsetNegativeY[dataPointX]:0;y2=y+offset;y1=yZeroToPixel+offset;offsetNegativeY[dataPointX]=offset+(y2-y1);}
color=dataPoints[i].color?dataPoints[i].color:dataSeries._colorSet[i%dataSeries._colorSet.length];drawRect(ctx,x1,y1,x2,y2,color,0,null,bevelEnabled&&(dataPoints[i].y>=0),(dataPoints[i].y<0)&&bevelEnabled,false,false,dataSeries.fillOpacity);var id=dataSeries.dataPointIds[i];this._eventManager.objectMap[id]={id:id,objectType:"dataPoint",dataSeriesIndex:dataSeriesIndex,dataPointIndex:i,x1:x1,y1:y1,x2:x2,y2:y2};color=intToHexColorString(id);if(isCanvasSupported)
drawRect(this._eventManager.ghostCtx,x1,y1,x2,y2,color,0,null,false,false,false,false);if(dataPoints[i].indexLabel||dataSeries.indexLabel){this._indexLabels.push({chartType:"stackedColumn",dataPoint:dataPoints[i],dataSeries:dataSeries,point:{x:x,y:dataPoints[i].y>=0?y1:y2},direction:dataPoints[i].y>=0?1:-1,bounds:{x1:x1,y1:Math.min(y1,y2),x2:x2,y2:Math.max(y1,y2)},color:color});}}}}
ctx.restore();if(isCanvasSupported)
this._eventManager.ghostCtx.restore();var animationBase=Math.min(yZeroToPixel,plotUnit.axisY.boundingRect.y2);var animationInfo={source:ctx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.yScaleAnimation,easingFunction:AnimationHelper.easing.easeOutQuart,animationBase:animationBase};return animationInfo;}
Chart.prototype.renderStackedColumn100=function(plotUnit){var ctx=plotUnit.targetCanvasCtx||this.plotArea.ctx;var totalDataSeries=plotUnit.dataSeriesIndexes.length;if(totalDataSeries<=0)
return;var color=null;var plotArea=this.plotArea;var offsetPositiveY=[];var offsetNegativeY=[];var i=0,x,y;var dataPointX;var yZeroToPixel=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(0-plotUnit.axisY.conversionParameters.minimum))<<0;var maxBarWidth=this.width*.15<<0;var xMinDiff=plotUnit.axisX.dataInfo.minDiff;var barWidth=(((plotArea.width / Math.abs(plotUnit.axisX.maximum-plotUnit.axisX.minimum))*Math.abs(xMinDiff))/ plotUnit.plotType.plotUnits.length*.9)<<0;if(barWidth>maxBarWidth)
barWidth=maxBarWidth;else if(xMinDiff===Infinity){barWidth=maxBarWidth;}else if(barWidth<1)
barWidth=1;ctx.save();if(isCanvasSupported)
this._eventManager.ghostCtx.save();ctx.beginPath();ctx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height);ctx.clip();if(isCanvasSupported){this._eventManager.ghostCtx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height);this._eventManager.ghostCtx.clip();}
for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeriesIndex=plotUnit.dataSeriesIndexes[j];var dataSeries=this.data[dataSeriesIndex];var dataPoints=dataSeries.dataPoints;var isFirstDataPointInPlotArea=true;if(dataPoints.length>0){var bevelEnabled=(barWidth>5)&&dataSeries.bevelEnabled?true:false;for(i=0;i<dataPoints.length;i++){dataPointX=dataPoints[i].x.getTime?dataPoints[i].x.getTime():dataPoints[i].x;if(dataPointX<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax){continue;}
if(typeof(dataPoints[i].y)!=="number")
continue;x=(plotUnit.axisX.conversionParameters.reference+plotUnit.axisX.conversionParameters.pixelPerUnit*(dataPointX-plotUnit.axisX.conversionParameters.minimum)+.5)<<0;var yPercent;if(plotUnit.dataPointYSums[dataPointX]!==0)
yPercent=dataPoints[i].y / plotUnit.dataPointYSums[dataPointX]*100;else
yPercent=0;y=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(yPercent-plotUnit.axisY.conversionParameters.minimum));var x1=x-(plotUnit.plotType.plotUnits.length*barWidth / 2)+(plotUnit.index*barWidth)<<0;var x2=x1+barWidth<<0;var y1;var y2;if(dataPoints[i].y>=0){var offset=offsetPositiveY[dataPointX]?offsetPositiveY[dataPointX]:0;y1=y-offset;y2=yZeroToPixel-offset;offsetPositiveY[dataPointX]=offset+(y2-y1);}else{var offset=offsetNegativeY[dataPointX]?offsetNegativeY[dataPointX]:0;y2=y+offset;y1=yZeroToPixel+offset;offsetNegativeY[dataPointX]=offset+(y2-y1);}
color=dataPoints[i].color?dataPoints[i].color:dataSeries._colorSet[i%dataSeries._colorSet.length];drawRect(ctx,x1,y1,x2,y2,color,0,null,bevelEnabled&&(dataPoints[i].y>=0),(dataPoints[i].y<0)&&bevelEnabled,false,false,dataSeries.fillOpacity);var id=dataSeries.dataPointIds[i];this._eventManager.objectMap[id]={id:id,objectType:"dataPoint",dataSeriesIndex:dataSeriesIndex,dataPointIndex:i,x1:x1,y1:y1,x2:x2,y2:y2};color=intToHexColorString(id);if(isCanvasSupported)
drawRect(this._eventManager.ghostCtx,x1,y1,x2,y2,color,0,null,false,false,false,false);if(dataPoints[i].indexLabel||dataSeries.indexLabel){this._indexLabels.push({chartType:"stackedColumn100",dataPoint:dataPoints[i],dataSeries:dataSeries,point:{x:x,y:dataPoints[i].y>=0?y1:y2},direction:dataPoints[i].y>=0?1:-1,bounds:{x1:x1,y1:Math.min(y1,y2),x2:x2,y2:Math.max(y1,y2)},color:color});}}}}
ctx.restore();if(isCanvasSupported)
this._eventManager.ghostCtx.restore();var animationBase=Math.min(yZeroToPixel,plotUnit.axisY.boundingRect.y2);var animationInfo={source:ctx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.yScaleAnimation,easingFunction:AnimationHelper.easing.easeOutQuart,animationBase:animationBase};return animationInfo;}
Chart.prototype.renderBar=function(plotUnit){var ctx=plotUnit.targetCanvasCtx||this.plotArea.ctx;var totalDataSeries=plotUnit.dataSeriesIndexes.length;if(totalDataSeries<=0)
return;var color=null;var plotArea=this.plotArea;var i=0,x,y;var dataPointX;var yZeroToPixel=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(0-plotUnit.axisY.conversionParameters.minimum))<<0;var maxBarWidth=Math.min((this.height*.15),this.plotArea.height / plotUnit.plotType.totalDataSeries*.9)<<0;var xMinDiff=plotUnit.axisX.dataInfo.minDiff;var barWidth=(((plotArea.height / Math.abs(plotUnit.axisX.maximum-plotUnit.axisX.minimum))*Math.abs(xMinDiff))/ plotUnit.plotType.totalDataSeries*.9)<<0;if(barWidth>maxBarWidth)
barWidth=maxBarWidth;else if(xMinDiff===Infinity){barWidth=maxBarWidth;}else if(barWidth<1)
barWidth=1;ctx.save();if(isCanvasSupported)
this._eventManager.ghostCtx.save();ctx.beginPath();ctx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height);ctx.clip();if(isCanvasSupported){this._eventManager.ghostCtx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height);this._eventManager.ghostCtx.clip();}
for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeriesIndex=plotUnit.dataSeriesIndexes[j];var dataSeries=this.data[dataSeriesIndex];var dataPoints=dataSeries.dataPoints;var isFirstDataPointInPlotArea=true;if(dataPoints.length>0){var bevelEnabled=(barWidth>5)&&dataSeries.bevelEnabled?true:false;ctx.strokeStyle="#4572A7 ";for(i=0;i<dataPoints.length;i++){dataPoints[i].getTime?dataPointX=dataPoints[i].x.getTime():dataPointX=dataPoints[i].x;if(dataPointX<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax){continue;}
if(typeof(dataPoints[i].y)!=="number")
continue;y=(plotUnit.axisX.conversionParameters.reference+plotUnit.axisX.conversionParameters.pixelPerUnit*(dataPointX-plotUnit.axisX.conversionParameters.minimum)+.5)<<0;x=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(dataPoints[i].y-plotUnit.axisY.conversionParameters.minimum)+.5)<<0;var y1=(y-(plotUnit.plotType.totalDataSeries*barWidth / 2)+((plotUnit.previousDataSeriesCount+j)*barWidth))<<0;var y2=y1+barWidth<<0;var x1;var x2;if(dataPoints[i].y>=0){x1=yZeroToPixel;x2=x;}else{x1=x;x2=yZeroToPixel;}
color=dataPoints[i].color?dataPoints[i].color:dataSeries._colorSet[i%dataSeries._colorSet.length];drawRect(ctx,x1,y1,x2,y2,color,0,null,bevelEnabled,false,false,false,dataSeries.fillOpacity);var id=dataSeries.dataPointIds[i];this._eventManager.objectMap[id]={id:id,objectType:"dataPoint",dataSeriesIndex:dataSeriesIndex,dataPointIndex:i,x1:x1,y1:y1,x2:x2,y2:y2};color=intToHexColorString(id);if(isCanvasSupported)
drawRect(this._eventManager.ghostCtx,x1,y1,x2,y2,color,0,null,false,false,false,false);this._indexLabels.push({chartType:"bar",dataPoint:dataPoints[i],dataSeries:dataSeries,point:{x:dataPoints[i].y>=0?x2:x1,y:y1+(y2-y1)/ 2},direction:dataPoints[i].y>=0?1:-1,bounds:{x1:Math.min(x1,x2),y1:y1,x2:Math.max(x1,x2),y2:y2},color:color});}}}
ctx.restore();if(isCanvasSupported)
this._eventManager.ghostCtx.restore();var animationBase=Math.max(yZeroToPixel,plotUnit.axisX.boundingRect.x2);var animationInfo={source:ctx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.xScaleAnimation,easingFunction:AnimationHelper.easing.easeOutQuart,animationBase:animationBase};return animationInfo;}
Chart.prototype.renderStackedBar=function(plotUnit){var ctx=plotUnit.targetCanvasCtx||this.plotArea.ctx;var totalDataSeries=plotUnit.dataSeriesIndexes.length;if(totalDataSeries<=0)
return;var color=null;var plotArea=this.plotArea;var offsetPositiveY=[];var offsetNegativeY=[];var i=0,x,y;var dataPointX;var yZeroToPixel=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(0-plotUnit.axisY.conversionParameters.minimum))<<0;var maxBarWidth=this.height*.15<<0;var xMinDiff=plotUnit.axisX.dataInfo.minDiff;var barWidth=(((plotArea.height / Math.abs(plotUnit.axisX.maximum-plotUnit.axisX.minimum))*Math.abs(xMinDiff))/ plotUnit.plotType.plotUnits.length*.9)<<0;if(barWidth>maxBarWidth)
barWidth=maxBarWidth;else if(xMinDiff===Infinity){barWidth=maxBarWidth;}else if(barWidth<1)
barWidth=1;ctx.save();if(isCanvasSupported)
this._eventManager.ghostCtx.save();ctx.beginPath();ctx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height);ctx.clip();if(isCanvasSupported){this._eventManager.ghostCtx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height);this._eventManager.ghostCtx.clip();}
for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeriesIndex=plotUnit.dataSeriesIndexes[j];var dataSeries=this.data[dataSeriesIndex];var dataPoints=dataSeries.dataPoints;var isFirstDataPointInPlotArea=true;if(dataPoints.length>0){var bevelEnabled=(barWidth>5)&&dataSeries.bevelEnabled?true:false;ctx.strokeStyle="#4572A7 ";for(i=0;i<dataPoints.length;i++){dataPointX=dataPoints[i].x.getTime?dataPoints[i].x.getTime():dataPoints[i].x;if(dataPointX<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax){continue;}
if(typeof(dataPoints[i].y)!=="number")
continue;y=(plotUnit.axisX.conversionParameters.reference+plotUnit.axisX.conversionParameters.pixelPerUnit*(dataPointX-plotUnit.axisX.conversionParameters.minimum)+.5)<<0;x=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(dataPoints[i].y-plotUnit.axisY.conversionParameters.minimum));var y1=y-(plotUnit.plotType.plotUnits.length*barWidth / 2)+(plotUnit.index*barWidth)<<0;var y2=y1+barWidth<<0;var x1;var x2;if(dataPoints[i].y>=0){var offset=offsetPositiveY[dataPointX]?offsetPositiveY[dataPointX]:0;x1=yZeroToPixel+offset;x2=x+offset;offsetPositiveY[dataPointX]=offset+(x2-x1);}else{var offset=offsetNegativeY[dataPointX]?offsetNegativeY[dataPointX]:0;x1=x-offset;x2=yZeroToPixel-offset;offsetNegativeY[dataPointX]=offset+(x2-x1);}
color=dataPoints[i].color?dataPoints[i].color:dataSeries._colorSet[i%dataSeries._colorSet.length];drawRect(ctx,x1,y1,x2,y2,color,0,null,bevelEnabled,false,false,false,dataSeries.fillOpacity);var id=dataSeries.dataPointIds[i];this._eventManager.objectMap[id]={id:id,objectType:"dataPoint",dataSeriesIndex:dataSeriesIndex,dataPointIndex:i,x1:x1,y1:y1,x2:x2,y2:y2};color=intToHexColorString(id);if(isCanvasSupported)
drawRect(this._eventManager.ghostCtx,x1,y1,x2,y2,color,0,null,false,false,false,false);this._indexLabels.push({chartType:"stackedBar",dataPoint:dataPoints[i],dataSeries:dataSeries,point:{x:dataPoints[i].y>=0?x2:x1,y:y},direction:dataPoints[i].y>=0?1:-1,bounds:{x1:Math.min(x1,x2),y1:y1,x2:Math.max(x1,x2),y2:y2},color:color});}}}
ctx.restore();if(isCanvasSupported)
this._eventManager.ghostCtx.restore();var animationBase=Math.max(yZeroToPixel,plotUnit.axisX.boundingRect.x2);var animationInfo={source:ctx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.xScaleAnimation,easingFunction:AnimationHelper.easing.easeOutQuart,animationBase:animationBase};return animationInfo;}
Chart.prototype.renderStackedBar100=function(plotUnit){var ctx=plotUnit.targetCanvasCtx||this.plotArea.ctx;var totalDataSeries=plotUnit.dataSeriesIndexes.length;if(totalDataSeries<=0)
return;var color=null;var plotArea=this.plotArea;var offsetPositiveY=[];var offsetNegativeY=[];var i=0,x,y;var dataPointX;var yZeroToPixel=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(0-plotUnit.axisY.conversionParameters.minimum))<<0;var maxBarWidth=this.height*.15<<0;var xMinDiff=plotUnit.axisX.dataInfo.minDiff;var barWidth=(((plotArea.height / Math.abs(plotUnit.axisX.maximum-plotUnit.axisX.minimum))*Math.abs(xMinDiff))/ plotUnit.plotType.plotUnits.length*.9)<<0;if(barWidth>maxBarWidth)
barWidth=maxBarWidth;else if(xMinDiff===Infinity){barWidth=maxBarWidth;}else if(barWidth<1)
barWidth=1;ctx.save();if(isCanvasSupported)
this._eventManager.ghostCtx.save();ctx.beginPath();ctx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height);ctx.clip();if(isCanvasSupported){this._eventManager.ghostCtx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height);this._eventManager.ghostCtx.clip();}
for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeriesIndex=plotUnit.dataSeriesIndexes[j];var dataSeries=this.data[dataSeriesIndex];var dataPoints=dataSeries.dataPoints;var isFirstDataPointInPlotArea=true;if(dataPoints.length>0){var bevelEnabled=(barWidth>5)&&dataSeries.bevelEnabled?true:false;ctx.strokeStyle="#4572A7 ";for(i=0;i<dataPoints.length;i++){dataPointX=dataPoints[i].x.getTime?dataPoints[i].x.getTime():dataPoints[i].x;if(dataPointX<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax){continue;}
if(typeof(dataPoints[i].y)!=="number")
continue;y=(plotUnit.axisX.conversionParameters.reference+plotUnit.axisX.conversionParameters.pixelPerUnit*(dataPointX-plotUnit.axisX.conversionParameters.minimum)+.5)<<0;var yPercent;if(plotUnit.dataPointYSums[dataPointX]!==0)
yPercent=dataPoints[i].y / plotUnit.dataPointYSums[dataPointX]*100;else
yPercent=0;x=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(yPercent-plotUnit.axisY.conversionParameters.minimum));var y1=y-(plotUnit.plotType.plotUnits.length*barWidth / 2)+(plotUnit.index*barWidth)<<0;var y2=y1+barWidth<<0;var x1;var x2;if(dataPoints[i].y>=0){var offset=offsetPositiveY[dataPointX]?offsetPositiveY[dataPointX]:0;x1=yZeroToPixel+offset;x2=x+offset;offsetPositiveY[dataPointX]=offset+(x2-x1);}else{var offset=offsetNegativeY[dataPointX]?offsetNegativeY[dataPointX]:0;x1=x-offset;x2=yZeroToPixel-offset;offsetNegativeY[dataPointX]=offset+(x2-x1);}
color=dataPoints[i].color?dataPoints[i].color:dataSeries._colorSet[i%dataSeries._colorSet.length];drawRect(ctx,x1,y1,x2,y2,color,0,null,bevelEnabled,false,false,false,dataSeries.fillOpacity);var id=dataSeries.dataPointIds[i];this._eventManager.objectMap[id]={id:id,objectType:"dataPoint",dataSeriesIndex:dataSeriesIndex,dataPointIndex:i,x1:x1,y1:y1,x2:x2,y2:y2};color=intToHexColorString(id);if(isCanvasSupported)
drawRect(this._eventManager.ghostCtx,x1,y1,x2,y2,color,0,null,false,false,false,false);this._indexLabels.push({chartType:"stackedBar100",dataPoint:dataPoints[i],dataSeries:dataSeries,point:{x:dataPoints[i].y>=0?x2:x1,y:y},direction:dataPoints[i].y>=0?1:-1,bounds:{x1:Math.min(x1,x2),y1:y1,x2:Math.max(x1,x2),y2:y2},color:color});}}}
ctx.restore();if(isCanvasSupported)
this._eventManager.ghostCtx.restore();var animationBase=Math.max(yZeroToPixel,plotUnit.axisX.boundingRect.x2);var animationInfo={source:ctx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.xScaleAnimation,easingFunction:AnimationHelper.easing.easeOutQuart,animationBase:animationBase};return animationInfo;}
Chart.prototype.renderArea=function(plotUnit){var ctx=plotUnit.targetCanvasCtx||this.plotArea.ctx;var totalDataSeries=plotUnit.dataSeriesIndexes.length;if(totalDataSeries<=0)
return;var ghostCtx=this._eventManager.ghostCtx;var axisXProps=plotUnit.axisX.lineCoordinates;var axisYProps=plotUnit.axisY.lineCoordinates;var markers=[];var plotArea=this.plotArea;ctx.save();if(isCanvasSupported)
ghostCtx.save();ctx.beginPath();ctx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height);ctx.clip();if(isCanvasSupported){ghostCtx.beginPath();ghostCtx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height);ghostCtx.clip();}
for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeriesIndex=plotUnit.dataSeriesIndexes[j];var dataSeries=this.data[dataSeriesIndex];var dataPoints=dataSeries.dataPoints;var seriesId=dataSeries.id;this._eventManager.objectMap[seriesId]={objectType:"dataSeries",dataSeriesIndex:dataSeriesIndex};var hexColor=intToHexColorString(seriesId);ghostCtx.fillStyle=hexColor;markers=[];var isFirstDataPointInPlotArea=true;var i=0,x,y;var dataPointX;var yZeroToPixel=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(0-plotUnit.axisY.conversionParameters.minimum)+.5)<<0;var baseY;var startPoint=null;if(dataPoints.length>0){var color=dataSeries._colorSet[i%dataSeries._colorSet.length];ctx.fillStyle=color;ctx.strokeStyle=color;ctx.lineWidth=dataSeries.lineThickness;var prevDataNull=true;for(;i<dataPoints.length;i++){dataPointX=dataPoints[i].x.getTime?dataPoints[i].x.getTime():dataPoints[i].x;if(dataPointX<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax){continue;}
if(typeof(dataPoints[i].y)!=="number"){closeArea();prevDataNull=true;continue;}
x=(plotUnit.axisX.conversionParameters.reference+plotUnit.axisX.conversionParameters.pixelPerUnit*(dataPointX-plotUnit.axisX.conversionParameters.minimum)+.5)<<0;y=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(dataPoints[i].y-plotUnit.axisY.conversionParameters.minimum)+.5)<<0;if(isFirstDataPointInPlotArea||prevDataNull){ctx.beginPath();ctx.moveTo(x,y);startPoint={x:x,y:y};if(isCanvasSupported){ghostCtx.beginPath();ghostCtx.moveTo(x,y);}
isFirstDataPointInPlotArea=false;prevDataNull=false;}
else{ctx.lineTo(x,y);if(isCanvasSupported)
ghostCtx.lineTo(x,y);if(i%250==0){closeArea();}}
var id=dataSeries.dataPointIds[i];this._eventManager.objectMap[id]={id:id,objectType:"dataPoint",dataSeriesIndex:dataSeriesIndex,dataPointIndex:i,x1:x,y1:y};if(dataPoints[i].markerSize!==0){if(dataPoints[i].markerSize>0||dataSeries.markerSize>0){var markerProps=dataSeries.getMarkerProperties(i,x,y,ctx);markers.push(markerProps);var markerColor=intToHexColorString(id);if(isCanvasSupported){markers.push({x:x,y:y,ctx:ghostCtx,type:markerProps.type,size:markerProps.size,color:markerColor,borderColor:markerColor,borderThickness:markerProps.borderThickness});}}}
if(dataPoints[i].indexLabel||dataSeries.indexLabel){this._indexLabels.push({chartType:"area",dataPoint:dataPoints[i],dataSeries:dataSeries,point:{x:x,y:y},direction:dataPoints[i].y>=0?1:-1,color:color});}}
closeArea();RenderHelper.drawMarkers(markers);}}
ctx.restore();if(isCanvasSupported)
this._eventManager.ghostCtx.restore();function closeArea(){if(!startPoint)
return;if(dataSeries.lineThickness>0)
ctx.stroke();if(plotUnit.axisY.minimum<=0&&plotUnit.axisY.maximum>=0){baseY=yZeroToPixel;}
else if(plotUnit.axisY.maximum<0)
baseY=axisYProps.y1;else if(plotUnit.axisY.minimum>0)
baseY=axisXProps.y2;ctx.lineTo(x,baseY);ctx.lineTo(startPoint.x,baseY);ctx.closePath();ctx.globalAlpha=dataSeries.fillOpacity;ctx.fill();ctx.globalAlpha=1;if(isCanvasSupported){ghostCtx.lineTo(x,baseY);ghostCtx.lineTo(startPoint.x,baseY);ghostCtx.closePath();ghostCtx.fill();}
ctx.beginPath();ctx.moveTo(x,y);ghostCtx.beginPath();ghostCtx.moveTo(x,y);startPoint={x:x,y:y};}
var animationInfo={source:ctx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.xClipAnimation,easingFunction:AnimationHelper.easing.linear,animationBase:0};return animationInfo;}
Chart.prototype.renderSplineArea=function(plotUnit){var ctx=plotUnit.targetCanvasCtx||this.plotArea.ctx;var totalDataSeries=plotUnit.dataSeriesIndexes.length;if(totalDataSeries<=0)
return;var ghostCtx=this._eventManager.ghostCtx;var axisXProps=plotUnit.axisX.lineCoordinates;var axisYProps=plotUnit.axisY.lineCoordinates;var markers=[];var plotArea=this.plotArea;ctx.save();if(isCanvasSupported)
ghostCtx.save();ctx.beginPath();ctx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height);ctx.clip();if(isCanvasSupported){ghostCtx.beginPath();ghostCtx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height);ghostCtx.clip();}
for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeriesIndex=plotUnit.dataSeriesIndexes[j];var dataSeries=this.data[dataSeriesIndex];var dataPoints=dataSeries.dataPoints;var seriesId=dataSeries.id;this._eventManager.objectMap[seriesId]={objectType:"dataSeries",dataSeriesIndex:dataSeriesIndex};var hexColor=intToHexColorString(seriesId);ghostCtx.fillStyle=hexColor;markers=[];var isFirstDataPointInPlotArea=true;var i=0,x,y;var dataPointX;var yZeroToPixel=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(0-plotUnit.axisY.conversionParameters.minimum)+.5)<<0;var baseY;var startPoint=null;var pixels=[];if(dataPoints.length>0){color=dataSeries._colorSet[i%dataSeries._colorSet.length];ctx.fillStyle=color;ctx.strokeStyle=color;ctx.lineWidth=dataSeries.lineThickness;for(;i<dataPoints.length;i++){dataPointX=dataPoints[i].x.getTime?dataPoints[i].x.getTime():dataPoints[i].x;if(dataPointX<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax){continue;}
if(typeof(dataPoints[i].y)!=="number"){if(i>0){renderBezierArea();pixels=[];}
continue;}
x=(plotUnit.axisX.conversionParameters.reference+plotUnit.axisX.conversionParameters.pixelPerUnit*(dataPointX-plotUnit.axisX.conversionParameters.minimum)+.5)<<0;y=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(dataPoints[i].y-plotUnit.axisY.conversionParameters.minimum)+.5)<<0;var id=dataSeries.dataPointIds[i];this._eventManager.objectMap[id]={id:id,objectType:"dataPoint",dataSeriesIndex:dataSeriesIndex,dataPointIndex:i,x1:x,y1:y};pixels[pixels.length]={x:x,y:y};if(dataPoints[i].markerSize!==0){if(dataPoints[i].markerSize>0||dataSeries.markerSize>0){var markerProps=dataSeries.getMarkerProperties(i,x,y,ctx);markers.push(markerProps);var markerColor=intToHexColorString(id);if(isCanvasSupported){markers.push({x:x,y:y,ctx:ghostCtx,type:markerProps.type,size:markerProps.size,color:markerColor,borderColor:markerColor,borderThickness:markerProps.borderThickness});}}}
if(dataPoints[i].indexLabel||dataSeries.indexLabel){this._indexLabels.push({chartType:"splineArea",dataPoint:dataPoints[i],dataSeries:dataSeries,point:{x:x,y:y},direction:dataPoints[i].y>=0?1:-1,color:color});}}
renderBezierArea();RenderHelper.drawMarkers(markers);}}
ctx.restore();if(isCanvasSupported)
this._eventManager.ghostCtx.restore();function renderBezierArea(){var bp=getBezierPoints(pixels,2);if(bp.length>0){ctx.beginPath();ctx.moveTo(bp[0].x,bp[0].y);if(isCanvasSupported){ghostCtx.beginPath();ghostCtx.moveTo(bp[0].x,bp[0].y);}
for(var i=0;i<bp.length-3;i+=3){ctx.bezierCurveTo(bp[i+1].x,bp[i+1].y,bp[i+2].x,bp[i+2].y,bp[i+3].x,bp[i+3].y);if(isCanvasSupported)
ghostCtx.bezierCurveTo(bp[i+1].x,bp[i+1].y,bp[i+2].x,bp[i+2].y,bp[i+3].x,bp[i+3].y);}
if(dataSeries.lineThickness>0)
ctx.stroke();if(plotUnit.axisY.minimum<=0&&plotUnit.axisY.maximum>=0){baseY=yZeroToPixel;}
else if(plotUnit.axisY.maximum<0)
baseY=axisYProps.y1;else if(plotUnit.axisY.minimum>0)
baseY=axisXProps.y2;startPoint={x:bp[0].x,y:bp[0].y};ctx.lineTo(bp[bp.length-1].x,baseY);ctx.lineTo(startPoint.x,baseY);ctx.closePath();ctx.globalAlpha=dataSeries.fillOpacity;ctx.fill();ctx.globalAlpha=1;if(isCanvasSupported){ghostCtx.lineTo(bp[bp.length-1].x,baseY);ghostCtx.lineTo(startPoint.x,baseY);ghostCtx.closePath();ghostCtx.fill();}}}
var animationInfo={source:ctx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.xClipAnimation,easingFunction:AnimationHelper.easing.linear,animationBase:0};return animationInfo;}
Chart.prototype.renderStepArea=function(plotUnit){var ctx=plotUnit.targetCanvasCtx||this.plotArea.ctx;var totalDataSeries=plotUnit.dataSeriesIndexes.length;if(totalDataSeries<=0)
return;var ghostCtx=this._eventManager.ghostCtx;var axisXProps=plotUnit.axisX.lineCoordinates;var axisYProps=plotUnit.axisY.lineCoordinates;var markers=[];var plotArea=this.plotArea;ctx.save();if(isCanvasSupported)
ghostCtx.save();ctx.beginPath();ctx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height);ctx.clip();if(isCanvasSupported){ghostCtx.beginPath();ghostCtx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height);ghostCtx.clip();}
for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeriesIndex=plotUnit.dataSeriesIndexes[j];var dataSeries=this.data[dataSeriesIndex];var dataPoints=dataSeries.dataPoints;var seriesId=dataSeries.id;this._eventManager.objectMap[seriesId]={objectType:"dataSeries",dataSeriesIndex:dataSeriesIndex};var hexColor=intToHexColorString(seriesId);ghostCtx.fillStyle=hexColor;markers=[];var isFirstDataPointInPlotArea=true;var i=0,x,y;var dataPointX;var yZeroToPixel=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(0-plotUnit.axisY.conversionParameters.minimum)+.5)<<0;var baseY;var startPoint=null;var prevDataNull=false;if(dataPoints.length>0){var color=dataSeries._colorSet[i%dataSeries._colorSet.length];ctx.fillStyle=color;ctx.strokeStyle=color;ctx.lineWidth=dataSeries.lineThickness;for(;i<dataPoints.length;i++){dataPointX=dataPoints[i].x.getTime?dataPoints[i].x.getTime():dataPoints[i].x;if(dataPointX<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax){continue;}
var prevY=y;if(typeof(dataPoints[i].y)!=="number"){closeArea();prevDataNull=true;continue;}
x=(plotUnit.axisX.conversionParameters.reference+plotUnit.axisX.conversionParameters.pixelPerUnit*(dataPointX-plotUnit.axisX.conversionParameters.minimum)+.5)<<0;y=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(dataPoints[i].y-plotUnit.axisY.conversionParameters.minimum)+.5)<<0;if(isFirstDataPointInPlotArea||prevDataNull){ctx.beginPath();ctx.moveTo(x,y);startPoint={x:x,y:y};if(isCanvasSupported){ghostCtx.beginPath();ghostCtx.moveTo(x,y);}
isFirstDataPointInPlotArea=false;prevDataNull=false;}
else{ctx.lineTo(x,prevY);if(isCanvasSupported)
ghostCtx.lineTo(x,prevY);ctx.lineTo(x,y);if(isCanvasSupported)
ghostCtx.lineTo(x,y);if(i%250==0){closeArea();}}
var id=dataSeries.dataPointIds[i];this._eventManager.objectMap[id]={id:id,objectType:"dataPoint",dataSeriesIndex:dataSeriesIndex,dataPointIndex:i,x1:x,y1:y};if(dataPoints[i].markerSize!==0){if(dataPoints[i].markerSize>0||dataSeries.markerSize>0){var markerProps=dataSeries.getMarkerProperties(i,x,y,ctx);markers.push(markerProps);var markerColor=intToHexColorString(id);if(isCanvasSupported){markers.push({x:x,y:y,ctx:ghostCtx,type:markerProps.type,size:markerProps.size,color:markerColor,borderColor:markerColor,borderThickness:markerProps.borderThickness});}}}
if(dataPoints[i].indexLabel||dataSeries.indexLabel){this._indexLabels.push({chartType:"stepArea",dataPoint:dataPoints[i],dataSeries:dataSeries,point:{x:x,y:y},direction:dataPoints[i].y>=0?1:-1,color:color});}}
closeArea();RenderHelper.drawMarkers(markers);}}
ctx.restore();if(isCanvasSupported)
this._eventManager.ghostCtx.restore();function closeArea(){if(!startPoint)
return;if(dataSeries.lineThickness>0)
ctx.stroke();if(plotUnit.axisY.minimum<=0&&plotUnit.axisY.maximum>=0){baseY=yZeroToPixel;}
else if(plotUnit.axisY.maximum<0)
baseY=axisYProps.y1;else if(plotUnit.axisY.minimum>0)
baseY=axisXProps.y2;ctx.lineTo(x,baseY);ctx.lineTo(startPoint.x,baseY);ctx.closePath();ctx.globalAlpha=dataSeries.fillOpacity;ctx.fill();ctx.globalAlpha=1;if(isCanvasSupported){ghostCtx.lineTo(x,baseY);ghostCtx.lineTo(startPoint.x,baseY);ghostCtx.closePath();ghostCtx.fill();}
ctx.beginPath();ctx.moveTo(x,y);ghostCtx.beginPath();ghostCtx.moveTo(x,y);startPoint={x:x,y:y};}
var animationInfo={source:ctx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.xClipAnimation,easingFunction:AnimationHelper.easing.linear,animationBase:0};return animationInfo;}
Chart.prototype.renderStackedArea=function(plotUnit){var ctx=plotUnit.targetCanvasCtx||this.plotArea.ctx;var totalDataSeries=plotUnit.dataSeriesIndexes.length;if(totalDataSeries<=0)
return;var color=null;var markers=[];var plotArea=this.plotArea;var offsetY=[];var allXValues=[];var i=0,x,y;var dataPointX;var yZeroToPixel=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(0-plotUnit.axisY.conversionParameters.minimum))<<0;var xMinDiff=plotUnit.axisX.dataInfo.minDiff;var ghostCtx=this._eventManager.ghostCtx;if(isCanvasSupported)
ghostCtx.beginPath();ctx.save();if(isCanvasSupported)
ghostCtx.save();ctx.beginPath();ctx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height);ctx.clip();if(isCanvasSupported){ghostCtx.beginPath();ghostCtx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height);ghostCtx.clip();}
xValuePresent=[];for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeriesIndex=plotUnit.dataSeriesIndexes[j];var dataSeries=this.data[dataSeriesIndex];var dataPoints=dataSeries.dataPoints;var xValue;dataSeries.dataPointIndexes=[];for(i=0;i<dataPoints.length;i++){xValue=dataPoints[i].x.getTime?dataPoints[i].x.getTime():dataPoints[i].x;dataSeries.dataPointIndexes[xValue]=i;if(!xValuePresent[xValue]){allXValues.push(xValue);xValuePresent[xValue]=true;}}
allXValues.sort(compareNumbers);}
for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeriesIndex=plotUnit.dataSeriesIndexes[j];var dataSeries=this.data[dataSeriesIndex];var dataPoints=dataSeries.dataPoints;var isFirstDataPointInPlotArea=true;var currentBaseValues=[];var seriesId=dataSeries.id;this._eventManager.objectMap[seriesId]={objectType:"dataSeries",dataSeriesIndex:dataSeriesIndex};var hexColor=intToHexColorString(seriesId);ghostCtx.fillStyle=hexColor;if(allXValues.length>0){color=dataSeries._colorSet[0];ctx.fillStyle=color;ctx.strokeStyle=color;ctx.lineWidth=dataSeries.lineThickness;for(i=0;i<allXValues.length;i++){dataPointX=allXValues[i];var dataPoint=null;if(dataSeries.dataPointIndexes[dataPointX]>=0)
dataPoint=dataPoints[dataSeries.dataPointIndexes[dataPointX]];else
dataPoint={x:dataPointX,y:0};if(dataPointX<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax){continue;}
if(typeof(dataPoint.y)!=="number")
continue;var x=(plotUnit.axisX.conversionParameters.reference+plotUnit.axisX.conversionParameters.pixelPerUnit*(dataPointX-plotUnit.axisX.conversionParameters.minimum)+.5)<<0;var y=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(dataPoint.y-plotUnit.axisY.conversionParameters.minimum));var offset=offsetY[dataPointX]?offsetY[dataPointX]:0;y=y-offset;currentBaseValues.push({x:x,y:yZeroToPixel-offset});offsetY[dataPointX]=yZeroToPixel-y;if(isFirstDataPointInPlotArea){ctx.beginPath();ctx.moveTo(x,y);if(isCanvasSupported){ghostCtx.beginPath();ghostCtx.moveTo(x,y);}
isFirstDataPointInPlotArea=false;}
else{ctx.lineTo(x,y);if(isCanvasSupported)
ghostCtx.lineTo(x,y);if(i%250==0){if(dataSeries.lineThickness>0)
ctx.stroke();while(currentBaseValues.length>0){var point=currentBaseValues.pop();ctx.lineTo(point.x,point.y);if(isCanvasSupported)
ghostCtx.lineTo(point.x,point.y);}
ctx.closePath();ctx.globalAlpha=dataSeries.fillOpacity;ctx.fill();ctx.globalAlpha=1;ctx.beginPath();ctx.moveTo(x,y);if(isCanvasSupported){ghostCtx.closePath();ghostCtx.fill();ghostCtx.beginPath();ghostCtx.moveTo(x,y);}
currentBaseValues.push({x:x,y:yZeroToPixel-offset});}}
if(dataSeries.dataPointIndexes[dataPointX]>=0){var id=dataSeries.dataPointIds[dataSeries.dataPointIndexes[dataPointX]];this._eventManager.objectMap[id]={id:id,objectType:"dataPoint",dataSeriesIndex:dataSeriesIndex,dataPointIndex:dataSeries.dataPointIndexes[dataPointX],x1:x,y1:y};}
if(dataSeries.dataPointIndexes[dataPointX]>=0&&dataPoint.markerSize!==0){if(dataPoint.markerSize>0||dataSeries.markerSize>0){var markerProps=dataSeries.getMarkerProperties(i,x,y,ctx);markers.push(markerProps);markerColor=intToHexColorString(id);if(isCanvasSupported){markers.push({x:x,y:y,ctx:ghostCtx,type:markerProps.type,size:markerProps.size,color:markerColor,borderColor:markerColor,borderThickness:markerProps.borderThickness});}}}
if(dataPoint.indexLabel||dataSeries.indexLabel){this._indexLabels.push({chartType:"stackedArea",dataPoint:dataPoint,dataSeries:dataSeries,point:{x:x,y:y},direction:dataPoints[i].y>=0?1:-1,color:color});}}
if(dataSeries.lineThickness>0)
ctx.stroke();while(currentBaseValues.length>0){var point=currentBaseValues.pop();ctx.lineTo(point.x,point.y);if(isCanvasSupported)
ghostCtx.lineTo(point.x,point.y);}
ctx.closePath();ctx.globalAlpha=dataSeries.fillOpacity;ctx.fill();ctx.globalAlpha=1;ctx.beginPath();ctx.moveTo(x,y);if(isCanvasSupported){ghostCtx.closePath();ghostCtx.fill();ghostCtx.beginPath();ghostCtx.moveTo(x,y);}}
delete(dataSeries.dataPointIndexes);}
RenderHelper.drawMarkers(markers);ctx.restore();if(isCanvasSupported)
ghostCtx.restore();var animationInfo={source:ctx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.xClipAnimation,easingFunction:AnimationHelper.easing.linear,animationBase:0};return animationInfo;}
Chart.prototype.renderStackedArea100=function(plotUnit){var ctx=plotUnit.targetCanvasCtx||this.plotArea.ctx;var totalDataSeries=plotUnit.dataSeriesIndexes.length;if(totalDataSeries<=0)
return;var color=null;var plotArea=this.plotArea;var markers=[];var offsetY=[];var allXValues=[];var i=0,x,y;var dataPointX;var yZeroToPixel=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(0-plotUnit.axisY.conversionParameters.minimum))<<0;var maxBarWidth=this.width*.15<<0;var xMinDiff=plotUnit.axisX.dataInfo.minDiff;var barWidth=(((plotArea.width / Math.abs(plotUnit.axisX.maximum-plotUnit.axisX.minimum))*Math.abs(xMinDiff))*.9)<<0;var ghostCtx=this._eventManager.ghostCtx;ctx.save();if(isCanvasSupported)
ghostCtx.save();ctx.beginPath();ctx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height);ctx.clip();if(isCanvasSupported){ghostCtx.beginPath();ghostCtx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height);ghostCtx.clip();}
xValuePresent=[];for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeriesIndex=plotUnit.dataSeriesIndexes[j];var dataSeries=this.data[dataSeriesIndex];var dataPoints=dataSeries.dataPoints;var xValue;dataSeries.dataPointIndexes=[];for(i=0;i<dataPoints.length;i++){xValue=dataPoints[i].x.getTime?dataPoints[i].x.getTime():dataPoints[i].x;dataSeries.dataPointIndexes[xValue]=i;if(!xValuePresent[xValue]){allXValues.push(xValue);xValuePresent[xValue]=true;}}
allXValues.sort(compareNumbers);}
for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeriesIndex=plotUnit.dataSeriesIndexes[j];var dataSeries=this.data[dataSeriesIndex];var dataPoints=dataSeries.dataPoints;var isFirstDataPointInPlotArea=true;var seriesId=dataSeries.id;this._eventManager.objectMap[seriesId]={objectType:"dataSeries",dataSeriesIndex:dataSeriesIndex};var hexColor=intToHexColorString(seriesId);ghostCtx.fillStyle=hexColor;if(dataPoints.length==1)
barWidth=maxBarWidth;if(barWidth<1)
barWidth=1;else if(barWidth>maxBarWidth)
barWidth=maxBarWidth;var currentBaseValues=[];if(allXValues.length>0){color=dataSeries._colorSet[i%dataSeries._colorSet.length];ctx.fillStyle=color;ctx.strokeStyle=color;ctx.lineWidth=dataSeries.lineThickness;var bevelEnabled=(barWidth>5)?false:false;for(i=0;i<allXValues.length;i++){dataPointX=allXValues[i];var dataPoint=null;if(dataSeries.dataPointIndexes[dataPointX]>=0)
dataPoint=dataPoints[dataSeries.dataPointIndexes[dataPointX]];else
dataPoint={x:dataPointX,y:0};if(dataPointX<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax){continue;}
if(typeof(dataPoint.y)!=="number")
continue;var yPercent;if(plotUnit.dataPointYSums[dataPointX]!==0)
yPercent=dataPoint.y / plotUnit.dataPointYSums[dataPointX]*100;else
yPercent=0;var x=(plotUnit.axisX.conversionParameters.reference+plotUnit.axisX.conversionParameters.pixelPerUnit*(dataPointX-plotUnit.axisX.conversionParameters.minimum)+.5)<<0;var y=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(yPercent-plotUnit.axisY.conversionParameters.minimum));var offset=offsetY[dataPointX]?offsetY[dataPointX]:0;y=y-offset;currentBaseValues.push({x:x,y:yZeroToPixel-offset});offsetY[dataPointX]=yZeroToPixel-y;if(isFirstDataPointInPlotArea){ctx.beginPath();ctx.moveTo(x,y);if(isCanvasSupported){ghostCtx.beginPath();ghostCtx.moveTo(x,y);}
isFirstDataPointInPlotArea=false;}
else{ctx.lineTo(x,y);if(isCanvasSupported)
ghostCtx.lineTo(x,y);if(i%250==0){if(dataSeries.lineThickness>0)
ctx.stroke();while(currentBaseValues.length>0){var point=currentBaseValues.pop();ctx.lineTo(point.x,point.y);if(isCanvasSupported)
ghostCtx.lineTo(point.x,point.y);}
ctx.closePath();ctx.globalAlpha=dataSeries.fillOpacity;ctx.fill();ctx.globalAlpha=1;ctx.beginPath();ctx.moveTo(x,y);if(isCanvasSupported){ghostCtx.closePath();ghostCtx.fill();ghostCtx.beginPath();ghostCtx.moveTo(x,y);}
currentBaseValues.push({x:x,y:yZeroToPixel-offset});}}
if(dataSeries.dataPointIndexes[dataPointX]>=0){var id=dataSeries.dataPointIds[dataSeries.dataPointIndexes[dataPointX]];this._eventManager.objectMap[id]={id:id,objectType:"dataPoint",dataSeriesIndex:dataSeriesIndex,dataPointIndex:dataSeries.dataPointIndexes[dataPointX],x1:x,y1:y};}
if(dataSeries.dataPointIndexes[dataPointX]>=0&&dataPoint.markerSize!==0){if(dataPoint.markerSize>0||dataSeries.markerSize>0){var markerProps=dataSeries.getMarkerProperties(i,x,y,ctx);markers.push(markerProps);markerColor=intToHexColorString(id);if(isCanvasSupported){markers.push({x:x,y:y,ctx:ghostCtx,type:markerProps.type,size:markerProps.size,color:markerColor,borderColor:markerColor,borderThickness:markerProps.borderThickness});}}}
if(dataPoint.indexLabel||dataSeries.indexLabel){this._indexLabels.push({chartType:"stackedArea100",dataPoint:dataPoint,dataSeries:dataSeries,point:{x:x,y:y},direction:dataPoints[i].y>=0?1:-1,color:color});}}
if(dataSeries.lineThickness>0)
ctx.stroke();while(currentBaseValues.length>0){var point=currentBaseValues.pop();ctx.lineTo(point.x,point.y);if(isCanvasSupported)
ghostCtx.lineTo(point.x,point.y);}
ctx.closePath();ctx.globalAlpha=dataSeries.fillOpacity;ctx.fill();ctx.globalAlpha=1;ctx.beginPath();ctx.moveTo(x,y);if(isCanvasSupported){ghostCtx.closePath();ghostCtx.fill();ghostCtx.beginPath();ghostCtx.moveTo(x,y);}}
delete(dataSeries.dataPointIndexes);}
RenderHelper.drawMarkers(markers);ctx.restore();if(isCanvasSupported)
ghostCtx.restore();var animationInfo={source:ctx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.xClipAnimation,easingFunction:AnimationHelper.easing.linear,animationBase:0};return animationInfo;}
Chart.prototype.renderBubble=function(plotUnit){var ctx=plotUnit.targetCanvasCtx||this.plotArea.ctx;var totalDataSeries=plotUnit.dataSeriesIndexes.length;if(totalDataSeries<=0)
return;var color=null;var plotArea=this.plotArea;var i=0,x,y;var dataPointX;var yZeroToPixel=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(0-plotUnit.axisY.conversionParameters.minimum))<<0;var maxBarWidth=this.width*.15<<0;var xMinDiff=plotUnit.axisX.dataInfo.minDiff;var barWidth=(((plotArea.width / Math.abs(plotUnit.axisX.maximum-plotUnit.axisX.minimum))*Math.abs(xMinDiff))/ totalDataSeries*.9)<<0;ctx.save();if(isCanvasSupported)
this._eventManager.ghostCtx.save();ctx.beginPath();ctx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height);ctx.clip();if(isCanvasSupported){this._eventManager.ghostCtx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height);this._eventManager.ghostCtx.clip();}
var maxZ=-Infinity;var minZ=Infinity;for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeriesIndex=plotUnit.dataSeriesIndexes[j];var dataSeries=this.data[dataSeriesIndex];var dataPoints=dataSeries.dataPoints;var z=0;for(var i=0;i<dataPoints.length;i++){dataPointX=dataPoints[i].getTime?dataPointX=dataPoints[i].x.getTime():dataPointX=dataPoints[i].x;if(dataPointX<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax){continue;}
if(typeof(dataPoints[i].z)!=="undefined"){z=dataPoints[i].z;if(z>maxZ)
maxZ=z;if(z<minZ)
minZ=z;}}}
var minArea=Math.PI*5*5;var maxArea=Math.max(Math.pow(Math.min(plotArea.height,plotArea.width)*.25 / 2,2)*Math.PI,minArea);for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeriesIndex=plotUnit.dataSeriesIndexes[j];var dataSeries=this.data[dataSeriesIndex];var dataPoints=dataSeries.dataPoints;var isFirstDataPointInPlotArea=true;if(dataPoints.length==1)
barWidth=maxBarWidth;if(barWidth<1)
barWidth=1;else if(barWidth>maxBarWidth)
barWidth=maxBarWidth;if(dataPoints.length>0){ctx.strokeStyle="#4572A7 ";for(var i=0;i<dataPoints.length;i++){dataPointX=dataPoints[i].getTime?dataPointX=dataPoints[i].x.getTime():dataPointX=dataPoints[i].x;if(dataPointX<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax){continue;}
if(typeof(dataPoints[i].y)!=="number")
continue;x=(plotUnit.axisX.conversionParameters.reference+plotUnit.axisX.conversionParameters.pixelPerUnit*(dataPointX-plotUnit.axisX.conversionParameters.minimum)+.5)<<0;y=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(dataPoints[i].y-plotUnit.axisY.conversionParameters.minimum)+.5)<<0;var z=dataPoints[i].z;var area=(maxZ===minZ)?maxArea / 2:minArea+(maxArea-minArea)/(maxZ-minZ)*(z-minZ);var radius=Math.max(Math.sqrt(area / Math.PI)<<0,1);var markerSize=radius*2;var markerProps=dataSeries.getMarkerProperties(i,ctx);markerProps.size=markerSize;ctx.globalAlpha=dataSeries.fillOpacity;RenderHelper.drawMarker(x,y,ctx,markerProps.type,markerProps.size,markerProps.color,markerProps.borderColor,markerProps.borderThickness);ctx.globalAlpha=1;var id=dataSeries.dataPointIds[i];this._eventManager.objectMap[id]={id:id,objectType:"dataPoint",dataSeriesIndex:dataSeriesIndex,dataPointIndex:i,x1:x,y1:y,size:markerSize};var markerColor=intToHexColorString(id);if(isCanvasSupported)
RenderHelper.drawMarker(x,y,this._eventManager.ghostCtx,markerProps.type,markerProps.size,markerColor,markerColor,markerProps.borderThickness);if(dataPoints[i].indexLabel||dataSeries.indexLabel){this._indexLabels.push({chartType:"bubble",dataPoint:dataPoints[i],dataSeries:dataSeries,point:{x:x,y:y},direction:1,color:color});}}}}
ctx.restore();if(isCanvasSupported)
this._eventManager.ghostCtx.restore();var animationInfo={source:ctx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.fadeInAnimation,easingFunction:AnimationHelper.easing.easeInQuad,animationBase:0};return animationInfo;}
Chart.prototype.renderScatter=function(plotUnit){var ctx=plotUnit.targetCanvasCtx||this.plotArea.ctx;var totalDataSeries=plotUnit.dataSeriesIndexes.length;if(totalDataSeries<=0)
return;var color=null;var plotArea=this.plotArea;var i=0,x,y;var dataPointX;var yZeroToPixel=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(0-plotUnit.axisY.conversionParameters.minimum))<<0;var maxBarWidth=this.width*.15<<0;var xMinDiff=plotUnit.axisX.dataInfo.minDiff;var barWidth=(((plotArea.width / Math.abs(plotUnit.axisX.maximum-plotUnit.axisX.minimum))*Math.abs(xMinDiff))/ totalDataSeries*.9)<<0;ctx.save();if(isCanvasSupported)
this._eventManager.ghostCtx.save();ctx.beginPath();ctx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height);ctx.clip();if(isCanvasSupported){this._eventManager.ghostCtx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height);this._eventManager.ghostCtx.clip();}
for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeriesIndex=plotUnit.dataSeriesIndexes[j];var dataSeries=this.data[dataSeriesIndex];var dataPoints=dataSeries.dataPoints;var isFirstDataPointInPlotArea=true;if(dataPoints.length==1)
barWidth=maxBarWidth;if(barWidth<1)
barWidth=1;else if(barWidth>maxBarWidth)
barWidth=maxBarWidth;if(dataPoints.length>0){ctx.strokeStyle="#4572A7 ";var maxArea=Math.pow(Math.min(plotArea.height,plotArea.width)*.3 / 2,2)*Math.PI;var prevDataPointX=0;var prevDataPointY=0;for(var i=0;i<dataPoints.length;i++){dataPointX=dataPoints[i].getTime?dataPointX=dataPoints[i].x.getTime():dataPointX=dataPoints[i].x;if(dataPointX<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax){continue;}
if(typeof(dataPoints[i].y)!=="number")
continue;x=(plotUnit.axisX.conversionParameters.reference+plotUnit.axisX.conversionParameters.pixelPerUnit*(dataPointX-plotUnit.axisX.conversionParameters.minimum)+.5)<<0;y=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(dataPoints[i].y-plotUnit.axisY.conversionParameters.minimum)+.5)<<0;var markerProps=dataSeries.getMarkerProperties(i,x,y,ctx);ctx.globalAlpha=dataSeries.fillOpacity;RenderHelper.drawMarker(markerProps.x,markerProps.y,markerProps.ctx,markerProps.type,markerProps.size,markerProps.color,markerProps.borderColor,markerProps.borderThickness);ctx.globalAlpha=1;if((Math.sqrt((prevDataPointX-x)*(prevDataPointX-x)+(prevDataPointY-y)*(prevDataPointY-y))<Math.min(markerProps.size,5))&&dataPoints.length>(Math.min(this.plotArea.width,this.plotArea.height))){continue;}
var id=dataSeries.dataPointIds[i];this._eventManager.objectMap[id]={id:id,objectType:"dataPoint",dataSeriesIndex:dataSeriesIndex,dataPointIndex:i,x1:x,y1:y};var markerColor=intToHexColorString(id);if(isCanvasSupported){RenderHelper.drawMarker(markerProps.x,markerProps.y,this._eventManager.ghostCtx,markerProps.type,markerProps.size,markerColor,markerColor,markerProps.borderThickness);}
if(dataPoints[i].indexLabel||dataSeries.indexLabel){this._indexLabels.push({chartType:"scatter",dataPoint:dataPoints[i],dataSeries:dataSeries,point:{x:x,y:y},direction:1,color:color});}
prevDataPointX=x;prevDataPointY=y;}}}
ctx.restore();if(isCanvasSupported)
this._eventManager.ghostCtx.restore();var animationInfo={source:ctx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.fadeInAnimation,easingFunction:AnimationHelper.easing.easeInQuad,animationBase:0};return animationInfo;}
Chart.prototype.renderCandlestick=function(plotUnit){var ctx=plotUnit.targetCanvasCtx||this.plotArea.ctx;var ghostCtx=this._eventManager.ghostCtx;var totalDataSeries=plotUnit.dataSeriesIndexes.length;if(totalDataSeries<=0)
return;var color=null;var plotArea=this.plotArea;var i=0,x,y1,y2,y3,y4;var dataPointX;var yZeroToPixel=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(0-plotUnit.axisY.conversionParameters.minimum))<<0;var maxBarWidth=(this.width*.015);var xMinDiff=plotUnit.axisX.dataInfo.minDiff;var barWidth=(((plotArea.width / Math.abs(plotUnit.axisX.maximum-plotUnit.axisX.minimum))*Math.abs(xMinDiff))*.7)<<0;if(barWidth>maxBarWidth)
barWidth=maxBarWidth;else if(xMinDiff===Infinity){barWidth=maxBarWidth;}else if(barWidth<1)
barWidth=1;ctx.save();if(isCanvasSupported)
ghostCtx.save();ctx.beginPath();ctx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height);ctx.clip();if(isCanvasSupported){ghostCtx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height);ghostCtx.clip();}
for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeriesIndex=plotUnit.dataSeriesIndexes[j];var dataSeries=this.data[dataSeriesIndex];var dataPoints=dataSeries.dataPoints;var isFirstDataPointInPlotArea=true;if(dataPoints.length>0){var bevelEnabled=(barWidth>5)&&dataSeries.bevelEnabled?true:false;for(i=0;i<dataPoints.length;i++){dataPoints[i].getTime?dataPointX=dataPoints[i].x.getTime():dataPointX=dataPoints[i].x;if(dataPointX<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax){continue;}
if(dataPoints[i].y===null||!dataPoints[i].y.length||typeof(dataPoints[i].y[0])!=="number"||typeof(dataPoints[i].y[1])!=="number"||typeof(dataPoints[i].y[2])!=="number"||typeof(dataPoints[i].y[3])!=="number")
continue;x=(plotUnit.axisX.conversionParameters.reference+plotUnit.axisX.conversionParameters.pixelPerUnit*(dataPointX-plotUnit.axisX.conversionParameters.minimum)+.5)<<0;y1=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(dataPoints[i].y[0]-plotUnit.axisY.conversionParameters.minimum)+.5)<<0;y2=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(dataPoints[i].y[1]-plotUnit.axisY.conversionParameters.minimum)+.5)<<0;y3=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(dataPoints[i].y[2]-plotUnit.axisY.conversionParameters.minimum)+.5)<<0;y4=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(dataPoints[i].y[3]-plotUnit.axisY.conversionParameters.minimum)+.5)<<0;var x1=(x-barWidth / 2)<<0;var x2=(x1+barWidth)<<0;color=dataPoints[i].color?dataPoints[i].color:dataSeries._colorSet[0];var borderThickness=Math.round(Math.max(1,(barWidth*.15)));var offset=borderThickness%2===0?0:.5;var id=dataSeries.dataPointIds[i];this._eventManager.objectMap[id]={id:id,objectType:"dataPoint",dataSeriesIndex:dataSeriesIndex,dataPointIndex:i,x1:x1,y1:y1,x2:x2,y2:y2,x3:x,y3:y3,x4:x,y4:y4,borderThickness:borderThickness,color:color};ctx.strokeStyle=color;ctx.beginPath();ctx.lineWidth=borderThickness;ghostCtx.lineWidth=Math.max(borderThickness,4);if(dataSeries.type==="candlestick"){ctx.moveTo(x-offset,y2);ctx.lineTo(x-offset,Math.min(y1,y4));ctx.stroke();ctx.moveTo(x-offset,Math.max(y1,y4));ctx.lineTo(x-offset,y3);ctx.stroke();drawRect(ctx,x1,Math.min(y1,y4),x2,Math.max(y1,y4),dataPoints[i].y[0]<=dataPoints[i].y[3]?dataSeries.risingColor:color,borderThickness,color,bevelEnabled,bevelEnabled,false,false,dataSeries.fillOpacity);if(isCanvasSupported){color=intToHexColorString(id);ghostCtx.strokeStyle=color;ghostCtx.moveTo(x-offset,y2);ghostCtx.lineTo(x-offset,Math.min(y1,y4));ghostCtx.stroke();ghostCtx.moveTo(x-offset,Math.max(y1,y4));ghostCtx.lineTo(x-offset,y3);ghostCtx.stroke();drawRect(ghostCtx,x1,Math.min(y1,y4),x2,Math.max(y1,y4),color,0,null,false,false,false,false);}}
else if(dataSeries.type==="ohlc"){ctx.moveTo(x-offset,y2);ctx.lineTo(x-offset,y3);ctx.stroke();ctx.beginPath();ctx.moveTo(x,y1);ctx.lineTo(x1,y1);ctx.stroke();ctx.beginPath();ctx.moveTo(x,y4);ctx.lineTo(x2,y4);ctx.stroke();if(isCanvasSupported){color=intToHexColorString(id);ghostCtx.strokeStyle=color;ghostCtx.moveTo(x-offset,y2);ghostCtx.lineTo(x-offset,y3);ghostCtx.stroke();ghostCtx.beginPath();ghostCtx.moveTo(x,y1);ghostCtx.lineTo(x1,y1);ghostCtx.stroke();ghostCtx.beginPath();ghostCtx.moveTo(x,y4);ghostCtx.lineTo(x2,y4);ghostCtx.stroke();}}
if(dataPoints[i].indexLabel||dataSeries.indexLabel){this._indexLabels.push({chartType:dataSeries.type,dataPoint:dataPoints[i],dataSeries:dataSeries,point:{x:x1+(x2-x1)/ 2,y:y2},direction:1,bounds:{x1:x1,y1:Math.min(y2,y3),x2:x2,y2:Math.max(y2,y3)},color:color});}}}}
ctx.restore();if(isCanvasSupported)
ghostCtx.restore();var animationInfo={source:ctx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.fadeInAnimation,easingFunction:AnimationHelper.easing.easeInQuad,animationBase:0};return animationInfo;}
Chart.prototype.renderRangeColumn=function(plotUnit){var ctx=plotUnit.targetCanvasCtx||this.plotArea.ctx;var totalDataSeries=plotUnit.dataSeriesIndexes.length;if(totalDataSeries<=0)
return;var color=null;var plotArea=this.plotArea;var i=0,x,y1,y2;var dataPointX;var yZeroToPixel=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(0-plotUnit.axisY.conversionParameters.minimum))<<0;var maxBarWidth=(this.width*.03);var xMinDiff=plotUnit.axisX.dataInfo.minDiff;var barWidth=(((plotArea.width / Math.abs(plotUnit.axisX.maximum-plotUnit.axisX.minimum))*Math.abs(xMinDiff))/ plotUnit.plotType.totalDataSeries*.9)<<0;if(barWidth>maxBarWidth)
barWidth=maxBarWidth;else if(xMinDiff===Infinity){barWidth=maxBarWidth;}else if(barWidth<1)
barWidth=1;ctx.save();if(isCanvasSupported)
this._eventManager.ghostCtx.save();ctx.beginPath();ctx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height);ctx.clip();if(isCanvasSupported){this._eventManager.ghostCtx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height);this._eventManager.ghostCtx.clip();}
for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeriesIndex=plotUnit.dataSeriesIndexes[j];var dataSeries=this.data[dataSeriesIndex];var dataPoints=dataSeries.dataPoints;var isFirstDataPointInPlotArea=true;if(dataPoints.length>0){var bevelEnabled=(barWidth>5)&&dataSeries.bevelEnabled?true:false;for(i=0;i<dataPoints.length;i++){dataPoints[i].getTime?dataPointX=dataPoints[i].x.getTime():dataPointX=dataPoints[i].x;if(dataPointX<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax){continue;}
if(dataPoints[i].y===null||!dataPoints[i].y.length||typeof(dataPoints[i].y[0])!=="number"||typeof(dataPoints[i].y[1])!=="number")
continue;x=(plotUnit.axisX.conversionParameters.reference+plotUnit.axisX.conversionParameters.pixelPerUnit*(dataPointX-plotUnit.axisX.conversionParameters.minimum)+.5)<<0;y1=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(dataPoints[i].y[0]-plotUnit.axisY.conversionParameters.minimum)+.5)<<0;y2=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(dataPoints[i].y[1]-plotUnit.axisY.conversionParameters.minimum)+.5)<<0;var x1=x-(plotUnit.plotType.totalDataSeries*barWidth / 2)+((plotUnit.previousDataSeriesCount+j)*barWidth)<<0;var x2=x1+barWidth<<0;var y1;var y2;color=dataPoints[i].color?dataPoints[i].color:dataSeries._colorSet[i%dataSeries._colorSet.length];if(y1>y2){var temp=y1;y1=y2;y2=temp;}
var id=dataSeries.dataPointIds[i];this._eventManager.objectMap[id]={id:id,objectType:"dataPoint",dataSeriesIndex:dataSeriesIndex,dataPointIndex:i,x1:x1,y1:y1,x2:x2,y2:y2};var borderThickness=0;drawRect(ctx,x1,y1,x2,y2,color,borderThickness,color,bevelEnabled,bevelEnabled,false,false,dataSeries.fillOpacity);color=intToHexColorString(id);if(isCanvasSupported)
drawRect(this._eventManager.ghostCtx,x1,y1,x2,y2,color,0,null,false,false,false,false);if(dataPoints[i].indexLabel||dataSeries.indexLabel){this._indexLabels.push({chartType:"rangeColumn",dataPoint:dataPoints[i],dataSeries:dataSeries,indexKeyword:0,point:{x:x1+(x2-x1)/ 2,y:dataPoints[i].y[1]>=dataPoints[i].y[0]?y2:y1},direction:dataPoints[i].y[1]>=dataPoints[i].y[0]?-1:1,bounds:{x1:x1,y1:Math.min(y1,y2),x2:x2,y2:Math.max(y1,y2)},color:color});this._indexLabels.push({chartType:"rangeColumn",dataPoint:dataPoints[i],dataSeries:dataSeries,indexKeyword:1,point:{x:x1+(x2-x1)/ 2,y:dataPoints[i].y[1]>=dataPoints[i].y[0]?y1:y2},direction:dataPoints[i].y[1]>=dataPoints[i].y[0]?1:-1,bounds:{x1:x1,y1:Math.min(y1,y2),x2:x2,y2:Math.max(y1,y2)},color:color});}}}}
ctx.restore();if(isCanvasSupported)
this._eventManager.ghostCtx.restore();var animationInfo={source:ctx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.fadeInAnimation,easingFunction:AnimationHelper.easing.easeInQuad,animationBase:0};return animationInfo;}
Chart.prototype.renderRangeBar=function(plotUnit){var ctx=plotUnit.targetCanvasCtx||this.plotArea.ctx;var totalDataSeries=plotUnit.dataSeriesIndexes.length;if(totalDataSeries<=0)
return;var color=null;var plotArea=this.plotArea;var i=0,x1,x2,y;var dataPointX;var yZeroToPixel=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(0-plotUnit.axisY.conversionParameters.minimum))<<0;var maxBarWidth=Math.min((this.height*.15),this.plotArea.height / plotUnit.plotType.totalDataSeries*.9)<<0;var xMinDiff=plotUnit.axisX.dataInfo.minDiff;var barWidth=(((plotArea.height / Math.abs(plotUnit.axisX.maximum-plotUnit.axisX.minimum))*Math.abs(xMinDiff))/ plotUnit.plotType.totalDataSeries*.9)<<0;if(barWidth>maxBarWidth)
barWidth=maxBarWidth;else if(xMinDiff===Infinity){barWidth=maxBarWidth;}else if(barWidth<1)
barWidth=1;ctx.save();if(isCanvasSupported)
this._eventManager.ghostCtx.save();ctx.beginPath();ctx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height);ctx.clip();if(isCanvasSupported){this._eventManager.ghostCtx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height);this._eventManager.ghostCtx.clip();}
for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeriesIndex=plotUnit.dataSeriesIndexes[j];var dataSeries=this.data[dataSeriesIndex];var dataPoints=dataSeries.dataPoints;var isFirstDataPointInPlotArea=true;if(dataPoints.length>0){var bevelEnabled=(barWidth>5)&&dataSeries.bevelEnabled?true:false;ctx.strokeStyle="#4572A7 ";for(i=0;i<dataPoints.length;i++){dataPoints[i].getTime?dataPointX=dataPoints[i].x.getTime():dataPointX=dataPoints[i].x;if(dataPointX<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax){continue;}
if(dataPoints[i].y===null||!dataPoints[i].y.length||typeof(dataPoints[i].y[0])!=="number"||typeof(dataPoints[i].y[1])!=="number")
continue;x1=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(dataPoints[i].y[0]-plotUnit.axisY.conversionParameters.minimum)+.5)<<0;x2=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(dataPoints[i].y[1]-plotUnit.axisY.conversionParameters.minimum)+.5)<<0;y=(plotUnit.axisX.conversionParameters.reference+plotUnit.axisX.conversionParameters.pixelPerUnit*(dataPointX-plotUnit.axisX.conversionParameters.minimum)+.5)<<0;var y1=(y-(plotUnit.plotType.totalDataSeries*barWidth / 2)+((plotUnit.previousDataSeriesCount+j)*barWidth))<<0;var y2=y1+barWidth<<0;if(x1>x2){var temp=x1;x1=x2;x2=temp;}
color=dataPoints[i].color?dataPoints[i].color:dataSeries._colorSet[i%dataSeries._colorSet.length];drawRect(ctx,x1,y1,x2,y2,color,0,null,bevelEnabled,false,false,false,dataSeries.fillOpacity);var id=dataSeries.dataPointIds[i];this._eventManager.objectMap[id]={id:id,objectType:"dataPoint",dataSeriesIndex:dataSeriesIndex,dataPointIndex:i,x1:x1,y1:y1,x2:x2,y2:y2};color=intToHexColorString(id);if(isCanvasSupported)
drawRect(this._eventManager.ghostCtx,x1,y1,x2,y2,color,0,null,false,false,false,false);if(dataPoints[i].indexLabel||dataSeries.indexLabel){this._indexLabels.push({chartType:"rangeBar",dataPoint:dataPoints[i],dataSeries:dataSeries,indexKeyword:0,point:{x:dataPoints[i].y[1]>=dataPoints[i].y[0]?x1:x2,y:y1+(y2-y1)/ 2},direction:dataPoints[i].y[1]>=dataPoints[i].y[0]?-1:1,bounds:{x1:Math.min(x1,x2),y1:y1,x2:Math.max(x1,x2),y2:y2},color:color});this._indexLabels.push({chartType:"rangeBar",dataPoint:dataPoints[i],dataSeries:dataSeries,indexKeyword:1,point:{x:dataPoints[i].y[1]>=dataPoints[i].y[0]?x2:x1,y:y1+(y2-y1)/ 2},direction:dataPoints[i].y[1]>=dataPoints[i].y[0]?1:-1,bounds:{x1:Math.min(x1,x2),y1:y1,x2:Math.max(x1,x2),y2:y2},color:color});}}}}
ctx.restore();if(isCanvasSupported)
this._eventManager.ghostCtx.restore();var animationInfo={source:ctx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.fadeInAnimation,easingFunction:AnimationHelper.easing.easeInQuad,animationBase:0};return animationInfo;}
Chart.prototype.renderRangeArea=function(plotUnit){var ctx=plotUnit.targetCanvasCtx||this.plotArea.ctx;var totalDataSeries=plotUnit.dataSeriesIndexes.length;if(totalDataSeries<=0)
return;var ghostCtx=this._eventManager.ghostCtx;var axisXProps=plotUnit.axisX.lineCoordinates;var axisYProps=plotUnit.axisY.lineCoordinates;var markers=[];var plotArea=this.plotArea;ctx.save();if(isCanvasSupported)
ghostCtx.save();ctx.beginPath();ctx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height);ctx.clip();if(isCanvasSupported){ghostCtx.beginPath();ghostCtx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height);ghostCtx.clip();}
for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var closingPath=[];var dataSeriesIndex=plotUnit.dataSeriesIndexes[j];var dataSeries=this.data[dataSeriesIndex];var dataPoints=dataSeries.dataPoints;var seriesId=dataSeries.id;this._eventManager.objectMap[seriesId]={objectType:"dataSeries",dataSeriesIndex:dataSeriesIndex};var hexColor=intToHexColorString(seriesId);ghostCtx.fillStyle=hexColor;markers=[];var isFirstDataPointInPlotArea=true;var i=0,x,y1,y2;var dataPointX;var yZeroToPixel=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(0-plotUnit.axisY.conversionParameters.minimum)+.5)<<0;var baseY;var startPoint=null;if(dataPoints.length>0){var color=dataSeries._colorSet[i%dataSeries._colorSet.length];ctx.fillStyle=color;ctx.strokeStyle=color;ctx.lineWidth=dataSeries.lineThickness;var prevDataNull=true;for(;i<dataPoints.length;i++){dataPointX=dataPoints[i].x.getTime?dataPoints[i].x.getTime():dataPoints[i].x;if(dataPointX<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax){continue;}
if(dataPoints[i].y===null||!dataPoints[i].y.length||typeof(dataPoints[i].y[0])!=="number"||typeof(dataPoints[i].y[1])!=="number"){closeArea();prevDataNull=true;continue;}
x=(plotUnit.axisX.conversionParameters.reference+plotUnit.axisX.conversionParameters.pixelPerUnit*(dataPointX-plotUnit.axisX.conversionParameters.minimum)+.5)<<0;y1=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(dataPoints[i].y[0]-plotUnit.axisY.conversionParameters.minimum)+.5)<<0;y2=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(dataPoints[i].y[1]-plotUnit.axisY.conversionParameters.minimum)+.5)<<0;if(isFirstDataPointInPlotArea||prevDataNull){ctx.beginPath();ctx.moveTo(x,y1);startPoint={x:x,y:y1};closingPath=[];closingPath.push({x:x,y:y2});if(isCanvasSupported){ghostCtx.beginPath();ghostCtx.moveTo(x,y1);}
isFirstDataPointInPlotArea=false;prevDataNull=false;}
else{ctx.lineTo(x,y1);closingPath.push({x:x,y:y2});if(isCanvasSupported)
ghostCtx.lineTo(x,y1);if(i%250==0){closeArea();}}
var id=dataSeries.dataPointIds[i];this._eventManager.objectMap[id]={id:id,objectType:"dataPoint",dataSeriesIndex:dataSeriesIndex,dataPointIndex:i,x1:x,y1:y1,y2:y2};if(dataPoints[i].markerSize!==0){if(dataPoints[i].markerSize>0||dataSeries.markerSize>0){var markerProps=dataSeries.getMarkerProperties(i,x,y2,ctx);markers.push(markerProps);var markerColor=intToHexColorString(id);if(isCanvasSupported){markers.push({x:x,y:y2,ctx:ghostCtx,type:markerProps.type,size:markerProps.size,color:markerColor,borderColor:markerColor,borderThickness:markerProps.borderThickness});}
markerProps=dataSeries.getMarkerProperties(i,x,y1,ctx);markers.push(markerProps);var markerColor=intToHexColorString(id);if(isCanvasSupported){markers.push({x:x,y:y1,ctx:ghostCtx,type:markerProps.type,size:markerProps.size,color:markerColor,borderColor:markerColor,borderThickness:markerProps.borderThickness});}}}
if(dataPoints[i].indexLabel||dataSeries.indexLabel){this._indexLabels.push({chartType:"rangeArea",dataPoint:dataPoints[i],dataSeries:dataSeries,indexKeyword:0,point:{x:x,y:y1},direction:dataPoints[i].y[0]<=dataPoints[i].y[1]?-1:1,color:color});this._indexLabels.push({chartType:"rangeArea",dataPoint:dataPoints[i],dataSeries:dataSeries,indexKeyword:1,point:{x:x,y:y2},direction:dataPoints[i].y[0]<=dataPoints[i].y[1]?1:-1,color:color});}}
closeArea();RenderHelper.drawMarkers(markers);}}
ctx.restore();if(isCanvasSupported)
this._eventManager.ghostCtx.restore();function closeArea(){if(!startPoint)
return;var point=null;if(dataSeries.lineThickness>0)
ctx.stroke();for(var i=closingPath.length-1;i>=0;i--){point=closingPath[i];ctx.lineTo(point.x,point.y);ghostCtx.lineTo(point.x,point.y);}
ctx.closePath();ctx.globalAlpha=dataSeries.fillOpacity;ctx.fill();ctx.globalAlpha=1;ghostCtx.fill();if(dataSeries.lineThickness>0){ctx.beginPath();ctx.moveTo(point.x,point.y);for(var i=0;i<closingPath.length;i++){point=closingPath[i];ctx.lineTo(point.x,point.y);}
ctx.stroke();}
ctx.beginPath();ctx.moveTo(x,y1);ghostCtx.beginPath();ghostCtx.moveTo(x,y1);startPoint={x:x,y:y1};closingPath=[];closingPath.push({x:x,y:y2});}
var animationInfo={source:ctx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.xClipAnimation,easingFunction:AnimationHelper.easing.linear,animationBase:0};return animationInfo;}
Chart.prototype.renderRangeSplineArea=function(plotUnit){var ctx=plotUnit.targetCanvasCtx||this.plotArea.ctx;var totalDataSeries=plotUnit.dataSeriesIndexes.length;if(totalDataSeries<=0)
return;var ghostCtx=this._eventManager.ghostCtx;var axisXProps=plotUnit.axisX.lineCoordinates;var axisYProps=plotUnit.axisY.lineCoordinates;var markers=[];var plotArea=this.plotArea;ctx.save();if(isCanvasSupported)
ghostCtx.save();ctx.beginPath();ctx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height);ctx.clip();if(isCanvasSupported){ghostCtx.beginPath();ghostCtx.rect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height);ghostCtx.clip();}
for(var j=0;j<plotUnit.dataSeriesIndexes.length;j++){var dataSeriesIndex=plotUnit.dataSeriesIndexes[j];var dataSeries=this.data[dataSeriesIndex];var dataPoints=dataSeries.dataPoints;var seriesId=dataSeries.id;this._eventManager.objectMap[seriesId]={objectType:"dataSeries",dataSeriesIndex:dataSeriesIndex};var hexColor=intToHexColorString(seriesId);ghostCtx.fillStyle=hexColor;markers=[];var isFirstDataPointInPlotArea=true;var i=0,x,y1,y2;var dataPointX;var yZeroToPixel=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(0-plotUnit.axisY.conversionParameters.minimum)+.5)<<0;var baseY;var startPoint=null;var pixelsY1=[];var pixelsY2=[];if(dataPoints.length>0){color=dataSeries._colorSet[i%dataSeries._colorSet.length];ctx.fillStyle=color;ctx.strokeStyle=color;ctx.lineWidth=dataSeries.lineThickness;for(;i<dataPoints.length;i++){dataPointX=dataPoints[i].x.getTime?dataPoints[i].x.getTime():dataPoints[i].x;if(dataPointX<plotUnit.axisX.dataInfo.viewPortMin||dataPointX>plotUnit.axisX.dataInfo.viewPortMax){continue;}
if(dataPoints[i].y===null||!dataPoints[i].y.length||typeof(dataPoints[i].y[0])!=="number"||typeof(dataPoints[i].y[1])!=="number"){if(i>0){renderBezierArea();pixelsY1=[];pixelsY2=[];}
continue;}
x=(plotUnit.axisX.conversionParameters.reference+plotUnit.axisX.conversionParameters.pixelPerUnit*(dataPointX-plotUnit.axisX.conversionParameters.minimum)+.5)<<0;y1=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(dataPoints[i].y[0]-plotUnit.axisY.conversionParameters.minimum)+.5)<<0;y2=(plotUnit.axisY.conversionParameters.reference+plotUnit.axisY.conversionParameters.pixelPerUnit*(dataPoints[i].y[1]-plotUnit.axisY.conversionParameters.minimum)+.5)<<0;var id=dataSeries.dataPointIds[i];this._eventManager.objectMap[id]={id:id,objectType:"dataPoint",dataSeriesIndex:dataSeriesIndex,dataPointIndex:i,x1:x,y1:y1,y2:y2};pixelsY1[pixelsY1.length]={x:x,y:y1};pixelsY2[pixelsY2.length]={x:x,y:y2};if(dataPoints[i].markerSize!==0){if(dataPoints[i].markerSize>0||dataSeries.markerSize>0){var markerProps=dataSeries.getMarkerProperties(i,x,y1,ctx);markers.push(markerProps);var markerColor=intToHexColorString(id);if(isCanvasSupported){markers.push({x:x,y:y1,ctx:ghostCtx,type:markerProps.type,size:markerProps.size,color:markerColor,borderColor:markerColor,borderThickness:markerProps.borderThickness});}
var markerProps=dataSeries.getMarkerProperties(i,x,y2,ctx);markers.push(markerProps);var markerColor=intToHexColorString(id);if(isCanvasSupported){markers.push({x:x,y:y2,ctx:ghostCtx,type:markerProps.type,size:markerProps.size,color:markerColor,borderColor:markerColor,borderThickness:markerProps.borderThickness});}}}
if(dataPoints[i].indexLabel||dataSeries.indexLabel){this._indexLabels.push({chartType:"splineArea",dataPoint:dataPoints[i],dataSeries:dataSeries,indexKeyword:0,point:{x:x,y:y1},direction:dataPoints[i].y[0]<=dataPoints[i].y[1]?-1:1,color:color});this._indexLabels.push({chartType:"splineArea",dataPoint:dataPoints[i],dataSeries:dataSeries,indexKeyword:1,point:{x:x,y:y2},direction:dataPoints[i].y[0]<=dataPoints[i].y[1]?1:-1,color:color});}}
renderBezierArea();RenderHelper.drawMarkers(markers);}}
ctx.restore();if(isCanvasSupported)
this._eventManager.ghostCtx.restore();function renderBezierArea(){var bp=getBezierPoints(pixelsY1,2);if(bp.length>0){ctx.beginPath();ctx.moveTo(bp[0].x,bp[0].y);if(isCanvasSupported){ghostCtx.beginPath();ghostCtx.moveTo(bp[0].x,bp[0].y);}
for(var i=0;i<bp.length-3;i+=3){ctx.bezierCurveTo(bp[i+1].x,bp[i+1].y,bp[i+2].x,bp[i+2].y,bp[i+3].x,bp[i+3].y);if(isCanvasSupported)
ghostCtx.bezierCurveTo(bp[i+1].x,bp[i+1].y,bp[i+2].x,bp[i+2].y,bp[i+3].x,bp[i+3].y);}
if(dataSeries.lineThickness>0)
ctx.stroke();bp=getBezierPoints(pixelsY2,2);ctx.lineTo(pixelsY2[pixelsY2.length-1].x,pixelsY2[pixelsY2.length-1].y);for(var i=bp.length-1;i>2;i-=3){ctx.bezierCurveTo(bp[i-1].x,bp[i-1].y,bp[i-2].x,bp[i-2].y,bp[i-3].x,bp[i-3].y);if(isCanvasSupported)
ghostCtx.bezierCurveTo(bp[i-1].x,bp[i-1].y,bp[i-2].x,bp[i-2].y,bp[i-3].x,bp[i-3].y);}
ctx.closePath();ctx.globalAlpha=dataSeries.fillOpacity;ctx.fill();ctx.globalAlpha=1;if(dataSeries.lineThickness>0){ctx.beginPath();ctx.moveTo(pixelsY2[pixelsY2.length-1].x,pixelsY2[pixelsY2.length-1].y);for(var i=bp.length-1;i>2;i-=3){ctx.bezierCurveTo(bp[i-1].x,bp[i-1].y,bp[i-2].x,bp[i-2].y,bp[i-3].x,bp[i-3].y);if(isCanvasSupported)
ghostCtx.bezierCurveTo(bp[i-1].x,bp[i-1].y,bp[i-2].x,bp[i-2].y,bp[i-3].x,bp[i-3].y);}
ctx.stroke();}
ctx.beginPath();if(isCanvasSupported){ghostCtx.closePath();ghostCtx.fill();}}}
var animationInfo={source:ctx,dest:this.plotArea.ctx,animationCallback:AnimationHelper.xClipAnimation,easingFunction:AnimationHelper.easing.linear,animationBase:0};return animationInfo;}
var drawSegment=function(ctx,center,radius,color,type,theta1,theta2,fillOpacity){if(typeof(fillOpacity)==="undefined")
fillOpacity=1;if(!isCanvasSupported){var theta2Mod=Number((theta2%(2*Math.PI)).toFixed(8));var theta1Mod=Number((theta1%(2*Math.PI)).toFixed(8));if(theta1Mod===theta2Mod)
theta2-=.0001;}
ctx.save();ctx.globalAlpha=fillOpacity;if(type==="pie"){ctx.beginPath();ctx.moveTo(center.x,center.y);ctx.arc(center.x,center.y,radius,theta1,theta2,false);ctx.fillStyle=color;ctx.strokeStyle="white";ctx.lineWidth=2;ctx.closePath();ctx.fill();}
else if(type==="doughnut"){var widthPercentage=0.60;ctx.beginPath();ctx.arc(center.x,center.y,radius,theta1,theta2,false);ctx.arc(center.x,center.y,widthPercentage*radius,theta2,theta1,true);ctx.closePath();ctx.fillStyle=color;ctx.strokeStyle="white";ctx.lineWidth=2;ctx.fill();}
ctx.globalAlpha=1;ctx.restore();};Chart.prototype.renderPie=function(plotUnit){var _this=this;var totalDataSeries=plotUnit.dataSeriesIndexes.length;if(totalDataSeries<=0)
return;var dataSeriesIndex=plotUnit.dataSeriesIndexes[0];var dataSeries=this.data[dataSeriesIndex];var dataPoints=dataSeries.dataPoints;var indexLabelLineEdgeLength=10;var explodeDuration=500;var plotArea=this.plotArea;var totalRecursions=0;var dataPointEOs=[];var minDistanceBetweenLabels=2;var indexLabelRadiusToRadiusRatio=1.3;var poleAnglularDistance=(20 / 180)*Math.PI;var precision=6;var center={x:(plotArea.x2+plotArea.x1)/ 2,y:(plotArea.y2+plotArea.y1)/ 2};var outerRadius=dataSeries.indexLabelPlacement==="inside"?(Math.min(plotArea.width,plotArea.height)*0.92)/ 2:(Math.min(plotArea.width,plotArea.height)*0.8)/ 2;var innerRadius=outerRadius*.6;var indexLabelRadius=outerRadius*indexLabelRadiusToRadiusRatio;var newPieRadius=outerRadius;var sum=0;for(var j=0;j<dataPoints.length;j++){sum+=Math.abs(dataPoints[j].y);}
if(sum===0)
return;function initLabels(){if(!dataSeries||!dataPoints)
return;var noDPNearSouthPole=0;var noDPNearNorthPole=0;var firstDPCloseToSouth=0;var firstDPCloseToNorth=0;for(j=0;j<dataPoints.length;j++){var dataPoint=dataPoints[j];var id=dataSeries.dataPointIds[j];var dataPointEO={id:id,objectType:"dataPoint",dataPointIndex:j,dataSeriesIndex:0};dataPointEOs.push(dataPointEO);var indexLabelText=dataPoint.indexLabel?dataPoint.indexLabel:dataSeries.indexLabel?dataSeries.indexLabel:dataPoint.label?dataPoint.label:dataSeries.label?dataSeries.label:'';_this._eventManager.objectMap[id]=dataPointEO;dataPointEO.center={x:center.x,y:center.y};dataPointEO.y=dataPoint.y;dataPointEO.radius=outerRadius;dataPointEO.indexLabelText=_this.replaceKeywordsWithValue(indexLabelText,dataPoint,dataSeries,j);dataPointEO.indexLabelPlacement=dataSeries.indexLabelPlacement;dataPointEO.indexLabelLineColor=dataPoint.indexLabelLineColor?dataPoint.indexLabelLineColor:dataSeries.indexLabelLineColor?dataSeries.indexLabelLineColor:dataPoint.color?dataPoint.color:dataSeries._colorSet[j%dataSeries._colorSet.length];dataPointEO.indexLabelLineThickness=dataPoint.indexLabelLineThickness?dataPoint.indexLabelLineThickness:dataSeries.indexLabelLineThickness;dataPointEO.indexLabelFontColor=dataPoint.indexLabelFontColor?dataPoint.indexLabelFontColor:dataSeries.indexLabelFontColor;dataPointEO.indexLabelFontStyle=dataPoint.indexLabelFontStyle?dataPoint.indexLabelFontStyle:dataSeries.indexLabelFontStyle;dataPointEO.indexLabelFontWeight=dataPoint.indexLabelFontWeight?dataPoint.indexLabelFontWeight:dataSeries.indexLabelFontWeight;dataPointEO.indexLabelFontSize=dataPoint.indexLabelFontSize?dataPoint.indexLabelFontSize:dataSeries.indexLabelFontSize;dataPointEO.indexLabelFontFamily=dataPoint.indexLabelFontFamily?dataPoint.indexLabelFontFamily:dataSeries.indexLabelFontFamily;dataPointEO.indexLabelBackgroundColor=dataPoint.indexLabelBackgroundColor?dataPoint.indexLabelBackgroundColor:dataSeries.indexLabelBackgroundColor?dataSeries.indexLabelBackgroundColor:null;dataPointEO.indexLabelMaxWidth=dataPoint.indexLabelMaxWidth?dataPoint.indexLabelMaxWidth:dataSeries.indexLabelMaxWidth?dataSeries.indexLabelMaxWidth:plotArea.width*.33;dataPointEO.indexLabelWrap=typeof(dataPoint.indexLabelWrap)!=="undefined"?dataPoint.indexLabelWrap:dataSeries.indexLabelWrap;dataPointEO.startAngle=j===0?dataSeries.startAngle?(dataSeries.startAngle / 180)*Math.PI:0:dataPointEOs[j-1].endAngle;dataPointEO.startAngle=(dataPointEO.startAngle+(2*Math.PI))%(2*Math.PI);dataPointEO.endAngle=dataPointEO.startAngle+((2*Math.PI / sum)*Math.abs(dataPoint.y));var midAngle=(dataPointEO.endAngle+dataPointEO.startAngle)/ 2;midAngle=(midAngle+(2*Math.PI))%(2*Math.PI);dataPointEO.midAngle=midAngle;if(dataPointEO.midAngle>(Math.PI / 2)-poleAnglularDistance&&dataPointEO.midAngle<(Math.PI / 2)+poleAnglularDistance){if(noDPNearSouthPole===0||dataPointEOs[firstDPCloseToSouth].midAngle>dataPointEO.midAngle)
firstDPCloseToSouth=j;noDPNearSouthPole++;}
else if(dataPointEO.midAngle>(3*Math.PI / 2)-poleAnglularDistance&&dataPointEO.midAngle<(3*Math.PI / 2)+poleAnglularDistance){if(noDPNearNorthPole===0||dataPointEOs[firstDPCloseToNorth].midAngle>dataPointEO.midAngle)
firstDPCloseToNorth=j;noDPNearNorthPole++;}
if(midAngle>(Math.PI / 2)&&midAngle<=(3*Math.PI / 2))
dataPointEO.hemisphere="left";else
dataPointEO.hemisphere="right";dataPointEO.indexLabelTextBlock=new TextBlock(_this.plotArea.ctx,{fontSize:dataPointEO.indexLabelFontSize,fontFamily:dataPointEO.indexLabelFontFamily,fontColor:dataPointEO.indexLabelFontColor,fontStyle:dataPointEO.indexLabelFontStyle,fontWeight:dataPointEO.indexLabelFontWeight,horizontalAlign:"left",backgroundColor:dataPointEO.indexLabelBackgroundColor,maxWidth:dataPointEO.indexLabelMaxWidth,maxHeight:dataPointEO.indexLabelWrap?dataPointEO.indexLabelFontSize*5:dataPointEO.indexLabelFontSize*1.5,text:dataPointEO.indexLabelText,padding:0,textBaseline:"top"});dataPointEO.indexLabelTextBlock.measureText();}
var noOfDPToRightOfSouthPole=0;var noOfDPToLeftOfNorthPole=0;var keepSameDirection=false;for(j=0;j<dataPoints.length;j++){var dataPointEO=dataPointEOs[(firstDPCloseToSouth+j)%dataPoints.length];if(noDPNearSouthPole>1&&dataPointEO.midAngle>(Math.PI / 2)-poleAnglularDistance&&dataPointEO.midAngle<(Math.PI / 2)+poleAnglularDistance){if(noOfDPToRightOfSouthPole<=noDPNearSouthPole / 2&&!keepSameDirection){dataPointEO.hemisphere="right";noOfDPToRightOfSouthPole++;}
else{dataPointEO.hemisphere="left";keepSameDirection=true;}}}
keepSameDirection=false;for(j=0;j<dataPoints.length;j++){var dataPointEO=dataPointEOs[(firstDPCloseToNorth+j)%dataPoints.length];if(noDPNearNorthPole>1&&dataPointEO.midAngle>(3*Math.PI / 2)-poleAnglularDistance&&dataPointEO.midAngle<(3*Math.PI / 2)+poleAnglularDistance){if(noOfDPToLeftOfNorthPole<=noDPNearNorthPole / 2&&!keepSameDirection){dataPointEO.hemisphere="left";noOfDPToLeftOfNorthPole++;}
else{dataPointEO.hemisphere="right";keepSameDirection=true;}}}}
function renderLabels(){var ctx=_this.plotArea.ctx;ctx.fillStyle="black";ctx.strokeStyle="grey";var fontSize=16;ctx.textBaseline="middle";ctx.lineJoin="round";var i=0,j=0;for(i=0;i<dataPoints.length;i++){var dataPointEO=dataPointEOs[i];if(!dataPointEO.indexLabelText)
continue;dataPointEO.indexLabelTextBlock.y-=dataPointEO.indexLabelTextBlock.height / 2;var xOffset=0;if(dataPointEO.hemisphere==="left"){var xOffset=dataSeries.indexLabelPlacement!=="inside"?-(dataPointEO.indexLabelTextBlock.width+indexLabelLineEdgeLength):-dataPointEO.indexLabelTextBlock.width / 2;}
else{var xOffset=dataSeries.indexLabelPlacement!=="inside"?indexLabelLineEdgeLength:-dataPointEO.indexLabelTextBlock.width / 2;}
dataPointEO.indexLabelTextBlock.x+=xOffset;dataPointEO.indexLabelTextBlock.render(true);dataPointEO.indexLabelTextBlock.x-=xOffset;dataPointEO.indexLabelTextBlock.y+=dataPointEO.indexLabelTextBlock.height / 2;if(dataPointEO.indexLabelPlacement!=="inside"){var indexLabelLineStartX=dataPointEO.center.x+outerRadius*Math.cos(dataPointEO.midAngle);var indexLabelLineStartY=dataPointEO.center.y+outerRadius*Math.sin(dataPointEO.midAngle);ctx.strokeStyle=dataPointEO.indexLabelLineColor;ctx.lineWidth=dataPointEO.indexLabelLineThickness;ctx.beginPath();ctx.moveTo(indexLabelLineStartX,indexLabelLineStartY);ctx.lineTo(dataPointEO.indexLabelTextBlock.x,dataPointEO.indexLabelTextBlock.y);ctx.lineTo(dataPointEO.indexLabelTextBlock.x+(dataPointEO.hemisphere==="left"?-indexLabelLineEdgeLength:indexLabelLineEdgeLength),dataPointEO.indexLabelTextBlock.y);ctx.stroke();}
ctx.lineJoin="miter";}}
function animate(fractionComplete){var ctx=_this.plotArea.ctx;ctx.clearRect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height);ctx.fillStyle=_this.backgroundColor;ctx.fillRect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height);var maxAngle=dataPointEOs[0].startAngle+(2*Math.PI*fractionComplete);for(var i=0;i<dataPoints.length;i++){var startAngle=i===0?dataPointEOs[i].startAngle:endAngle;var endAngle=startAngle+(dataPointEOs[i].endAngle-dataPointEOs[i].startAngle);var shouldBreak=false;if(endAngle>maxAngle){endAngle=maxAngle;shouldBreak=true;}
var color=dataPoints[i].color?dataPoints[i].color:dataSeries._colorSet[i%dataSeries._colorSet.length];if(endAngle>startAngle)
drawSegment(_this.plotArea.ctx,dataPointEOs[i].center,dataPointEOs[i].radius,color,dataSeries.type,startAngle,endAngle,dataSeries.fillOpacity);if(shouldBreak)
break;}}
function explodeToggle(fractionComplete){var ctx=_this.plotArea.ctx;ctx.clearRect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height);ctx.fillStyle=_this.backgroundColor;ctx.fillRect(plotArea.x1,plotArea.y1,plotArea.width,plotArea.height);for(var i=0;i<dataPoints.length;i++){var startAngle=dataPointEOs[i].startAngle;var endAngle=dataPointEOs[i].endAngle;if(endAngle>startAngle){var offsetX=(outerRadius*.07*Math.cos(dataPointEOs[i].midAngle));var offsetY=(outerRadius*.07*Math.sin(dataPointEOs[i].midAngle));var isInTransition=false;if(dataPoints[i].exploded){if(Math.abs(dataPointEOs[i].center.x-(center.x+offsetX))>0.000000001||Math.abs(dataPointEOs[i].center.y-(center.y+offsetY))>0.000000001){dataPointEOs[i].center.x=center.x+offsetX*fractionComplete;dataPointEOs[i].center.y=center.y+offsetY*fractionComplete;isInTransition=true;}}else if(Math.abs(dataPointEOs[i].center.x-center.x)>0||Math.abs(dataPointEOs[i].center.y-center.y)>0){dataPointEOs[i].center.x=center.x+offsetX*(1-fractionComplete);dataPointEOs[i].center.y=center.y+offsetY*(1-fractionComplete);isInTransition=true;}
if(isInTransition){var entry={};entry.dataSeries=dataSeries;entry.dataPoint=dataSeries.dataPoints[i];entry.index=i;_this._toolTip.highlightObjects([entry]);}
var color=dataPoints[i].color?dataPoints[i].color:dataSeries._colorSet[i%dataSeries._colorSet.length];drawSegment(_this.plotArea.ctx,dataPointEOs[i].center,dataPointEOs[i].radius,color,dataSeries.type,startAngle,endAngle,dataSeries.fillOpacity);}}
renderLabels();}
function areDataPointsTooClose(first,second){var label1={x1:first.indexLabelTextBlock.x,y1:first.indexLabelTextBlock.y-first.indexLabelTextBlock.height / 2,x2:first.indexLabelTextBlock.x+first.indexLabelTextBlock.width,y2:first.indexLabelTextBlock.y+first.indexLabelTextBlock.height / 2};var label2={x1:second.indexLabelTextBlock.x,y1:second.indexLabelTextBlock.y-second.indexLabelTextBlock.height / 2,x2:second.indexLabelTextBlock.x+second.indexLabelTextBlock.width,y2:second.indexLabelTextBlock.y+second.indexLabelTextBlock.height / 2};if(label1.x2<label2.x1-indexLabelLineEdgeLength||label1.x1>label2.x2+indexLabelLineEdgeLength||label1.y1>label2.y2+indexLabelLineEdgeLength||label1.y2<label2.y1-indexLabelLineEdgeLength)
return false;return true;}
function getVerticalDistanceBetweenLabels(first,second){var distance=0;var label1={y:first.indexLabelTextBlock.y,y1:first.indexLabelTextBlock.y-first.indexLabelTextBlock.height / 2,y2:first.indexLabelTextBlock.y+first.indexLabelTextBlock.height / 2};var label2={y:second.indexLabelTextBlock.y,y1:second.indexLabelTextBlock.y-second.indexLabelTextBlock.height / 2,y2:second.indexLabelTextBlock.y+second.indexLabelTextBlock.height / 2};if(label2.y>label1.y){distance=label2.y1-label1.y2;}
else{distance=label1.y1-label2.y2;}
return distance;}
function getNextLabelIndex(currentLabelIndex){var nextLabelIndex=null;for(var i=1;i<dataPoints.length;i++){nextLabelIndex=(currentLabelIndex+i+dataPointEOs.length)%dataPointEOs.length;if(dataPointEOs[nextLabelIndex].hemisphere!==dataPointEOs[currentLabelIndex].hemisphere){nextLabelIndex=null;break;}
else if((dataPointEOs[nextLabelIndex].indexLabelText)&&(nextLabelIndex!==currentLabelIndex)&&((getVerticalDistanceBetweenLabels(dataPointEOs[nextLabelIndex],dataPointEOs[currentLabelIndex])<0)||(dataPointEOs[currentLabelIndex].hemisphere==="right"?dataPointEOs[nextLabelIndex].indexLabelTextBlock.y>=dataPointEOs[currentLabelIndex].indexLabelTextBlock.y:dataPointEOs[nextLabelIndex].indexLabelTextBlock.y<=dataPointEOs[currentLabelIndex].indexLabelTextBlock.y)))
break;else{nextLabelIndex=null;}}
return nextLabelIndex;}
function getPreviousLabelIndex(currentLabelIndex){var prevLabelIndex=null;for(var i=1;i<dataPoints.length;i++){prevLabelIndex=(currentLabelIndex-i+dataPointEOs.length)%dataPointEOs.length;if(dataPointEOs[prevLabelIndex].hemisphere!==dataPointEOs[currentLabelIndex].hemisphere){prevLabelIndex=null;break;}
else if((dataPointEOs[prevLabelIndex].indexLabelText)&&(dataPointEOs[prevLabelIndex].hemisphere===dataPointEOs[currentLabelIndex].hemisphere)&&(prevLabelIndex!==currentLabelIndex)&&((getVerticalDistanceBetweenLabels(dataPointEOs[prevLabelIndex],dataPointEOs[currentLabelIndex])<0)||(dataPointEOs[currentLabelIndex].hemisphere==="right"?dataPointEOs[prevLabelIndex].indexLabelTextBlock.y<=dataPointEOs[currentLabelIndex].indexLabelTextBlock.y:dataPointEOs[prevLabelIndex].indexLabelTextBlock.y>=dataPointEOs[currentLabelIndex].indexLabelTextBlock.y)))
break;else{prevLabelIndex=null;}}
return prevLabelIndex;}
function rePositionLabels(dataPointIndex,offset){offset=offset||0;var actualOffset=0;var labelYMin=center.y-indexLabelRadius*1;var labelYMax=center.y+indexLabelRadius*1;if(dataPointIndex>=0&&dataPointIndex<dataPoints.length){var dataPointEO=dataPointEOs[dataPointIndex];if((offset<0&&dataPointEO.indexLabelTextBlock.y<labelYMin)||(offset>0&&dataPointEO.indexLabelTextBlock.y>labelYMax))
return 0;var validOffset=offset;{var distFromIndexLineStart=0;var indexLabelLineStartX=0;var indexLabelLineStartY=0;var indexLabelAngle=0;var indexLabelAngleWhenTangent=0;if(validOffset<0){if(dataPointEO.indexLabelTextBlock.y-dataPointEO.indexLabelTextBlock.height / 2>labelYMin&&dataPointEO.indexLabelTextBlock.y-dataPointEO.indexLabelTextBlock.height / 2+validOffset<labelYMin)
validOffset=-(labelYMin-(dataPointEO.indexLabelTextBlock.y-dataPointEO.indexLabelTextBlock.height / 2+validOffset));}else{if(dataPointEO.indexLabelTextBlock.y+dataPointEO.indexLabelTextBlock.height / 2<labelYMin&&dataPointEO.indexLabelTextBlock.y+dataPointEO.indexLabelTextBlock.height / 2+validOffset>labelYMax)
validOffset=(dataPointEO.indexLabelTextBlock.y+dataPointEO.indexLabelTextBlock.height / 2+validOffset)-labelYMax;}
var newlabelY=dataPointEO.indexLabelTextBlock.y+validOffset;var newlabelX=0;if(dataPointEO.hemisphere==="right"){newlabelX=center.x+Math.sqrt(Math.pow(indexLabelRadius,2)-Math.pow(newlabelY-center.y,2));}
else
newlabelX=center.x-Math.sqrt(Math.pow(indexLabelRadius,2)-Math.pow(newlabelY-center.y,2));indexLabelLineStartX=center.x+outerRadius*Math.cos(dataPointEO.midAngle);indexLabelLineStartY=center.y+outerRadius*Math.sin(dataPointEO.midAngle);distFromIndexLineStart=Math.sqrt(Math.pow(newlabelX-indexLabelLineStartX,2)+Math.pow(newlabelY-indexLabelLineStartY,2));indexLabelAngleWhenTangent=Math.acos(outerRadius / indexLabelRadius);indexLabelAngle=Math.acos((indexLabelRadius*indexLabelRadius+outerRadius*outerRadius-distFromIndexLineStart*distFromIndexLineStart)/(2*outerRadius*indexLabelRadius));if(indexLabelAngle<indexLabelAngleWhenTangent){validOffset=newlabelY-dataPointEO.indexLabelTextBlock.y;}
else{validOffset=0;}}
var prevDataPointIndex=getPreviousLabelIndex(dataPointIndex);var nextDataPointIndex=getNextLabelIndex(dataPointIndex);var otherdataPointEO,otherDataPointIndex,distanceFromOtherLabel;var otherDataPointOffset=0;var otherDataPointActualOffset=0;if(validOffset<0){otherDataPointIndex=dataPointEO.hemisphere==="right"?prevDataPointIndex:nextDataPointIndex;actualOffset=validOffset;if(otherDataPointIndex!==null){var tempOffset=-validOffset;var distanceFromOtherLabel=(dataPointEO.indexLabelTextBlock.y-dataPointEO.indexLabelTextBlock.height / 2)-(dataPointEOs[otherDataPointIndex].indexLabelTextBlock.y+dataPointEOs[otherDataPointIndex].indexLabelTextBlock.height / 2);if(distanceFromOtherLabel-tempOffset<minDistanceBetweenLabels){otherDataPointOffset=-tempOffset;totalRecursions++;otherDataPointActualOffset=rePositionLabels(otherDataPointIndex,otherDataPointOffset);if(+otherDataPointActualOffset.toFixed(precision)>+otherDataPointOffset.toFixed(precision)){if(distanceFromOtherLabel>minDistanceBetweenLabels)
actualOffset=-(distanceFromOtherLabel-minDistanceBetweenLabels);else
actualOffset=-(tempOffset-(otherDataPointActualOffset-otherDataPointOffset));}}}}else if(validOffset>0){otherDataPointIndex=dataPointEO.hemisphere==="right"?nextDataPointIndex:prevDataPointIndex;actualOffset=validOffset;if(otherDataPointIndex!==null){var tempOffset=validOffset;var distanceFromOtherLabel=(dataPointEOs[otherDataPointIndex].indexLabelTextBlock.y-dataPointEOs[otherDataPointIndex].indexLabelTextBlock.height / 2)-(dataPointEO.indexLabelTextBlock.y+dataPointEO.indexLabelTextBlock.height / 2);if(distanceFromOtherLabel-tempOffset<minDistanceBetweenLabels){otherDataPointOffset=tempOffset;totalRecursions++;otherDataPointActualOffset=rePositionLabels(otherDataPointIndex,otherDataPointOffset);if(+otherDataPointActualOffset.toFixed(precision)<+otherDataPointOffset.toFixed(precision)){if(distanceFromOtherLabel>minDistanceBetweenLabels)
actualOffset=distanceFromOtherLabel-minDistanceBetweenLabels;else
actualOffset=tempOffset-(otherDataPointOffset-otherDataPointActualOffset);}}}}
if(actualOffset){var newLabelY=dataPointEO.indexLabelTextBlock.y+actualOffset;var newLabelX=0;if(dataPointEO.hemisphere==="right"){newLabelX=center.x+Math.sqrt(Math.pow(indexLabelRadius,2)-Math.pow(newLabelY-center.y,2));}
else
newLabelX=center.x-Math.sqrt(Math.pow(indexLabelRadius,2)-Math.pow(newLabelY-center.y,2));if(dataPointEO.midAngle>(Math.PI / 2)-poleAnglularDistance&&dataPointEO.midAngle<(Math.PI / 2)+poleAnglularDistance){var prevDPIndex=(dataPointIndex-1+dataPointEOs.length)%dataPointEOs.length;var prevDP=dataPointEOs[prevDPIndex];var nextDP=dataPointEOs[(dataPointIndex+1+dataPointEOs.length)%dataPointEOs.length];if(dataPointEO.hemisphere==="left"&&prevDP.hemisphere==="right"&&newLabelX>prevDP.indexLabelTextBlock.x){newLabelX=prevDP.indexLabelTextBlock.x-15;}else if(dataPointEO.hemisphere==="right"&&nextDP.hemisphere==="left"&&newLabelX<nextDP.indexLabelTextBlock.x){newLabelX=nextDP.indexLabelTextBlock.x+15;}}else if(dataPointEO.midAngle>(3*Math.PI / 2)-poleAnglularDistance&&dataPointEO.midAngle<(3*Math.PI / 2)+poleAnglularDistance){var prevDPIndex=(dataPointIndex-1+dataPointEOs.length)%dataPointEOs.length;var prevDP=dataPointEOs[prevDPIndex];var nextDP=dataPointEOs[(dataPointIndex+1+dataPointEOs.length)%dataPointEOs.length];if(dataPointEO.hemisphere==="right"&&prevDP.hemisphere==="left"&&newLabelX<prevDP.indexLabelTextBlock.x){newLabelX=prevDP.indexLabelTextBlock.x+15;}else if(dataPointEO.hemisphere==="left"&&nextDP.hemisphere==="right"&&newLabelX>nextDP.indexLabelTextBlock.x){newLabelX=nextDP.indexLabelTextBlock.x-15;}}
dataPointEO.indexLabelTextBlock.y=newLabelY;dataPointEO.indexLabelTextBlock.x=newLabelX;dataPointEO.indexLabelAngle=Math.atan2((dataPointEO.indexLabelTextBlock.y-center.y),(dataPointEO.indexLabelTextBlock.x-center.x));}}
return actualOffset;}
function positionLabels(){var ctx=_this.plotArea.ctx;ctx.fillStyle="grey";ctx.strokeStyle="grey";var fontSize=16;ctx.font=fontSize+"px Arial";ctx.textBaseline="middle";var i=0,j=0;var deltaR=0;for(j=0;j<10&&(j<1||deltaR>0);j++){outerRadius-=deltaR;deltaR=0;if(dataSeries.indexLabelPlacement!=="inside"){indexLabelRadius=outerRadius*indexLabelRadiusToRadiusRatio;for(i=0;i<dataPoints.length;i++){var dataPointEO=dataPointEOs[i];dataPointEO.indexLabelTextBlock.x=center.x+indexLabelRadius*Math.cos(dataPointEO.midAngle);dataPointEO.indexLabelTextBlock.y=center.y+indexLabelRadius*Math.sin(dataPointEO.midAngle);dataPointEO.indexLabelAngle=dataPointEO.midAngle;dataPointEO.radius=outerRadius;}
var currentDataPoint,nextDataPoint;for(i=0;i<dataPoints.length;i++){var dataPointEO=dataPointEOs[i];var nextDataPointIndex=getNextLabelIndex(i);if(nextDataPointIndex===null)
continue;currentDataPoint=dataPointEOs[i];nextDataPoint=dataPointEOs[nextDataPointIndex];var distanceFromNextLabel=0;distanceFromNextLabel=getVerticalDistanceBetweenLabels(currentDataPoint,nextDataPoint)-minDistanceBetweenLabels;if(distanceFromNextLabel<0){var dataPointsAbove=0;var dataPointsBelow=0;for(var k=0;k<dataPoints.length;k++){if(k===i)
continue;if(dataPointEOs[k].hemisphere!==dataPointEO.hemisphere)
continue;if(dataPointEOs[k].indexLabelTextBlock.y<dataPointEO.indexLabelTextBlock.y)
dataPointsAbove++;else
dataPointsBelow++;}
var upWardsOffset=(distanceFromNextLabel)/(dataPointsAbove+dataPointsBelow||1)*(dataPointsBelow);var downWardsOffset=-1*(distanceFromNextLabel-upWardsOffset);var actualUpwardOffset=0;var actualDownwardOffset=0;if(dataPointEO.hemisphere==="right"){actualUpwardOffset=rePositionLabels(i,upWardsOffset);downWardsOffset=-1*(distanceFromNextLabel-actualUpwardOffset);actualDownwardOffset=rePositionLabels(nextDataPointIndex,downWardsOffset);if(+actualDownwardOffset.toFixed(precision)<+downWardsOffset.toFixed(precision)&&+actualUpwardOffset.toFixed(precision)<=+upWardsOffset.toFixed(precision))
rePositionLabels(i,-(downWardsOffset-actualDownwardOffset));}else{actualUpwardOffset=rePositionLabels(nextDataPointIndex,upWardsOffset);downWardsOffset=-1*(distanceFromNextLabel-actualUpwardOffset);actualDownwardOffset=rePositionLabels(i,downWardsOffset);if(+actualDownwardOffset.toFixed(precision)<+downWardsOffset.toFixed(precision)&&+actualUpwardOffset.toFixed(precision)<=+upWardsOffset.toFixed(precision))
rePositionLabels(nextDataPointIndex,-(downWardsOffset-actualDownwardOffset));}}}}else{for(i=0;i<dataPoints.length;i++){var dataPointEO=dataPointEOs[i];indexLabelRadius=dataSeries.type==="pie"?outerRadius*.7:outerRadius*.8;var dx=center.x+indexLabelRadius*(Math.cos((dataPointEO.midAngle)));var dy=center.y+indexLabelRadius*(Math.sin((dataPointEO.midAngle)));dataPointEO.indexLabelTextBlock.x=dx;dataPointEO.indexLabelTextBlock.y=dy;}}
for(i=0;i<dataPoints.length;i++){dataPointEO=dataPointEOs[i];var size=dataPointEO.indexLabelTextBlock.measureText();if(size.height===0||size.width===0)
continue;var xOverFlow=0;var xdr=0;if(dataPointEO.hemisphere==="right"){xOverFlow=plotArea.x2-(dataPointEO.indexLabelTextBlock.x+dataPointEO.indexLabelTextBlock.width+indexLabelLineEdgeLength);xOverFlow*=-1;}else{xOverFlow=plotArea.x1-(dataPointEO.indexLabelTextBlock.x-dataPointEO.indexLabelTextBlock.width-indexLabelLineEdgeLength);}
if(xOverFlow>0){if(Math.abs(dataPointEO.indexLabelTextBlock.y-dataPointEO.indexLabelTextBlock.height / 2-center.y)<outerRadius||Math.abs(dataPointEO.indexLabelTextBlock.y+dataPointEO.indexLabelTextBlock.height / 2-center.y)<outerRadius){xdr=xOverFlow / Math.abs(Math.cos(dataPointEO.indexLabelAngle));if(xdr>9)
xdr=xdr*.3;if(xdr>deltaR)
deltaR=xdr;}else{}}
var yOverFlow=0;var ydr=0;if(dataPointEO.indexLabelAngle>0&&dataPointEO.indexLabelAngle<Math.PI){yOverFlow=plotArea.y2-(dataPointEO.indexLabelTextBlock.y+dataPointEO.indexLabelTextBlock.height / 2+5);yOverFlow*=-1;}else{yOverFlow=plotArea.y1-(dataPointEO.indexLabelTextBlock.y-dataPointEO.indexLabelTextBlock.height / 2-5);}
if(yOverFlow>0){if(Math.abs(dataPointEO.indexLabelTextBlock.x-center.x)<outerRadius){ydr=yOverFlow / Math.abs(Math.sin(dataPointEO.indexLabelAngle));if(ydr>9)
ydr=ydr*.3;if(ydr>deltaR)
deltaR=ydr;}else{}}else{}}
function removeLabelsForSmallSegments(totalOverlap,startIndex,endIndex){var dpEOs=[];var totalRemovedLabelHeight=0;for(var i=startIndex;true;i=(i+1+dataPoints.length)%dataPoints.length){dpEOs.push(dataPointEOs[i]);if(i===endIndex)
break;}
dpEOs.sort(function(entry1,entry2){return entry1.y-entry2.y;});for(i=0;i<dpEOs.length;i++){var dpEO=dpEOs[i];if(totalRemovedLabelHeight<totalOverlap){totalRemovedLabelHeight+=dpEO.indexLabelTextBlock.height;dpEO.indexLabelTextBlock.text="";dpEO.indexLabelText="";dpEO.indexLabelTextBlock.measureText();}else
break;}}
var overlapStartIndex=-1;var overlapEndIndex=-1;var totalOverlap=0;for(var k=0;k<dataPoints.length;k++){currentDataPoint=dataPointEOs[k];if(!currentDataPoint.indexLabelText)
continue;var nextLabelIndex=getNextLabelIndex(k);if(nextLabelIndex===null)
continue;var nextDataPoint=dataPointEOs[nextLabelIndex];distanceFromNextLabel=0;distanceFromNextLabel=getVerticalDistanceBetweenLabels(currentDataPoint,nextDataPoint);if(distanceFromNextLabel<0&&areDataPointsTooClose(currentDataPoint,nextDataPoint)){if(overlapStartIndex<0)
overlapStartIndex=k;if(nextLabelIndex!==overlapStartIndex)
overlapEndIndex=nextLabelIndex;totalOverlap+=-distanceFromNextLabel;}else{if(totalOverlap>0){removeLabelsForSmallSegments(totalOverlap,overlapStartIndex,overlapEndIndex);overlapStartIndex=-1;overlapEndIndex=-1;totalOverlap=0;}}}
if(totalOverlap>0)
removeLabelsForSmallSegments(totalOverlap,overlapStartIndex,overlapEndIndex);}}
this.pieDoughnutClickHandler=function(e){if(_this.isAnimating){return;}
var i=e.dataPointIndex;var dataPoint=e.dataPoint;var dataSeries=this;var id=dataSeries.dataPointIds[i];if(dataPoint.exploded)
dataPoint.exploded=false;else
dataPoint.exploded=true;if(dataSeries.dataPoints.length>1){_this._animator.animate(0,explodeDuration,function(fractionComplete){explodeToggle(fractionComplete);});}
return;}
initLabels();positionLabels();this.disableToolTip=true;this._animator.animate(0,this.animatedRender?this.animationDuration:0,function(fractionComplete){animate(fractionComplete);},function(){_this.disableToolTip=false;_this._animator.animate(0,_this.animatedRender?explodeDuration:0,function(fractionComplete){explodeToggle(fractionComplete);});});}
Chart.prototype.animationRequestId=null;Chart.prototype.requestAnimFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){window.setTimeout(callback,1000 / 60);};})();Chart.prototype.cancelRequestAnimFrame=(function(){return window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout})();function LayoutManager(chart){this._topOccupied=0;this._bottomOccupied=0;this._leftOccupied=0;this._rightOccupied=0;this.chart=chart;}
LayoutManager.prototype.registerSpace=function(position,size){if(position==="top"){this._topOccupied+=size.height;}
else if(position==="bottom"){this._bottomOccupied+=size.height;}else if(position==="left"){this._leftOccupied+=size.width;}else if(position==="right"){this._rightOccupied+=size.width;}}
LayoutManager.prototype.unRegisterSpace=function(position,size){if(position==="top"){this._topOccupied-=size.height;}
else if(position==="bottom"){this._bottomOccupied-=size.height;}else if(position==="left"){this._leftOccupied-=size.width;}else if(position==="right"){this._rightOccupied-=size.width;}}
LayoutManager.prototype.getFreeSpace=function(){return{x1:this._leftOccupied,y1:this._topOccupied,x2:this.chart.width-this._rightOccupied,y2:this.chart.height-this._bottomOccupied,width:(this.chart.width-this._rightOccupied)-this._leftOccupied,height:(this.chart.height-this._bottomOccupied)-this._topOccupied};}
LayoutManager.prototype.reset=function(){this._topOccupied=0;this._bottomOccupied=3;this._leftOccupied=0;this._rightOccupied=0;}
function TextBlock(ctx,options){TextBlock.parent.constructor.call(this,"TextBlock",options);this.ctx=ctx;this._isDirty=true;this._wrappedText=null;this._lineHeight=getFontHeightInPixels(this.fontFamily,this.fontSize,this.fontWeight);}
extend(TextBlock,CanvasJSObject);TextBlock.prototype.render=function(preserveContext){if(preserveContext)
this.ctx.save();var font=this.ctx.font;this.ctx.textBaseline=this.textBaseline;var offsetY=0;if(this._isDirty)
this.measureText(this.ctx);this.ctx.translate(this.x,this.y+offsetY);if(this.textBaseline==="middle"){offsetY=-this._lineHeight / 2;}
this.ctx.font=this._getFontString();this.ctx.rotate(Math.PI / 180*this.angle);var textLeft=0;var textTop=this.padding;var line=null;if((this.borderThickness>0&&this.borderColor)||this.backgroundColor){this.ctx.roundRect(0,offsetY,this.width,this.height,this.cornerRadius,this.borderThickness,this.backgroundColor,this.borderColor);}
this.ctx.fillStyle=this.fontColor;for(var i=0;i<this._wrappedText.lines.length;i++){line=this._wrappedText.lines[i];if(this.horizontalAlign==="right")
textLeft=this.width-line.width-this.padding;else if(this.horizontalAlign==="left")
textLeft=this.padding;else if(this.horizontalAlign==="center")
textLeft=(this.width-this.padding*2)/ 2-line.width / 2+this.padding;this.ctx.fillText(line.text,textLeft,textTop);textTop+=line.height;}
this.ctx.font=font;if(preserveContext)
this.ctx.restore();}
TextBlock.prototype.setText=function(text){this.text=text;this._isDirty=true;this._wrappedText=null;}
TextBlock.prototype.measureText=function(){if(this.maxWidth===null){throw("Please set maxWidth and height for TextBlock");}
this._wrapText(this.ctx);this._isDirty=false;return{width:this.width,height:this.height}}
TextBlock.prototype._getLineWithWidth=function(text,width,clipWord){text=String(text);clipWord=clipWord||false;if(!text)
return{text:"",width:0};var textWidth=0,min=0,max=text.length-1,mid=Infinity;this.ctx.font=this._getFontString();while(min<=max){mid=Math.floor((min+max)/ 2);var tempText=text.substr(0,mid+1);textWidth=this.ctx.measureText(tempText).width;if(textWidth<width){min=mid+1;}else if(textWidth>width){max=mid-1;}else{break;}}
if(textWidth>width&&tempText.length>1){tempText=tempText.substr(0,tempText.length-1);textWidth=this.ctx.measureText(tempText).width;}
var isClipped=true;if(tempText.length===text.length||text[tempText.length]===" ")
isClipped=false;if(isClipped){var resultWords=tempText.split(" ");if(resultWords.length>1)
resultWords.pop();tempText=resultWords.join(" ");textWidth=this.ctx.measureText(tempText).width;}
return{text:tempText,width:textWidth};}
TextBlock.prototype._wrapText=function wrapText(){var text=new String(trimString(this.text));var lines=[];var font=this.ctx.font;var height=0;var width=0;this.ctx.font=this._getFontString();while(text.length>0){var maxWidth=this.maxWidth-this.padding*2;var maxHeight=this.maxHeight-this.padding*2;var line=this._getLineWithWidth(text,maxWidth,false);line.height=this._lineHeight;lines.push(line);width=Math.max(width,line.width);height+=line.height;text=trimString(text.slice(line.text.length,text.length));if(maxHeight&&height>maxHeight){var line=lines.pop();height-=line.height;}}
this._wrappedText={lines:lines,width:width,height:height};this.width=width+this.padding*2;this.height=height+this.padding*2;this.ctx.font=font;}
TextBlock.prototype._getFontString=function(){return getFontString("",this,null);}
function Title(chart,options){Title.parent.constructor.call(this,"Title",options,chart.theme);this.chart=chart;this.canvas=chart.canvas;this.ctx=this.chart.ctx;if(typeof(this._options.fontSize)==="undefined"){this.fontSize=this.chart.getAutoFontSize(this.fontSize);}
this.width=null,this.height=null
this.bounds={x1:null,y1:null,x2:null,y2:null};}
extend(Title,CanvasJSObject);Title.prototype.render=function(){if(!this.text)
return;var freespace=this.chart.layoutManager.getFreeSpace();var left=0;var top=0;var angle=0;var maxWidth=0;var maxHeight=0;var textBlockHorizontalAlign;var position;if(this.verticalAlign==="top"||this.verticalAlign==="bottom"){maxWidth=freespace.width-this.margin*2;maxHeight=freespace.height*.5-this.margin*2;angle=0;}
else if(this.verticalAlign==="center"){if(this.horizontalAlign==="left"||this.horizontalAlign==="right"){maxWidth=freespace.height-this.margin*2;maxHeight=freespace.width*.5-this.margin*2;}else if(this.horizontalAlign==="center"){maxWidth=freespace.width-this.margin*2;maxHeight=freespace.height*.5-this.margin*2;}}
var textBlock=new TextBlock(this.ctx,{fontSize:this.fontSize,fontFamily:this.fontFamily,fontColor:this.fontColor,fontStyle:this.fontStyle,fontWeight:this.fontWeight,horizontalAlign:this.horizontalAlign,verticalAlign:this.verticalAlign,borderColor:this.borderColor,borderThickness:this.borderThickness,backgroundColor:this.backgroundColor,maxWidth:maxWidth,maxHeight:maxHeight,cornerRadius:this.cornerRadius,text:this.text,padding:this.padding,textBaseline:"top"});var textBlockSize=textBlock.measureText();if(this.verticalAlign==="top"||this.verticalAlign==="bottom"){if(this.verticalAlign==="top"){top=this.margin;position="top";}
else if(this.verticalAlign==="bottom"){top=freespace.y2-this.margin-textBlockSize.height;position="bottom";}
if(this.horizontalAlign==="left"){left=freespace.x1+this.margin;}
else if(this.horizontalAlign==="center"){left=freespace.x1+(maxWidth / 2-textBlockSize.width / 2)+this.margin;}
else if(this.horizontalAlign==="right"){left=freespace.x2-this.margin-textBlockSize.width;}
textBlockHorizontalAlign=this.horizontalAlign;this.width=textBlockSize.width;this.height=textBlockSize.height;}
else if(this.verticalAlign==="center"){if(this.horizontalAlign==="left"){left=freespace.x1+this.margin;top=freespace.y2-this.margin-(maxWidth / 2-textBlockSize.width / 2);angle=-90;position="left";this.width=textBlockSize.height;this.height=textBlockSize.width;}
else if(this.horizontalAlign==="right"){left=freespace.x2-this.margin;top=freespace.y1+this.margin+(maxWidth / 2-textBlockSize.width / 2);angle=90;position="right";this.width=textBlockSize.height;this.height=textBlockSize.width;}
else if(this.horizontalAlign==="center"){top=freespace.y1+(freespace.height / 2-textBlockSize.height / 2);left=freespace.x1+(freespace.width / 2-textBlockSize.width / 2);position="center";this.width=textBlockSize.width;this.height=textBlockSize.height;}
textBlockHorizontalAlign="center";}
textBlock.x=left;textBlock.y=top;textBlock.angle=angle;textBlock.horizontalAlign=textBlockHorizontalAlign;textBlock.render(true);this.chart.layoutManager.registerSpace(position,{width:this.width+this.margin*2,height:this.height+this.margin*2});this.bounds={x1:left,y1:top,x2:left+this.width,y2:top+this.height};this.ctx.textBaseline="top";}
function Legend(chart,options,theme){Legend.parent.constructor.call(this,"Legend",options,theme);this.chart=chart;this.canvas=chart.canvas;this.ctx=this.chart.ctx;this.ghostCtx=this.chart._eventManager.ghostCtx;this.items=[];this.width=0,this.height=0,this.orientation=null,this.horizontalSpacing=10;this.dataSeries=[];this.bounds={x1:null,y1:null,x2:null,y2:null};if(typeof(this._options.fontSize)==="undefined"){this.fontSize=this.chart.getAutoFontSize(this.fontSize);}
this.lineHeight=getFontHeightInPixels(this.fontFamily,this.fontSize,this.fontWeight);}
extend(Legend,CanvasJSObject);Legend.prototype.render=function(){var freeSpace=this.chart.layoutManager.getFreeSpace();var position=null;var top=0;var left=0;var maxWidth=0;var maxHeight=0;var itemMargin=5;var items=[];var rows=[];if(this.verticalAlign==="top"||this.verticalAlign==="bottom"){this.orientation="horizontal";position=this.verticalAlign;maxWidth=freeSpace.width*.9;maxHeight=freeSpace.height*.5;}
else if(this.verticalAlign==="center"){this.orientation="vertical";position=this.horizontalAlign;maxWidth=freeSpace.width*.5;maxHeight=freeSpace.height*.9;}
for(var i=0;i<this.dataSeries.length;i++){var dataSeries=this.dataSeries[i];var markerType=dataSeries.legendMarkerType?dataSeries.legendMarkerType:(dataSeries.type==="line"||dataSeries.type==="stepLine"||dataSeries.type==="spline"||dataSeries.type==="scatter"||dataSeries.type==="bubble")&&dataSeries.markerType?dataSeries.markerType:DataSeries.getDefaultLegendMarker(dataSeries.type);var legendText=dataSeries.legendText?dataSeries.legendText:dataSeries.name;var markerColor=dataSeries.legendMarkerColor?dataSeries.legendMarkerColor:dataSeries.markerColor?dataSeries.markerColor:dataSeries._colorSet[0];var markerSize=(!dataSeries.markerSize&&(dataSeries.type==="line"||dataSeries.type==="stepLine"||dataSeries.type==="spline"))?0:this.lineHeight*.6;var markerBorderColor=dataSeries.legendMarkerBorderColor?dataSeries.legendMarkerBorderColor:dataSeries.markerBorderColor;var markerBorderThickness=dataSeries.legendMarkerBorderThickness?dataSeries.legendMarkerBorderThickness:dataSeries.markerBorderThickness?Math.max(1,Math.round(markerSize*.2)):0;var lineColor=dataSeries._colorSet[0];if(dataSeries.type!=="pie"&&dataSeries.type!=="doughnut"&&dataSeries.type!=="funnel"){var item={markerType:markerType,markerColor:markerColor,text:legendText,textBlock:null,chartType:dataSeries.type,markerSize:markerSize,lineColor:dataSeries._colorSet[0],dataSeriesIndex:dataSeries.index,dataPointIndex:null,markerBorderColor:markerBorderColor,markerBorderThickness:markerBorderThickness};items.push(item);}else{for(var dataPointIndex=0;dataPointIndex<dataSeries.dataPoints.length;dataPointIndex++){var dataPoint=dataSeries.dataPoints[dataPointIndex];markerType=dataPoint.legendMarkerType?dataPoint.legendMarkerType:dataSeries.legendMarkerType?dataSeries.legendMarkerType:DataSeries.getDefaultLegendMarker(dataSeries.type);var legendText=dataPoint.legendText?dataPoint.legendText:dataSeries.legendText?dataSeries.legendText:dataPoint.name?dataPoint.name:"DataPoint: "+(dataPointIndex+1);var markerColor=dataPoint.legendMarkerColor?dataPoint.legendMarkerColor:dataSeries.legendMarkerColor?dataSeries.legendMarkerColor:dataPoint.color?dataPoint.color:dataSeries.color?dataSeries.color:dataSeries._colorSet[dataPointIndex%dataSeries._colorSet.length];var markerSize=((dataPoint.markerSize===0||(dataSeries.markerSize===0&&!dataPoint.markerSize)))?0:this.lineHeight*.6;var markerBorderColor=dataPoint.legendMarkerBorderColor?dataPoint.legendMarkerBorderColor:dataSeries.legendMarkerBorderColor?dataSeries.legendMarkerBorderColor:dataPoint.markerBorderColor?dataPoint.markerBorderColor:dataSeries.markerBorderColor;var markerBorderThickness=dataPoint.legendMarkerBorderThickness?dataPoint.legendMarkerBorderThickness:dataSeries.legendMarkerBorderThickness?dataSeries.legendMarkerBorderThickness:dataPoint.markerBorderThickness||dataSeries.markerBorderThickness?Math.max(1,Math.round(markerSize*.2)):0;var item={markerType:markerType,markerColor:markerColor,text:legendText,textBlock:null,chartType:dataSeries.type,markerSize:markerSize,dataSeriesIndex:i,dataPointIndex:dataPointIndex,markerBorderColor:markerBorderColor,markerBorderThickness:markerBorderThickness};items.push(item);}}
item=null;}
if(items.length>0){var row=null;var rowIndex=0;for(var i=0;i<items.length;i++){var item=items[i];if(this.orientation==="horizontal"){item.textBlock=new TextBlock(this.ctx,{x:0,y:0,maxWidth:maxWidth,maxHeight:this.lineHeight,angle:0,text:item.text,horizontalAlign:"left",fontSize:this.fontSize,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontColor:this.fontColor,fontStyle:this.fontStyle,textBaseline:"top"});item.textBlock.measureText();if(!row||row.width+item.textBlock.width+(row.width===0?0:this.horizontalSpacing)>maxWidth){row={items:[],width:0};rows.push(row);this.height=rows.length*(item.textBlock.height+5);}
item.textBlock.x=row.width;item.textBlock.y=0;row.width+=Math.round(item.textBlock.width+item.textBlock._lineHeight+(row.width===0?0:item.textBlock._lineHeight*.5));row.items.push(item);this.width=Math.max(row.width,this.width);}else{if(this.height+this.lineHeight<maxHeight){row={items:[],width:0};rows.push(row);this.height=rows.length*(this.lineHeight);}else{row=rows[rowIndex];rowIndex=(rowIndex+1)%rows.length}
item.textBlock=new TextBlock(this.ctx,{x:0,y:0,maxWidth:maxWidth,maxHeight:this.fontSize*1.5,angle:0,text:item.text,horizontalAlign:"left",fontSize:this.fontSize,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontColor:this.fontColor,fontStyle:this.fontStyle,textBaseline:"top"});item.textBlock.measureText();item.textBlock.x=row.width;item.textBlock.y=0;row.width+=item.textBlock.width+item.textBlock._lineHeight+(row.width===0?0:item.textBlock._lineHeight*.5);row.items.push(item);this.width=Math.max(row.width,this.width);}}
this.height=rows.length*(this.lineHeight);}
if(this.verticalAlign==="top"){if(this.horizontalAlign==="left")
left=freeSpace.x1+2;else if(this.horizontalAlign==="right")
left=freeSpace.x2-this.width-2;else
left=freeSpace.x1+freeSpace.width / 2-this.width / 2;top=freeSpace.y1;}else if(this.verticalAlign==="center"){if(this.horizontalAlign==="left")
left=freeSpace.x1+2;else if(this.horizontalAlign==="right")
left=freeSpace.x2-this.width-2;else
left=freeSpace.x1+freeSpace.width / 2-this.width / 2;top=freeSpace.y1+freeSpace.height / 2-this.height / 2;}else if(this.verticalAlign==="bottom"){if(this.horizontalAlign==="left")
left=freeSpace.x1+2;else if(this.horizontalAlign==="right")
left=freeSpace.x2-this.width-2;else
left=freeSpace.x1+freeSpace.width / 2-this.width / 2;top=freeSpace.y2-this.height-5;}
this.items=items;for(var i=0;i<this.items.length;i++){var item=items[i];item.id=++this.chart._eventManager.lastObjectId;this.chart._eventManager.objectMap[item.id]={id:item.id,objectType:"legendItem",legendItemIndex:i,dataSeriesIndex:item.dataSeriesIndex,dataPointIndex:item.dataPointIndex};}
for(var i=0;i<rows.length;i++){var row=rows[i];for(var itemIndex=0;itemIndex<row.items.length;itemIndex++){var item=row.items[itemIndex];var legendX=item.textBlock.x+left+(itemIndex===0?item.markerSize*.2:(this.lineHeight*.4)+(item.markerSize*.2));var legendY=top+(i*this.lineHeight);var ghostX=legendX;if(!this.chart.data[item.dataSeriesIndex].visible)
this.ctx.globalAlpha=.5;if(item.chartType==="line"||item.chartType==="stepLine"||item.chartType==="spline"){this.ctx.strokeStyle=item.lineColor;this.ctx.lineWidth=Math.ceil(this.lineHeight / 8);this.ctx.beginPath();this.ctx.moveTo(legendX-this.lineHeight*.1,legendY+this.lineHeight / 2);this.ctx.lineTo(legendX+this.lineHeight*.7,legendY+this.lineHeight / 2);this.ctx.stroke();ghostX-=this.lineHeight*.1;}
RenderHelper.drawMarker(legendX+item.markerSize / 2,legendY+(this.lineHeight / 2),this.ctx,item.markerType,item.markerSize,item.markerColor,item.markerBorderColor,item.markerBorderThickness);item.textBlock.x=legendX+Math.round(this.lineHeight*.9);item.textBlock.y=legendY;item.textBlock.render(true);if(!this.chart.data[item.dataSeriesIndex].visible)
this.ctx.globalAlpha=1;var hexColor=intToHexColorString(item.id);this.ghostCtx.fillStyle=hexColor;this.ghostCtx.beginPath();this.ghostCtx.fillRect(ghostX,item.textBlock.y,item.textBlock.x+item.textBlock.width-ghostX,item.textBlock.height);item.x1=this.chart._eventManager.objectMap[item.id].x1=ghostX;item.y1=this.chart._eventManager.objectMap[item.id].y1=item.textBlock.y;item.x2=this.chart._eventManager.objectMap[item.id].x2=item.textBlock.x+item.textBlock.width;item.y2=this.chart._eventManager.objectMap[item.id].y2=item.textBlock.y+item.textBlock.height;}}
this.chart.layoutManager.registerSpace(position,{width:this.width+2+2,height:this.height+5+5});this.bounds={x1:left,y1:top,x2:left+this.width,y2:top+this.height};}
function PlotArea(chart,options){PlotArea.parent.constructor.call(this,options);this.chart=chart;this.canvas=chart.canvas;this.ctx=this.chart.ctx;}
extend(PlotArea,CanvasJSObject);PlotArea.prototype.render=function(){var freeSpace=this.chart.layoutManager.getFreeSpace();this.ctx.fillStyle="red";this.ctx.fillRect(freeSpace.x1,freeSpace.y1,freeSpace.x2,freeSpace.y2);}
function DataSeries(chart,options,theme,index,id){DataSeries.parent.constructor.call(this,"DataSeries",options,theme);this.chart=chart;this.canvas=chart.canvas;this._ctx=chart.canvas.ctx;this.index=index;this.noDataPointsInPlotArea=0;this.id=id;this.chart._eventManager.objectMap[id]={id:id,objectType:"dataSeries",dataSeriesIndex:index}
this.dataPointIds=[];this.plotUnit=[];this.axisX=null;this.axisY=null;if(this.fillOpacity===null){if(this.type.match(/area/i))
this.fillOpacity=.7;else
this.fillOpacity=1;}
this.axisPlacement=this.getDefaultAxisPlacement();if(typeof(this._options.indexLabelFontSize)==="undefined"){this.indexLabelFontSize=this.chart.getAutoFontSize(this.indexLabelFontSize);}}
extend(DataSeries,CanvasJSObject);DataSeries.prototype.getDefaultAxisPlacement=function(){var type=this.type;if(type==="column"||type==="line"||type==="stepLine"||type==="spline"||type==="area"||type==="stepArea"||type==="splineArea"||type==="stackedColumn"||type==="stackedLine"||type==="bubble"||type==="scatter"||type==="stackedArea"||type==="stackedColumn100"||type==="stackedLine100"||type==="stackedArea100"||type==="candlestick"||type==="ohlc"||type==="rangeColumn"||type==="rangeArea"||type==="rangeSplineArea"){return"normal";}
else if(type==="bar"||type==="stackedBar"||type==="stackedBar100"||type==="rangeBar"){return"xySwapped";}
else if(type==="pie"||type==="doughnut"||type==="funnel"){return"none";}else{window.console.log("Unknown Chart Type: "+type);return null;}}
DataSeries.getDefaultLegendMarker=function(type){if(type==="column"||type==="stackedColumn"||type==="stackedLine"||type==="bar"||type==="stackedBar"||type==="stackedBar100"||type==="bubble"||type==="scatter"||type==="stackedColumn100"||type==="stackedLine100"||type==="stepArea"||type==="candlestick"||type==="ohlc"||type==="rangeColumn"||type==="rangeBar"||type==="rangeArea"||type==="rangeSplineArea"){return"square";}
else if(type==="line"||type==="stepLine"||type==="spline"||type==="pie"||type==="doughnut"||type==="funnel"){return"circle";}else if(type==="area"||type==="splineArea"||type==="stackedArea"||type==="stackedArea100"){return"triangle"}else{window.console.log("Unknown Chart Type: "+type);return null;}}
DataSeries.prototype.getDataPointAtX=function(x,findClosest){if(!this.dataPoints||this.dataPoints.length===0)return null;var searchResult={dataPoint:null,distance:Infinity,index:NaN};var dataPoint=null;var j=0;var i=0;var direction=1;var minimumXDistance=Infinity;var forwardMissCount=0,backwardMissCount=0;var maxMissCount=1000;var searchStartIndex=0;if(this.chart.plotInfo.axisPlacement!=="none"){var xRange=(this.dataPoints[this.dataPoints.length-1].x-this.dataPoints[0].x);if(xRange>0)
searchStartIndex=Math.min(Math.max(((this.dataPoints.length-1)/ xRange*(x-this.dataPoints[0].x))>>0,0),this.dataPoints.length);else
searchStartIndex=0;}
while(true){i=(direction>0)?searchStartIndex+j:searchStartIndex-j;if(i>=0&&i<this.dataPoints.length){dataPoint=this.dataPoints[i];var distance=Math.abs(dataPoint.x-x);if(distance<searchResult.distance){searchResult.dataPoint=dataPoint;searchResult.distance=distance;searchResult.index=i;}
var xDistance=Math.abs(dataPoint.x-x);if(xDistance<=minimumXDistance)
minimumXDistance=xDistance;else{if(direction>0)
forwardMissCount++;else
backwardMissCount++;}
if(forwardMissCount>maxMissCount&&backwardMissCount>maxMissCount)
break;}else if(searchStartIndex-j<0&&searchStartIndex+j>=this.dataPoints.length)
break;if(direction===-1){j++;direction=1;}else
direction=-1;}
if(!findClosest&&searchResult.dataPoint.x===x)
return searchResult;else if(findClosest&&searchResult.dataPoint!==null)
return searchResult;else
return null;}
DataSeries.prototype.getDataPointAtXY=function(x,y,getClosest){if(!this.dataPoints||this.dataPoints.length===0)return null;getClosest=getClosest||false;var results=[];var j=0,i=0;var direction=1;var foundDataPoint=false;var minimumXDistance=Infinity;var forwardMissCount=0,backwardMissCount=0;var maxMissCount=1000;var searchStartIndex=0;if(this.chart.plotInfo.axisPlacement!=="none"){var xval=this.chart.axisX.getXValueAt({x:x,y:y});var xRange=(this.dataPoints[this.dataPoints.length-1].x-this.dataPoints[0].x);if(xRange>0)
searchStartIndex=Math.min(Math.max(((this.dataPoints.length-1)/ xRange*(xval-this.dataPoints[0].x))>>0,0),this.dataPoints.length);else
searchStartIndex=0;}
while(true){i=(direction>0)?searchStartIndex+j:searchStartIndex-j;if(i>=0&&i<this.dataPoints.length){var id=this.dataPointIds[i];var visualInfo=this.chart._eventManager.objectMap[id];var dataPoint=this.dataPoints[i];var distance=null;if(visualInfo){switch(this.type){case"column":case"stackedColumn":case"stackedColumn100":case"bar":case"stackedBar":case"stackedBar100":case"rangeColumn":case"rangeBar":if(x>=visualInfo.x1&&x<=visualInfo.x2&&y>=visualInfo.y1&&y<=visualInfo.y2){results.push({dataPoint:dataPoint,dataPointIndex:i,dataSeries:this,distance:Math.min(Math.abs(visualInfo.x1-x),Math.abs(visualInfo.x2-x),Math.abs(visualInfo.y1-y),Math.abs(visualInfo.y2-y))});foundDataPoint=true;}
break;case"line":case"stepLine":case"spline":case"area":case"stepArea":case"stackedArea":case"stackedArea100":case"splineArea":case"scatter":var markerSize=getProperty("markerSize",dataPoint,this)||4;var snapDistance=getClosest?20:markerSize;distance=Math.sqrt(Math.pow(visualInfo.x1-x,2)+Math.pow(visualInfo.y1-y,2));if(distance<=snapDistance){results.push({dataPoint:dataPoint,dataPointIndex:i,dataSeries:this,distance:distance});}
var xDistance=Math.abs(visualInfo.x1-x);if(xDistance<=minimumXDistance)
minimumXDistance=xDistance;else{if(direction>0)
forwardMissCount++;else
backwardMissCount++;}
if(distance<=markerSize / 2){foundDataPoint=true;}
break;case"rangeArea":case"rangeSplineArea":var markerSize=getProperty("markerSize",dataPoint,this)||4;var snapDistance=getClosest?20:markerSize;distance=Math.min(Math.sqrt(Math.pow(visualInfo.x1-x,2)+Math.pow(visualInfo.y1-y,2)),Math.sqrt(Math.pow(visualInfo.x1-x,2)+Math.pow(visualInfo.y2-y,2)));if(distance<=snapDistance){results.push({dataPoint:dataPoint,dataPointIndex:i,dataSeries:this,distance:distance});}
var xDistance=Math.abs(visualInfo.x1-x);if(xDistance<=minimumXDistance)
minimumXDistance=xDistance;else{if(direction>0)
forwardMissCount++;else
backwardMissCount++;}
if(distance<=markerSize / 2){foundDataPoint=true;}
break;case"bubble":var markerSize=visualInfo.size;distance=Math.sqrt(Math.pow(visualInfo.x1-x,2)+Math.pow(visualInfo.y1-y,2));if(distance<=markerSize / 2){results.push({dataPoint:dataPoint,dataPointIndex:i,dataSeries:this,distance:distance});foundDataPoint=true;}
break;case"pie":case"doughnut":var center=visualInfo.center;var innerRadius=this.type==="doughnut"?.6*visualInfo.radius:0;distance=Math.sqrt(Math.pow(center.x-x,2)+Math.pow(center.y-y,2));if(distance<visualInfo.radius&&distance>innerRadius){var deltaY=y-center.y;var deltaX=x-center.x;var angle=Math.atan2(deltaY,deltaX);if(angle<0)
angle+=Math.PI*2;angle=Number((((angle / Math.PI*180%360)+360)%360).toFixed(12));var startAngle=Number((((visualInfo.startAngle / Math.PI*180%360)+360)%360).toFixed(12));var endAngle=Number((((visualInfo.endAngle / Math.PI*180%360)+360)%360).toFixed(12));if(endAngle===0&&visualInfo.endAngle>1){endAngle=360;}
if(startAngle>=endAngle&&dataPoint.y!==0){endAngle+=360;if(angle<startAngle)
angle+=360;}
if(angle>startAngle&&angle<endAngle){results.push({dataPoint:dataPoint,dataPointIndex:i,dataSeries:this,distance:0});foundDataPoint=true;}}
break;case"candlestick":if(((x>=(visualInfo.x1-visualInfo.borderThickness / 2))&&(x<=(visualInfo.x2+visualInfo.borderThickness / 2))&&(y>=visualInfo.y2-visualInfo.borderThickness / 2)&&(y<=visualInfo.y3+visualInfo.borderThickness / 2))||(Math.abs(visualInfo.x2-x+visualInfo.x1-x)<visualInfo.borderThickness&&(y>=visualInfo.y1&&y<=visualInfo.y4))){results.push({dataPoint:dataPoint,dataPointIndex:i,dataSeries:this,distance:Math.min(Math.abs(visualInfo.x1-x),Math.abs(visualInfo.x2-x),Math.abs(visualInfo.y2-y),Math.abs(visualInfo.y3-y))});foundDataPoint=true;}
break;case"ohlc":if((Math.abs(visualInfo.x2-x+visualInfo.x1-x)<visualInfo.borderThickness&&(y>=visualInfo.y2&&y<=visualInfo.y3))||(x>=visualInfo.x1&&(x<=(visualInfo.x2+visualInfo.x1)/ 2)&&(y>=visualInfo.y1-visualInfo.borderThickness / 2)&&(y<=visualInfo.y1+visualInfo.borderThickness / 2))||((x>=(visualInfo.x1+visualInfo.x2)/ 2)&&(x<=visualInfo.x2)&&(y>=visualInfo.y4-visualInfo.borderThickness / 2)&&(y<=visualInfo.y4+visualInfo.borderThickness / 2))){results.push({dataPoint:dataPoint,dataPointIndex:i,dataSeries:this,distance:Math.min(Math.abs(visualInfo.x1-x),Math.abs(visualInfo.x2-x),Math.abs(visualInfo.y2-y),Math.abs(visualInfo.y3-y))});foundDataPoint=true;}
break;}
if(foundDataPoint||(forwardMissCount>maxMissCount&&backwardMissCount>maxMissCount))
break;}}else if(searchStartIndex-j<0&&searchStartIndex+j>=this.dataPoints.length)
break;if(direction===-1){j++;direction=1;}else
direction=-1;}
var closestResult=null;for(var m=0;m<results.length;m++){if(!closestResult){closestResult=results[m];}else if(results[m].distance<=closestResult.distance){closestResult=results[m];}}
return closestResult;}
DataSeries.prototype.getMarkerProperties=function(index,x,y,ctx){var dataPoints=this.dataPoints;var dataSeries=this;var markerColor=dataPoints[index].markerColor?dataPoints[index].markerColor:dataSeries.markerColor?dataSeries.markerColor:dataPoints[index].color?dataPoints[index].color:dataSeries.color?dataSeries.color:dataSeries._colorSet[index%dataSeries._colorSet.length];var markerBorderColor=dataPoints[index].markerBorderColor?dataPoints[index].markerBorderColor:dataSeries.markerBorderColor?dataSeries.markerBorderColor:null;var markerBorderThickness=dataPoints[index].markerBorderThickness?dataPoints[index].markerBorderThickness:dataSeries.markerBorderThickness?dataSeries.markerBorderThickness:null;var markerType=dataPoints[index].markerType?dataPoints[index].markerType:dataSeries.markerType;var markerSize=dataPoints[index].markerSize?dataPoints[index].markerSize:dataSeries.markerSize;return{x:x,y:y,ctx:ctx,type:markerType,size:markerSize,color:markerColor,borderColor:markerBorderColor,borderThickness:markerBorderThickness}}
function Axis(chart,options,type,position){Axis.parent.constructor.call(this,"Axis",options,chart.theme);this.chart=chart;this.canvas=chart.canvas;this.ctx=chart.ctx;this.maxWidth=0;this.maxHeight=0;this.intervalstartTimePercent=0;this.labels=[];this._labels=null;this.dataInfo={min:Infinity,max:-Infinity,viewPortMin:Infinity,viewPortMax:-Infinity,minDiff:Infinity};if(type==="axisX"){this.sessionVariables=this.chart.sessionVariables[type];if(!this._options.interval)
this.intervalType=null;}else{if(position==="left"||position==="top")
this.sessionVariables=this.chart.sessionVariables["axisY"];else{this.sessionVariables=this.chart.sessionVariables["axisY2"];}}
if(typeof(this._options.titleFontSize)==="undefined"){this.titleFontSize=this.chart.getAutoFontSize(this.titleFontSize);}
if(typeof(this._options.labelFontSize)==="undefined"){this.labelFontSize=this.chart.getAutoFontSize(this.labelFontSize);}
this.type=type;if(type==="axisX"&&(!options||typeof(options.gridThickness)==="undefined"))
this.gridThickness=0;this._position=position;this.lineCoordinates={x1:null,y1:null,x2:null,y2:null,width:null};{this.labelAngle=((this.labelAngle%360)+360)%360;if(this.labelAngle>90&&this.labelAngle<=270)
this.labelAngle-=180;else if(this.labelAngle>180&&this.labelAngle<=270)
this.labelAngle-=180
else if(this.labelAngle>270&&this.labelAngle<=360)
this.labelAngle-=360}
if(this._options.stripLines&&this._options.stripLines.length>0){this.stripLines=[];for(var i=0;i<this._options.stripLines.length;i++){this.stripLines.push(new StripLine(this.chart,this._options.stripLines[i],chart.theme,++this.chart._eventManager.lastObjectId));}}
this._titleTextBlock=null;this._absoluteMinimum=null;this._absoluteMaximum=null;if(this.hasOptionChanged("minimum"))
this.sessionVariables.internalMinimum=this.minimum;if(this.hasOptionChanged("maximum"))
this.sessionVariables.internalMaximum=this.maximum;this.trackChanges("minimum");this.trackChanges("maximum");}
extend(Axis,CanvasJSObject);Axis.prototype.createLabels=function(){var textBlock;var i=0;var endPoint;var labelMaxWidth=0;var labelMaxHeight=0;var intervalInPixels=0;if(this._position==="bottom"||this._position==="top"){intervalInPixels=this.lineCoordinates.width / Math.abs(this.maximum-this.minimum)*this.interval;if(this.labelAutoFit){labelMaxWidth=typeof(this._options.labelMaxWidth)==="undefined"?intervalInPixels*.9>>0:this.labelMaxWidth;}
else{labelMaxWidth=typeof(this._options.labelMaxWidth)==="undefined"?this.chart.width*.7>>0:this.labelMaxWidth;}
labelMaxHeight=typeof(this._options.labelWrap)==="undefined"||this.labelWrap?this.chart.height*.5>>0:this.labelFontSize*1.5;}
else if(this._position==="left"||this._position==="right"){intervalInPixels=this.lineCoordinates.height / Math.abs(this.maximum-this.minimum)*this.interval;if(this.labelAutoFit){labelMaxWidth=typeof(this._options.labelMaxWidth)==="undefined"?this.chart.width*.3>>0:this.labelMaxWidth;}
else{labelMaxWidth=typeof(this._options.labelMaxWidth)==="undefined"?this.chart.width*.5>>0:this.labelMaxWidth;}
labelMaxHeight=typeof(this._options.labelWrap)==="undefined"||this.labelWrap?intervalInPixels*2>>0:this.labelFontSize*1.5;}
if(this.type==="axisX"&&this.chart.plotInfo.axisXValueType==="dateTime"){endPoint=addToDateTime(new Date(this.maximum),this.interval,this.intervalType)
for(i=this.intervalstartTimePercent;i<endPoint;addToDateTime(i,this.interval,this.intervalType)){var timeInMilliseconds=i.getTime();var text=this.type==="axisX"&&this.labels[timeInMilliseconds]?this.labels[timeInMilliseconds]:dateFormat(i,this.valueFormatString,this.chart._cultureInfo);textBlock=new TextBlock(this.ctx,{x:0,y:0,maxWidth:labelMaxWidth,maxHeight:labelMaxHeight,angle:this.labelAngle,text:this.prefix+text+this.suffix,horizontalAlign:"left",fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle"});this._labels.push({position:i.getTime(),textBlock:textBlock,effectiveHeight:null});}}
else{endPoint=this.maximum;if(this.labels&&this.labels.length){var tempInterval=Math.ceil(this.interval);var tempStartPoint=Math.ceil(this.intervalstartTimePercent);var hasAllLabels=false;for(i=tempStartPoint;i<this.maximum;i+=tempInterval){if(this.labels[i]){hasAllLabels=true;}else{hasAllLabels=false;break;}}
if(hasAllLabels){this.interval=tempInterval;this.intervalstartTimePercent=tempStartPoint;}}
for(i=this.intervalstartTimePercent;i<=endPoint;i=parseFloat((i+this.interval).toFixed(14))){if(this.labelFormatter&&typeof this.labelFormatter=='function'){var text=this.labelFormatter(i);}
else{var text=this.type==="axisX"&&this.labels[i]?this.labels[i]:numberFormat(i,this.valueFormatString,this.chart._cultureInfo);}
textBlock=new TextBlock(this.ctx,{x:0,y:0,maxWidth:labelMaxWidth,maxHeight:labelMaxHeight,angle:this.labelAngle,text:this.prefix+text+this.suffix,horizontalAlign:"left",fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle",borderThickness:0});this._labels.push({position:i,textBlock:textBlock,effectiveHeight:null});}}
for(var i=0;i<this.stripLines.length;i++){var stripLine=this.stripLines[i];textBlock=new TextBlock(this.ctx,{x:0,y:0,backgroundColor:stripLine.labelBackgroundColor,maxWidth:labelMaxWidth,maxHeight:labelMaxHeight,angle:this.labelAngle,text:stripLine.label,horizontalAlign:"left",fontSize:stripLine.labelFontSize,fontFamily:stripLine.labelFontFamily,fontWeight:stripLine.labelFontWeight,fontColor:stripLine.labelFontColor,fontStyle:stripLine.labelFontStyle,textBaseline:"middle",borderThickness:0});this._labels.push({position:stripLine.value,textBlock:textBlock,effectiveHeight:null,stripLine:stripLine});}}
Axis.prototype.createLabelsAndCalculateWidth=function(){var maxLabelEffectiveWidth=0;this._labels=[];if(this._position==="left"||this._position==="right"){this.createLabels();for(i=0;i<this._labels.length;i++){var textBlock=this._labels[i].textBlock;var size=textBlock.measureText();var labelEffectiveWidth=0;if(this.labelAngle===0)
labelEffectiveWidth=size.width;else
labelEffectiveWidth=(size.width*Math.cos(Math.PI / 180*Math.abs(this.labelAngle)))+(size.height / 2*Math.sin(Math.PI / 180*Math.abs(this.labelAngle)));if(maxLabelEffectiveWidth<labelEffectiveWidth)
maxLabelEffectiveWidth=labelEffectiveWidth;this._labels[i].effectiveWidth=labelEffectiveWidth;}}
var titleHeight=this.title?getFontHeightInPixels(this.titleFontFamily,this.titleFontSize,this.titleFontWeight)+2:0;var axisWidth=titleHeight+maxLabelEffectiveWidth+this.tickLength+5;return axisWidth;}
Axis.prototype.createLabelsAndCalculateHeight=function(){var maxLabelEffectiveHeight=0;this._labels=[];var textBlock;var i=0;this.createLabels();if(this._position==="bottom"||this._position==="top"){for(i=0;i<this._labels.length;i++){textBlock=this._labels[i].textBlock;var size=textBlock.measureText();var labelEffectiveHeight=0;if(this.labelAngle===0)
labelEffectiveHeight=size.height;else
labelEffectiveHeight=(size.width*Math.sin(Math.PI / 180*Math.abs(this.labelAngle)))+(size.height / 2*Math.cos(Math.PI / 180*Math.abs(this.labelAngle)));if(maxLabelEffectiveHeight<labelEffectiveHeight)
maxLabelEffectiveHeight=labelEffectiveHeight;this._labels[i].effectiveHeight=labelEffectiveHeight;}}
var titleHeight=this.title?getFontHeightInPixels(this.titleFontFamily,this.titleFontSize,this.titleFontWeight)+2:0;return titleHeight+maxLabelEffectiveHeight+this.tickLength+5;}
Axis.setLayoutAndRender=function(axisX,axisY,axisY2,axisPlacement,freeSpace){var x1,y1,x2,y2;var chart=axisX.chart;var ctx=chart.ctx;axisX.calculateAxisParameters();if(axisY)
axisY.calculateAxisParameters();if(axisY2)
axisY2.calculateAxisParameters();if(axisY&&axisY2&&typeof(axisY._options.maximum)==="undefined"&&typeof(axisY._options.minimum)==="undefined"&&typeof(axisY._options.interval)==="undefined"&&typeof(axisY2._options.maximum)==="undefined"&&typeof(axisY2._options.minimum)==="undefined"&&typeof(axisY2._options.interval)==="undefined"){var noTicksY=(axisY.maximum-axisY.minimum)/ axisY.interval;var noTicksY2=(axisY2.maximum-axisY2.minimum)/ axisY2.interval;if(noTicksY>noTicksY2){axisY2.maximum=axisY2.interval*noTicksY+axisY2.minimum;}else if(noTicksY2>noTicksY){axisY.maximum=axisY.interval*noTicksY2+axisY.minimum;}}
var axisYlineThickness=axisY?axisY.lineThickness?axisY.lineThickness:0:0;var axisY2lineThickness=axisY2?axisY2.lineThickness?axisY2.lineThickness:0:0;var axisYGridThickness=axisY?axisY.gridThickness?axisY.gridThickness:0:0;var axisY2GridThickness=axisY2?axisY2.gridThickness?axisY2.gridThickness:0:0;var axisYMargin=axisY?axisY.margin:0;var axisY2Margin=axisY?axisY.margin:0;if(axisPlacement==="normal"){axisX.lineCoordinates={};var axisYWidth=Math.ceil(axisY?axisY.createLabelsAndCalculateWidth():0);x1=Math.round(freeSpace.x1+axisYWidth+axisYMargin);axisX.lineCoordinates.x1=x1;var axisY2Width=Math.ceil(axisY2?axisY2.createLabelsAndCalculateWidth():0);x2=Math.round(freeSpace.x2-axisY2Width>axisX.chart.width-10?axisX.chart.width-10:freeSpace.x2-axisY2Width);axisX.lineCoordinates.x2=x2;axisX.lineCoordinates.width=Math.abs(x2-x1);var axisXHeight=Math.ceil(axisX.createLabelsAndCalculateHeight());y1=Math.round(freeSpace.y2-axisXHeight-axisX.margin);y2=Math.round(freeSpace.y2-axisX.margin);axisX.lineCoordinates.y1=y1;axisX.lineCoordinates.y2=y1;axisX.boundingRect={x1:x1,y1:y1,x2:x2,y2:y2,width:x2-x1,height:y2-y1};if(axisY){x1=Math.round(freeSpace.x1+axisY.margin);y1=Math.round(freeSpace.y1<10?10:freeSpace.y1);x2=Math.round(freeSpace.x1+axisYWidth+axisY.margin);y2=Math.round(freeSpace.y2-axisXHeight-axisX.margin);axisY.lineCoordinates={x1:x2,y1:y1,x2:x2,y2:y2,height:Math.abs(y2-y1)}
axisY.boundingRect={x1:x1,y1:y1,x2:x2,y2:y2,width:x2-x1,height:y2-y1};}
if(axisY2){x1=Math.round(axisX.lineCoordinates.x2);y1=Math.round(freeSpace.y1<10?10:freeSpace.y1);x2=Math.round(x1+axisY2Width+axisY2.margin);y2=Math.round(freeSpace.y2-axisXHeight-axisX.margin);axisY2.lineCoordinates={x1:x1,y1:y1,x2:x1,y2:y2,height:Math.abs(y2-y1)}
axisY2.boundingRect={x1:x1,y1:y1,x2:x2,y2:y2,width:x2-x1,height:y2-y1};}
axisX.calculateValueToPixelconversionParameters();if(axisY)
axisY.calculateValueToPixelconversionParameters();if(axisY2)
axisY2.calculateValueToPixelconversionParameters();ctx.save();ctx.rect(5,axisX.boundingRect.y1,axisX.chart.width-10,axisX.boundingRect.height);ctx.clip();axisX.renderLabelsTicksAndTitle();ctx.restore();if(axisY)
axisY.renderLabelsTicksAndTitle();if(axisY2)
axisY2.renderLabelsTicksAndTitle();chart.preparePlotArea();var plotArea=axisX.chart.plotArea;ctx.save();ctx.rect(plotArea.x1,plotArea.y1,Math.abs(plotArea.x2-plotArea.x1),Math.abs(plotArea.y2-plotArea.y1));ctx.clip();axisX.renderStripLinesOfThicknessType("value");if(axisY)
axisY.renderStripLinesOfThicknessType("value");if(axisY2)
axisY2.renderStripLinesOfThicknessType("value");axisX.renderInterlacedColors();if(axisY)
axisY.renderInterlacedColors();if(axisY2)
axisY2.renderInterlacedColors();ctx.restore();axisX.renderGrid();if(axisY)
axisY.renderGrid();if(axisY2)
axisY2.renderGrid();axisX.renderAxisLine();if(axisY)
axisY.renderAxisLine();if(axisY2)
axisY2.renderAxisLine();axisX.renderStripLinesOfThicknessType("pixel");if(axisY)
axisY.renderStripLinesOfThicknessType("pixel");if(axisY2)
axisY2.renderStripLinesOfThicknessType("pixel");}
else{var axisXWidth=Math.ceil(axisX.createLabelsAndCalculateWidth());if(axisY){axisY.lineCoordinates={};x1=Math.round(freeSpace.x1+axisXWidth+axisX.margin);x2=Math.round(freeSpace.x2>axisY.chart.width-10?axisY.chart.width-10:freeSpace.x2);axisY.lineCoordinates.x1=x1;axisY.lineCoordinates.x2=x2;axisY.lineCoordinates.width=Math.abs(x2-x1);}
if(axisY2){axisY2.lineCoordinates={};x1=Math.round(freeSpace.x1+axisXWidth+axisX.margin);x2=Math.round(freeSpace.x2>axisY2.chart.width-10?axisY2.chart.width-10:freeSpace.x2);axisY2.lineCoordinates.x1=x1;axisY2.lineCoordinates.x2=x2;axisY2.lineCoordinates.width=Math.abs(x2-x1);}
var axisYHeight=Math.ceil(axisY?axisY.createLabelsAndCalculateHeight():0);var axisY2Height=Math.ceil(axisY2?axisY2.createLabelsAndCalculateHeight():0);if(axisY){y1=Math.round(freeSpace.y2-axisYHeight-axisY.margin);y2=Math.round(freeSpace.y2-axisYMargin>axisY.chart.height-10?axisY.chart.height-10:freeSpace.y2-axisYMargin);axisY.lineCoordinates.y1=y1;axisY.lineCoordinates.y2=y1;axisY.boundingRect={x1:x1,y1:y1,x2:x2,y2:y2,width:x2-x1,height:axisYHeight};}
if(axisY2){y1=Math.round(freeSpace.y1+axisY2.margin);y2=(freeSpace.y1+axisY2.margin+axisY2Height);axisY2.lineCoordinates.y1=y2;axisY2.lineCoordinates.y2=y2;axisY2.boundingRect={x1:x1,y1:y1,x2:x2,y2:y2,width:x2-x1,height:axisY2Height};}
x1=Math.round(freeSpace.x1+axisX.margin);y1=Math.round(axisY2?axisY2.lineCoordinates.y2:(freeSpace.y1<10?10:freeSpace.y1));x2=Math.round(freeSpace.x1+axisXWidth+axisX.margin);y2=Math.round(axisY?axisY.lineCoordinates.y1:(freeSpace.y2-axisYMargin>axisX.chart.height-10?axisX.chart.height-10:freeSpace.y2-axisYMargin));axisX.lineCoordinates={x1:x2,y1:y1,x2:x2,y2:y2,height:Math.abs(y2-y1)};axisX.boundingRect={x1:x1,y1:y1,x2:x2,y2:y2,width:x2-x1,height:y2-y1};axisX.calculateValueToPixelconversionParameters();if(axisY)
axisY.calculateValueToPixelconversionParameters();if(axisY2)
axisY2.calculateValueToPixelconversionParameters();if(axisY)
axisY.renderLabelsTicksAndTitle();if(axisY2)
axisY2.renderLabelsTicksAndTitle();axisX.renderLabelsTicksAndTitle();chart.preparePlotArea();var plotArea=axisX.chart.plotArea;ctx.save();ctx.rect(plotArea.x1,plotArea.y1,Math.abs(plotArea.x2-plotArea.x1),Math.abs(plotArea.y2-plotArea.y1));ctx.clip();axisX.renderStripLinesOfThicknessType("value");if(axisY)
axisY.renderStripLinesOfThicknessType("value");if(axisY2)
axisY2.renderStripLinesOfThicknessType("value");axisX.renderInterlacedColors();if(axisY)
axisY.renderInterlacedColors();if(axisY2)
axisY2.renderInterlacedColors();ctx.restore();axisX.renderGrid();if(axisY)
axisY.renderGrid();if(axisY2)
axisY2.renderGrid();axisX.renderAxisLine();if(axisY)
axisY.renderAxisLine();if(axisY2)
axisY2.renderAxisLine();axisX.renderStripLinesOfThicknessType("pixel");if(axisY)
axisY.renderStripLinesOfThicknessType("pixel");if(axisY2)
axisY2.renderStripLinesOfThicknessType("pixel");}}
Axis.prototype.renderLabelsTicksAndTitle=function(){var skipLabels=false;var totalLabelWidth=0;var thresholdRatio=1;var labelCount=0;var intervalInPixels=this.conversionParameters.pixelPerUnit*this.interval;if(this.labelAngle!==0&&this.labelAngle!==360)
thresholdRatio=1.2;if(typeof(this._options.interval)==="undefined"){if(this._position==="bottom"||this._position==="top"){for(i=0;i<this._labels.length;i++){label=this._labels[i];if(label.position<this.minimum||label.stripLine)
continue;var width=label.textBlock.width*Math.cos(Math.PI / 180*this.labelAngle)+label.textBlock.height*Math.sin(Math.PI / 180*this.labelAngle);totalLabelWidth+=width;}
if(totalLabelWidth>this.lineCoordinates.width*thresholdRatio){skipLabels=true;}}if(this._position==="left"||this._position==="right"){for(i=0;i<this._labels.length;i++){label=this._labels[i];if(label.position<this.minimum||label.stripLine)
continue;var width=label.textBlock.height*Math.cos(Math.PI / 180*this.labelAngle)+label.textBlock.width*Math.sin(Math.PI / 180*this.labelAngle);totalLabelWidth+=width;}
if(totalLabelWidth>this.lineCoordinates.height*thresholdRatio){skipLabels=true;}}}
if(this._position==="bottom"){var i=0;var label;var xy;for(i=0;i<this._labels.length;i++){label=this._labels[i];if(label.position<this.minimum||label.position>this.maximum)
continue;xy=this.getPixelCoordinatesOnAxis(label.position);if((this.tickThickness&&!this._labels[i].stripLine)||(this._labels[i].stripLine&&this._labels[i].stripLine._thicknessType==="pixel")){if(this._labels[i].stripLine){stripLine=this._labels[i].stripLine;this.ctx.lineWidth=stripLine.thickness;this.ctx.strokeStyle=stripLine.color;}else{this.ctx.lineWidth=this.tickThickness;this.ctx.strokeStyle=this.tickColor;}
var tickX=(this.ctx.lineWidth%2===1)?(xy.x<<0)+.5:(xy.x<<0);this.ctx.beginPath();this.ctx.moveTo(tickX,xy.y<<0);this.ctx.lineTo(tickX,(xy.y+this.tickLength)<<0);this.ctx.stroke();}
if(skipLabels&&labelCount++%2!==0&&!this._labels[i].stripLine)
continue;if(label.textBlock.angle===0){xy.x-=label.textBlock.width / 2;xy.y+=this.tickLength+label.textBlock.fontSize / 2;}else{xy.x-=(this.labelAngle<0?(label.textBlock.width*Math.cos(Math.PI / 180*this.labelAngle)):0);xy.y+=this.tickLength+Math.abs((this.labelAngle<0?label.textBlock.width*Math.sin(Math.PI / 180*this.labelAngle)-5:5));}
label.textBlock.x=xy.x;label.textBlock.y=xy.y;label.textBlock.render(true);}
if(this.title){this._titleTextBlock=new TextBlock(this.ctx,{x:this.lineCoordinates.x1,y:this.boundingRect.y2-this.titleFontSize-5,maxWidth:this.lineCoordinates.width,maxHeight:this.titleFontSize*1.5,angle:0,text:this.title,horizontalAlign:"center",fontSize:this.titleFontSize,fontFamily:this.titleFontFamily,fontWeight:this.titleFontWeight,fontColor:this.titleFontColor,fontStyle:this.titleFontStyle,textBaseline:"top"});this._titleTextBlock.measureText();this._titleTextBlock.x=this.lineCoordinates.x1+this.lineCoordinates.width / 2-this._titleTextBlock.width / 2;this._titleTextBlock.y=this.boundingRect.y2-this._titleTextBlock.height-3;this._titleTextBlock.render(true);}}
else if(this._position==="top"){var i=0;var label;var xy;var stripLine;for(i=0;i<this._labels.length;i++){label=this._labels[i];if(label.position<this.minimum||label.position>this.maximum)
continue;xy=this.getPixelCoordinatesOnAxis(label.position);if((this.tickThickness&&!this._labels[i].stripLine)||(this._labels[i].stripLine&&this._labels[i].stripLine._thicknessType==="pixel")){if(this._labels[i].stripLine){stripLine=this._labels[i].stripLine;this.ctx.lineWidth=stripLine.thickness;this.ctx.strokeStyle=stripLine.color;}else{this.ctx.lineWidth=this.tickThickness;this.ctx.strokeStyle=this.tickColor;}
var tickX=(this.ctx.lineWidth%2===1)?(xy.x<<0)+.5:(xy.x<<0);this.ctx.beginPath();this.ctx.moveTo(tickX,xy.y<<0);this.ctx.lineTo(tickX,(xy.y-this.tickLength)<<0);this.ctx.stroke();}
if(skipLabels&&labelCount++%2!==0&&!this._labels[i].stripLine)
continue;if(label.textBlock.angle===0){xy.x-=label.textBlock.width / 2;xy.y-=this.tickLength+label.textBlock.height / 2;}else{xy.x-=(this.labelAngle>0?(label.textBlock.width*Math.cos(Math.PI / 180*this.labelAngle)):0);xy.y-=this.tickLength+Math.abs((this.labelAngle>0?label.textBlock.width*Math.sin(Math.PI / 180*this.labelAngle)+5:5));}
label.textBlock.x=xy.x;label.textBlock.y=xy.y;label.textBlock.render(true);}
if(this.title){this._titleTextBlock=new TextBlock(this.ctx,{x:this.lineCoordinates.x1,y:this.boundingRect.y1+1,maxWidth:this.lineCoordinates.width,maxHeight:this.titleFontSize*1.5,angle:0,text:this.title,horizontalAlign:"center",fontSize:this.titleFontSize,fontFamily:this.titleFontFamily,fontWeight:this.titleFontWeight,fontColor:this.titleFontColor,fontStyle:this.titleFontStyle,textBaseline:"top"});this._titleTextBlock.measureText();this._titleTextBlock.x=this.lineCoordinates.x1+this.lineCoordinates.width / 2-this._titleTextBlock.width / 2;this._titleTextBlock.render(true);}}
else if(this._position==="left"){var label;var xy;for(var i=0;i<this._labels.length;i++){label=this._labels[i];if(label.position<this.minimum||label.position>this.maximum)
continue;xy=this.getPixelCoordinatesOnAxis(label.position);if((this.tickThickness&&!this._labels[i].stripLine)||(this._labels[i].stripLine&&this._labels[i].stripLine._thicknessType==="pixel")){if(this._labels[i].stripLine){stripLine=this._labels[i].stripLine;this.ctx.lineWidth=stripLine.thickness;this.ctx.strokeStyle=stripLine.color;}else{this.ctx.lineWidth=this.tickThickness;this.ctx.strokeStyle=this.tickColor;}
var tickY=(this.ctx.lineWidth%2===1)?(xy.y<<0)+.5:(xy.y<<0);this.ctx.beginPath();this.ctx.moveTo(xy.x<<0,tickY);this.ctx.lineTo((xy.x-this.tickLength)<<0,tickY);this.ctx.stroke();}
if(skipLabels&&labelCount++%2!==0&&!this._labels[i].stripLine)
continue;label.textBlock.x=xy.x-(label.textBlock.width*Math.cos(Math.PI / 180*this.labelAngle))-this.tickLength-5;if(this.labelAngle===0){label.textBlock.y=xy.y-label.textBlock.height / 2+this.labelFontSize / 2;}else
label.textBlock.y=xy.y-(label.textBlock.width*Math.sin(Math.PI / 180*this.labelAngle));label.textBlock.render(true);}
if(this.title){this._titleTextBlock=new TextBlock(this.ctx,{x:this.boundingRect.x1+1,y:this.lineCoordinates.y2,maxWidth:this.lineCoordinates.height,maxHeight:this.titleFontSize*1.5,angle:-90,text:this.title,horizontalAlign:"center",fontSize:this.titleFontSize,fontFamily:this.titleFontFamily,fontWeight:this.titleFontWeight,fontColor:this.titleFontColor,fontStyle:this.titleFontStyle,textBaseline:"top"});var size=this._titleTextBlock.measureText();this._titleTextBlock.y=(this.lineCoordinates.height / 2+this._titleTextBlock.width / 2+this.lineCoordinates.y1);this._titleTextBlock.render(true);}}
else if(this._position==="right"){var label;var xy;for(var i=0;i<this._labels.length;i++){label=this._labels[i];if(label.position<this.minimum||label.position>this.maximum)
continue;xy=this.getPixelCoordinatesOnAxis(label.position);if((this.tickThickness&&!this._labels[i].stripLine)||(this._labels[i].stripLine&&this._labels[i].stripLine._thicknessType==="pixel")){if(this._labels[i].stripLine){stripLine=this._labels[i].stripLine;this.ctx.lineWidth=stripLine.thickness;this.ctx.strokeStyle=stripLine.color;}else{this.ctx.lineWidth=this.tickThickness;this.ctx.strokeStyle=this.tickColor;}
var tickY=(this.ctx.lineWidth%2===1)?(xy.y<<0)+.5:(xy.y<<0);this.ctx.beginPath();this.ctx.moveTo(xy.x<<0,tickY);this.ctx.lineTo((xy.x+this.tickLength)<<0,tickY);this.ctx.stroke();}
if(skipLabels&&labelCount++%2!==0&&!this._labels[i].stripLine)
continue;label.textBlock.x=xy.x+this.tickLength+5;if(this.labelAngle===0){label.textBlock.y=xy.y-label.textBlock.height / 2+this.labelFontSize / 2;}
else
label.textBlock.y=xy.y;label.textBlock.render(true);}
if(this.title){this._titleTextBlock=new TextBlock(this.ctx,{x:this.boundingRect.x2-1,y:this.lineCoordinates.y2,maxWidth:this.lineCoordinates.height,maxHeight:this.titleFontSize*1.5,angle:90,text:this.title,horizontalAlign:"center",fontSize:this.titleFontSize,fontFamily:this.titleFontFamily,fontWeight:this.titleFontWeight,fontColor:this.titleFontColor,fontStyle:this.titleFontStyle,textBaseline:"top"});this._titleTextBlock.measureText();this._titleTextBlock.y=(this.lineCoordinates.height / 2-this._titleTextBlock.width / 2+this.lineCoordinates.y1);this._titleTextBlock.render(true);}}}
Axis.prototype.renderInterlacedColors=function(){var ctx=this.chart.plotArea.ctx;var interlacedGridStartPoint;var interlacedGridEndPoint;var plotAreaCoordinates=this.chart.plotArea;var i=0,renderInterlacedGrid=true;if((this._position==="bottom"||this._position==="top")&&this.interlacedColor){ctx.fillStyle=this.interlacedColor;for(i=0;i<this._labels.length;i++){if(this._labels[i].stripLine)
continue;if(renderInterlacedGrid){interlacedGridStartPoint=this.getPixelCoordinatesOnAxis(this._labels[i].position);if(i+1>=this._labels.length)
interlacedGridEndPoint=this.getPixelCoordinatesOnAxis(this.maximum);else
interlacedGridEndPoint=this.getPixelCoordinatesOnAxis(this._labels[i+1].position);ctx.fillRect(interlacedGridStartPoint.x,plotAreaCoordinates.y1,Math.abs(interlacedGridEndPoint.x-interlacedGridStartPoint.x),Math.abs(plotAreaCoordinates.y1-plotAreaCoordinates.y2));renderInterlacedGrid=false;}else
renderInterlacedGrid=true;}}else if((this._position==="left"||this._position==="right")&&this.interlacedColor){ctx.fillStyle=this.interlacedColor;for(i=0;i<this._labels.length;i++){if(this._labels[i].stripLine)
continue;if(renderInterlacedGrid){interlacedGridEndPoint=this.getPixelCoordinatesOnAxis(this._labels[i].position);if(i+1>=this._labels.length)
interlacedGridStartPoint=this.getPixelCoordinatesOnAxis(this.maximum);else
interlacedGridStartPoint=this.getPixelCoordinatesOnAxis(this._labels[i+1].position);ctx.fillRect(plotAreaCoordinates.x1,interlacedGridStartPoint.y,Math.abs(plotAreaCoordinates.x1-plotAreaCoordinates.x2),Math.abs(interlacedGridStartPoint.y-interlacedGridEndPoint.y));renderInterlacedGrid=false;}else
renderInterlacedGrid=true;}}
ctx.beginPath();}
Axis.prototype.renderStripLinesOfThicknessType=function(thicknessType){if(!(this.stripLines&&this.stripLines.length>0)||!thicknessType)
return;var ctx=this.chart.plotArea.ctx;var ghostCtx=this.chart._eventManager.ghostCtx;var i=0;for(i=0;i<this.stripLines.length;i++){var stripLine=this.stripLines[i];if(stripLine._thicknessType!==thicknessType)
continue;if(thicknessType==="pixel"&&(stripLine.value<this.minimum||stripLine.value>this.maximum))
continue;var xy=this.getPixelCoordinatesOnAxis(stripLine.value);var lineWidth=Math.abs(thicknessType==="pixel"?stripLine.thickness:this.conversionParameters.pixelPerUnit*stripLine.thickness);if(lineWidth<=0)
continue;ctx.strokeStyle=stripLine.color;ctx.beginPath();var hexColor=intToHexColorString(stripLine.id);var x1,x2,y1,y2;ctx.lineWidth=lineWidth
if(this._position==="bottom"||this._position==="top"){var stripX=(ctx.lineWidth%2===1)?(xy.x<<0)+.5:(xy.x<<0);x1=x2=stripX;y1=this.chart.plotArea.y1;y2=this.chart.plotArea.y2;}
else if(this._position==="left"||this._position==="right"){var stripY=(ctx.lineWidth%2===1)?(xy.y<<0)+.5:(xy.y<<0);y1=y2=stripY;x1=this.chart.plotArea.x1;x2=this.chart.plotArea.x2;}
ctx.moveTo(x1,y1);ctx.lineTo(x2,y2);ctx.stroke();}}
Axis.prototype.renderGrid=function(){if(!(this.gridThickness&&this.gridThickness>0))
return;var ctx=this.chart.ctx;var xy;var plotAreaCoordinates=this.chart.plotArea;var stripLine;var tempLineWidth,tempStrokeStyle;ctx.lineWidth=this.gridThickness;ctx.strokeStyle=this.gridColor;if(this._position==="bottom"||this._position==="top"){for(i=0;i<this._labels.length&&!this._labels[i].stripLine;i++){if(this._labels[i].position<this.minimum||this._labels[i].position>this.maximum)
continue;ctx.beginPath();xy=this.getPixelCoordinatesOnAxis(this._labels[i].position);var gridX=(ctx.lineWidth%2===1)?(xy.x<<0)+.5:(xy.x<<0);ctx.moveTo(gridX,plotAreaCoordinates.y1<<0);ctx.lineTo(gridX,plotAreaCoordinates.y2<<0);ctx.stroke();}}
else if(this._position==="left"||this._position==="right"){for(var i=0;i<this._labels.length&&!this._labels[i].stripLine;i++){if(this._labels[i].position<this.minimum||this._labels[i].position>this.maximum)
continue;ctx.beginPath();xy=this.getPixelCoordinatesOnAxis(this._labels[i].position);var gridY=(ctx.lineWidth%2===1)?(xy.y<<0)+.5:(xy.y<<0);ctx.moveTo(plotAreaCoordinates.x1<<0,gridY);ctx.lineTo(plotAreaCoordinates.x2<<0,gridY);ctx.stroke();}}}
Axis.prototype.renderAxisLine=function(){var ctx=this.chart.ctx;if(this._position==="bottom"||this._position==="top"){if(this.lineThickness){ctx.lineWidth=this.lineThickness;ctx.strokeStyle=this.lineColor?this.lineColor:"black";var lineY=(this.lineThickness%2===1)?(this.lineCoordinates.y1<<0)+.5:(this.lineCoordinates.y1<<0);ctx.beginPath();ctx.moveTo(this.lineCoordinates.x1,lineY);ctx.lineTo(this.lineCoordinates.x2,lineY);ctx.stroke();}}else if(this._position==="left"||this._position==="right"){if(this.lineThickness){ctx.lineWidth=this.lineThickness;ctx.strokeStyle=this.lineColor;var lineX=(this.lineThickness%2===1)?(this.lineCoordinates.x1<<0)+.5:(this.lineCoordinates.x1<<0);ctx.beginPath();ctx.moveTo(lineX,this.lineCoordinates.y1);ctx.lineTo(lineX,this.lineCoordinates.y2);ctx.stroke();}}}
Axis.prototype.getPixelCoordinatesOnAxis=function(value){var xy={};var width=this.lineCoordinates.width;var height=this.lineCoordinates.height;if(this._position==="bottom"||this._position==="top"){var pixelPerUnit=width / Math.abs(this.maximum-this.minimum);xy.x=this.lineCoordinates.x1+(pixelPerUnit*(value-this.minimum));xy.y=this.lineCoordinates.y1;}
if(this._position==="left"||this._position==="right"){var pixelPerUnit=height / Math.abs(this.maximum-this.minimum);xy.y=this.lineCoordinates.y2-(pixelPerUnit*(value-this.minimum));xy.x=this.lineCoordinates.x2;}
return xy;}
Axis.prototype.getXValueAt=function(pixel){if(!pixel)
return null;var xval=null;if(this._position==="left"){xval=(this.chart.axisX.maximum-this.chart.axisX.minimum)/ this.chart.axisX.lineCoordinates.height*((this.chart.axisX.lineCoordinates.y2-pixel.y))+this.chart.axisX.minimum;}
else if(this._position==="bottom"){xval=(this.chart.axisX.maximum-this.chart.axisX.minimum)/ this.chart.axisX.lineCoordinates.width*(pixel.x-this.chart.axisX.lineCoordinates.x1)+this.chart.axisX.minimum;}
return xval;}
Axis.prototype.calculateValueToPixelconversionParameters=function(value){var xy={};var conversionParameters={pixelPerUnit:null,minimum:null,reference:null};var width=this.lineCoordinates.width;var height=this.lineCoordinates.height;conversionParameters.minimum=this.minimum;if(this._position==="bottom"||this._position==="top"){conversionParameters.pixelPerUnit=width / Math.abs(this.maximum-this.minimum);conversionParameters.reference=this.lineCoordinates.x1;}
if(this._position==="left"||this._position==="right"){conversionParameters.pixelPerUnit=-1*height / Math.abs(this.maximum-this.minimum);conversionParameters.reference=this.lineCoordinates.y2;}
this.conversionParameters=conversionParameters;}
Axis.prototype.calculateAxisParameters=function(){var freeSpace=this.chart.layoutManager.getFreeSpace();var availableWidth=0;var availableHeight=0;if(this._position==="bottom"||this._position==="top"){this.maxWidth=freeSpace.width;this.maxHeight=freeSpace.height;}else{this.maxWidth=freeSpace.height;this.maxHeight=freeSpace.width;}
var noTicks=this.type==="axisX"?(this.maxWidth<500?8:Math.max(6,Math.floor(this.maxWidth / 62))):Math.max(Math.floor(this.maxWidth / 40),2);var min,max;var minDiff;var range;var rangePadding=0;if(this.type==="axisX"){min=(this.sessionVariables.internalMinimum!==null)?this.sessionVariables.internalMinimum:this.dataInfo.viewPortMin;max=(this.sessionVariables.internalMaximum!==null)?this.sessionVariables.internalMaximum:this.dataInfo.viewPortMax;if(max-min===0){max+=.4;min-=.4;}
if(this.dataInfo.minDiff!==Infinity)
minDiff=this.dataInfo.minDiff;else if(max-min>1){minDiff=Math.abs(max-min)*.5;}
else
minDiff=1;}else if(this.type==="axisY"){min=typeof(this._options.minimum)==="undefined"?this.dataInfo.viewPortMin:this._options.minimum;max=typeof(this._options.maximum)==="undefined"?this.dataInfo.viewPortMax:this._options.maximum;if(min===0&&max===0){max+=9;min=0;}
else if(max-min===0){rangePadding=Math.min(Math.abs(Math.abs(max)*.01),5);max+=rangePadding;min-=rangePadding;}
else{rangePadding=Math.min(Math.abs(Math.abs(max-min)*.01),.05);if(max!==0)
max+=rangePadding;if(min!==0)
min-=rangePadding;}
if(this.includeZero&&typeof(this._options.minimum)==="undefined"){if(min>0)
min=0;}
if(this.includeZero&&typeof(this._options.maximum)==="undefined"){if(max<0)
max=0;}}
if(this.type==="axisX"&&this.chart.plotInfo.axisXValueType==="dateTime"){range=max-min;if(!this.intervalType){if(range /(1*1)<=noTicks){this.interval=1;this.intervalType="millisecond";}else if(range /(1*2)<=noTicks){this.interval=2;this.intervalType="millisecond";}else if(range /(1*5)<=noTicks){this.interval=5;this.intervalType="millisecond";}else if(range /(1*10)<=noTicks){this.interval=10;this.intervalType="millisecond";}else if(range /(1*20)<=noTicks){this.interval=20;this.intervalType="millisecond";}else if(range /(1*50)<=noTicks){this.interval=50;this.intervalType="millisecond";}else if(range /(1*100)<=noTicks){this.interval=100;this.intervalType="millisecond";}else if(range /(1*200)<=noTicks){this.interval=200;this.intervalType="millisecond";}else if(range /(1*250)<=noTicks){this.interval=250;this.intervalType="millisecond";}else if(range /(1*300)<=noTicks){this.interval=300;this.intervalType="millisecond";}else if(range /(1*400)<=noTicks){this.interval=400;this.intervalType="millisecond";}else if(range /(1*500)<=noTicks){this.interval=500;this.intervalType="millisecond";}else if(range /(constants.secondDuration*1)<=noTicks){this.interval=1;this.intervalType="second";}else if(range /(constants.secondDuration*2)<=noTicks){this.interval=2;this.intervalType="second";}else if(range /(constants.secondDuration*5)<=noTicks){this.interval=5;this.intervalType="second";}else if(range /(constants.secondDuration*10)<=noTicks){this.interval=10;this.intervalType="second";}else if(range /(constants.secondDuration*15)<=noTicks){this.interval=15;this.intervalType="second";}else if(range /(constants.secondDuration*20)<=noTicks){this.interval=20;this.intervalType="second";}else if(range /(constants.secondDuration*30)<=noTicks){this.interval=30;this.intervalType="second";}else if(range /(constants.minuteDuration*1)<=noTicks){this.interval=1;this.intervalType="minute";}else if(range /(constants.minuteDuration*2)<=noTicks){this.interval=2;this.intervalType="minute";}else if(range /(constants.minuteDuration*5)<=noTicks){this.interval=5;this.intervalType="minute";}else if(range /(constants.minuteDuration*10)<=noTicks){this.interval=10;this.intervalType="minute";}else if(range /(constants.minuteDuration*15)<=noTicks){this.interval=15;this.intervalType="minute";}else if(range /(constants.minuteDuration*20)<=noTicks){this.interval=20;this.intervalType="minute";}else if(range /(constants.minuteDuration*30)<=noTicks){this.interval=30;this.intervalType="minute";}else if(range /(constants.hourDuration*1)<=noTicks){this.interval=1;this.intervalType="hour";}else if(range /(constants.hourDuration*2)<=noTicks){this.interval=2;this.intervalType="hour";}else if(range /(constants.hourDuration*3)<=noTicks){this.interval=3;this.intervalType="hour";}else if(range /(constants.hourDuration*6)<=noTicks){this.interval=6;this.intervalType="hour";}else if(range /(constants.dayDuration*1)<=noTicks){this.interval=1;this.intervalType="day";}else if(range /(constants.dayDuration*2)<=noTicks){this.interval=2;this.intervalType="day";}else if(range /(constants.dayDuration*4)<=noTicks){this.interval=4;this.intervalType="day";}else if(range /(constants.weekDuration*1)<=noTicks){this.interval=1;this.intervalType="week";}else if(range /(constants.weekDuration*2)<=noTicks){this.interval=2;this.intervalType="week";}else if(range /(constants.weekDuration*3)<=noTicks){this.interval=3;this.intervalType="week";}else if(range /(constants.monthDuration*1)<=noTicks){this.interval=1;this.intervalType="month";}else if(range /(constants.monthDuration*2)<=noTicks){this.interval=2;this.intervalType="month";}else if(range /(constants.monthDuration*3)<=noTicks){this.interval=3;this.intervalType="month";}else if(range /(constants.monthDuration*6)<=noTicks){this.interval=6;this.intervalType="month";}else if(range /(constants.yearDuration*1)<=noTicks){this.interval=1;this.intervalType="year";}else if(range /(constants.yearDuration*2)<=noTicks){this.interval=2;this.intervalType="year";}else if(range /(constants.yearDuration*4)<=noTicks){this.interval=4;this.intervalType="year";}else{this.interval=Math.floor(Axis.getNiceNumber(range /(noTicks-1),true)/ constants.yearDuration);this.intervalType="year";}}
if(this.sessionVariables.internalMinimum!==null)
this.minimum=this.sessionVariables.internalMinimum;else{this.minimum=min-minDiff / 2;}
if(this.sessionVariables.internalMaximum)
this.maximum=this.sessionVariables.internalMaximum;else
this.maximum=max+minDiff / 2;if(!this.valueFormatString){if(this.intervalType==="year"){this.valueFormatString="YYYY";}else if(this.intervalType==="month"){this.valueFormatString="MMM YYYY";}else if(this.intervalType==="week"){this.valueFormatString="MMM DD YYYY";}else if(this.intervalType==="day"){this.valueFormatString="MMM DD YYYY";}else if(this.intervalType==="hour"){this.valueFormatString="hh:mm TT";}else if(this.intervalType==="minute"){this.valueFormatString="hh:mm TT";}else if(this.intervalType==="second"){this.valueFormatString="hh:mm:ss TT";}else if(this.intervalType==="millisecond"){this.valueFormatString="fff'ms'";}}
this.intervalstartTimePercent=this.getLabelStartPoint(new Date(this.minimum),this.intervalType,this.interval);}else{this.intervalType="number";range=Axis.getNiceNumber(max-min,false);if(this._options&&this._options.interval)
this.interval=this._options.interval;else{this.interval=Axis.getNiceNumber(range /(noTicks-1),true);}
if(this.sessionVariables.internalMinimum!==null)
this.minimum=this.sessionVariables.internalMinimum;else
this.minimum=Math.floor(min / this.interval)*this.interval;if(this.sessionVariables.internalMaximum!==null)
this.maximum=this.sessionVariables.internalMaximum;else
this.maximum=Math.ceil(max / this.interval)*this.interval;if(this.type==="axisX"){if(!(this.sessionVariables.internalMinimum!==null)){this.minimum=min-minDiff / 2;}
if(!this.sessionVariables.internalMaximum){this.maximum=max+minDiff / 2;}
this.intervalstartTimePercent=Math.floor((this.minimum+(this.interval*.2))/ this.interval)*this.interval;}else if(this.type==="axisY"){this.intervalstartTimePercent=this.minimum;}}
if(this.type==="axisX"){this._absoluteMinimum=this._options&&typeof(this._options.minimum)!=="undefined"?this._options.minimum:this.dataInfo.min-minDiff / 2;this._absoluteMaximum=this._options&&typeof(this._options.maximum)!=="undefined"?this._options.maximum:this.dataInfo.max+minDiff / 2;}
if(!this.valueFormatString){this.valueFormatString="#,##0.##";range=Math.abs(this.maximum-this.minimum);if(range<1){var numberOfDecimals=Math.floor(Math.abs(Math.log(range)/ Math.LN10))+2;if(numberOfDecimals>2){for(var i=0;i<numberOfDecimals-2;i++)
this.valueFormatString+="#";}}}}
Axis.getNiceNumber=function(x,round){var exp=Math.floor(Math.log(x)/ Math.LN10);var f=x / Math.pow(10,exp);var nf;if(round){if(f<1.5)
nf=1;else if(f<3)
nf=2;else if(f<7)
nf=5;else
nf=10;}
else{if(f<=1)
nf=1;else if(f<=2)
nf=2;else if(f<=5)
nf=5;else nf=10;}
return Number((nf*Math.pow(10,exp)).toFixed(20));}
Axis.prototype.getLabelStartPoint=function(){var intervalInMilliseconds=convertToNumber(this.interval,this.intervalType);var minimum=Math.floor((this.minimum)/ intervalInMilliseconds)*intervalInMilliseconds;var dateTime=new Date(minimum);if(this.intervalType==="millisecond"){}
else if(this.intervalType==="second"){if(dateTime.getMilliseconds()>0){dateTime.setSeconds(dateTime.getSeconds()+1);dateTime.setMilliseconds(0);}}
else if(this.intervalType==="minute"){if(dateTime.getSeconds()>0||dateTime.getMilliseconds()>0){dateTime.setMinutes(dateTime.getMinutes()+1);dateTime.setSeconds(0);dateTime.setMilliseconds(0);}}
else if(this.intervalType==="hour"){if(dateTime.getMinutes()>0||dateTime.getSeconds()>0||dateTime.getMilliseconds()>0){dateTime.setHours(dateTime.getHours()+1);dateTime.setMinutes(0);dateTime.setSeconds(0);dateTime.setMilliseconds(0);}}
else if(this.intervalType==="day"){if(dateTime.getHours()>0||dateTime.getMinutes()>0||dateTime.getSeconds()>0||dateTime.getMilliseconds()>0){dateTime.setDate(dateTime.getDate()+1);dateTime.setHours(0);dateTime.setMinutes(0);dateTime.setSeconds(0);dateTime.setMilliseconds(0);}}
else if(this.intervalType==="week"){if(dateTime.getDay()>0||dateTime.getHours()>0||dateTime.getMinutes()>0||dateTime.getSeconds()>0||dateTime.getMilliseconds()>0){dateTime.setDate(dateTime.getDate()+(7-dateTime.getDay()));dateTime.setHours(0);dateTime.setMinutes(0);dateTime.setSeconds(0);dateTime.setMilliseconds(0);}}
else if(this.intervalType==="month"){if(dateTime.getDate()>1||dateTime.getHours()>0||dateTime.getMinutes()>0||dateTime.getSeconds()>0||dateTime.getMilliseconds()>0){dateTime.setMonth(dateTime.getMonth()+1);dateTime.setDate(1);dateTime.setHours(0);dateTime.setMinutes(0);dateTime.setSeconds(0);dateTime.setMilliseconds(0);}}
else if(this.intervalType==="year"){if(dateTime.getMonth()>0||dateTime.getDate()>1||dateTime.getHours()>0||dateTime.getMinutes()>0||dateTime.getSeconds()>0||dateTime.getMilliseconds()>0){dateTime.setFullYear(dateTime.getFullYear()+1);dateTime.setMonth(0);dateTime.setDate(1);dateTime.setHours(0);dateTime.setMinutes(0);dateTime.setSeconds(0);dateTime.setMilliseconds(0);}}
return dateTime;}
function StripLine(chart,options,theme,id){StripLine.parent.constructor.call(this,"StripLine",options,theme);this._thicknessType="pixel";this.id=id;if(this.startValue!==null&&this.endValue!==null){this.value=((this.startValue.getTime?this.startValue.getTime():this.startValue)+(this.endValue.getTime?this.endValue.getTime():this.endValue))/ 2;this.thickness=Math.max(this.endValue-this.startValue);this._thicknessType="value";}}
extend(StripLine,CanvasJSObject);function ToolTip(chart,options,theme){ToolTip.parent.constructor.call(this,"ToolTip",options,theme);this.chart=chart;this.canvas=chart.canvas;this.ctx=this.chart.ctx;this.currentSeriesIndex=-1;this.currentDataPointIndex=-1;this._timerId=0;this._prevX=NaN;this._prevY=NaN;this._initialize();}
extend(ToolTip,CanvasJSObject);ToolTip.prototype._initialize=function(){if(this.enabled){this.container=document.createElement("div");this.container.setAttribute("class","canvasjs-chart-tooltip");this.container.style.position="absolute";this.container.style.height="auto";this.container.style.boxShadow="1px 1px 2px 2px rgba(0,0,0,0.1)";this.container.style.zIndex="1000";this.container.style.display="none";var toolTipHtml="<div style=\" width: auto;";toolTipHtml+="height: auto;";toolTipHtml+="min-width: 50px;";toolTipHtml+="line-height: 20px;";toolTipHtml+="margin: 0px 0px 0px 0px;";toolTipHtml+="padding: 5px;";toolTipHtml+="font-family: PopuLato, 'Helvetica Neue', Helvetica, sans-serif;";toolTipHtml+="font-weight: 400;";toolTipHtml+="font-style: "+(isCanvasSupported?"italic;":"normal;");toolTipHtml+="font-size: 14px;";toolTipHtml+="color: #000000;";toolTipHtml+="text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.1);";toolTipHtml+="text-align: left;";toolTipHtml+="border: 2px solid gray;";toolTipHtml+=isCanvasSupported?"background: rgba(255,255,255,.9);":"background: rgb(255,255,255);";toolTipHtml+="text-indent: 0px;";toolTipHtml+="white-space: nowrap;";toolTipHtml+="border-radius: 5px;";toolTipHtml+="-moz-user-select:none;";toolTipHtml+="-khtml-user-select: none;";toolTipHtml+="-webkit-user-select: none;";toolTipHtml+="-ms-user-select: none;";toolTipHtml+="user-select: none;";if(!isCanvasSupported){toolTipHtml+="filter: alpha(opacity = 90);";toolTipHtml+="filter: progid:DXImageTransform.Microsoft.Shadow(Strength=3, Direction=135, Color='#666666');";}
toolTipHtml+="} \"> Sample Tooltip</div>";this.container.innerHTML=toolTipHtml;this.contentDiv=this.container.firstChild;this.container.style.borderRadius=this.contentDiv.style.borderRadius;this.chart._canvasJSContainer.appendChild(this.container);}}
ToolTip.prototype.mouseMoveHandler=function(x,y){if(!(this._lastUpdated&&(new Date().getTime()-this._lastUpdated)<40)){this._lastUpdated=new Date().getTime();this._updateToolTip(x,y);}}
ToolTip.prototype._updateToolTip=function(mouseX,mouseY){if(!this.enabled||this.chart.disableToolTip)
return;if(typeof(mouseX)==="undefined"||typeof(mouseY)==="undefined"){if(isNaN(this._prevX)||isNaN(this._prevY))
return;else{mouseX=this._prevX;mouseY=this._prevY;}}else{this._prevX=mouseX;this._prevY=mouseY;}
var dataPoint=null;var dataSeries=null;var toolTipContent="";var entries=[];var toolTipRight;var toolTipBottom;var x=0;if(this.shared&&this.chart.plotInfo.axisPlacement!=="none"){if(this.chart.plotInfo.axisPlacement==="xySwapped"){x=(this.chart.axisX.maximum-this.chart.axisX.minimum)/ this.chart.axisX.lineCoordinates.height*((this.chart.axisX.lineCoordinates.y2-mouseY))+this.chart.axisX.minimum;}
else{x=(this.chart.axisX.maximum-this.chart.axisX.minimum)/ this.chart.axisX.lineCoordinates.width*(mouseX-this.chart.axisX.lineCoordinates.x1)+this.chart.axisX.minimum;}
var nearbyEntries=[];for(var i=0;i<this.chart.data.length;i++){var entry=this.chart.data[i].getDataPointAtX(x,true);if(entry&&entry.index>=0){entry.dataSeries=this.chart.data[i];if(entry.dataPoint.y!==null)
nearbyEntries.push(entry);}}
if(nearbyEntries.length===0)
return;nearbyEntries.sort(function(entry1,entry2){return entry1.distance-entry2.distance;});var closest=nearbyEntries[0];for(i=0;i<nearbyEntries.length;i++){if(nearbyEntries[i].dataPoint.x.valueOf()===closest.dataPoint.x.valueOf())
entries.push(nearbyEntries[i]);}
nearbyEntries=null;}else{var dataPointInfo=this.chart.getDataPointAtXY(mouseX,mouseY,true);if(dataPointInfo){this.currentDataPointIndex=dataPointInfo.dataPointIndex;this.currentSeriesIndex=dataPointInfo.dataSeries.index;}else if(isCanvasSupported){var id=getObjectId(mouseX,mouseY,this.chart._eventManager.ghostCtx);if(id>0&&typeof this.chart._eventManager.objectMap[id]!=="undefined"){eventObject=this.chart._eventManager.objectMap[id];this.currentSeriesIndex=eventObject.dataSeriesIndex;this.currentDataPointIndex=eventObject.dataPointIndex>=0?eventObject.dataPointIndex:-1;}else
this.currentDataPointIndex=-1;}else
this.currentDataPointIndex=-1;if(this.currentSeriesIndex>=0){dataSeries=this.chart.data[this.currentSeriesIndex];var entry={};if(this.currentDataPointIndex>=0){dataPoint=dataSeries.dataPoints[this.currentDataPointIndex];entry.dataSeries=dataSeries;entry.dataPoint=dataPoint;entry.index=this.currentDataPointIndex;entry.distance=Math.abs(dataPoint.x-x);}else if(dataSeries.type==="line"||dataSeries.type==="stepLine"||dataSeries.type==="spline"||dataSeries.type==="area"||dataSeries.type==="stepArea"||dataSeries.type==="splineArea"||dataSeries.type==="stackedArea"||dataSeries.type==="stackedArea100"||dataSeries.type==="rangeArea"||dataSeries.type==="rangeSplineArea"||dataSeries.type==="candlestick"||dataSeries.type==="ohlc"){var x=(this.chart.axisX.maximum-this.chart.axisX.minimum)/ this.chart.axisX.lineCoordinates.width*(mouseX-this.chart.axisX.lineCoordinates.x1)+this.chart.axisX.minimum.valueOf();entry=dataSeries.getDataPointAtX(x,true);entry.dataSeries=dataSeries;this.currentDataPointIndex=entry.index;dataPoint=entry.dataPoint;}else{return;}
if(entry.dataPoint.y!==null)
entries.push(entry);}}
if(entries.length>0){this.highlightObjects(entries);var toolTipInnerHtml="";toolTipInnerHtml=this.getToolTipInnerHTML({entries:entries});if(toolTipInnerHtml!==null){this.contentDiv.innerHTML=toolTipInnerHtml;this.contentDiv.innerHTML=toolTipInnerHtml;var previouslyHidden=false;if(this.container.style.display==="none"){previouslyHidden=true;this.container.style.display="block";}
try{this.contentDiv.style.borderRightColor=this.contentDiv.style.borderLeftColor=this.contentDiv.style.borderColor=this.borderColor?this.borderColor:entries[0].dataPoint.color?entries[0].dataPoint.color:entries[0].dataSeries.color?entries[0].dataSeries.color:entries[0].dataSeries._colorSet[entries[0].index%entries[0].dataSeries._colorSet.length];}catch(e){}
if(entries[0].dataSeries.type==="pie"||entries[0].dataSeries.type==="doughnut"||entries[0].dataSeries.type==="funnel"||entries[0].dataSeries.type==="bar"||entries[0].dataSeries.type==="rangeBar"||entries[0].dataSeries.type==="stackedBar"||entries[0].dataSeries.type==="stackedBar100"){toolTipLeft=mouseX-10-this.container.clientWidth;}else{toolTipLeft=(((this.chart.axisX.lineCoordinates.width / Math.abs(this.chart.axisX.maximum-this.chart.axisX.minimum))*Math.abs(entries[0].dataPoint.x-this.chart.axisX.minimum))+this.chart.axisX.lineCoordinates.x1+.5)-this.container.clientWidth<<0;toolTipLeft-=10;}
if(toolTipLeft<0){toolTipLeft+=this.container.clientWidth+20;}
if(toolTipLeft+this.container.clientWidth>this.chart._container.clientWidth)
toolTipLeft=Math.max(0,this.chart._container.clientWidth-this.container.clientWidth);toolTipLeft+="px";if(entries.length===1&&!this.shared&&(entries[0].dataSeries.type==="line"||entries[0].dataSeries.type==="stepLine"||entries[0].dataSeries.type==="spline"||entries[0].dataSeries.type==="area"||entries[0].dataSeries.type==="stepArea"||entries[0].dataSeries.type==="splineArea"||entries[0].dataSeries.type==="stackedArea"||entries[0].dataSeries.type==="stackedArea100")){toolTipBottom=(entries[0].dataSeries.axisY.lineCoordinates.y2-entries[0].dataSeries.axisY.lineCoordinates.height / Math.abs(entries[0].dataSeries.axisY.maximum-entries[0].dataSeries.axisY.minimum)*Math.abs(entries[0].dataPoint.y-entries[0].dataSeries.axisY.minimum)+.5)<<0;}else if(entries[0].dataSeries.type==="bar"||entries[0].dataSeries.type==="rangeBar"||entries[0].dataSeries.type==="stackedBar"||entries[0].dataSeries.type==="stackedBar100"){toolTipBottom=(entries[0].dataSeries.axisX.lineCoordinates.y2-entries[0].dataSeries.axisX.lineCoordinates.height / Math.abs(entries[0].dataSeries.axisX.maximum-entries[0].dataSeries.axisX.minimum)*Math.abs(entries[0].dataPoint.x-entries[0].dataSeries.axisX.minimum)+.5)<<0;}
else{toolTipBottom=mouseY;}
toolTipBottom=(-toolTipBottom+10);if(toolTipBottom+this.container.clientHeight+5>0){toolTipBottom-=toolTipBottom+this.container.clientHeight+5-0}
toolTipBottom+="px";this.container.style.left=toolTipLeft;this.container.style.bottom=toolTipBottom;if(!this.animationEnabled||previouslyHidden){this.disableAnimation();}
else
this.enableAnimation();}else{this.hide(false);}}}
ToolTip.prototype.highlightObjects=function(entries){if(!this.enabled)
return;var overlaidCanvasCtx=this.chart.overlaidCanvasCtx;this.chart.resetOverlayedCanvas();overlaidCanvasCtx.save();var plotArea=this.chart.plotArea;var offset=0;for(var i=0;i<entries.length;i++){var entry=entries[i];var eventObject=this.chart._eventManager.objectMap[entry.dataSeries.dataPointIds[entry.index]];if(!eventObject||!eventObject.objectType||eventObject.objectType!=="dataPoint")
continue;var dataSeries=this.chart.data[eventObject.dataSeriesIndex];var dataPoint=this.chart.data[eventObject.dataPointIndex];var index=eventObject.dataPointIndex;if(dataSeries.type==="line"||dataSeries.type==="stepLine"||dataSeries.type==="spline"||dataSeries.type==="scatter"||dataSeries.type==="area"||dataSeries.type==="stepArea"||dataSeries.type==="splineArea"||dataSeries.type==="stackedArea"||dataSeries.type==="stackedArea100"||dataSeries.type==="rangeArea"||dataSeries.type==="rangeSplineArea"){var markerProps=dataSeries.getMarkerProperties(index,eventObject.x1,eventObject.y1,this.chart.overlaidCanvasCtx);markerProps.size=Math.max(markerProps.size*1.5<<0,10);markerProps.borderColor=markerProps.borderColor||"#FFFFFF";markerProps.borderThickness=markerProps.borderThickness||Math.ceil(markerProps.size*.1);RenderHelper.drawMarkers([markerProps]);if(typeof(eventObject.y2)!=="undefined"){var markerProps=dataSeries.getMarkerProperties(index,eventObject.x1,eventObject.y2,this.chart.overlaidCanvasCtx);markerProps.size=Math.max(markerProps.size*1.5<<0,10);markerProps.borderColor=markerProps.borderColor||"#FFFFFF";markerProps.borderThickness=markerProps.borderThickness||Math.ceil(markerProps.size*.1);RenderHelper.drawMarkers([markerProps]);}}else if(dataSeries.type==="bubble"){var markerProps=dataSeries.getMarkerProperties(index,eventObject.x1,eventObject.y1,this.chart.overlaidCanvasCtx);markerProps.size=eventObject.size;markerProps.color="white";markerProps.borderColor="white";overlaidCanvasCtx.globalAlpha=.3;RenderHelper.drawMarkers([markerProps]);overlaidCanvasCtx.globalAlpha=1;}else if(dataSeries.type==="column"||dataSeries.type==="stackedColumn"||dataSeries.type==="stackedColumn100"||dataSeries.type==="bar"||dataSeries.type==="rangeBar"||dataSeries.type==="stackedBar"||dataSeries.type==="stackedBar100"||dataSeries.type==="rangeColumn"){drawRect(overlaidCanvasCtx,eventObject.x1,eventObject.y1,eventObject.x2,eventObject.y2,"white",0,null,false,false,false,false,.3);}
else if(dataSeries.type==="pie"||dataSeries.type==="doughnut"){drawSegment(overlaidCanvasCtx,eventObject.center,eventObject.radius,"white",dataSeries.type,eventObject.startAngle,eventObject.endAngle,.3);}else if(dataSeries.type==="candlestick"){overlaidCanvasCtx.globalAlpha=1;overlaidCanvasCtx.strokeStyle=eventObject.color;overlaidCanvasCtx.lineWidth=eventObject.borderThickness*2;offset=(overlaidCanvasCtx.lineWidth)%2===0?0:.5;overlaidCanvasCtx.beginPath();overlaidCanvasCtx.moveTo(eventObject.x3-offset,eventObject.y2);overlaidCanvasCtx.lineTo(eventObject.x3-offset,Math.min(eventObject.y1,eventObject.y4));overlaidCanvasCtx.stroke();overlaidCanvasCtx.beginPath();overlaidCanvasCtx.moveTo(eventObject.x3-offset,Math.max(eventObject.y1,eventObject.y4));overlaidCanvasCtx.lineTo(eventObject.x3-offset,eventObject.y3);overlaidCanvasCtx.stroke();drawRect(overlaidCanvasCtx,eventObject.x1,Math.min(eventObject.y1,eventObject.y4),eventObject.x2,Math.max(eventObject.y1,eventObject.y4),"transparent",eventObject.borderThickness*2,eventObject.color,false,false,false,false);overlaidCanvasCtx.globalAlpha=1;}else if(dataSeries.type==="ohlc"){overlaidCanvasCtx.globalAlpha=1;overlaidCanvasCtx.strokeStyle=eventObject.color;overlaidCanvasCtx.lineWidth=eventObject.borderThickness*2;offset=(overlaidCanvasCtx.lineWidth)%2===0?0:.5;overlaidCanvasCtx.beginPath();overlaidCanvasCtx.moveTo(eventObject.x3-offset,eventObject.y2);overlaidCanvasCtx.lineTo(eventObject.x3-offset,eventObject.y3);overlaidCanvasCtx.stroke();overlaidCanvasCtx.beginPath();overlaidCanvasCtx.moveTo(eventObject.x3,eventObject.y1);overlaidCanvasCtx.lineTo(eventObject.x1,eventObject.y1);overlaidCanvasCtx.stroke();overlaidCanvasCtx.beginPath();overlaidCanvasCtx.moveTo(eventObject.x3,eventObject.y4);overlaidCanvasCtx.lineTo(eventObject.x2,eventObject.y4);overlaidCanvasCtx.stroke();overlaidCanvasCtx.globalAlpha=1;}}
overlaidCanvasCtx.globalAlpha=1;overlaidCanvasCtx.beginPath();return;}
ToolTip.prototype.getToolTipInnerHTML=function(e){var entries=e.entries;var toolTipInnerHtml=null;var dataSeries=null;var dataPoint=null;var index=0;var color=null;var toolTipContent="";var isToolTipDefinedInData=true;for(var i=0;i<entries.length;i++){if(entries[i].dataSeries.toolTipContent||entries[i].dataPoint.toolTipContent){isToolTipDefinedInData=false;break;}}
if(isToolTipDefinedInData&&this.content&&typeof(this.content)==="function"){toolTipInnerHtml=this.content({entries:entries});}else{if(this.shared){var toolTipInnerHtmlPrefix="";for(var i=0;i<entries.length;i++){dataSeries=entries[i].dataSeries;dataPoint=entries[i].dataPoint;index=entries[i].index;toolTipContent="";if(i===0&&isToolTipDefinedInData&&!this.content){toolTipInnerHtmlPrefix+=typeof(this.chart.axisX.labels[dataPoint.x])!=="undefined"?this.chart.axisX.labels[dataPoint.x]:"{x}";toolTipInnerHtmlPrefix+="</br>";toolTipInnerHtmlPrefix=this.chart.replaceKeywordsWithValue(toolTipInnerHtmlPrefix,dataPoint,dataSeries,index);}
if(dataPoint.toolTipContent===null||(typeof(dataPoint.toolTipContent)==="undefined"&&dataSeries._options.toolTipContent===null))
continue;if(dataSeries.type==="line"||dataSeries.type==="stepLine"||dataSeries.type==="spline"||dataSeries.type==="area"||dataSeries.type==="stepArea"||dataSeries.type==="splineArea"||dataSeries.type==="column"||dataSeries.type==="bar"||dataSeries.type==="scatter"||dataSeries.type==="stackedColumn"||dataSeries.type==="stackedColumn100"||dataSeries.type==="stackedBar"||dataSeries.type==="stackedBar100"||dataSeries.type==="stackedArea"||dataSeries.type==="stackedArea100"){toolTipContent+=dataPoint.toolTipContent?dataPoint.toolTipContent:dataSeries.toolTipContent?dataSeries.toolTipContent:this.content&&typeof(this.content)!=="function"?this.content:"<span style='\"'color:{color};'\"'>{name}:</span>&nbsp;&nbsp;{y}";}
else if(dataSeries.type==="bubble"){toolTipContent+=dataPoint.toolTipContent?dataPoint.toolTipContent:dataSeries.toolTipContent?dataSeries.toolTipContent:this.content&&typeof(this.content)!=="function"?this.content:"<span style='\"'color:{color};'\"'>{name}:</span>&nbsp;&nbsp;{y}, &nbsp;&nbsp;{z}";}else if(dataSeries.type==="pie"||dataSeries.type==="doughnut"||dataSeries.type==="funnel"){toolTipContent+=dataPoint.toolTipContent?dataPoint.toolTipContent:dataSeries.toolTipContent?dataSeries.toolTipContent:this.content&&typeof(this.content)!=="function"?this.content:"&nbsp;&nbsp;{y}";}else if(dataSeries.type==="rangeColumn"||dataSeries.type==="rangeBar"||dataSeries.type==="rangeArea"||dataSeries.type==="rangeSplineArea"){toolTipContent+=dataPoint.toolTipContent?dataPoint.toolTipContent:dataSeries.toolTipContent?dataSeries.toolTipContent:this.content&&typeof(this.content)!=="function"?this.content:"<span style='\"'color:{color};'\"'>{name}:</span>&nbsp;&nbsp;{y[0]},&nbsp;{y[1]}";}else if(dataSeries.type==="candlestick"||dataSeries.type==="ohlc"){toolTipContent+=dataPoint.toolTipContent?dataPoint.toolTipContent:dataSeries.toolTipContent?dataSeries.toolTipContent:this.content&&typeof(this.content)!=="function"?this.content:"<span style='\"'color:{color};'\"'>{name}:</span>"
+"<br/>Open: &nbsp;&nbsp;{y[0]}"
+"<br/>High: &nbsp;&nbsp;&nbsp;{y[1]}"
+"<br/>Low:&nbsp;&nbsp;&nbsp;{y[2]}"
+"<br/>Close: &nbsp;&nbsp;{y[3]}";}
if(toolTipInnerHtml===null)
toolTipInnerHtml="";toolTipInnerHtml+=this.chart.replaceKeywordsWithValue(toolTipContent,dataPoint,dataSeries,index);if(i<entries.length-1)
toolTipInnerHtml+="</br>";}
if(toolTipInnerHtml!==null)
toolTipInnerHtml=toolTipInnerHtmlPrefix+toolTipInnerHtml;}else{dataSeries=entries[0].dataSeries;dataPoint=entries[0].dataPoint;index=entries[0].index;if(dataPoint.toolTipContent===null||(typeof(dataPoint.toolTipContent)==="undefined"&&dataSeries._options.toolTipContent===null))
return null;if(dataSeries.type==="line"||dataSeries.type==="stepLine"||dataSeries.type==="spline"||dataSeries.type==="area"||dataSeries.type==="stepArea"||dataSeries.type==="splineArea"||dataSeries.type==="column"||dataSeries.type==="bar"||dataSeries.type==="scatter"||dataSeries.type==="stackedColumn"||dataSeries.type==="stackedColumn100"||dataSeries.type==="stackedBar"||dataSeries.type==="stackedBar100"||dataSeries.type==="stackedArea"||dataSeries.type==="stackedArea100"){toolTipContent=dataPoint.toolTipContent?dataPoint.toolTipContent:dataSeries.toolTipContent?dataSeries.toolTipContent:this.content&&typeof(this.content)!=="function"?this.content:"<span style='\"'color:{color};'\"'>"+(dataPoint.label?"{label}":"{x}")+" :</span>&nbsp;&nbsp;{y}";}else if(dataSeries.type==="bubble"){toolTipContent=dataPoint.toolTipContent?dataPoint.toolTipContent:dataSeries.toolTipContent?dataSeries.toolTipContent:this.content&&typeof(this.content)!=="function"?this.content:"<span style='\"'color:{color};'\"'>"+(dataPoint.label?"{label}":"{x}")+":</span>&nbsp;&nbsp;{y}, &nbsp;&nbsp;{z}";}else if(dataSeries.type==="pie"||dataSeries.type==="doughnut"||dataSeries.type==="funnel"){toolTipContent=dataPoint.toolTipContent?dataPoint.toolTipContent:dataSeries.toolTipContent?dataSeries.toolTipContent:this.content&&typeof(this.content)!=="function"?this.content:(dataPoint.name?"{name}:&nbsp;&nbsp;":dataPoint.label?"{label}:&nbsp;&nbsp;":"")+"{y}";}else if(dataSeries.type==="rangeColumn"||dataSeries.type==="rangeBar"||dataSeries.type==="rangeArea"||dataSeries.type==="rangeSplineArea"){toolTipContent=dataPoint.toolTipContent?dataPoint.toolTipContent:dataSeries.toolTipContent?dataSeries.toolTipContent:this.content&&typeof(this.content)!=="function"?this.content:"<span style='\"'color:{color};'\"'>"+(dataPoint.label?"{label}":"{x}")+" :</span>&nbsp;&nbsp;{y[0]}, &nbsp;{y[1]}";}else if(dataSeries.type==="candlestick"||dataSeries.type==="ohlc"){toolTipContent=dataPoint.toolTipContent?dataPoint.toolTipContent:dataSeries.toolTipContent?dataSeries.toolTipContent:this.content&&typeof(this.content)!=="function"?this.content:"<span style='\"'color:{color};'\"'>"+(dataPoint.label?"{label}":"{x}")+"</span>"
+"<br/>Open: &nbsp;&nbsp;{y[0]}"
+"<br/>High: &nbsp;&nbsp;&nbsp;{y[1]}"
+"<br/>Low: &nbsp;&nbsp;&nbsp;&nbsp;{y[2]}"
+"<br/>Close: &nbsp;&nbsp;{y[3]}";}
if(toolTipInnerHtml===null)
toolTipInnerHtml="";toolTipInnerHtml+=this.chart.replaceKeywordsWithValue(toolTipContent,dataPoint,dataSeries,index);}}
return toolTipInnerHtml;}
ToolTip.prototype.enableAnimation=function(){if(this.container.style.WebkitTransition)
return;this.container.style.WebkitTransition="left .2s ease-out, bottom .2s ease-out";this.container.style.MozTransition="left .2s ease-out, bottom .2s ease-out";this.container.style.MsTransition="left .2s ease-out, bottom .2s ease-out";this.container.style.transition="left .2s ease-out, bottom .2s ease-out";}
ToolTip.prototype.disableAnimation=function(){if(!this.container.style.WebkitTransition)
return;this.container.style.WebkitTransition="";this.container.style.MozTransition="";this.container.style.MsTransition="";this.container.style.transition="";}
ToolTip.prototype.hide=function(resetOverlayedCanvas){if(!this.enabled)
return;resetOverlayedCanvas=typeof(resetOverlayedCanvas)==="undefined"?true:resetOverlayedCanvas;this.container.style.display="none";this.currentSeriesIndex=-1;this._prevX=NaN;this._prevY=NaN;if(resetOverlayedCanvas)
this.chart.resetOverlayedCanvas();}
Chart.prototype.replaceKeywordsWithValue=function(str,dp,ds,dpIndex,indexKeywordValue){var regex=/\{.*?\}|"[^"]*"|'[^']*'/g;var chart=this;indexKeywordValue=typeof(indexKeywordValue)==="undefined"?0:indexKeywordValue;if((ds.type.indexOf("stacked")>=0||(ds.type==="pie"||ds.type==="doughnut"))&&(str.indexOf("#percent")>=0||str.indexOf("#total")>=0)){var percent="#percent";var total="#total";var dpX=null;if(ds.type.indexOf("stacked")>=0){total=0;dpX=dp.x.getTime?dp.x.getTime():dp.x;if(dpX in ds.plotUnit.yTotals){total=ds.plotUnit.yTotals[dpX];if(!isNaN(dp.y))
percent=(dp.y / total)*100;else
percent=0;}}else if(ds.type==="pie"||ds.type==="doughnut"){total=0;for(i=0;i<ds.dataPoints.length;i++){if(!isNaN(ds.dataPoints[i].y))
total+=ds.dataPoints[i].y;}
if(!isNaN(dp.y))
percent=(dp.y / total)*100;else
percent=0;}
do{var percentFormatString="";if(ds.percentFormatString)
percentFormatString=ds.percentFormatString;else{percentFormatString="#,##0.";var numberOfDecimals=Math.max(Math.ceil(Math.log(1 / Math.abs(percent))/ Math.LN10),2);if(isNaN(numberOfDecimals)||!isFinite(numberOfDecimals))
numberOfDecimals=2;for(var n=0;n<numberOfDecimals;n++){percentFormatString+="#";}}
str=str.replace("#percent",numberFormat(percent,percentFormatString,chart._cultureInfo));str=str.replace("#total",numberFormat(total,ds.yValueFormatString?ds.yValueFormatString:"#,##0.########"));}while(str.indexOf("#percent")>=0||str.indexOf("#total")>=0);}
var fcn=function($0){if(($0[0]==="\""&&$0[$0.length-1]==="\"")||($0[0]==="\'"&&$0[$0.length-1]==="\'"))
return $0.slice(1,$0.length-1);var key=trimString($0.slice(1,$0.length-1));key=key.replace("#index",indexKeywordValue);var index=null;try{var match=key.match(/(.*?)\s*\[\s*(.*?)\s*\]/);if(match&&match.length>0){index=trimString(match[2]);key=trimString(match[1]);}}catch(e){};var obj=null;if(key==="color"){return dp.color?dp.color:ds.color?ds.color:ds._colorSet[dpIndex%ds._colorSet.length];}
if(dp.hasOwnProperty(key))
obj=dp;else if(ds.hasOwnProperty(key))
obj=ds;else return"";var value=obj[key];if(index!==null)
value=value[index];if(key==="x"){if(chart.axisX&&chart.plotInfo.axisXValueType==="dateTime")
return dateFormat(value,dp.xValueFormatString?dp.xValueFormatString:ds.xValueFormatString?ds.xValueFormatString:chart.axisX&&chart.axisX.valueFormatString?chart.axisX.valueFormatString:"DD MMM YY",chart._cultureInfo);else
return numberFormat(value,dp.xValueFormatString?dp.xValueFormatString:ds.xValueFormatString?ds.xValueFormatString:"#,##0.########",chart._cultureInfo);}else if(key==="y")
return numberFormat(value,dp.yValueFormatString?dp.yValueFormatString:ds.yValueFormatString?ds.yValueFormatString:"#,##0.########",chart._cultureInfo);else if(key==="z")
return numberFormat(value,dp.zValueFormatString?dp.zValueFormatString:ds.zValueFormatString?ds.zValueFormatString:"#,##0.########",chart._cultureInfo);else
return value;}
return str.replace(regex,fcn);}
function EventManager(chart){this.chart=chart;this.lastObjectId=0;var _this=this;this.objectMap=[];this.rectangularRegionEventSubscriptions=[];this.previousDataPointEventObject=null;this.ghostCanvas=createCanvas(this.chart.width,this.chart.height);this.ghostCtx=this.ghostCanvas.getContext("2d");var eventHandler=function(ev){_this.mouseEventHandler.call(_this,ev);};this.mouseoveredObjectMaps=[];}
EventManager.prototype.reset=function(){this.lastObjectId=0;this.objectMap=[];this.rectangularRegionEventSubscriptions=[];this.previousDataPointEventObject=null;this.eventObjects=[];if(isCanvasSupported){this.ghostCtx.clearRect(0,0,this.chart.width,this.chart.height);this.ghostCtx.beginPath();}}
EventManager.prototype.getNewObjectTrackingId=function(){return++this.lastObjectId;}
EventManager.prototype.mouseEventHandler=function(ev){if(ev.type!=="mousemove"&&ev.type!=="click")
return;var eventObjectMaps=[];var xy=getMouseCoordinates(ev);var id=null;id=this.chart.getObjectAtXY(xy.x,xy.y,false);if(id&&typeof(this.objectMap[id])!=="undefined"){var eventObjectMap=this.objectMap[id];if(eventObjectMap.objectType==="dataPoint"){var dataSeries=this.chart.data[eventObjectMap.dataSeriesIndex];var dataPoint=dataSeries.dataPoints[eventObjectMap.dataPointIndex];var dataPointIndex=eventObjectMap.dataPointIndex;eventObjectMap.eventParameter={x:xy.x,y:xy.y,dataPoint:dataPoint,dataSeries:dataSeries._options,dataPointIndex:dataPointIndex,dataSeriesIndex:dataSeries.index,chart:this.chart._publicChartReference};eventObjectMap.eventContext={context:dataPoint,userContext:dataPoint,mouseover:"mouseover",mousemove:"mousemove",mouseout:"mouseout",click:"click"};eventObjectMaps.push(eventObjectMap);eventObjectMap=this.objectMap[dataSeries.id];eventObjectMap.eventParameter={x:xy.x,y:xy.y,dataPoint:dataPoint,dataSeries:dataSeries._options,dataPointIndex:dataPointIndex,dataSeriesIndex:dataSeries.index,chart:this.chart._publicChartReference};eventObjectMap.eventContext={context:dataSeries,userContext:dataSeries._options,mouseover:"mouseover",mousemove:"mousemove",mouseout:"mouseout",click:"click"};eventObjectMaps.push(this.objectMap[dataSeries.id]);}
else if(eventObjectMap.objectType==="legendItem"){var dataSeries=this.chart.data[eventObjectMap.dataSeriesIndex];var dataPoint=eventObjectMap.dataPointIndex!==null?dataSeries.dataPoints[eventObjectMap.dataPointIndex]:null;eventObjectMap.eventParameter={x:xy.x,y:xy.y,dataSeries:dataSeries._options,dataPoint:dataPoint,dataPointIndex:eventObjectMap.dataPointIndex,dataSeriesIndex:eventObjectMap.dataSeriesIndex,chart:this.chart._publicChartReference};eventObjectMap.eventContext={context:this.chart.legend,userContext:this.chart.legend._options,mouseover:"itemmouseover",mousemove:"itemmousemove",mouseout:"itemmouseout",click:"itemclick"};eventObjectMaps.push(eventObjectMap);}}
var mouseOutObjectMapsExcluded=[];for(var i=0;i<this.mouseoveredObjectMaps.length;i++){var mouseOut=true;for(var j=0;j<eventObjectMaps.length;j++){if(eventObjectMaps[j].id===this.mouseoveredObjectMaps[i].id){mouseOut=false;break;}}
if(mouseOut){this.fireEvent(this.mouseoveredObjectMaps[i],"mouseout",ev);}else{mouseOutObjectMapsExcluded.push(this.mouseoveredObjectMaps[i]);}}
this.mouseoveredObjectMaps=mouseOutObjectMapsExcluded;for(var i=0;i<eventObjectMaps.length;i++){var existing=false;for(var j=0;j<this.mouseoveredObjectMaps.length;j++){if(eventObjectMaps[i].id===this.mouseoveredObjectMaps[j].id){existing=true;break;}}
if(!existing){this.fireEvent(eventObjectMaps[i],"mouseover",ev);this.mouseoveredObjectMaps.push(eventObjectMaps[i]);}
if(ev.type==="click"){this.fireEvent(eventObjectMaps[i],"click",ev);}else if(ev.type==="mousemove"){this.fireEvent(eventObjectMaps[i],"mousemove",ev);}}}
EventManager.prototype.fireEvent=function(eventObjectMap,eventType,ev){if(!eventObjectMap||!eventType)
return;var eventParameter=eventObjectMap.eventParameter;var eventContext=eventObjectMap.eventContext;var userContext=eventObjectMap.eventContext.userContext
if(userContext&&eventContext&&userContext[eventContext[eventType]]){if(typeof userContext[eventContext[eventType]]=='string'&&typeof window[userContext[eventContext[eventType]]]=='function'){window[userContext[eventContext[eventType]]].call(userContext,eventParameter);}
else{userContext[eventContext[eventType]].call(userContext,eventParameter);}}
if(eventType!=="mouseout"){if(userContext.cursor&&userContext.cursor!==ev.target.style.cursor){ev.target.style.cursor=userContext.cursor;}}else{ev.target.style.cursor=this.chart._defaultCursor;delete eventObjectMap.eventParameter;delete eventObjectMap.eventContext;}
if(eventType==="click"&&eventObjectMap.objectType==="dataPoint"&&this.chart.pieDoughnutClickHandler){this.chart.pieDoughnutClickHandler.call(this.chart.data[eventObjectMap.dataSeriesIndex],eventParameter);}}
function CultureInfo(chart,culture){var cultureInfo;if(culture&&cultures[culture])
cultureInfo=cultures[culture];Title.parent.constructor.call(this,"CultureInfo",cultureInfo,chart.theme);this.chart=chart;this.canvas=chart.canvas;this.ctx=this.chart.ctx;}
extend(CultureInfo,CanvasJSObject);function Animator(chart){this.chart=chart;this.ctx=this.chart.plotArea.ctx;this.animations=[];this.animationRequestId=null;}
Animator.prototype.animate=function(startDelay,duration,animationCallback,onComplete,easingFunction){var _this=this;this.chart.isAnimating=true;easingFunction=easingFunction||AnimationHelper.easing.linear;if(animationCallback){this.animations.push({startTime:(new Date()).getTime()+(startDelay?startDelay:0),duration:duration,animationCallback:animationCallback,onComplete:onComplete});}
var remainingAnimations=[];while(this.animations.length>0){var animation=this.animations.shift();var now=(new Date()).getTime();var fractionComplete=0;if(animation.startTime<=now){fractionComplete=easingFunction(Math.min((now-animation.startTime),animation.duration),0,1,animation.duration);fractionComplete=Math.min(fractionComplete,1);if(isNaN(fractionComplete)||!isFinite(fractionComplete))
fractionComplete=1;}
if(fractionComplete<1){remainingAnimations.push(animation);}
animation.animationCallback(fractionComplete);if(fractionComplete>=1&&animation.onComplete)
animation.onComplete();}
this.animations=remainingAnimations;if(this.animations.length>0){this.animationRequestId=this.chart.requestAnimFrame.call(window,function(){_this.animate.call(_this);});}else{this.chart.isAnimating=false;}}
Animator.prototype.cancelAllAnimations=function(){this.animations=[];if(this.animationRequestId){this.chart.cancelRequestAnimFrame.call(window,this.animationRequestId);}
this.animationRequestId=null;this.chart.isAnimating=false;}
var AnimationHelper={yScaleAnimation:function(fractionComplete,animationInfo){if(fractionComplete===0)
return;var ctx=animationInfo.dest;var sourceCanvas=animationInfo.source.canvas;var base=animationInfo.animationBase;var offsetY=(base-base*fractionComplete);ctx.drawImage(sourceCanvas,0,0,sourceCanvas.width,sourceCanvas.height,0,offsetY,ctx.canvas.width / devicePixelBackingStoreRatio,fractionComplete*ctx.canvas.height / devicePixelBackingStoreRatio);},xScaleAnimation:function(fractionComplete,animationInfo){if(fractionComplete===0)
return;var ctx=animationInfo.dest;var sourceCanvas=animationInfo.source.canvas;var base=animationInfo.animationBase;var offsetX=(base-base*fractionComplete);ctx.drawImage(sourceCanvas,0,0,sourceCanvas.width,sourceCanvas.height,offsetX,0,fractionComplete*ctx.canvas.width / devicePixelBackingStoreRatio,ctx.canvas.height / devicePixelBackingStoreRatio);},xClipAnimation:function(fractionComplete,animationInfo){if(fractionComplete===0)
return;var ctx=animationInfo.dest;var sourceCanvas=animationInfo.source.canvas;ctx.save();if(fractionComplete>0)
ctx.drawImage(sourceCanvas,0,0,sourceCanvas.width*fractionComplete,sourceCanvas.height,0,0,sourceCanvas.width*fractionComplete / devicePixelBackingStoreRatio,sourceCanvas.height / devicePixelBackingStoreRatio);ctx.restore();},fadeInAnimation:function(fractionComplete,animationInfo){if(fractionComplete===0)
return;var ctx=animationInfo.dest;var sourceCanvas=animationInfo.source.canvas;ctx.save();ctx.globalAlpha=fractionComplete;ctx.drawImage(sourceCanvas,0,0,sourceCanvas.width,sourceCanvas.height,0,0,ctx.canvas.width / devicePixelBackingStoreRatio,ctx.canvas.height / devicePixelBackingStoreRatio);ctx.restore();},easing:{linear:function(t,b,c,d){return c*t / d+b;},easeOutQuad:function(t,b,c,d){return-c*(t /=d)*(t-2)+b;},easeOutQuart:function(t,b,c,d){return-c*((t=t / d-1)*t*t*t-1)+b;},easeInQuad:function(t,b,c,d){return c*(t /=d)*t+b;},easeInQuart:function(t,b,c,d){return c*(t /=d)*t*t*t+b;}}}
var RenderHelper={drawMarker:function(x,y,ctx,markerType,markerSize,markerColor,markerBorderColor,markerBorderThickness){if(!ctx)
return;var alpha=1;ctx.fillStyle=markerColor?markerColor:"#000000";ctx.strokeStyle=markerBorderColor?markerBorderColor:"#000000";ctx.lineWidth=markerBorderThickness?markerBorderThickness:0;if(markerType==="circle"){ctx.moveTo(x,y);ctx.beginPath();ctx.arc(x,y,markerSize / 2,0,Math.PI*2,false);if(markerColor)
ctx.fill();if(markerBorderThickness){if(!markerBorderColor){alpha=ctx.globalAlpha;ctx.globalAlpha=.15;ctx.strokeStyle="black";ctx.stroke();ctx.globalAlpha=alpha;}else
ctx.stroke();}}
else if(markerType==="square"){ctx.beginPath();ctx.rect(x-markerSize / 2,y-markerSize / 2,markerSize,markerSize);if(markerColor)
ctx.fill();if(markerBorderThickness){if(!markerBorderColor){alpha=ctx.globalAlpha;ctx.globalAlpha=.15;ctx.strokeStyle="black";ctx.stroke();ctx.globalAlpha=alpha;}else
ctx.stroke();}}else if(markerType==="triangle"){ctx.beginPath();ctx.moveTo(x-markerSize / 2,y+markerSize / 2);ctx.lineTo(x+markerSize / 2,y+markerSize / 2);ctx.lineTo(x,y-markerSize / 2);ctx.closePath();if(markerColor)
ctx.fill();if(markerBorderThickness){if(!markerBorderColor){alpha=ctx.globalAlpha;ctx.globalAlpha=.15;ctx.strokeStyle="black";ctx.stroke();ctx.globalAlpha=alpha;}else
ctx.stroke();}
ctx.beginPath();}else if(markerType==="cross"){ctx.strokeStyle=markerColor;markerBorderThickness=markerSize / 4;ctx.lineWidth=markerBorderThickness;ctx.beginPath();ctx.moveTo(x-markerSize / 2,y-markerSize / 2);ctx.lineTo(x+markerSize / 2,y+markerSize / 2);ctx.stroke();ctx.moveTo(x+markerSize / 2,y-markerSize / 2);ctx.lineTo(x-markerSize / 2,y+markerSize / 2);ctx.stroke();}},drawMarkers:function(markers){for(var i=0;i<markers.length;i++){var marker=markers[i];RenderHelper.drawMarker(marker.x,marker.y,marker.ctx,marker.type,marker.size,marker.color,marker.borderColor,marker.borderThickness);}}}
var CanvasJS={Chart:function(containerId,options){var _chart=new Chart(containerId,options,this);this.render=function(){_chart.render(this.options)};this.options=_chart._options;},addColorSet:function(name,colorSet){colorSets[name]=colorSet;},addCultureInfo:function(name,cultureInfo){cultures[name]=cultureInfo;}}
CanvasJS.Chart.version="v1.6.1 GA";window.CanvasJS=CanvasJS;})();(function($,window,document,undefined){$.fn.CanvasJSChart=function(options){if(options){var $el=this.first();var container=this[0];var chart=new CanvasJS.Chart(container,options);$el.children(".canvasjs-chart-container").data("canvasjsChartRef",chart);chart.render();return this;}else{return this.first().children(".canvasjs-chart-container").data("canvasjsChartRef");}}}(jQuery,window,document));(function($){$.support.touch='ontouchend'in document;if(!$.support.touch){return;}
var mouseProto=$.ui.mouse.prototype,_mouseInit=mouseProto._mouseInit,_mouseDestroy=mouseProto._mouseDestroy,touchHandled;function simulateMouseEvent(event,simulatedType){if(event.originalEvent.touches.length>1){return;}
event.preventDefault();var touch=event.originalEvent.changedTouches[0],simulatedEvent=document.createEvent('MouseEvents');simulatedEvent.initMouseEvent(simulatedType,true,true,window,1,touch.screenX,touch.screenY,touch.clientX,touch.clientY,false,false,false,false,0,null);event.target.dispatchEvent(simulatedEvent);}
mouseProto._touchStart=function(event){var self=this;if(touchHandled||!self._mouseCapture(event.originalEvent.changedTouches[0])){return;}
touchHandled=true;self._touchMoved=false;simulateMouseEvent(event,'mouseover');simulateMouseEvent(event,'mousemove');simulateMouseEvent(event,'mousedown');};mouseProto._touchMove=function(event){if(!touchHandled){return;}
this._touchMoved=true;simulateMouseEvent(event,'mousemove');};mouseProto._touchEnd=function(event){if(!touchHandled){return;}
simulateMouseEvent(event,'mouseup');simulateMouseEvent(event,'mouseout');if(!this._touchMoved){simulateMouseEvent(event,'click');}
touchHandled=false;};mouseProto._mouseInit=function(){var self=this;self.element.bind({touchstart:$.proxy(self,'_touchStart'),touchmove:$.proxy(self,'_touchMove'),touchend:$.proxy(self,'_touchEnd')});_mouseInit.call(self);};mouseProto._mouseDestroy=function(){var self=this;self.element.unbind({touchstart:$.proxy(self,'_touchStart'),touchmove:$.proxy(self,'_touchMove'),touchend:$.proxy(self,'_touchEnd')});_mouseDestroy.call(self);};})(jQuery);var hexcase=0;var b64pad="";function hex_md5(s){return rstr2hex(rstr_md5(str2rstr_utf8(s)));}
function b64_md5(s){return rstr2b64(rstr_md5(str2rstr_utf8(s)));}
function any_md5(s,e){return rstr2any(rstr_md5(str2rstr_utf8(s)),e);}
function hex_hmac_md5(k,d)
{return rstr2hex(rstr_hmac_md5(str2rstr_utf8(k),str2rstr_utf8(d)));}
function b64_hmac_md5(k,d)
{return rstr2b64(rstr_hmac_md5(str2rstr_utf8(k),str2rstr_utf8(d)));}
function any_hmac_md5(k,d,e)
{return rstr2any(rstr_hmac_md5(str2rstr_utf8(k),str2rstr_utf8(d)),e);}
function md5_vm_test()
{return hex_md5("abc").toLowerCase()=="900150983cd24fb0d6963f7d28e17f72";}
function rstr_md5(s)
{return binl2rstr(binl_md5(rstr2binl(s),s.length*8));}
function rstr_hmac_md5(key,data)
{var bkey=rstr2binl(key);if(bkey.length>16)bkey=binl_md5(bkey,key.length*8);var ipad=Array(16),opad=Array(16);for(var i=0;i<16;i++)
{ipad[i]=bkey[i]^0x36363636;opad[i]=bkey[i]^0x5C5C5C5C;}
var hash=binl_md5(ipad.concat(rstr2binl(data)),512+data.length*8);return binl2rstr(binl_md5(opad.concat(hash),512+128));}
function rstr2hex(input)
{try{hexcase}catch(e){hexcase=0;}
var hex_tab=hexcase?"0123456789ABCDEF":"0123456789abcdef";var output="";var x;for(var i=0;i<input.length;i++)
{x=input.charCodeAt(i);output+=hex_tab.charAt((x>>>4)&0x0F)
+hex_tab.charAt(x&0x0F);}
return output;}
function rstr2b64(input)
{try{b64pad}catch(e){b64pad='';}
var tab="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var output="";var len=input.length;for(var i=0;i<len;i+=3)
{var triplet=(input.charCodeAt(i)<<16)|(i+1<len?input.charCodeAt(i+1)<<8:0)|(i+2<len?input.charCodeAt(i+2):0);for(var j=0;j<4;j++)
{if(i*8+j*6>input.length*8)output+=b64pad;else output+=tab.charAt((triplet>>>6*(3-j))&0x3F);}}
return output;}
function rstr2any(input,encoding)
{var divisor=encoding.length;var i,j,q,x,quotient;var dividend=Array(Math.ceil(input.length / 2));for(i=0;i<dividend.length;i++)
{dividend[i]=(input.charCodeAt(i*2)<<8)|input.charCodeAt(i*2+1);}
var full_length=Math.ceil(input.length*8 /
(Math.log(encoding.length)/ Math.log(2)));var remainders=Array(full_length);for(j=0;j<full_length;j++)
{quotient=Array();x=0;for(i=0;i<dividend.length;i++)
{x=(x<<16)+dividend[i];q=Math.floor(x / divisor);x-=q*divisor;if(quotient.length>0||q>0)
quotient[quotient.length]=q;}
remainders[j]=x;dividend=quotient;}
var output="";for(i=remainders.length-1;i>=0;i--)
output+=encoding.charAt(remainders[i]);return output;}
function str2rstr_utf8(input)
{var output="";var i=-1;var x,y;while(++i<input.length)
{x=input.charCodeAt(i);y=i+1<input.length?input.charCodeAt(i+1):0;if(0xD800<=x&&x<=0xDBFF&&0xDC00<=y&&y<=0xDFFF)
{x=0x10000+((x&0x03FF)<<10)+(y&0x03FF);i++;}
if(x<=0x7F)
output+=String.fromCharCode(x);else if(x<=0x7FF)
output+=String.fromCharCode(0xC0|((x>>>6)&0x1F),0x80|(x&0x3F));else if(x<=0xFFFF)
output+=String.fromCharCode(0xE0|((x>>>12)&0x0F),0x80|((x>>>6)&0x3F),0x80|(x&0x3F));else if(x<=0x1FFFFF)
output+=String.fromCharCode(0xF0|((x>>>18)&0x07),0x80|((x>>>12)&0x3F),0x80|((x>>>6)&0x3F),0x80|(x&0x3F));}
return output;}
function str2rstr_utf16le(input)
{var output="";for(var i=0;i<input.length;i++)
output+=String.fromCharCode(input.charCodeAt(i)&0xFF,(input.charCodeAt(i)>>>8)&0xFF);return output;}
function str2rstr_utf16be(input)
{var output="";for(var i=0;i<input.length;i++)
output+=String.fromCharCode((input.charCodeAt(i)>>>8)&0xFF,input.charCodeAt(i)&0xFF);return output;}
function rstr2binl(input)
{var output=Array(input.length>>2);for(var i=0;i<output.length;i++)
output[i]=0;for(var i=0;i<input.length*8;i+=8)
output[i>>5]|=(input.charCodeAt(i / 8)&0xFF)<<(i%32);return output;}
function binl2rstr(input)
{var output="";for(var i=0;i<input.length*32;i+=8)
output+=String.fromCharCode((input[i>>5]>>>(i%32))&0xFF);return output;}
function binl_md5(x,len)
{x[len>>5]|=0x80<<((len)%32);x[(((len+64)>>>9)<<4)+14]=len;var a=1732584193;var b=-271733879;var c=-1732584194;var d=271733878;for(var i=0;i<x.length;i+=16)
{var olda=a;var oldb=b;var oldc=c;var oldd=d;a=md5_ff(a,b,c,d,x[i+0],7,-680876936);d=md5_ff(d,a,b,c,x[i+1],12,-389564586);c=md5_ff(c,d,a,b,x[i+2],17,606105819);b=md5_ff(b,c,d,a,x[i+3],22,-1044525330);a=md5_ff(a,b,c,d,x[i+4],7,-176418897);d=md5_ff(d,a,b,c,x[i+5],12,1200080426);c=md5_ff(c,d,a,b,x[i+6],17,-1473231341);b=md5_ff(b,c,d,a,x[i+7],22,-45705983);a=md5_ff(a,b,c,d,x[i+8],7,1770035416);d=md5_ff(d,a,b,c,x[i+9],12,-1958414417);c=md5_ff(c,d,a,b,x[i+10],17,-42063);b=md5_ff(b,c,d,a,x[i+11],22,-1990404162);a=md5_ff(a,b,c,d,x[i+12],7,1804603682);d=md5_ff(d,a,b,c,x[i+13],12,-40341101);c=md5_ff(c,d,a,b,x[i+14],17,-1502002290);b=md5_ff(b,c,d,a,x[i+15],22,1236535329);a=md5_gg(a,b,c,d,x[i+1],5,-165796510);d=md5_gg(d,a,b,c,x[i+6],9,-1069501632);c=md5_gg(c,d,a,b,x[i+11],14,643717713);b=md5_gg(b,c,d,a,x[i+0],20,-373897302);a=md5_gg(a,b,c,d,x[i+5],5,-701558691);d=md5_gg(d,a,b,c,x[i+10],9,38016083);c=md5_gg(c,d,a,b,x[i+15],14,-660478335);b=md5_gg(b,c,d,a,x[i+4],20,-405537848);a=md5_gg(a,b,c,d,x[i+9],5,568446438);d=md5_gg(d,a,b,c,x[i+14],9,-1019803690);c=md5_gg(c,d,a,b,x[i+3],14,-187363961);b=md5_gg(b,c,d,a,x[i+8],20,1163531501);a=md5_gg(a,b,c,d,x[i+13],5,-1444681467);d=md5_gg(d,a,b,c,x[i+2],9,-51403784);c=md5_gg(c,d,a,b,x[i+7],14,1735328473);b=md5_gg(b,c,d,a,x[i+12],20,-1926607734);a=md5_hh(a,b,c,d,x[i+5],4,-378558);d=md5_hh(d,a,b,c,x[i+8],11,-2022574463);c=md5_hh(c,d,a,b,x[i+11],16,1839030562);b=md5_hh(b,c,d,a,x[i+14],23,-35309556);a=md5_hh(a,b,c,d,x[i+1],4,-1530992060);d=md5_hh(d,a,b,c,x[i+4],11,1272893353);c=md5_hh(c,d,a,b,x[i+7],16,-155497632);b=md5_hh(b,c,d,a,x[i+10],23,-1094730640);a=md5_hh(a,b,c,d,x[i+13],4,681279174);d=md5_hh(d,a,b,c,x[i+0],11,-358537222);c=md5_hh(c,d,a,b,x[i+3],16,-722521979);b=md5_hh(b,c,d,a,x[i+6],23,76029189);a=md5_hh(a,b,c,d,x[i+9],4,-640364487);d=md5_hh(d,a,b,c,x[i+12],11,-421815835);c=md5_hh(c,d,a,b,x[i+15],16,530742520);b=md5_hh(b,c,d,a,x[i+2],23,-995338651);a=md5_ii(a,b,c,d,x[i+0],6,-198630844);d=md5_ii(d,a,b,c,x[i+7],10,1126891415);c=md5_ii(c,d,a,b,x[i+14],15,-1416354905);b=md5_ii(b,c,d,a,x[i+5],21,-57434055);a=md5_ii(a,b,c,d,x[i+12],6,1700485571);d=md5_ii(d,a,b,c,x[i+3],10,-1894986606);c=md5_ii(c,d,a,b,x[i+10],15,-1051523);b=md5_ii(b,c,d,a,x[i+1],21,-2054922799);a=md5_ii(a,b,c,d,x[i+8],6,1873313359);d=md5_ii(d,a,b,c,x[i+15],10,-30611744);c=md5_ii(c,d,a,b,x[i+6],15,-1560198380);b=md5_ii(b,c,d,a,x[i+13],21,1309151649);a=md5_ii(a,b,c,d,x[i+4],6,-145523070);d=md5_ii(d,a,b,c,x[i+11],10,-1120210379);c=md5_ii(c,d,a,b,x[i+2],15,718787259);b=md5_ii(b,c,d,a,x[i+9],21,-343485551);a=safe_add(a,olda);b=safe_add(b,oldb);c=safe_add(c,oldc);d=safe_add(d,oldd);}
return Array(a,b,c,d);}
function md5_cmn(q,a,b,x,s,t)
{return safe_add(bit_rol(safe_add(safe_add(a,q),safe_add(x,t)),s),b);}
function md5_ff(a,b,c,d,x,s,t)
{return md5_cmn((b&c)|((~b)&d),a,b,x,s,t);}
function md5_gg(a,b,c,d,x,s,t)
{return md5_cmn((b&d)|(c&(~d)),a,b,x,s,t);}
function md5_hh(a,b,c,d,x,s,t)
{return md5_cmn(b^c^d,a,b,x,s,t);}
function md5_ii(a,b,c,d,x,s,t)
{return md5_cmn(c^(b|(~d)),a,b,x,s,t);}
function safe_add(x,y)
{var lsw=(x&0xFFFF)+(y&0xFFFF);var msw=(x>>16)+(y>>16)+(lsw>>16);return(msw<<16)|(lsw&0xFFFF);}
function bit_rol(num,cnt)
{return(num<<cnt)|(num>>>(32-cnt));};(function($){$.fn.audio_player=function(){var format_seconds=function(x,biggest){biggest=(typeof biggest!=='undefined')?biggest:0;var h=Math.floor(x / 3600);var m=Math.floor((x-(h*3600))/ 60);var s=x-(h*3600)-(m*60);s=Math.round(s*100)/ 100;var include_h=h||biggest>=3600;var pad_h=biggest>=36000;return(include_h?(h<10&&pad_h?'0'+h:h)+':':'')+(m<10&&include_h?'0'+m:m)+':'+(s<10?'0'+s:s);};var set_start_position=function(container,audio){var start_time=parseInt(container.data('start-time'),10);if(start_time>0&&start_time+5<audio.duration&&start_time<=audio.duration){audio.currentTime=start_time;container.data('last-position',audio.currentTime);update_timeline_ui(container,audio);}}
var update_play_pause_ui=function(container,audio){if(!audio.paused){container.addClass('is-playing');container.find('.js-audio-player-play-pause').removeClass('fa-play').addClass('fa-pause');}
else{container.removeClass('is-playing');container.find('.js-audio-player-play-pause').removeClass('fa-pause').addClass('fa-play');}}
var update_play_time=function(container,audio){var t=audio.currentTime;var last_position=container.data('last-position');last_position=last_position?parseFloat(last_position):0;var play_time=container.data('play-time');play_time=play_time?parseFloat(play_time):0;play_time+=t-last_position;container.data('play-time',play_time);container.data('last-position',t);}
var update_timeline_ui=function(container,audio){var current=Math.round(audio.currentTime);var duration=Math.round(audio.duration);var remaining=duration-current;var play_percent=audio.currentTime / audio.duration*100;container.find('.js-audio-player-timeline-position').not('.js-seeking').css({'left':play_percent+'%'});container.find('.js-audio-player-time-elapsed').text(format_seconds(current,(duration>=36000?1:0)));container.find('.js-audio-player-time-remaining').text((remaining>0?'':'')+format_seconds(remaining));update_buffered_ui(container,audio);};var update_buffered_ui=function(container,audio){var buffered=audio.buffered.length?audio.buffered.end(audio.buffered.length-1):0;if(audio.duration>0&&buffered<=audio.duration){container.find('.js-audio-player-buffered').css({'width':buffered / audio.duration*100+'%'});}}
return this.not('.js-audio-player-applied').addClass('js-audio-player-applied').each(function(){var $audio=$(this);var audio=$(this).get(0);var $container=$audio.closest('.js-audio-player');if(!audio.canPlayType($audio.data('type'))){var $no_preview=$audio.closest('.js-preview_container').find('.js-no_preview_available');if($no_preview.length){$audio.closest('.js-audio-player').hide();$no_preview.css({'display':'table-cell'});}}
$container.on('click','.js-audio-player-play-pause',function(){if($container.hasClass('is-playing')){audio.pause();}
else{$promise=audio.play();$promise.catch(function(error){growl_error('Your browser does not support playback of this audio file.')});}}).on('click','.js-audio-player-back',function(){var time=audio.currentTime-30;audio.currentTime=time>=0?time:0;$container.data('last-position',audio.currentTime);}).on('click','.js-audio-player-timeline-wrapper',function(event){var percent=(event.pageX-$(this).offset().left)/ $(this).width();var seek_to=audio.duration*percent;if(seek_to>0&&seek_to<=audio.seekable.end(null)){audio.currentTime=seek_to;$container.data('last-position',audio.currentTime);}}).on('mousedown','.js-audio-player-timeline-position',function(event){$(this).addClass('js-seeking');}).on('mousemove',function(event){var seeker=$container.find('.js-audio-player-timeline-position.js-seeking');if(seeker.length){var timeline=seeker.closest('.js-audio-player-timeline-wrapper');var l=event.pageX-timeline.offset().left;if(l>=0&&l<=timeline.width()){seeker.css({'left':l / timeline.width()*100+'%'});}
else if(l<0){seeker.css({'left':'0'});}
else if(l>timeline.width()){seeker.css({'left':'100%'});}}}).on('mouseup',function(event){var seeker=$container.find('.js-audio-player-timeline-position.js-seeking');if(seeker.length){var timeline=seeker.closest('.js-audio-player-timeline-wrapper');var percent=(event.pageX-seeker.offset().left)/ timeline.width();var seek_to=audio.duration*percent;if(seek_to>0&&seek_to<=audio.seekable.end(null)){audio.currentTime=seek_to;$container.data('last-position',audio.currentTime);}
seeker.removeClass('js-seeking');}});$audio.on('loadedmetadata',function(){update_buffered_ui($container,audio);set_start_position($container,audio);update_timeline_ui($container,audio);}).on('progress',function(){update_buffered_ui($container,audio);}).on('play playing pause seeking ended',function(){update_play_pause_ui($container,audio);}).on('timeupdate',function(){if(!this.paused){update_play_time($container,audio);update_timeline_ui($container,audio);}}).on('seeked',function(){$container.data('last-position',audio.currentTime);update_timeline_ui($container,audio);}).on('ended',function(){$container.data('last-position',0);var play_time=$container.data('play-time');play_time=play_time?parseFloat(play_time):0;$container.trigger('media_playback_finish',[play_time]);update_timeline_ui($container,audio);});});}})(jQuery);(function(root,factory){if(typeof define==='function'&&define.amd){define(["jquery"],function(a0){return(factory(a0));});}else if(typeof exports==='object'){module.exports=factory(require("jquery"));}else{factory(jQuery);}}(this,function($){var defaults={animation:'fade',animationDuration:200,content:null,contentAsHTML:false,contentCloning:false,debug:false,delay:300,delayTouch:[300,500],functionInit:null,functionBefore:null,functionReady:null,functionAfter:null,functionFormat:null,IEmin:6,interactive:false,maxWidth:300,multiple:false,parent:null,plugins:['sideTip'],repositionOnScroll:false,restoration:'none',selfDestruction:true,theme:['tooltipster-light'],timer:0,trackerInterval:500,trackOrigin:false,trackTooltip:false,trigger:'hover',triggerClose:{click:false,mouseleave:false,originClick:false,scroll:false,tap:false,touchleave:false},triggerOpen:{click:false,mouseenter:false,tap:false,touchstart:false},updateAnimation:'scale',zIndex:9999999},win=(typeof window!='undefined')?window:null,env={hasTouchCapability:!!(win&&('ontouchstart'in win||(win.DocumentTouch&&win.document instanceof win.DocumentTouch)||win.navigator.maxTouchPoints)),hasTransitions:transitionSupport(),IE:false,semVer:'4.2.6',window:win},core=function(){this.__$emitterPrivate=$({});this.__$emitterPublic=$({});this.__instancesLatestArr=[];this.__plugins={};this._env=env;};core.prototype={__bridge:function(constructor,obj,pluginName){if(!obj[pluginName]){var fn=function(){};fn.prototype=constructor;var pluginInstance=new fn();if(pluginInstance.__init){pluginInstance.__init(obj);}
$.each(constructor,function(methodName,fn){if(methodName.indexOf('__')!=0){if(!obj[methodName]){obj[methodName]=function(){return pluginInstance[methodName].apply(pluginInstance,Array.prototype.slice.apply(arguments));};obj[methodName].bridged=pluginInstance;}
else if(defaults.debug){console.log('The '+methodName+' method of the '+pluginName
+' plugin conflicts with another plugin or native methods');}}});obj[pluginName]=pluginInstance;}
return this;},__setWindow:function(window){env.window=window;return this;},_getRuler:function($tooltip){return new Ruler($tooltip);},_off:function(){this.__$emitterPrivate.off.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments));return this;},_on:function(){this.__$emitterPrivate.on.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments));return this;},_one:function(){this.__$emitterPrivate.one.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments));return this;},_plugin:function(plugin){var self=this;if(typeof plugin=='string'){var pluginName=plugin,p=null;if(pluginName.indexOf('.')>0){p=self.__plugins[pluginName];}
else{$.each(self.__plugins,function(i,plugin){if(plugin.name.substring(plugin.name.length-pluginName.length-1)=='.'+pluginName){p=plugin;return false;}});}
return p;}
else{if(plugin.name.indexOf('.')<0){throw new Error('Plugins must be namespaced');}
self.__plugins[plugin.name]=plugin;if(plugin.core){self.__bridge(plugin.core,self,plugin.name);}
return this;}},_trigger:function(){var args=Array.prototype.slice.apply(arguments);if(typeof args[0]=='string'){args[0]={type:args[0]};}
this.__$emitterPrivate.trigger.apply(this.__$emitterPrivate,args);this.__$emitterPublic.trigger.apply(this.__$emitterPublic,args);return this;},instances:function(selector){var instances=[],sel=selector||'.tooltipstered';$(sel).each(function(){var $this=$(this),ns=$this.data('tooltipster-ns');if(ns){$.each(ns,function(i,namespace){instances.push($this.data(namespace));});}});return instances;},instancesLatest:function(){return this.__instancesLatestArr;},off:function(){this.__$emitterPublic.off.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments));return this;},on:function(){this.__$emitterPublic.on.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments));return this;},one:function(){this.__$emitterPublic.one.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments));return this;},origins:function(selector){var sel=selector?selector+' ':'';return $(sel+'.tooltipstered').toArray();},setDefaults:function(d){$.extend(defaults,d);return this;},triggerHandler:function(){this.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments));return this;}};$.tooltipster=new core();$.Tooltipster=function(element,options){this.__callbacks={close:[],open:[]};this.__closingTime;this.__Content;this.__contentBcr;this.__destroyed=false;this.__$emitterPrivate=$({});this.__$emitterPublic=$({});this.__enabled=true;this.__garbageCollector;this.__Geometry;this.__lastPosition;this.__namespace='tooltipster-'+Math.round(Math.random()*1000000);this.__options;this.__$originParents;this.__pointerIsOverOrigin=false;this.__previousThemes=[];this.__state='closed';this.__timeouts={close:[],open:null};this.__touchEvents=[];this.__tracker=null;this._$origin;this._$tooltip;this.__init(element,options);};$.Tooltipster.prototype={__init:function(origin,options){var self=this;self._$origin=$(origin);self.__options=$.extend(true,{},defaults,options);self.__optionsFormat();if(!env.IE||env.IE>=self.__options.IEmin){var initialTitle=null;if(self._$origin.data('tooltipster-initialTitle')===undefined){initialTitle=self._$origin.attr('title');if(initialTitle===undefined)initialTitle=null;self._$origin.data('tooltipster-initialTitle',initialTitle);}
if(self.__options.content!==null){self.__contentSet(self.__options.content);}
else{var selector=self._$origin.attr('data-tooltip-content'),$el;if(selector){$el=$(selector);}
if($el&&$el[0]){self.__contentSet($el.first());}
else{self.__contentSet(initialTitle);}}
self._$origin.removeAttr('title').addClass('tooltipstered');self.__prepareOrigin();self.__prepareGC();$.each(self.__options.plugins,function(i,pluginName){self._plug(pluginName);});if(env.hasTouchCapability){$(env.window.document.body).on('touchmove.'+self.__namespace+'-triggerOpen',function(event){self._touchRecordEvent(event);});}
self._on('created',function(){self.__prepareTooltip();})._on('repositioned',function(e){self.__lastPosition=e.position;});}
else{self.__options.disabled=true;}},__contentInsert:function(){var self=this,$el=self._$tooltip.find('.tooltipster-content'),formattedContent=self.__Content,format=function(content){formattedContent=content;};self._trigger({type:'format',content:self.__Content,format:format});if(self.__options.functionFormat){formattedContent=self.__options.functionFormat.call(self,self,{origin:self._$origin[0]},self.__Content);}
if(typeof formattedContent==='string'&&!self.__options.contentAsHTML){$el.text(formattedContent);}
else{$el.empty().append(formattedContent);}
return self;},__contentSet:function(content){if(content instanceof $&&this.__options.contentCloning){content=content.clone(true);}
this.__Content=content;this._trigger({type:'updated',content:content});return this;},__destroyError:function(){throw new Error('This tooltip has been destroyed and cannot execute your method call.');},__geometry:function(){var self=this,$target=self._$origin,originIsArea=self._$origin.is('area');if(originIsArea){var mapName=self._$origin.parent().attr('name');$target=$('img[usemap="#'+mapName+'"]');}
var bcr=$target[0].getBoundingClientRect(),$document=$(env.window.document),$window=$(env.window),$parent=$target,geo={available:{document:null,window:null},document:{size:{height:$document.height(),width:$document.width()}},window:{scroll:{left:env.window.scrollX||env.window.document.documentElement.scrollLeft,top:env.window.scrollY||env.window.document.documentElement.scrollTop},size:{height:$window.height(),width:$window.width()}},origin:{fixedLineage:false,offset:{},size:{height:bcr.bottom-bcr.top,width:bcr.right-bcr.left},usemapImage:originIsArea?$target[0]:null,windowOffset:{bottom:bcr.bottom,left:bcr.left,right:bcr.right,top:bcr.top}}},geoFixed=false;if(originIsArea){var shape=self._$origin.attr('shape'),coords=self._$origin.attr('coords');if(coords){coords=coords.split(',');$.map(coords,function(val,i){coords[i]=parseInt(val);});}
if(shape!='default'){switch(shape){case'circle':var circleCenterLeft=coords[0],circleCenterTop=coords[1],circleRadius=coords[2],areaTopOffset=circleCenterTop-circleRadius,areaLeftOffset=circleCenterLeft-circleRadius;geo.origin.size.height=circleRadius*2;geo.origin.size.width=geo.origin.size.height;geo.origin.windowOffset.left+=areaLeftOffset;geo.origin.windowOffset.top+=areaTopOffset;break;case'rect':var areaLeft=coords[0],areaTop=coords[1],areaRight=coords[2],areaBottom=coords[3];geo.origin.size.height=areaBottom-areaTop;geo.origin.size.width=areaRight-areaLeft;geo.origin.windowOffset.left+=areaLeft;geo.origin.windowOffset.top+=areaTop;break;case'poly':var areaSmallestX=0,areaSmallestY=0,areaGreatestX=0,areaGreatestY=0,arrayAlternate='even';for(var i=0;i<coords.length;i++){var areaNumber=coords[i];if(arrayAlternate=='even'){if(areaNumber>areaGreatestX){areaGreatestX=areaNumber;if(i===0){areaSmallestX=areaGreatestX;}}
if(areaNumber<areaSmallestX){areaSmallestX=areaNumber;}
arrayAlternate='odd';}
else{if(areaNumber>areaGreatestY){areaGreatestY=areaNumber;if(i==1){areaSmallestY=areaGreatestY;}}
if(areaNumber<areaSmallestY){areaSmallestY=areaNumber;}
arrayAlternate='even';}}
geo.origin.size.height=areaGreatestY-areaSmallestY;geo.origin.size.width=areaGreatestX-areaSmallestX;geo.origin.windowOffset.left+=areaSmallestX;geo.origin.windowOffset.top+=areaSmallestY;break;}}}
var edit=function(r){geo.origin.size.height=r.height,geo.origin.windowOffset.left=r.left,geo.origin.windowOffset.top=r.top,geo.origin.size.width=r.width};self._trigger({type:'geometry',edit:edit,geometry:{height:geo.origin.size.height,left:geo.origin.windowOffset.left,top:geo.origin.windowOffset.top,width:geo.origin.size.width}});geo.origin.windowOffset.right=geo.origin.windowOffset.left+geo.origin.size.width;geo.origin.windowOffset.bottom=geo.origin.windowOffset.top+geo.origin.size.height;geo.origin.offset.left=geo.origin.windowOffset.left+geo.window.scroll.left;geo.origin.offset.top=geo.origin.windowOffset.top+geo.window.scroll.top;geo.origin.offset.bottom=geo.origin.offset.top+geo.origin.size.height;geo.origin.offset.right=geo.origin.offset.left+geo.origin.size.width;geo.available.document={bottom:{height:geo.document.size.height-geo.origin.offset.bottom,width:geo.document.size.width},left:{height:geo.document.size.height,width:geo.origin.offset.left},right:{height:geo.document.size.height,width:geo.document.size.width-geo.origin.offset.right},top:{height:geo.origin.offset.top,width:geo.document.size.width}};geo.available.window={bottom:{height:Math.max(geo.window.size.height-Math.max(geo.origin.windowOffset.bottom,0),0),width:geo.window.size.width},left:{height:geo.window.size.height,width:Math.max(geo.origin.windowOffset.left,0)},right:{height:geo.window.size.height,width:Math.max(geo.window.size.width-Math.max(geo.origin.windowOffset.right,0),0)},top:{height:Math.max(geo.origin.windowOffset.top,0),width:geo.window.size.width}};while($parent[0].tagName.toLowerCase()!='html'){if($parent.css('position')=='fixed'){geo.origin.fixedLineage=true;break;}
$parent=$parent.parent();}
return geo;},__optionsFormat:function(){if(typeof this.__options.animationDuration=='number'){this.__options.animationDuration=[this.__options.animationDuration,this.__options.animationDuration];}
if(typeof this.__options.delay=='number'){this.__options.delay=[this.__options.delay,this.__options.delay];}
if(typeof this.__options.delayTouch=='number'){this.__options.delayTouch=[this.__options.delayTouch,this.__options.delayTouch];}
if(typeof this.__options.theme=='string'){this.__options.theme=[this.__options.theme];}
if(this.__options.parent===null){this.__options.parent=$(env.window.document.body);}
else if(typeof this.__options.parent=='string'){this.__options.parent=$(this.__options.parent);}
if(this.__options.trigger=='hover'){this.__options.triggerOpen={mouseenter:true,touchstart:true};this.__options.triggerClose={mouseleave:true,originClick:true,touchleave:true};}
else if(this.__options.trigger=='click'){this.__options.triggerOpen={click:true,tap:true};this.__options.triggerClose={click:true,tap:true};}
this._trigger('options');return this;},__prepareGC:function(){var self=this;if(self.__options.selfDestruction){self.__garbageCollector=setInterval(function(){var now=new Date().getTime();self.__touchEvents=$.grep(self.__touchEvents,function(event,i){return now-event.time>60000;});if(!bodyContains(self._$origin)){self.close(function(){self.destroy();});}},20000);}
else{clearInterval(self.__garbageCollector);}
return self;},__prepareOrigin:function(){var self=this;self._$origin.off('.'+self.__namespace+'-triggerOpen');if(env.hasTouchCapability){self._$origin.on('touchstart.'+self.__namespace+'-triggerOpen '+'touchend.'+self.__namespace+'-triggerOpen '+'touchcancel.'+self.__namespace+'-triggerOpen',function(event){self._touchRecordEvent(event);});}
if(self.__options.triggerOpen.click||(self.__options.triggerOpen.tap&&env.hasTouchCapability)){var eventNames='';if(self.__options.triggerOpen.click){eventNames+='click.'+self.__namespace+'-triggerOpen ';}
if(self.__options.triggerOpen.tap&&env.hasTouchCapability){eventNames+='touchend.'+self.__namespace+'-triggerOpen';}
self._$origin.on(eventNames,function(event){if(self._touchIsMeaningfulEvent(event)){self._open(event);}});}
if(self.__options.triggerOpen.mouseenter||(self.__options.triggerOpen.touchstart&&env.hasTouchCapability)){var eventNames='';if(self.__options.triggerOpen.mouseenter){eventNames+='mouseenter.'+self.__namespace+'-triggerOpen ';}
if(self.__options.triggerOpen.touchstart&&env.hasTouchCapability){eventNames+='touchstart.'+self.__namespace+'-triggerOpen';}
self._$origin.on(eventNames,function(event){if(self._touchIsTouchEvent(event)||!self._touchIsEmulatedEvent(event)){self.__pointerIsOverOrigin=true;self._openShortly(event);}});}
if(self.__options.triggerClose.mouseleave||(self.__options.triggerClose.touchleave&&env.hasTouchCapability)){var eventNames='';if(self.__options.triggerClose.mouseleave){eventNames+='mouseleave.'+self.__namespace+'-triggerOpen ';}
if(self.__options.triggerClose.touchleave&&env.hasTouchCapability){eventNames+='touchend.'+self.__namespace+'-triggerOpen touchcancel.'+self.__namespace+'-triggerOpen';}
self._$origin.on(eventNames,function(event){if(self._touchIsMeaningfulEvent(event)){self.__pointerIsOverOrigin=false;}});}
return self;},__prepareTooltip:function(){var self=this,p=self.__options.interactive?'auto':'';self._$tooltip.attr('id',self.__namespace).css({'pointer-events':p,zIndex:self.__options.zIndex});$.each(self.__previousThemes,function(i,theme){self._$tooltip.removeClass(theme);});$.each(self.__options.theme,function(i,theme){self._$tooltip.addClass(theme);});self.__previousThemes=$.merge([],self.__options.theme);return self;},__scrollHandler:function(event){var self=this;if(self.__options.triggerClose.scroll){self._close(event);}
else{if(bodyContains(self._$origin)&&bodyContains(self._$tooltip)){var geo=null;if(event.target===env.window.document){if(!self.__Geometry.origin.fixedLineage){if(self.__options.repositionOnScroll){self.reposition(event);}}}
else{geo=self.__geometry();var overflows=false;if(self._$origin.css('position')!='fixed'){self.__$originParents.each(function(i,el){var $el=$(el),overflowX=$el.css('overflow-x'),overflowY=$el.css('overflow-y');if(overflowX!='visible'||overflowY!='visible'){var bcr=el.getBoundingClientRect();if(overflowX!='visible'){if(geo.origin.windowOffset.left<bcr.left||geo.origin.windowOffset.right>bcr.right){overflows=true;return false;}}
if(overflowY!='visible'){if(geo.origin.windowOffset.top<bcr.top||geo.origin.windowOffset.bottom>bcr.bottom){overflows=true;return false;}}}
if($el.css('position')=='fixed'){return false;}});}
if(overflows){self._$tooltip.css('visibility','hidden');}
else{self._$tooltip.css('visibility','visible');if(self.__options.repositionOnScroll){self.reposition(event);}
else{var offsetLeft=geo.origin.offset.left-self.__Geometry.origin.offset.left,offsetTop=geo.origin.offset.top-self.__Geometry.origin.offset.top;self._$tooltip.css({left:self.__lastPosition.coord.left+offsetLeft,top:self.__lastPosition.coord.top+offsetTop});}}}
self._trigger({type:'scroll',event:event,geo:geo});}}
return self;},__stateSet:function(state){this.__state=state;this._trigger({type:'state',state:state});return this;},__timeoutsClear:function(){clearTimeout(this.__timeouts.open);this.__timeouts.open=null;$.each(this.__timeouts.close,function(i,timeout){clearTimeout(timeout);});this.__timeouts.close=[];return this;},__trackerStart:function(){var self=this,$content=self._$tooltip.find('.tooltipster-content');if(self.__options.trackTooltip){self.__contentBcr=$content[0].getBoundingClientRect();}
self.__tracker=setInterval(function(){if(!bodyContains(self._$origin)||!bodyContains(self._$tooltip)){self._close();}
else{if(self.__options.trackOrigin){var g=self.__geometry(),identical=false;if(areEqual(g.origin.size,self.__Geometry.origin.size)){if(self.__Geometry.origin.fixedLineage){if(areEqual(g.origin.windowOffset,self.__Geometry.origin.windowOffset)){identical=true;}}
else{if(areEqual(g.origin.offset,self.__Geometry.origin.offset)){identical=true;}}}
if(!identical){if(self.__options.triggerClose.mouseleave){self._close();}
else{self.reposition();}}}
if(self.__options.trackTooltip){var currentBcr=$content[0].getBoundingClientRect();if(currentBcr.height!==self.__contentBcr.height||currentBcr.width!==self.__contentBcr.width){self.reposition();self.__contentBcr=currentBcr;}}}},self.__options.trackerInterval);return self;},_close:function(event,callback,force){var self=this,ok=true;self._trigger({type:'close',event:event,stop:function(){ok=false;}});if(ok||force){if(callback)self.__callbacks.close.push(callback);self.__callbacks.open=[];self.__timeoutsClear();var finishCallbacks=function(){$.each(self.__callbacks.close,function(i,c){c.call(self,self,{event:event,origin:self._$origin[0]});});self.__callbacks.close=[];};if(self.__state!='closed'){var necessary=true,d=new Date(),now=d.getTime(),newClosingTime=now+self.__options.animationDuration[1];if(self.__state=='disappearing'){if(newClosingTime>self.__closingTime&&self.__options.animationDuration[1]>0){necessary=false;}}
if(necessary){self.__closingTime=newClosingTime;if(self.__state!='disappearing'){self.__stateSet('disappearing');}
var finish=function(){clearInterval(self.__tracker);self._trigger({type:'closing',event:event});self._$tooltip.off('.'+self.__namespace+'-triggerClose').removeClass('tooltipster-dying');$(env.window).off('.'+self.__namespace+'-triggerClose');self.__$originParents.each(function(i,el){$(el).off('scroll.'+self.__namespace+'-triggerClose');});self.__$originParents=null;$(env.window.document.body).off('.'+self.__namespace+'-triggerClose');self._$origin.off('.'+self.__namespace+'-triggerClose');self._off('dismissable');self.__stateSet('closed');self._trigger({type:'after',event:event});if(self.__options.functionAfter){self.__options.functionAfter.call(self,self,{event:event,origin:self._$origin[0]});}
finishCallbacks();};if(env.hasTransitions){self._$tooltip.css({'-moz-animation-duration':self.__options.animationDuration[1]+'ms','-ms-animation-duration':self.__options.animationDuration[1]+'ms','-o-animation-duration':self.__options.animationDuration[1]+'ms','-webkit-animation-duration':self.__options.animationDuration[1]+'ms','animation-duration':self.__options.animationDuration[1]+'ms','transition-duration':self.__options.animationDuration[1]+'ms'});self._$tooltip.clearQueue().removeClass('tooltipster-show').addClass('tooltipster-dying');if(self.__options.animationDuration[1]>0){self._$tooltip.delay(self.__options.animationDuration[1]);}
self._$tooltip.queue(finish);}
else{self._$tooltip.stop().fadeOut(self.__options.animationDuration[1],finish);}}}
else{finishCallbacks();}}
return self;},_off:function(){this.__$emitterPrivate.off.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments));return this;},_on:function(){this.__$emitterPrivate.on.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments));return this;},_one:function(){this.__$emitterPrivate.one.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments));return this;},_open:function(event,callback){var self=this;if(!self.__destroying){if(bodyContains(self._$origin)&&self.__enabled){var ok=true;if(self.__state=='closed'){self._trigger({type:'before',event:event,stop:function(){ok=false;}});if(ok&&self.__options.functionBefore){ok=self.__options.functionBefore.call(self,self,{event:event,origin:self._$origin[0]});}}
if(ok!==false){if(self.__Content!==null){if(callback){self.__callbacks.open.push(callback);}
self.__callbacks.close=[];self.__timeoutsClear();var extraTime,finish=function(){if(self.__state!='stable'){self.__stateSet('stable');}
$.each(self.__callbacks.open,function(i,c){c.call(self,self,{origin:self._$origin[0],tooltip:self._$tooltip[0]});});self.__callbacks.open=[];};if(self.__state!=='closed'){extraTime=0;if(self.__state==='disappearing'){self.__stateSet('appearing');if(env.hasTransitions){self._$tooltip.clearQueue().removeClass('tooltipster-dying').addClass('tooltipster-show');if(self.__options.animationDuration[0]>0){self._$tooltip.delay(self.__options.animationDuration[0]);}
self._$tooltip.queue(finish);}
else{self._$tooltip.stop().fadeIn(finish);}}
else if(self.__state=='stable'){finish();}}
else{self.__stateSet('appearing');extraTime=self.__options.animationDuration[0];self.__contentInsert();self.reposition(event,true);if(env.hasTransitions){self._$tooltip.addClass('tooltipster-'+self.__options.animation).addClass('tooltipster-initial').css({'-moz-animation-duration':self.__options.animationDuration[0]+'ms','-ms-animation-duration':self.__options.animationDuration[0]+'ms','-o-animation-duration':self.__options.animationDuration[0]+'ms','-webkit-animation-duration':self.__options.animationDuration[0]+'ms','animation-duration':self.__options.animationDuration[0]+'ms','transition-duration':self.__options.animationDuration[0]+'ms'});setTimeout(function(){if(self.__state!='closed'){self._$tooltip.addClass('tooltipster-show').removeClass('tooltipster-initial');if(self.__options.animationDuration[0]>0){self._$tooltip.delay(self.__options.animationDuration[0]);}
self._$tooltip.queue(finish);}},0);}
else{self._$tooltip.css('display','none').fadeIn(self.__options.animationDuration[0],finish);}
self.__trackerStart();$(env.window).on('resize.'+self.__namespace+'-triggerClose',function(e){var $ae=$(document.activeElement);if((!$ae.is('input')&&!$ae.is('textarea'))||!$.contains(self._$tooltip[0],$ae[0])){self.reposition(e);}}).on('scroll.'+self.__namespace+'-triggerClose',function(e){self.__scrollHandler(e);});self.__$originParents=self._$origin.parents();self.__$originParents.each(function(i,parent){$(parent).on('scroll.'+self.__namespace+'-triggerClose',function(e){self.__scrollHandler(e);});});if(self.__options.triggerClose.mouseleave||(self.__options.triggerClose.touchleave&&env.hasTouchCapability)){self._on('dismissable',function(event){if(event.dismissable){if(event.delay){timeout=setTimeout(function(){self._close(event.event);},event.delay);self.__timeouts.close.push(timeout);}
else{self._close(event);}}
else{clearTimeout(timeout);}});var $elements=self._$origin,eventNamesIn='',eventNamesOut='',timeout=null;if(self.__options.interactive){$elements=$elements.add(self._$tooltip);}
if(self.__options.triggerClose.mouseleave){eventNamesIn+='mouseenter.'+self.__namespace+'-triggerClose ';eventNamesOut+='mouseleave.'+self.__namespace+'-triggerClose ';}
if(self.__options.triggerClose.touchleave&&env.hasTouchCapability){eventNamesIn+='touchstart.'+self.__namespace+'-triggerClose';eventNamesOut+='touchend.'+self.__namespace+'-triggerClose touchcancel.'+self.__namespace+'-triggerClose';}
$elements.on(eventNamesOut,function(event){if(self._touchIsTouchEvent(event)||!self._touchIsEmulatedEvent(event)){var delay=(event.type=='mouseleave')?self.__options.delay:self.__options.delayTouch;self._trigger({delay:delay[1],dismissable:true,event:event,type:'dismissable'});}}).on(eventNamesIn,function(event){if(self._touchIsTouchEvent(event)||!self._touchIsEmulatedEvent(event)){self._trigger({dismissable:false,event:event,type:'dismissable'});}});}
if(self.__options.triggerClose.originClick){self._$origin.on('click.'+self.__namespace+'-triggerClose',function(event){if(!self._touchIsTouchEvent(event)&&!self._touchIsEmulatedEvent(event)){self._close(event);}});}
if(self.__options.triggerClose.click||(self.__options.triggerClose.tap&&env.hasTouchCapability)){setTimeout(function(){if(self.__state!='closed'){var eventNames='',$body=$(env.window.document.body);if(self.__options.triggerClose.click){eventNames+='click.'+self.__namespace+'-triggerClose ';}
if(self.__options.triggerClose.tap&&env.hasTouchCapability){eventNames+='touchend.'+self.__namespace+'-triggerClose';}
$body.on(eventNames,function(event){if(self._touchIsMeaningfulEvent(event)){self._touchRecordEvent(event);if(!self.__options.interactive||!$.contains(self._$tooltip[0],event.target)){self._close(event);}}});if(self.__options.triggerClose.tap&&env.hasTouchCapability){$body.on('touchstart.'+self.__namespace+'-triggerClose',function(event){self._touchRecordEvent(event);});}}},0);}
self._trigger('ready');if(self.__options.functionReady){self.__options.functionReady.call(self,self,{origin:self._$origin[0],tooltip:self._$tooltip[0]});}}
if(self.__options.timer>0){var timeout=setTimeout(function(){self._close();},self.__options.timer+extraTime);self.__timeouts.close.push(timeout);}}}}}
return self;},_openShortly:function(event){var self=this,ok=true;if(self.__state!='stable'&&self.__state!='appearing'){if(!self.__timeouts.open){self._trigger({type:'start',event:event,stop:function(){ok=false;}});if(ok){var delay=(event.type.indexOf('touch')==0)?self.__options.delayTouch:self.__options.delay;if(delay[0]){self.__timeouts.open=setTimeout(function(){self.__timeouts.open=null;if(self.__pointerIsOverOrigin&&self._touchIsMeaningfulEvent(event)){self._trigger('startend');self._open(event);}
else{self._trigger('startcancel');}},delay[0]);}
else{self._trigger('startend');self._open(event);}}}}
return self;},_optionsExtract:function(pluginName,defaultOptions){var self=this,options=$.extend(true,{},defaultOptions);var pluginOptions=self.__options[pluginName];if(!pluginOptions){pluginOptions={};$.each(defaultOptions,function(optionName,value){var o=self.__options[optionName];if(o!==undefined){pluginOptions[optionName]=o;}});}
$.each(options,function(optionName,value){if(pluginOptions[optionName]!==undefined){if((typeof value=='object'&&!(value instanceof Array)&&value!=null)&&(typeof pluginOptions[optionName]=='object'&&!(pluginOptions[optionName]instanceof Array)&&pluginOptions[optionName]!=null)){$.extend(options[optionName],pluginOptions[optionName]);}
else{options[optionName]=pluginOptions[optionName];}}});return options;},_plug:function(pluginName){var plugin=$.tooltipster._plugin(pluginName);if(plugin){if(plugin.instance){$.tooltipster.__bridge(plugin.instance,this,plugin.name);}}
else{throw new Error('The "'+pluginName+'" plugin is not defined');}
return this;},_touchIsEmulatedEvent:function(event){var isEmulated=false,now=new Date().getTime();for(var i=this.__touchEvents.length-1;i>=0;i--){var e=this.__touchEvents[i];if(now-e.time<500){if(e.target===event.target){isEmulated=true;}}
else{break;}}
return isEmulated;},_touchIsMeaningfulEvent:function(event){return((this._touchIsTouchEvent(event)&&!this._touchSwiped(event.target))||(!this._touchIsTouchEvent(event)&&!this._touchIsEmulatedEvent(event)));},_touchIsTouchEvent:function(event){return event.type.indexOf('touch')==0;},_touchRecordEvent:function(event){if(this._touchIsTouchEvent(event)){event.time=new Date().getTime();this.__touchEvents.push(event);}
return this;},_touchSwiped:function(target){var swiped=false;for(var i=this.__touchEvents.length-1;i>=0;i--){var e=this.__touchEvents[i];if(e.type=='touchmove'){swiped=true;break;}
else if(e.type=='touchstart'&&target===e.target){break;}}
return swiped;},_trigger:function(){var args=Array.prototype.slice.apply(arguments);if(typeof args[0]=='string'){args[0]={type:args[0]};}
args[0].instance=this;args[0].origin=this._$origin?this._$origin[0]:null;args[0].tooltip=this._$tooltip?this._$tooltip[0]:null;this.__$emitterPrivate.trigger.apply(this.__$emitterPrivate,args);$.tooltipster._trigger.apply($.tooltipster,args);this.__$emitterPublic.trigger.apply(this.__$emitterPublic,args);return this;},_unplug:function(pluginName){var self=this;if(self[pluginName]){var plugin=$.tooltipster._plugin(pluginName);if(plugin.instance){$.each(plugin.instance,function(methodName,fn){if(self[methodName]&&self[methodName].bridged===self[pluginName]){delete self[methodName];}});}
if(self[pluginName].__destroy){self[pluginName].__destroy();}
delete self[pluginName];}
return self;},close:function(callback){if(!this.__destroyed){this._close(null,callback);}
else{this.__destroyError();}
return this;},content:function(content){var self=this;if(content===undefined){return self.__Content;}
else{if(!self.__destroyed){self.__contentSet(content);if(self.__Content!==null){if(self.__state!=='closed'){self.__contentInsert();self.reposition();if(self.__options.updateAnimation){if(env.hasTransitions){var animation=self.__options.updateAnimation;self._$tooltip.addClass('tooltipster-update-'+animation);setTimeout(function(){if(self.__state!='closed'){self._$tooltip.removeClass('tooltipster-update-'+animation);}},1000);}
else{self._$tooltip.fadeTo(200,0.5,function(){if(self.__state!='closed'){self._$tooltip.fadeTo(200,1);}});}}}}
else{self._close();}}
else{self.__destroyError();}
return self;}},destroy:function(){var self=this;if(!self.__destroyed){if(self.__state!='closed'){self.option('animationDuration',0)._close(null,null,true);}
else{self.__timeoutsClear();}
self._trigger('destroy');self.__destroyed=true;self._$origin.removeData(self.__namespace).off('.'+self.__namespace+'-triggerOpen');$(env.window.document.body).off('.'+self.__namespace+'-triggerOpen');var ns=self._$origin.data('tooltipster-ns');if(ns){if(ns.length===1){var title=null;if(self.__options.restoration=='previous'){title=self._$origin.data('tooltipster-initialTitle');}
else if(self.__options.restoration=='current'){title=(typeof self.__Content=='string')?self.__Content:$('<div></div>').append(self.__Content).html();}
if(title){self._$origin.attr('title',title);}
self._$origin.removeClass('tooltipstered');self._$origin.removeData('tooltipster-ns').removeData('tooltipster-initialTitle');}
else{ns=$.grep(ns,function(el,i){return el!==self.__namespace;});self._$origin.data('tooltipster-ns',ns);}}
self._trigger('destroyed');self._off();self.off();self.__Content=null;self.__$emitterPrivate=null;self.__$emitterPublic=null;self.__options.parent=null;self._$origin=null;self._$tooltip=null;$.tooltipster.__instancesLatestArr=$.grep($.tooltipster.__instancesLatestArr,function(el,i){return self!==el;});clearInterval(self.__garbageCollector);}
else{self.__destroyError();}
return self;},disable:function(){if(!this.__destroyed){this._close();this.__enabled=false;return this;}
else{this.__destroyError();}
return this;},elementOrigin:function(){if(!this.__destroyed){return this._$origin[0];}
else{this.__destroyError();}},elementTooltip:function(){return this._$tooltip?this._$tooltip[0]:null;},enable:function(){this.__enabled=true;return this;},hide:function(callback){return this.close(callback);},instance:function(){return this;},off:function(){if(!this.__destroyed){this.__$emitterPublic.off.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments));}
return this;},on:function(){if(!this.__destroyed){this.__$emitterPublic.on.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments));}
else{this.__destroyError();}
return this;},one:function(){if(!this.__destroyed){this.__$emitterPublic.one.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments));}
else{this.__destroyError();}
return this;},open:function(callback){if(!this.__destroyed){this._open(null,callback);}
else{this.__destroyError();}
return this;},option:function(o,val){if(val===undefined){return this.__options[o];}
else{if(!this.__destroyed){this.__options[o]=val;this.__optionsFormat();if($.inArray(o,['trigger','triggerClose','triggerOpen'])>=0){this.__prepareOrigin();}
if(o==='selfDestruction'){this.__prepareGC();}}
else{this.__destroyError();}
return this;}},reposition:function(event,tooltipIsDetached){var self=this;if(!self.__destroyed){if(self.__state!='closed'&&bodyContains(self._$origin)){if(tooltipIsDetached||bodyContains(self._$tooltip)){if(!tooltipIsDetached){self._$tooltip.detach();}
self.__Geometry=self.__geometry();self._trigger({type:'reposition',event:event,helper:{geo:self.__Geometry}});}}}
else{self.__destroyError();}
return self;},show:function(callback){return this.open(callback);},status:function(){return{destroyed:this.__destroyed,enabled:this.__enabled,open:this.__state!=='closed',state:this.__state};},triggerHandler:function(){if(!this.__destroyed){this.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments));}
else{this.__destroyError();}
return this;}};$.fn.tooltipster=function(){var args=Array.prototype.slice.apply(arguments),contentCloningWarning='You are using a single HTML element as content for several tooltips. You probably want to set the contentCloning option to TRUE.';if(this.length===0){return this;}
else{if(typeof args[0]==='string'){var v='#*$~&';this.each(function(){var ns=$(this).data('tooltipster-ns'),self=ns?$(this).data(ns[0]):null;if(self){if(typeof self[args[0]]==='function'){if(this.length>1&&args[0]=='content'&&(args[1]instanceof $||(typeof args[1]=='object'&&args[1]!=null&&args[1].tagName))&&!self.__options.contentCloning&&self.__options.debug){console.log(contentCloningWarning);}
var resp=self[args[0]](args[1],args[2]);}
else{throw new Error('Unknown method "'+args[0]+'"');}
if(resp!==self||args[0]==='instance'){v=resp;return false;}}
else{throw new Error('You called Tooltipster\'s "'+args[0]+'" method on an uninitialized element');}});return(v!=='#*$~&')?v:this;}
else{$.tooltipster.__instancesLatestArr=[];var multipleIsSet=args[0]&&args[0].multiple!==undefined,multiple=(multipleIsSet&&args[0].multiple)||(!multipleIsSet&&defaults.multiple),contentIsSet=args[0]&&args[0].content!==undefined,content=(contentIsSet&&args[0].content)||(!contentIsSet&&defaults.content),contentCloningIsSet=args[0]&&args[0].contentCloning!==undefined,contentCloning=(contentCloningIsSet&&args[0].contentCloning)||(!contentCloningIsSet&&defaults.contentCloning),debugIsSet=args[0]&&args[0].debug!==undefined,debug=(debugIsSet&&args[0].debug)||(!debugIsSet&&defaults.debug);if(this.length>1&&(content instanceof $||(typeof content=='object'&&content!=null&&content.tagName))&&!contentCloning&&debug){console.log(contentCloningWarning);}
this.each(function(){var go=false,$this=$(this),ns=$this.data('tooltipster-ns'),obj=null;if(!ns){go=true;}
else if(multiple){go=true;}
else if(debug){console.log('Tooltipster: one or more tooltips are already attached to the element below. Ignoring.');console.log(this);}
if(go){obj=new $.Tooltipster(this,args[0]);if(!ns)ns=[];ns.push(obj.__namespace);$this.data('tooltipster-ns',ns);$this.data(obj.__namespace,obj);if(obj.__options.functionInit){obj.__options.functionInit.call(obj,obj,{origin:this});}
obj._trigger('init');}
$.tooltipster.__instancesLatestArr.push(obj);});return this;}}};function Ruler($tooltip){this.$container;this.constraints=null;this.__$tooltip;this.__init($tooltip);}
Ruler.prototype={__init:function($tooltip){this.__$tooltip=$tooltip;this.__$tooltip.css({left:0,overflow:'hidden',position:'absolute',top:0}).find('.tooltipster-content').css('overflow','auto');this.$container=$('<div class="tooltipster-ruler"></div>').append(this.__$tooltip).appendTo(env.window.document.body);},__forceRedraw:function(){var $p=this.__$tooltip.parent();this.__$tooltip.detach();this.__$tooltip.appendTo($p);},constrain:function(width,height){this.constraints={width:width,height:height};this.__$tooltip.css({display:'block',height:'',overflow:'auto',width:width});return this;},destroy:function(){this.__$tooltip.detach().find('.tooltipster-content').css({display:'',overflow:''});this.$container.remove();},free:function(){this.constraints=null;this.__$tooltip.css({display:'',height:'',overflow:'visible',width:''});return this;},measure:function(){this.__forceRedraw();var tooltipBcr=this.__$tooltip[0].getBoundingClientRect(),result={size:{height:tooltipBcr.height||(tooltipBcr.bottom-tooltipBcr.top),width:tooltipBcr.width||(tooltipBcr.right-tooltipBcr.left)}};if(this.constraints){var $content=this.__$tooltip.find('.tooltipster-content'),height=this.__$tooltip.outerHeight(),contentBcr=$content[0].getBoundingClientRect(),fits={height:height<=this.constraints.height,width:(tooltipBcr.width<=this.constraints.width&&contentBcr.width>=$content[0].scrollWidth-1)};result.fits=fits.height&&fits.width;}
if(env.IE&&env.IE<=11&&result.size.width!==env.window.document.documentElement.clientWidth){result.size.width=Math.ceil(result.size.width)+1;}
return result;}};function areEqual(a,b){var same=true;$.each(a,function(i,_){if(b[i]===undefined||a[i]!==b[i]){same=false;return false;}});return same;}
function bodyContains($obj){var id=$obj.attr('id'),el=id?env.window.document.getElementById(id):null;return el?el===$obj[0]:$.contains(env.window.document.body,$obj[0]);}
var uA=navigator.userAgent.toLowerCase();if(uA.indexOf('msie')!=-1)env.IE=parseInt(uA.split('msie')[1]);else if(uA.toLowerCase().indexOf('trident')!==-1&&uA.indexOf(' rv:11')!==-1)env.IE=11;else if(uA.toLowerCase().indexOf('edge/')!=-1)env.IE=parseInt(uA.toLowerCase().split('edge/')[1]);function transitionSupport(){if(!win)return false;var b=win.document.body||win.document.documentElement,s=b.style,p='transition',v=['Moz','Webkit','Khtml','O','ms'];if(typeof s[p]=='string'){return true;}
p=p.charAt(0).toUpperCase()+p.substr(1);for(var i=0;i<v.length;i++){if(typeof s[v[i]+p]=='string'){return true;}}
return false;}
var pluginName='tooltipster.sideTip';$.tooltipster._plugin({name:pluginName,instance:{__defaults:function(){return{arrow:true,distance:6,functionPosition:null,maxWidth:null,minIntersection:16,minWidth:0,position:null,side:'top',viewportAware:true};},__init:function(instance){var self=this;self.__instance=instance;self.__namespace='tooltipster-sideTip-'+Math.round(Math.random()*1000000);self.__previousState='closed';self.__options;self.__optionsFormat();self.__instance._on('state.'+self.__namespace,function(event){if(event.state=='closed'){self.__close();}
else if(event.state=='appearing'&&self.__previousState=='closed'){self.__create();}
self.__previousState=event.state;});self.__instance._on('options.'+self.__namespace,function(){self.__optionsFormat();});self.__instance._on('reposition.'+self.__namespace,function(e){self.__reposition(e.event,e.helper);});},__close:function(){if(this.__instance.content()instanceof $){this.__instance.content().detach();}
this.__instance._$tooltip.remove();this.__instance._$tooltip=null;},__create:function(){var $html=$('<div class="tooltipster-base tooltipster-sidetip">'+'<div class="tooltipster-box">'+'<div class="tooltipster-content"></div>'+'</div>'+'<div class="tooltipster-arrow">'+'<div class="tooltipster-arrow-uncropped">'+'<div class="tooltipster-arrow-border"></div>'+'<div class="tooltipster-arrow-background"></div>'+'</div>'+'</div>'+'</div>');if(!this.__options.arrow){$html.find('.tooltipster-box').css('margin',0).end().find('.tooltipster-arrow').hide();}
if(this.__options.minWidth){$html.css('min-width',this.__options.minWidth+'px');}
if(this.__options.maxWidth){$html.css('max-width',this.__options.maxWidth+'px');}
this.__instance._$tooltip=$html;this.__instance._trigger('created');},__destroy:function(){this.__instance._off('.'+self.__namespace);},__optionsFormat:function(){var self=this;self.__options=self.__instance._optionsExtract(pluginName,self.__defaults());if(self.__options.position){self.__options.side=self.__options.position;}
if(typeof self.__options.distance!='object'){self.__options.distance=[self.__options.distance];}
if(self.__options.distance.length<4){if(self.__options.distance[1]===undefined)self.__options.distance[1]=self.__options.distance[0];if(self.__options.distance[2]===undefined)self.__options.distance[2]=self.__options.distance[0];if(self.__options.distance[3]===undefined)self.__options.distance[3]=self.__options.distance[1];self.__options.distance={top:self.__options.distance[0],right:self.__options.distance[1],bottom:self.__options.distance[2],left:self.__options.distance[3]};}
if(typeof self.__options.side=='string'){var opposites={'top':'bottom','right':'left','bottom':'top','left':'right'};self.__options.side=[self.__options.side,opposites[self.__options.side]];if(self.__options.side[0]=='left'||self.__options.side[0]=='right'){self.__options.side.push('top','bottom');}
else{self.__options.side.push('right','left');}}
if($.tooltipster._env.IE===6&&self.__options.arrow!==true){self.__options.arrow=false;}},__reposition:function(event,helper){var self=this,finalResult,targets=self.__targetFind(helper),testResults=[];self.__instance._$tooltip.detach();var $clone=self.__instance._$tooltip.clone(),ruler=$.tooltipster._getRuler($clone),satisfied=false,animation=self.__instance.option('animation');if(animation){$clone.removeClass('tooltipster-'+animation);}
$.each(['window','document'],function(i,container){var takeTest=null;self.__instance._trigger({container:container,helper:helper,satisfied:satisfied,takeTest:function(bool){takeTest=bool;},results:testResults,type:'positionTest'});if(takeTest==true||(takeTest!=false&&satisfied==false&&(container!='window'||self.__options.viewportAware))){for(var i=0;i<self.__options.side.length;i++){var distance={horizontal:0,vertical:0},side=self.__options.side[i];if(side=='top'||side=='bottom'){distance.vertical=self.__options.distance[side];}
else{distance.horizontal=self.__options.distance[side];}
self.__sideChange($clone,side);$.each(['natural','constrained'],function(i,mode){takeTest=null;self.__instance._trigger({container:container,event:event,helper:helper,mode:mode,results:testResults,satisfied:satisfied,side:side,takeTest:function(bool){takeTest=bool;},type:'positionTest'});if(takeTest==true||(takeTest!=false&&satisfied==false)){var testResult={container:container,distance:distance,fits:null,mode:mode,outerSize:null,side:side,size:null,target:targets[side],whole:null};var rulerConfigured=(mode=='natural')?ruler.free():ruler.constrain(helper.geo.available[container][side].width-distance.horizontal,helper.geo.available[container][side].height-distance.vertical),rulerResults=rulerConfigured.measure();testResult.size=rulerResults.size;testResult.outerSize={height:rulerResults.size.height+distance.vertical,width:rulerResults.size.width+distance.horizontal};if(mode=='natural'){if(helper.geo.available[container][side].width>=testResult.outerSize.width&&helper.geo.available[container][side].height>=testResult.outerSize.height){testResult.fits=true;}
else{testResult.fits=false;}}
else{testResult.fits=rulerResults.fits;}
if(container=='window'){if(!testResult.fits){testResult.whole=false;}
else{if(side=='top'||side=='bottom'){testResult.whole=(helper.geo.origin.windowOffset.right>=self.__options.minIntersection&&helper.geo.window.size.width-helper.geo.origin.windowOffset.left>=self.__options.minIntersection);}
else{testResult.whole=(helper.geo.origin.windowOffset.bottom>=self.__options.minIntersection&&helper.geo.window.size.height-helper.geo.origin.windowOffset.top>=self.__options.minIntersection);}}}
testResults.push(testResult);if(testResult.whole){satisfied=true;}
else{if(testResult.mode=='natural'&&(testResult.fits||testResult.size.width<=helper.geo.available[container][side].width)){return false;}}}});}}});self.__instance._trigger({edit:function(r){testResults=r;},event:event,helper:helper,results:testResults,type:'positionTested'});testResults.sort(function(a,b){if(a.whole&&!b.whole){return-1;}
else if(!a.whole&&b.whole){return 1;}
else if(a.whole&&b.whole){var ai=self.__options.side.indexOf(a.side),bi=self.__options.side.indexOf(b.side);if(ai<bi){return-1;}
else if(ai>bi){return 1;}
else{return a.mode=='natural'?-1:1;}}
else{if(a.fits&&!b.fits){return-1;}
else if(!a.fits&&b.fits){return 1;}
else if(a.fits&&b.fits){var ai=self.__options.side.indexOf(a.side),bi=self.__options.side.indexOf(b.side);if(ai<bi){return-1;}
else if(ai>bi){return 1;}
else{return a.mode=='natural'?-1:1;}}
else{if(a.container=='document'&&a.side=='bottom'&&a.mode=='natural'){return-1;}
else{return 1;}}}});finalResult=testResults[0];finalResult.coord={};switch(finalResult.side){case'left':case'right':finalResult.coord.top=Math.floor(finalResult.target-finalResult.size.height / 2);break;case'bottom':case'top':finalResult.coord.left=Math.floor(finalResult.target-finalResult.size.width / 2);break;}
switch(finalResult.side){case'left':finalResult.coord.left=helper.geo.origin.windowOffset.left-finalResult.outerSize.width;break;case'right':finalResult.coord.left=helper.geo.origin.windowOffset.right+finalResult.distance.horizontal;break;case'top':finalResult.coord.top=helper.geo.origin.windowOffset.top-finalResult.outerSize.height;break;case'bottom':finalResult.coord.top=helper.geo.origin.windowOffset.bottom+finalResult.distance.vertical;break;}
if(finalResult.container=='window'){if(finalResult.side=='top'||finalResult.side=='bottom'){if(finalResult.coord.left<0){if(helper.geo.origin.windowOffset.right-this.__options.minIntersection>=0){finalResult.coord.left=0;}
else{finalResult.coord.left=helper.geo.origin.windowOffset.right-this.__options.minIntersection-1;}}
else if(finalResult.coord.left>helper.geo.window.size.width-finalResult.size.width){if(helper.geo.origin.windowOffset.left+this.__options.minIntersection<=helper.geo.window.size.width){finalResult.coord.left=helper.geo.window.size.width-finalResult.size.width;}
else{finalResult.coord.left=helper.geo.origin.windowOffset.left+this.__options.minIntersection+1-finalResult.size.width;}}}
else{if(finalResult.coord.top<0){if(helper.geo.origin.windowOffset.bottom-this.__options.minIntersection>=0){finalResult.coord.top=0;}
else{finalResult.coord.top=helper.geo.origin.windowOffset.bottom-this.__options.minIntersection-1;}}
else if(finalResult.coord.top>helper.geo.window.size.height-finalResult.size.height){if(helper.geo.origin.windowOffset.top+this.__options.minIntersection<=helper.geo.window.size.height){finalResult.coord.top=helper.geo.window.size.height-finalResult.size.height;}
else{finalResult.coord.top=helper.geo.origin.windowOffset.top+this.__options.minIntersection+1-finalResult.size.height;}}}}
else{if(finalResult.coord.left>helper.geo.window.size.width-finalResult.size.width){finalResult.coord.left=helper.geo.window.size.width-finalResult.size.width;}
if(finalResult.coord.left<0){finalResult.coord.left=0;}}
self.__sideChange($clone,finalResult.side);helper.tooltipClone=$clone[0];helper.tooltipParent=self.__instance.option('parent').parent[0];helper.mode=finalResult.mode;helper.whole=finalResult.whole;helper.origin=self.__instance._$origin[0];helper.tooltip=self.__instance._$tooltip[0];delete finalResult.container;delete finalResult.fits;delete finalResult.mode;delete finalResult.outerSize;delete finalResult.whole;finalResult.distance=finalResult.distance.horizontal||finalResult.distance.vertical;var finalResultClone=$.extend(true,{},finalResult);self.__instance._trigger({edit:function(result){finalResult=result;},event:event,helper:helper,position:finalResultClone,type:'position'});if(self.__options.functionPosition){var result=self.__options.functionPosition.call(self,self.__instance,helper,finalResultClone);if(result)finalResult=result;}
ruler.destroy();var arrowCoord,maxVal;if(finalResult.side=='top'||finalResult.side=='bottom'){arrowCoord={prop:'left',val:finalResult.target-finalResult.coord.left};maxVal=finalResult.size.width-this.__options.minIntersection;}
else{arrowCoord={prop:'top',val:finalResult.target-finalResult.coord.top};maxVal=finalResult.size.height-this.__options.minIntersection;}
if(arrowCoord.val<this.__options.minIntersection){arrowCoord.val=this.__options.minIntersection;}
else if(arrowCoord.val>maxVal){arrowCoord.val=maxVal;}
var originParentOffset;if(helper.geo.origin.fixedLineage){originParentOffset=helper.geo.origin.windowOffset;}
else{originParentOffset={left:helper.geo.origin.windowOffset.left+helper.geo.window.scroll.left,top:helper.geo.origin.windowOffset.top+helper.geo.window.scroll.top};}
finalResult.coord={left:originParentOffset.left+(finalResult.coord.left-helper.geo.origin.windowOffset.left),top:originParentOffset.top+(finalResult.coord.top-helper.geo.origin.windowOffset.top)};self.__sideChange(self.__instance._$tooltip,finalResult.side);if(helper.geo.origin.fixedLineage){self.__instance._$tooltip.css('position','fixed');}
else{self.__instance._$tooltip.css('position','');}
self.__instance._$tooltip.css({left:finalResult.coord.left,top:finalResult.coord.top,height:finalResult.size.height,width:finalResult.size.width}).find('.tooltipster-arrow').css({'left':'','top':''}).css(arrowCoord.prop,arrowCoord.val);self.__instance._$tooltip.appendTo(self.__instance.option('parent'));self.__instance._trigger({type:'repositioned',event:event,position:finalResult});},__sideChange:function($obj,side){$obj.removeClass('tooltipster-bottom').removeClass('tooltipster-left').removeClass('tooltipster-right').removeClass('tooltipster-top').addClass('tooltipster-'+side);},__targetFind:function(helper){var target={},rects=this.__instance._$origin[0].getClientRects();if(rects.length>1){var opacity=this.__instance._$origin.css('opacity');if(opacity==1){this.__instance._$origin.css('opacity',0.99);rects=this.__instance._$origin[0].getClientRects();this.__instance._$origin.css('opacity',1);}}
if(rects.length<2){target.top=Math.floor(helper.geo.origin.windowOffset.left+(helper.geo.origin.size.width / 2));target.bottom=target.top;target.left=Math.floor(helper.geo.origin.windowOffset.top+(helper.geo.origin.size.height / 2));target.right=target.left;}
else{var targetRect=rects[0];target.top=Math.floor(targetRect.left+(targetRect.right-targetRect.left)/ 2);if(rects.length>2){targetRect=rects[Math.ceil(rects.length / 2)-1];}
else{targetRect=rects[0];}
target.right=Math.floor(targetRect.top+(targetRect.bottom-targetRect.top)/ 2);targetRect=rects[rects.length-1];target.bottom=Math.floor(targetRect.left+(targetRect.right-targetRect.left)/ 2);if(rects.length>2){targetRect=rects[Math.ceil((rects.length+1)/ 2)-1];}
else{targetRect=rects[rects.length-1];}
target.left=Math.floor(targetRect.top+(targetRect.bottom-targetRect.top)/ 2);}
return target;}}});return $;}));(function(global,factory){if(typeof define==='function'&&define.amd){define(['exports','module'],factory);}else if(typeof exports!=='undefined'&&typeof module!=='undefined'){factory(exports,module);}else{var mod={exports:{}};factory(mod.exports,mod);global.autosize=mod.exports;}})(this,function(exports,module){'use strict';var map=typeof Map==="function"?new Map():(function(){var keys=[];var values=[];return{has:function has(key){return keys.indexOf(key)>-1;},get:function get(key){return values[keys.indexOf(key)];},set:function set(key,value){if(keys.indexOf(key)===-1){keys.push(key);values.push(value);}},'delete':function _delete(key){var index=keys.indexOf(key);if(index>-1){keys.splice(index,1);values.splice(index,1);}}};})();var createEvent=function createEvent(name){return new Event(name,{bubbles:true});};try{new Event('test');}catch(e){createEvent=function(name){var evt=document.createEvent('Event');evt.initEvent(name,true,false);return evt;};}
function assign(ta){if(!ta||!ta.nodeName||ta.nodeName!=='TEXTAREA'||map.has(ta))return;var heightOffset=null;var clientWidth=ta.clientWidth;var cachedHeight=null;function init(){var style=window.getComputedStyle(ta,null);if(style.resize==='vertical'){ta.style.resize='none';}else if(style.resize==='both'){ta.style.resize='horizontal';}
if(style.boxSizing==='content-box'){heightOffset=-(parseFloat(style.paddingTop)+parseFloat(style.paddingBottom));}else{heightOffset=parseFloat(style.borderTopWidth)+parseFloat(style.borderBottomWidth);}
if(isNaN(heightOffset)){heightOffset=0;}
update();}
function changeOverflow(value){{var width=ta.style.width;ta.style.width='0px';ta.offsetWidth;ta.style.width=width;}
ta.style.overflowY=value;}
function getParentOverflows(el){var arr=[];while(el&&el.parentNode&&el.parentNode instanceof Element){if(el.parentNode.scrollTop){arr.push({node:el.parentNode,scrollTop:el.parentNode.scrollTop});}
el=el.parentNode;}
return arr;}
function resize(){var originalHeight=ta.style.height;var overflows=getParentOverflows(ta);var docTop=document.documentElement&&document.documentElement.scrollTop;ta.style.height='';var endHeight=ta.scrollHeight+heightOffset;if(ta.scrollHeight===0){ta.style.height=originalHeight;return;}
ta.style.height=endHeight+'px';clientWidth=ta.clientWidth;overflows.forEach(function(el){el.node.scrollTop=el.scrollTop;});if(docTop){document.documentElement.scrollTop=docTop;}}
function update(){resize();var styleHeight=Math.round(parseFloat(ta.style.height));var computed=window.getComputedStyle(ta,null);var actualHeight=computed.boxSizing==='content-box'?Math.round(parseFloat(computed.height)):ta.offsetHeight;if(actualHeight!==styleHeight){if(computed.overflowY==='hidden'){changeOverflow('scroll');resize();actualHeight=computed.boxSizing==='content-box'?Math.round(parseFloat(window.getComputedStyle(ta,null).height)):ta.offsetHeight;}}else{if(computed.overflowY!=='hidden'){changeOverflow('hidden');resize();actualHeight=computed.boxSizing==='content-box'?Math.round(parseFloat(window.getComputedStyle(ta,null).height)):ta.offsetHeight;}}
if(cachedHeight!==actualHeight){cachedHeight=actualHeight;var evt=createEvent('autosize:resized');try{ta.dispatchEvent(evt);}catch(err){}}}
var pageResize=function pageResize(){if(ta.clientWidth!==clientWidth){update();}};var destroy=(function(style){window.removeEventListener('resize',pageResize,false);ta.removeEventListener('input',update,false);ta.removeEventListener('keyup',update,false);ta.removeEventListener('autosize:destroy',destroy,false);ta.removeEventListener('autosize:update',update,false);Object.keys(style).forEach(function(key){ta.style[key]=style[key];});map['delete'](ta);}).bind(ta,{height:ta.style.height,resize:ta.style.resize,overflowY:ta.style.overflowY,overflowX:ta.style.overflowX,wordWrap:ta.style.wordWrap});ta.addEventListener('autosize:destroy',destroy,false);if('onpropertychange'in ta&&'oninput'in ta){ta.addEventListener('keyup',update,false);}
window.addEventListener('resize',pageResize,false);ta.addEventListener('input',update,false);ta.addEventListener('autosize:update',update,false);ta.style.overflowX='hidden';ta.style.wordWrap='break-word';map.set(ta,{destroy:destroy,update:update});init();}
function destroy(ta){var methods=map.get(ta);if(methods){methods.destroy();}}
function update(ta){var methods=map.get(ta);if(methods){methods.update();}}
var autosize=null;if(typeof window==='undefined'||typeof window.getComputedStyle!=='function'){autosize=function(el){return el;};autosize.destroy=function(el){return el;};autosize.update=function(el){return el;};}else{autosize=function(el,options){if(el){Array.prototype.forEach.call(el.length?el:[el],function(x){return assign(x,options);});}
return el;};autosize.destroy=function(el){if(el){Array.prototype.forEach.call(el.length?el:[el],destroy);}
return el;};autosize.update=function(el){if(el){Array.prototype.forEach.call(el.length?el:[el],update);}
return el;};}
module.exports=autosize;});(function($){$.fn.autoResize=function(){this.each(function(){return autosize($(this));});};$.fn.refresh_auto_resize=function(){this.each(function(){var evt=document.createEvent('Event');evt.initEvent('autosize:update',true,false);$(this).get(0).dispatchEvent(evt);});};}(jQuery));(function($){$.PaginationCalculator=function(maxentries,opts){this.maxentries=maxentries;this.opts=opts;};$.extend($.PaginationCalculator.prototype,{numPages:function(){return Math.ceil(this.maxentries/this.opts.items_per_page);},getInterval:function(current_page){var ne_half=Math.floor(this.opts.num_display_entries/2);var np=this.numPages();var upper_limit=np-this.opts.num_display_entries;var start=current_page>ne_half?Math.max(Math.min(current_page-ne_half,upper_limit),0):0;var end=current_page>ne_half?Math.min(current_page+ne_half+(this.opts.num_display_entries%2),np):Math.min(this.opts.num_display_entries,np);return{start:start,end:end};}});$.PaginationRenderers={};$.PaginationRenderers.defaultRenderer=function(maxentries,opts){this.maxentries=maxentries;this.opts=opts;this.pc=new $.PaginationCalculator(maxentries,opts);};$.extend($.PaginationRenderers.defaultRenderer.prototype,{createLink:function(page_id,current_page,appendopts){var lnk,np=this.pc.numPages();page_id=page_id<0?0:(page_id<np?page_id:np-1);appendopts=$.extend({text:page_id+1,classes:""},appendopts||{});if(page_id==current_page){lnk=$("<span class='current'>"+appendopts.text+"</span>");}
else
{lnk=$("<a>"+appendopts.text+"</a>").attr('href',this.opts.link_to.replace(/__id__/,page_id));}
if(appendopts.classes){lnk.addClass(appendopts.classes);}
if(appendopts.rel){lnk.attr('rel',appendopts.rel);}
lnk.data('page_id',page_id);return lnk;},appendRange:function(container,current_page,start,end,opts){var i;for(i=start;i<end;i++){this.createLink(i,current_page,opts).appendTo(container);}},getLinks:function(current_page,eventHandler){var begin,end,interval=this.pc.getInterval(current_page),np=this.pc.numPages(),fragment=$("<div class='pagination'></div>");if(this.opts.prev_text&&(current_page>0||this.opts.prev_show_always)){fragment.append(this.createLink(current_page-1,current_page,{text:this.opts.prev_text,classes:"prev",rel:"prev"}));}
if(interval.start>0&&this.opts.num_edge_entries>0)
{end=Math.min(this.opts.num_edge_entries,interval.start);this.appendRange(fragment,current_page,0,end,{classes:'sp'});if(this.opts.num_edge_entries<interval.start&&this.opts.ellipse_text)
{$("<span>"+this.opts.ellipse_text+"</span>").appendTo(fragment);}}
this.appendRange(fragment,current_page,interval.start,interval.end);if(interval.end<np&&this.opts.num_edge_entries>0)
{if(np-this.opts.num_edge_entries>interval.end&&this.opts.ellipse_text)
{$("<span>"+this.opts.ellipse_text+"</span>").appendTo(fragment);}
begin=Math.max(np-this.opts.num_edge_entries,interval.end);this.appendRange(fragment,current_page,begin,np,{classes:'ep'});}
if(this.opts.next_text&&(current_page<np-1||this.opts.next_show_always)){fragment.append(this.createLink(current_page+1,current_page,{text:this.opts.next_text,classes:"next",rel:"next"}));}
$('a',fragment).click(eventHandler);return fragment;}});$.fn.pagination=function(maxentries,opts){opts=$.extend({items_per_page:10,num_display_entries:11,current_page:0,num_edge_entries:0,link_to:"#",prev_text:"Prev",next_text:"Next",ellipse_text:"...",prev_show_always:true,next_show_always:true,renderer:"defaultRenderer",show_if_single_page:false,load_first_page:false,callback:function(){return false;}},opts||{});var containers=this,renderer,links,current_page;function paginationClickHandler(evt){var links,new_current_page=$(evt.target).data('page_id'),continuePropagation=selectPage(new_current_page);if(!continuePropagation){evt.stopPropagation();}
return continuePropagation;}
function selectPage(new_current_page){containers.data('current_page',new_current_page);links=renderer.getLinks(new_current_page,paginationClickHandler);containers.empty();links.appendTo(containers);var continuePropagation=opts.callback(new_current_page,containers);return continuePropagation;}
current_page=parseInt(opts.current_page,10);containers.data('current_page',current_page);maxentries=(!maxentries||maxentries<0)?1:maxentries;opts.items_per_page=(!opts.items_per_page||opts.items_per_page<0)?1:opts.items_per_page;if(!$.PaginationRenderers[opts.renderer])
{throw new ReferenceError("Pagination renderer '"+opts.renderer+"' was not found in jQuery.PaginationRenderers object.");}
renderer=new $.PaginationRenderers[opts.renderer](maxentries,opts);var pc=new $.PaginationCalculator(maxentries,opts);var np=pc.numPages();containers.off('setPage').on('setPage',{numPages:np},function(evt,page_id){if(page_id>=0&&page_id<evt.data.numPages){selectPage(page_id);return false;}});containers.off('prevPage').on('prevPage',function(evt){var current_page=$(this).data('current_page');if(current_page>0){selectPage(current_page-1);}
return false;});containers.off('nextPage').on('nextPage',{numPages:np},function(evt){var current_page=$(this).data('current_page');if(current_page<evt.data.numPages-1){selectPage(current_page+1);}
return false;});containers.off('currentPage').on('currentPage',function(){var current_page=$(this).data('current_page');selectPage(current_page);return false;});links=renderer.getLinks(current_page,paginationClickHandler);containers.empty();if(np>1||opts.show_if_single_page){links.appendTo(containers);}
if(opts.load_first_page){opts.callback(current_page,containers);}};})(jQuery);(function(window,factory){var lazySizes=factory(window,window.document,Date);window.lazySizes=lazySizes;if(typeof module=='object'&&module.exports){module.exports=lazySizes;}}(typeof window!='undefined'?window:{},function l(window,document,Date){'use strict';var lazysizes,lazySizesCfg;(function(){var prop;var lazySizesDefaults={lazyClass:'lazyload',loadedClass:'lazyloaded',loadingClass:'lazyloading',preloadClass:'lazypreload',errorClass:'lazyerror',autosizesClass:'lazyautosizes',fastLoadedClass:'ls-is-cached',iframeLoadMode:0,srcAttr:'data-src',srcsetAttr:'data-srcset',sizesAttr:'data-sizes',minSize:40,customMedia:{},init:true,expFactor:1.5,hFac:0.8,loadMode:2,loadHidden:true,ricTimeout:0,throttleDelay:125,};lazySizesCfg=window.lazySizesConfig||window.lazysizesConfig||{};for(prop in lazySizesDefaults){if(!(prop in lazySizesCfg)){lazySizesCfg[prop]=lazySizesDefaults[prop];}}})();if(!document||!document.getElementsByClassName){return{init:function(){},cfg:lazySizesCfg,noSupport:true,};}
var docElem=document.documentElement;var supportPicture=window.HTMLPictureElement;var _addEventListener='addEventListener';var _getAttribute='getAttribute';var addEventListener=window[_addEventListener].bind(window);var setTimeout=window.setTimeout;var requestAnimationFrame=window.requestAnimationFrame||setTimeout;var requestIdleCallback=window.requestIdleCallback;var regPicture=/^picture$/i;var loadEvents=['load','error','lazyincluded','_lazyloaded'];var regClassCache={};var forEach=Array.prototype.forEach;var hasClass=function(ele,cls){if(!regClassCache[cls]){regClassCache[cls]=new RegExp('(\\s|^)'+cls+'(\\s|$)');}
return regClassCache[cls].test(ele[_getAttribute]('class')||'')&&regClassCache[cls];};var addClass=function(ele,cls){if(!hasClass(ele,cls)){ele.setAttribute('class',(ele[_getAttribute]('class')||'').trim()+' '+cls);}};var removeClass=function(ele,cls){var reg;if((reg=hasClass(ele,cls))){ele.setAttribute('class',(ele[_getAttribute]('class')||'').replace(reg,' '));}};var addRemoveLoadEvents=function(dom,fn,add){var action=add?_addEventListener:'removeEventListener';if(add){addRemoveLoadEvents(dom,fn);}
loadEvents.forEach(function(evt){dom[action](evt,fn);});};var triggerEvent=function(elem,name,detail,noBubbles,noCancelable){var event=document.createEvent('Event');if(!detail){detail={};}
detail.instance=lazysizes;event.initEvent(name,!noBubbles,!noCancelable);event.detail=detail;elem.dispatchEvent(event);return event;};var updatePolyfill=function(el,full){var polyfill;if(!supportPicture&&(polyfill=(window.picturefill||lazySizesCfg.pf))){if(full&&full.src&&!el[_getAttribute]('srcset')){el.setAttribute('srcset',full.src);}
polyfill({reevaluate:true,elements:[el]});}else if(full&&full.src){el.src=full.src;}};var getCSS=function(elem,style){return(getComputedStyle(elem,null)||{})[style];};var getWidth=function(elem,parent,width){width=width||elem.offsetWidth;while(width<lazySizesCfg.minSize&&parent&&!elem._lazysizesWidth){width=parent.offsetWidth;parent=parent.parentNode;}
return width;};var rAF=(function(){var running,waiting;var firstFns=[];var secondFns=[];var fns=firstFns;var run=function(){var runFns=fns;fns=firstFns.length?secondFns:firstFns;running=true;waiting=false;while(runFns.length){runFns.shift()();}
running=false;};var rafBatch=function(fn,queue){if(running&&!queue){fn.apply(this,arguments);}else{fns.push(fn);if(!waiting){waiting=true;(document.hidden?setTimeout:requestAnimationFrame)(run);}}};rafBatch._lsFlush=run;return rafBatch;})();var rAFIt=function(fn,simple){return simple?function(){rAF(fn);}:function(){var that=this;var args=arguments;rAF(function(){fn.apply(that,args);});};};var throttle=function(fn){var running;var lastTime=0;var gDelay=lazySizesCfg.throttleDelay;var rICTimeout=lazySizesCfg.ricTimeout;var run=function(){running=false;lastTime=Date.now();fn();};var idleCallback=requestIdleCallback&&rICTimeout>49?function(){requestIdleCallback(run,{timeout:rICTimeout});if(rICTimeout!==lazySizesCfg.ricTimeout){rICTimeout=lazySizesCfg.ricTimeout;}}:rAFIt(function(){setTimeout(run);},true);return function(isPriority){var delay;if((isPriority=isPriority===true)){rICTimeout=33;}
if(running){return;}
running=true;delay=gDelay-(Date.now()-lastTime);if(delay<0){delay=0;}
if(isPriority||delay<9){idleCallback();}else{setTimeout(idleCallback,delay);}};};var debounce=function(func){var timeout,timestamp;var wait=99;var run=function(){timeout=null;func();};var later=function(){var last=Date.now()-timestamp;if(last<wait){setTimeout(later,wait-last);}else{(requestIdleCallback||run)(run);}};return function(){timestamp=Date.now();if(!timeout){timeout=setTimeout(later,wait);}};};var loader=(function(){var preloadElems,isCompleted,resetPreloadingTimer,loadMode,started;var eLvW,elvH,eLtop,eLleft,eLright,eLbottom,isBodyHidden;var regImg=/^img$/i;var regIframe=/^iframe$/i;var supportScroll=('onscroll'in window)&&!(/(gle|ing)bot/.test(navigator.userAgent));var shrinkExpand=0;var currentExpand=0;var isLoading=0;var lowRuns=-1;var resetPreloading=function(e){isLoading--;if(!e||isLoading<0||!e.target){isLoading=0;}};var isVisible=function(elem){if(isBodyHidden==null){isBodyHidden=getCSS(document.body,'visibility')=='hidden';}
return isBodyHidden||!(getCSS(elem.parentNode,'visibility')=='hidden'&&getCSS(elem,'visibility')=='hidden');};var isNestedVisible=function(elem,elemExpand){var outerRect;var parent=elem;var visible=isVisible(elem);eLtop-=elemExpand;eLbottom+=elemExpand;eLleft-=elemExpand;eLright+=elemExpand;while(visible&&(parent=parent.offsetParent)&&parent!=document.body&&parent!=docElem){visible=((getCSS(parent,'opacity')||1)>0);if(visible&&getCSS(parent,'overflow')!='visible'){outerRect=parent.getBoundingClientRect();visible=eLright>outerRect.left&&eLleft<outerRect.right&&eLbottom>outerRect.top-1&&eLtop<outerRect.bottom+1;}}
return visible;};var checkElements=function(){var eLlen,i,rect,autoLoadElem,loadedSomething,elemExpand,elemNegativeExpand,elemExpandVal,beforeExpandVal,defaultExpand,preloadExpand,hFac;var lazyloadElems=lazysizes.elements;if((loadMode=lazySizesCfg.loadMode)&&isLoading<8&&(eLlen=lazyloadElems.length)){i=0;lowRuns++;for(;i<eLlen;i++){if(!lazyloadElems[i]||lazyloadElems[i]._lazyRace){continue;}
if(!supportScroll||(lazysizes.prematureUnveil&&lazysizes.prematureUnveil(lazyloadElems[i]))){unveilElement(lazyloadElems[i]);continue;}
if(!(elemExpandVal=lazyloadElems[i][_getAttribute]('data-expand'))||!(elemExpand=elemExpandVal*1)){elemExpand=currentExpand;}
if(!defaultExpand){defaultExpand=(!lazySizesCfg.expand||lazySizesCfg.expand<1)?docElem.clientHeight>500&&docElem.clientWidth>500?500:370:lazySizesCfg.expand;lazysizes._defEx=defaultExpand;preloadExpand=defaultExpand*lazySizesCfg.expFactor;hFac=lazySizesCfg.hFac;isBodyHidden=null;if(currentExpand<preloadExpand&&isLoading<1&&lowRuns>2&&loadMode>2&&!document.hidden){currentExpand=preloadExpand;lowRuns=0;}else if(loadMode>1&&lowRuns>1&&isLoading<6){currentExpand=defaultExpand;}else{currentExpand=shrinkExpand;}}
if(beforeExpandVal!==elemExpand){eLvW=innerWidth+(elemExpand*hFac);elvH=innerHeight+elemExpand;elemNegativeExpand=elemExpand*-1;beforeExpandVal=elemExpand;}
rect=lazyloadElems[i].getBoundingClientRect();if((eLbottom=rect.bottom)>=elemNegativeExpand&&(eLtop=rect.top)<=elvH&&(eLright=rect.right)>=elemNegativeExpand*hFac&&(eLleft=rect.left)<=eLvW&&(eLbottom||eLright||eLleft||eLtop)&&(lazySizesCfg.loadHidden||isVisible(lazyloadElems[i]))&&((isCompleted&&isLoading<3&&!elemExpandVal&&(loadMode<3||lowRuns<4))||isNestedVisible(lazyloadElems[i],elemExpand))){unveilElement(lazyloadElems[i]);loadedSomething=true;if(isLoading>9){break;}}else if(!loadedSomething&&isCompleted&&!autoLoadElem&&isLoading<4&&lowRuns<4&&loadMode>2&&(preloadElems[0]||lazySizesCfg.preloadAfterLoad)&&(preloadElems[0]||(!elemExpandVal&&((eLbottom||eLright||eLleft||eLtop)||lazyloadElems[i][_getAttribute](lazySizesCfg.sizesAttr)!='auto')))){autoLoadElem=preloadElems[0]||lazyloadElems[i];}}
if(autoLoadElem&&!loadedSomething){unveilElement(autoLoadElem);}}};var throttledCheckElements=throttle(checkElements);var switchLoadingClass=function(e){var elem=e.target;if(elem._lazyCache){delete elem._lazyCache;return;}
resetPreloading(e);addClass(elem,lazySizesCfg.loadedClass);removeClass(elem,lazySizesCfg.loadingClass);addRemoveLoadEvents(elem,rafSwitchLoadingClass);triggerEvent(elem,'lazyloaded');};var rafedSwitchLoadingClass=rAFIt(switchLoadingClass);var rafSwitchLoadingClass=function(e){rafedSwitchLoadingClass({target:e.target});};var changeIframeSrc=function(elem,src){var loadMode=elem.getAttribute('data-load-mode')||lazySizesCfg.iframeLoadMode;if(loadMode==0){elem.contentWindow.location.replace(src);}else if(loadMode==1){elem.src=src;}};var handleSources=function(source){var customMedia;var sourceSrcset=source[_getAttribute](lazySizesCfg.srcsetAttr);if((customMedia=lazySizesCfg.customMedia[source[_getAttribute]('data-media')||source[_getAttribute]('media')])){source.setAttribute('media',customMedia);}
if(sourceSrcset){source.setAttribute('srcset',sourceSrcset);}};var lazyUnveil=rAFIt(function(elem,detail,isAuto,sizes,isImg){var src,srcset,parent,isPicture,event,firesLoad;if(!(event=triggerEvent(elem,'lazybeforeunveil',detail)).defaultPrevented){if(sizes){if(isAuto){addClass(elem,lazySizesCfg.autosizesClass);}else{elem.setAttribute('sizes',sizes);}}
srcset=elem[_getAttribute](lazySizesCfg.srcsetAttr);src=elem[_getAttribute](lazySizesCfg.srcAttr);if(isImg){parent=elem.parentNode;isPicture=parent&&regPicture.test(parent.nodeName||'');}
firesLoad=detail.firesLoad||(('src'in elem)&&(srcset||src||isPicture));event={target:elem};addClass(elem,lazySizesCfg.loadingClass);if(firesLoad){clearTimeout(resetPreloadingTimer);resetPreloadingTimer=setTimeout(resetPreloading,2500);addRemoveLoadEvents(elem,rafSwitchLoadingClass,true);}
if(isPicture){forEach.call(parent.getElementsByTagName('source'),handleSources);}
if(srcset){elem.setAttribute('srcset',srcset);}else if(src&&!isPicture){if(regIframe.test(elem.nodeName)){changeIframeSrc(elem,src);}else{elem.src=src;}}
if(isImg&&(srcset||isPicture)){updatePolyfill(elem,{src:src});}}
if(elem._lazyRace){delete elem._lazyRace;}
removeClass(elem,lazySizesCfg.lazyClass);rAF(function(){var isLoaded=elem.complete&&elem.naturalWidth>1;if(!firesLoad||isLoaded){if(isLoaded){addClass(elem,lazySizesCfg.fastLoadedClass);}
switchLoadingClass(event);elem._lazyCache=true;setTimeout(function(){if('_lazyCache'in elem){delete elem._lazyCache;}},9);}
if(elem.loading=='lazy'){isLoading--;}},true);});var unveilElement=function(elem){if(elem._lazyRace){return;}
var detail;var isImg=regImg.test(elem.nodeName);var sizes=isImg&&(elem[_getAttribute](lazySizesCfg.sizesAttr)||elem[_getAttribute]('sizes'));var isAuto=sizes=='auto';if((isAuto||!isCompleted)&&isImg&&(elem[_getAttribute]('src')||elem.srcset)&&!elem.complete&&!hasClass(elem,lazySizesCfg.errorClass)&&hasClass(elem,lazySizesCfg.lazyClass)){return;}
detail=triggerEvent(elem,'lazyunveilread').detail;if(isAuto){autoSizer.updateElem(elem,true,elem.offsetWidth);}
elem._lazyRace=true;isLoading++;lazyUnveil(elem,detail,isAuto,sizes,isImg);};var afterScroll=debounce(function(){lazySizesCfg.loadMode=3;throttledCheckElements();});var altLoadmodeScrollListner=function(){if(lazySizesCfg.loadMode==3){lazySizesCfg.loadMode=2;}
afterScroll();};var onload=function(){if(isCompleted){return;}
if(Date.now()-started<999){setTimeout(onload,999);return;}
isCompleted=true;lazySizesCfg.loadMode=3;throttledCheckElements();addEventListener('scroll',altLoadmodeScrollListner,true);};return{_:function(){started=Date.now();lazysizes.elements=document.getElementsByClassName(lazySizesCfg.lazyClass);preloadElems=document.getElementsByClassName(lazySizesCfg.lazyClass+' '+lazySizesCfg.preloadClass);addEventListener('scroll',throttledCheckElements,true);addEventListener('resize',throttledCheckElements,true);addEventListener('pageshow',function(e){if(e.persisted){var loadingElements=document.querySelectorAll('.'+lazySizesCfg.loadingClass);if(loadingElements.length&&loadingElements.forEach){requestAnimationFrame(function(){loadingElements.forEach(function(img){if(img.complete){unveilElement(img);}});});}}});if(window.MutationObserver){new MutationObserver(throttledCheckElements).observe(docElem,{childList:true,subtree:true,attributes:true});}else{docElem[_addEventListener]('DOMNodeInserted',throttledCheckElements,true);docElem[_addEventListener]('DOMAttrModified',throttledCheckElements,true);setInterval(throttledCheckElements,999);}
addEventListener('hashchange',throttledCheckElements,true);['focus','mouseover','click','load','transitionend','animationend'].forEach(function(name){document[_addEventListener](name,throttledCheckElements,true);});if((/d$|^c/.test(document.readyState))){onload();}else{addEventListener('load',onload);document[_addEventListener]('DOMContentLoaded',throttledCheckElements);setTimeout(onload,20000);}
if(lazysizes.elements.length){checkElements();rAF._lsFlush();}else{throttledCheckElements();}},checkElems:throttledCheckElements,unveil:unveilElement,_aLSL:altLoadmodeScrollListner,};})();var autoSizer=(function(){var autosizesElems;var sizeElement=rAFIt(function(elem,parent,event,width){var sources,i,len;elem._lazysizesWidth=width;width+='px';elem.setAttribute('sizes',width);if(regPicture.test(parent.nodeName||'')){sources=parent.getElementsByTagName('source');for(i=0,len=sources.length;i<len;i++){sources[i].setAttribute('sizes',width);}}
if(!event.detail.dataAttr){updatePolyfill(elem,event.detail);}});var getSizeElement=function(elem,dataAttr,width){var event;var parent=elem.parentNode;if(parent){width=getWidth(elem,parent,width);event=triggerEvent(elem,'lazybeforesizes',{width:width,dataAttr:!!dataAttr});if(!event.defaultPrevented){width=event.detail.width;if(width&&width!==elem._lazysizesWidth){sizeElement(elem,parent,event,width);}}}};var updateElementsSizes=function(){var i;var len=autosizesElems.length;if(len){i=0;for(;i<len;i++){getSizeElement(autosizesElems[i]);}}};var debouncedUpdateElementsSizes=debounce(updateElementsSizes);return{_:function(){autosizesElems=document.getElementsByClassName(lazySizesCfg.autosizesClass);addEventListener('resize',debouncedUpdateElementsSizes);},checkElems:debouncedUpdateElementsSizes,updateElem:getSizeElement};})();var init=function(){if(!init.i&&document.getElementsByClassName){init.i=true;autoSizer._();loader._();}};setTimeout(function(){if(lazySizesCfg.init){init();}});lazysizes={cfg:lazySizesCfg,autoSizer:autoSizer,loader:loader,init:init,uP:updatePolyfill,aC:addClass,rC:removeClass,hC:hasClass,fire:triggerEvent,gW:getWidth,rAF:rAF,};return lazysizes;}));(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?module.exports=factory():typeof define==='function'&&define.amd?define(factory):(global=typeof globalThis!=='undefined'?globalThis:global||self,global.SignaturePad=factory());}(this,(function(){'use strict';var Point=(function(){function Point(x,y,time){this.x=x;this.y=y;this.time=time||Date.now();}
Point.prototype.distanceTo=function(start){return Math.sqrt(Math.pow(this.x-start.x,2)+Math.pow(this.y-start.y,2));};Point.prototype.equals=function(other){return this.x===other.x&&this.y===other.y&&this.time===other.time;};Point.prototype.velocityFrom=function(start){return this.time!==start.time?this.distanceTo(start)/(this.time-start.time):0;};return Point;}());var Bezier=(function(){function Bezier(startPoint,control2,control1,endPoint,startWidth,endWidth){this.startPoint=startPoint;this.control2=control2;this.control1=control1;this.endPoint=endPoint;this.startWidth=startWidth;this.endWidth=endWidth;}
Bezier.fromPoints=function(points,widths){var c2=this.calculateControlPoints(points[0],points[1],points[2]).c2;var c3=this.calculateControlPoints(points[1],points[2],points[3]).c1;return new Bezier(points[1],c2,c3,points[2],widths.start,widths.end);};Bezier.calculateControlPoints=function(s1,s2,s3){var dx1=s1.x-s2.x;var dy1=s1.y-s2.y;var dx2=s2.x-s3.x;var dy2=s2.y-s3.y;var m1={x:(s1.x+s2.x)/ 2.0,y:(s1.y+s2.y)/ 2.0};var m2={x:(s2.x+s3.x)/ 2.0,y:(s2.y+s3.y)/ 2.0};var l1=Math.sqrt(dx1*dx1+dy1*dy1);var l2=Math.sqrt(dx2*dx2+dy2*dy2);var dxm=m1.x-m2.x;var dym=m1.y-m2.y;var k=l2 /(l1+l2);var cm={x:m2.x+dxm*k,y:m2.y+dym*k};var tx=s2.x-cm.x;var ty=s2.y-cm.y;return{c1:new Point(m1.x+tx,m1.y+ty),c2:new Point(m2.x+tx,m2.y+ty)};};Bezier.prototype.length=function(){var steps=10;var length=0;var px;var py;for(var i=0;i<=steps;i+=1){var t=i / steps;var cx=this.point(t,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x);var cy=this.point(t,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(i>0){var xdiff=cx-px;var ydiff=cy-py;length+=Math.sqrt(xdiff*xdiff+ydiff*ydiff);}
px=cx;py=cy;}
return length;};Bezier.prototype.point=function(t,start,c1,c2,end){return(start*(1.0-t)*(1.0-t)*(1.0-t))
+(3.0*c1*(1.0-t)*(1.0-t)*t)
+(3.0*c2*(1.0-t)*t*t)
+(end*t*t*t);};return Bezier;}());function throttle(fn,wait){if(wait===void 0){wait=250;}
var previous=0;var timeout=null;var result;var storedContext;var storedArgs;var later=function(){previous=Date.now();timeout=null;result=fn.apply(storedContext,storedArgs);if(!timeout){storedContext=null;storedArgs=[];}};return function wrapper(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i];}
var now=Date.now();var remaining=wait-(now-previous);storedContext=this;storedArgs=args;if(remaining<=0||remaining>wait){if(timeout){clearTimeout(timeout);timeout=null;}
previous=now;result=fn.apply(storedContext,storedArgs);if(!timeout){storedContext=null;storedArgs=[];}}
else if(!timeout){timeout=window.setTimeout(later,remaining);}
return result;};}
var SignaturePad=(function(){function SignaturePad(canvas,options){var _this=this;if(options===void 0){options={};}
this.canvas=canvas;this.options=options;this._handleMouseDown=function(event){if(event.which===1){_this._mouseButtonDown=true;_this._strokeBegin(event);}};this._handleMouseMove=function(event){if(_this._mouseButtonDown){_this._strokeMoveUpdate(event);}};this._handleMouseUp=function(event){if(event.which===1&&_this._mouseButtonDown){_this._mouseButtonDown=false;_this._strokeEnd(event);}};this._handleTouchStart=function(event){event.preventDefault();if(event.targetTouches.length===1){var touch=event.changedTouches[0];_this._strokeBegin(touch);}};this._handleTouchMove=function(event){event.preventDefault();var touch=event.targetTouches[0];_this._strokeMoveUpdate(touch);};this._handleTouchEnd=function(event){var wasCanvasTouched=event.target===_this.canvas;if(wasCanvasTouched){event.preventDefault();var touch=event.changedTouches[0];_this._strokeEnd(touch);}};this.velocityFilterWeight=options.velocityFilterWeight||0.7;this.minWidth=options.minWidth||0.5;this.maxWidth=options.maxWidth||2.5;this.throttle=('throttle'in options?options.throttle:16);this.minDistance=('minDistance'in options?options.minDistance:5);this.dotSize=options.dotSize||function dotSize(){return(this.minWidth+this.maxWidth)/ 2;};this.penColor=options.penColor||'black';this.backgroundColor=options.backgroundColor||'rgba(0,0,0,0)';this.onBegin=options.onBegin;this.onEnd=options.onEnd;this._strokeMoveUpdate=this.throttle?throttle(SignaturePad.prototype._strokeUpdate,this.throttle):SignaturePad.prototype._strokeUpdate;this._ctx=canvas.getContext('2d');this.clear();this.on();}
SignaturePad.prototype.clear=function(){var _a=this,ctx=_a._ctx,canvas=_a.canvas;ctx.fillStyle=this.backgroundColor;ctx.clearRect(0,0,canvas.width,canvas.height);ctx.fillRect(0,0,canvas.width,canvas.height);this._data=[];this._reset();this._isEmpty=true;};SignaturePad.prototype.fromDataURL=function(dataUrl,options,callback){var _this=this;if(options===void 0){options={};}
var image=new Image();var ratio=options.ratio||window.devicePixelRatio||1;var width=options.width||this.canvas.width / ratio;var height=options.height||this.canvas.height / ratio;this._reset();image.onload=function(){_this._ctx.drawImage(image,0,0,width,height);if(callback){callback();}};image.onerror=function(error){if(callback){callback(error);}};image.src=dataUrl;this._isEmpty=false;};SignaturePad.prototype.toDataURL=function(type,encoderOptions){if(type===void 0){type='image/png';}
switch(type){case'image/svg+xml':return this._toSVG();default:return this.canvas.toDataURL(type,encoderOptions);}};SignaturePad.prototype.on=function(){this.canvas.style.touchAction='none';this.canvas.style.msTouchAction='none';if(window.PointerEvent){this._handlePointerEvents();}
else{this._handleMouseEvents();if('ontouchstart'in window){this._handleTouchEvents();}}};SignaturePad.prototype.off=function(){this.canvas.style.touchAction='auto';this.canvas.style.msTouchAction='auto';this.canvas.removeEventListener('pointerdown',this._handleMouseDown);this.canvas.removeEventListener('pointermove',this._handleMouseMove);document.removeEventListener('pointerup',this._handleMouseUp);this.canvas.removeEventListener('mousedown',this._handleMouseDown);this.canvas.removeEventListener('mousemove',this._handleMouseMove);document.removeEventListener('mouseup',this._handleMouseUp);this.canvas.removeEventListener('touchstart',this._handleTouchStart);this.canvas.removeEventListener('touchmove',this._handleTouchMove);this.canvas.removeEventListener('touchend',this._handleTouchEnd);};SignaturePad.prototype.isEmpty=function(){return this._isEmpty;};SignaturePad.prototype.fromData=function(pointGroups){var _this=this;this.clear();this._fromData(pointGroups,function(_a){var color=_a.color,curve=_a.curve;return _this._drawCurve({color:color,curve:curve});},function(_a){var color=_a.color,point=_a.point;return _this._drawDot({color:color,point:point});});this._data=pointGroups;};SignaturePad.prototype.toData=function(){return this._data;};SignaturePad.prototype.fromFullData=function(data){this.fromData(data.point_data);};SignaturePad.prototype.toFullData=function(){var ratio=Math.max(window.devicePixelRatio||1,1);var final={point_data:this._data,canvas_size_data:{minX:0,minY:0,maxX:this.canvas.width / ratio,maxY:this.canvas.height / ratio}}
return final;};SignaturePad.prototype._strokeBegin=function(event){var newPointGroup={color:this.penColor,points:[]};if(typeof this.onBegin==='function'){this.onBegin(event);}
this._data.push(newPointGroup);this._reset();this._strokeUpdate(event);};SignaturePad.prototype._strokeUpdate=function(event){if(this._data.length===0){this._strokeBegin(event);return;}
var x=event.clientX;var y=event.clientY;var point=this._createPoint(x,y);var lastPointGroup=this._data[this._data.length-1];var lastPoints=lastPointGroup.points;var lastPoint=lastPoints.length>0&&lastPoints[lastPoints.length-1];var isLastPointTooClose=lastPoint?point.distanceTo(lastPoint)<=this.minDistance:false;var color=lastPointGroup.color;if(!lastPoint||!(lastPoint&&isLastPointTooClose)){var curve=this._addPoint(point);if(!lastPoint){this._drawDot({color:color,point:point});}
else if(curve){this._drawCurve({color:color,curve:curve});}
lastPoints.push({time:point.time,x:point.x,y:point.y});}};SignaturePad.prototype._strokeEnd=function(event){this._strokeUpdate(event);if(typeof this.onEnd==='function'){this.onEnd(event);}};SignaturePad.prototype._handlePointerEvents=function(){this._mouseButtonDown=false;this.canvas.addEventListener('pointerdown',this._handleMouseDown);this.canvas.addEventListener('pointermove',this._handleMouseMove);document.addEventListener('pointerup',this._handleMouseUp);};SignaturePad.prototype._handleMouseEvents=function(){this._mouseButtonDown=false;this.canvas.addEventListener('mousedown',this._handleMouseDown);this.canvas.addEventListener('mousemove',this._handleMouseMove);document.addEventListener('mouseup',this._handleMouseUp);};SignaturePad.prototype._handleTouchEvents=function(){this.canvas.addEventListener('touchstart',this._handleTouchStart);this.canvas.addEventListener('touchmove',this._handleTouchMove);this.canvas.addEventListener('touchend',this._handleTouchEnd);};SignaturePad.prototype._reset=function(){this._lastPoints=[];this._lastVelocity=0;this._lastWidth=(this.minWidth+this.maxWidth)/ 2;this._ctx.fillStyle=this.penColor;};SignaturePad.prototype._createPoint=function(x,y){var rect=this.canvas.getBoundingClientRect();return new Point(x-rect.left,y-rect.top,new Date().getTime());};SignaturePad.prototype._addPoint=function(point){var _lastPoints=this._lastPoints;_lastPoints.push(point);if(_lastPoints.length>2){if(_lastPoints.length===3){_lastPoints.unshift(_lastPoints[0]);}
var widths=this._calculateCurveWidths(_lastPoints[1],_lastPoints[2]);var curve=Bezier.fromPoints(_lastPoints,widths);_lastPoints.shift();return curve;}
return null;};SignaturePad.prototype._calculateCurveWidths=function(startPoint,endPoint){var velocity=this.velocityFilterWeight*endPoint.velocityFrom(startPoint)+
(1-this.velocityFilterWeight)*this._lastVelocity;var newWidth=this._strokeWidth(velocity);var widths={end:newWidth,start:this._lastWidth};this._lastVelocity=velocity;this._lastWidth=newWidth;return widths;};SignaturePad.prototype._strokeWidth=function(velocity){return Math.max(this.maxWidth /(velocity+1),this.minWidth);};SignaturePad.prototype._drawCurveSegment=function(x,y,width){var ctx=this._ctx;ctx.moveTo(x,y);ctx.arc(x,y,width,0,2*Math.PI,false);this._isEmpty=false;};SignaturePad.prototype._drawCurve=function(_a){var color=_a.color,curve=_a.curve;var ctx=this._ctx;var widthDelta=curve.endWidth-curve.startWidth;var drawSteps=Math.floor(curve.length())*2;ctx.beginPath();ctx.fillStyle=color;for(var i=0;i<drawSteps;i+=1){var t=i / drawSteps;var tt=t*t;var ttt=tt*t;var u=1-t;var uu=u*u;var uuu=uu*u;var x=uuu*curve.startPoint.x;x+=3*uu*t*curve.control1.x;x+=3*u*tt*curve.control2.x;x+=ttt*curve.endPoint.x;var y=uuu*curve.startPoint.y;y+=3*uu*t*curve.control1.y;y+=3*u*tt*curve.control2.y;y+=ttt*curve.endPoint.y;var width=Math.min(curve.startWidth+ttt*widthDelta,this.maxWidth);this._drawCurveSegment(x,y,width);}
ctx.closePath();ctx.fill();};SignaturePad.prototype._drawDot=function(_a){var color=_a.color,point=_a.point;var ctx=this._ctx;var width=typeof this.dotSize==='function'?this.dotSize():this.dotSize;ctx.beginPath();this._drawCurveSegment(point.x,point.y,width);ctx.closePath();ctx.fillStyle=color;ctx.fill();};SignaturePad.prototype._fromData=function(pointGroups,drawCurve,drawDot){for(var _i=0,pointGroups_1=pointGroups;_i<pointGroups_1.length;_i++){var group=pointGroups_1[_i];var color=group.color,points=group.points;if(points.length>1){for(var j=0;j<points.length;j+=1){var basicPoint=points[j];var point=new Point(basicPoint.x,basicPoint.y,basicPoint.time);this.penColor=color;if(j===0){this._reset();}
var curve=this._addPoint(point);if(curve){drawCurve({color:color,curve:curve});}}}
else{this._reset();drawDot({color:color,point:points[0]});}}};SignaturePad.prototype._toSVG=function(){var _this=this;var pointGroups=this._data;var ratio=Math.max(window.devicePixelRatio||1,1);var minX=0;var minY=0;var maxX=this.canvas.width / ratio;var maxY=this.canvas.height / ratio;var svg=document.createElementNS('http://www.w3.org/2000/svg','svg');svg.setAttribute('width',this.canvas.width.toString());svg.setAttribute('height',this.canvas.height.toString());this._fromData(pointGroups,function(_a){var color=_a.color,curve=_a.curve;var path=document.createElement('path');if(!isNaN(curve.control1.x)&&!isNaN(curve.control1.y)&&!isNaN(curve.control2.x)&&!isNaN(curve.control2.y)){var attr="M "+curve.startPoint.x.toFixed(3)+","+curve.startPoint.y.toFixed(3)+" "+
("C "+curve.control1.x.toFixed(3)+","+curve.control1.y.toFixed(3)+" ")+
(curve.control2.x.toFixed(3)+","+curve.control2.y.toFixed(3)+" ")+
(curve.endPoint.x.toFixed(3)+","+curve.endPoint.y.toFixed(3));path.setAttribute('d',attr);path.setAttribute('stroke-width',(curve.endWidth*2.25).toFixed(3));path.setAttribute('stroke',color);path.setAttribute('fill','none');path.setAttribute('stroke-linecap','round');svg.appendChild(path);}},function(_a){var color=_a.color,point=_a.point;var circle=document.createElement('circle');var dotSize=typeof _this.dotSize==='function'?_this.dotSize():_this.dotSize;circle.setAttribute('r',dotSize.toString());circle.setAttribute('cx',point.x.toString());circle.setAttribute('cy',point.y.toString());circle.setAttribute('fill',color);svg.appendChild(circle);});var prefix='data:image/svg+xml;base64,';var header='<svg'+' xmlns="http://www.w3.org/2000/svg"'+' xmlns:xlink="http://www.w3.org/1999/xlink"'+
(" viewBox=\""+minX+" "+minY+" "+maxX+" "+maxY+"\"")+
(" width=\""+maxX+"\"")+
(" height=\""+maxY+"\"")+'>';var body=svg.innerHTML;if(body===undefined){var dummy=document.createElement('dummy');var nodes=svg.childNodes;dummy.innerHTML='';for(var i=0;i<nodes.length;i+=1){dummy.appendChild(nodes[i].cloneNode(true));}
body=dummy.innerHTML;}
var footer='</svg>';var data=header+body+footer;return prefix+btoa(data);};return SignaturePad;}());return SignaturePad;})));(function(exports,undefined){"use strict";var modules={};function require(ids,callback){var module,defs=[];for(var i=0;i<ids.length;++i){module=modules[ids[i]]||resolve(ids[i]);if(!module){throw'module definition dependecy not found: '+ids[i];}
defs.push(module);}
callback.apply(null,defs);}
function define(id,dependencies,definition){if(typeof id!=='string'){throw'invalid module definition, module id must be defined and be a string';}
if(dependencies===undefined){throw'invalid module definition, dependencies must be specified';}
if(definition===undefined){throw'invalid module definition, definition function must be specified';}
require(dependencies,function(){modules[id]=definition.apply(null,arguments);});}
function defined(id){return!!modules[id];}
function resolve(id){var target=exports;var fragments=id.split(/[.\/]/);for(var fi=0;fi<fragments.length;++fi){if(!target[fragments[fi]]){return;}
target=target[fragments[fi]];}
return target;}
function expose(ids){for(var i=0;i<ids.length;i++){var target=exports;var id=ids[i];var fragments=id.split(/[.\/]/);for(var fi=0;fi<fragments.length-1;++fi){if(target[fragments[fi]]===undefined){target[fragments[fi]]={};}
target=target[fragments[fi]];}
target[fragments[fragments.length-1]]=modules[id];}}
define('moxie/core/utils/Basic',[],function(){var typeOf=function(o){var undef;if(o===undef){return'undefined';}else if(o===null){return'null';}else if(o.nodeType){return'node';}
return({}).toString.call(o).match(/\s([a-z|A-Z]+)/)[1].toLowerCase();};var extend=function(target){var undef;each(arguments,function(arg,i){if(i>0){each(arg,function(value,key){if(value!==undef){if(typeOf(target[key])===typeOf(value)&&!!~inArray(typeOf(value),['array','object'])){extend(target[key],value);}else{target[key]=value;}}});}});return target;};var each=function(obj,callback){var length,key,i,undef;if(obj){try{length=obj.length;}catch(ex){length=undef;}
if(length===undef){for(key in obj){if(obj.hasOwnProperty(key)){if(callback(obj[key],key)===false){return;}}}}else{for(i=0;i<length;i++){if(callback(obj[i],i)===false){return;}}}}};var isEmptyObj=function(obj){var prop;if(!obj||typeOf(obj)!=='object'){return true;}
for(prop in obj){return false;}
return true;};var inSeries=function(queue,cb){var i=0,length=queue.length;if(typeOf(cb)!=='function'){cb=function(){};}
if(!queue||!queue.length){cb();}
function callNext(i){if(typeOf(queue[i])==='function'){queue[i](function(error){++i<length&&!error?callNext(i):cb(error);});}}
callNext(i);};var inParallel=function(queue,cb){var count=0,num=queue.length,cbArgs=new Array(num);each(queue,function(fn,i){fn(function(error){if(error){return cb(error);}
var args=[].slice.call(arguments);args.shift();cbArgs[i]=args;count++;if(count===num){cbArgs.unshift(null);cb.apply(this,cbArgs);}});});};var inArray=function(needle,array){if(array){if(Array.prototype.indexOf){return Array.prototype.indexOf.call(array,needle);}
for(var i=0,length=array.length;i<length;i++){if(array[i]===needle){return i;}}}
return-1;};var arrayDiff=function(needles,array){var diff=[];if(typeOf(needles)!=='array'){needles=[needles];}
if(typeOf(array)!=='array'){array=[array];}
for(var i in needles){if(inArray(needles[i],array)===-1){diff.push(needles[i]);}}
return diff.length?diff:false;};var arrayIntersect=function(array1,array2){var result=[];each(array1,function(item){if(inArray(item,array2)!==-1){result.push(item);}});return result.length?result:null;};var toArray=function(obj){var i,arr=[];for(i=0;i<obj.length;i++){arr[i]=obj[i];}
return arr;};var guid=(function(){var counter=0;return function(prefix){var guid=new Date().getTime().toString(32),i;for(i=0;i<5;i++){guid+=Math.floor(Math.random()*65535).toString(32);}
return(prefix||'o_')+guid+(counter++).toString(32);};}());var trim=function(str){if(!str){return str;}
return String.prototype.trim?String.prototype.trim.call(str):str.toString().replace(/^\s*/,'').replace(/\s*$/,'');};var parseSizeStr=function(size){if(typeof(size)!=='string'){return size;}
var muls={t:1099511627776,g:1073741824,m:1048576,k:1024},mul;size=/^([0-9]+)([mgk]?)$/.exec(size.toLowerCase().replace(/[^0-9mkg]/g,''));mul=size[2];size=+size[1];if(muls.hasOwnProperty(mul)){size*=muls[mul];}
return size;};return{guid:guid,typeOf:typeOf,extend:extend,each:each,isEmptyObj:isEmptyObj,inSeries:inSeries,inParallel:inParallel,inArray:inArray,arrayDiff:arrayDiff,arrayIntersect:arrayIntersect,toArray:toArray,trim:trim,parseSizeStr:parseSizeStr};});define("moxie/core/I18n",["moxie/core/utils/Basic"],function(Basic){var i18n={};return{addI18n:function(pack){return Basic.extend(i18n,pack);},translate:function(str){return i18n[str]||str;},_:function(str){return this.translate(str);},sprintf:function(str){var args=[].slice.call(arguments,1);return str.replace(/%[a-z]/g,function(){var value=args.shift();return Basic.typeOf(value)!=='undefined'?value:'';});}};});define("moxie/core/utils/Mime",["moxie/core/utils/Basic","moxie/core/I18n"],function(Basic,I18n){var mimeData=""+"application/msword,doc dot,"+"application/pdf,pdf,"+"application/pgp-signature,pgp,"+"application/postscript,ps ai eps,"+"application/rtf,rtf,"+"application/vnd.ms-excel,xls xlb,"+"application/vnd.ms-powerpoint,ppt pps pot,"+"application/zip,zip,"+"application/x-shockwave-flash,swf swfl,"+"application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,"+"application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,"+"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,"+"application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,"+"application/vnd.openxmlformats-officedocument.presentationml.template,potx,"+"application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,"+"application/x-javascript,js,"+"application/json,json,"+"audio/mpeg,mp3 mpga mpega mp2,"+"audio/x-wav,wav,"+"audio/x-m4a,m4a,"+"audio/ogg,oga ogg,"+"audio/aiff,aiff aif,"+"audio/flac,flac,"+"audio/aac,aac,"+"audio/ac3,ac3,"+"audio/x-ms-wma,wma,"+"image/bmp,bmp,"+"image/gif,gif,"+"image/jpeg,jpg jpeg jpe,"+"image/photoshop,psd,"+"image/png,png,"+"image/svg+xml,svg svgz,"+"image/tiff,tiff tif,"+"text/plain,asc txt text diff log,"+"text/html,htm html xhtml,"+"text/css,css,"+"text/csv,csv,"+"text/rtf,rtf,"+"video/mpeg,mpeg mpg mpe m2v,"+"video/quicktime,qt mov,"+"video/mp4,mp4,"+"video/x-m4v,m4v,"+"video/x-flv,flv,"+"video/x-ms-wmv,wmv,"+"video/avi,avi,"+"video/webm,webm,"+"video/3gpp,3gpp 3gp,"+"video/3gpp2,3g2,"+"video/vnd.rn-realvideo,rv,"+"video/ogg,ogv,"+"video/x-matroska,mkv,"+"application/vnd.oasis.opendocument.formula-template,otf,"+"application/octet-stream,exe";var Mime={mimes:{},extensions:{},addMimeType:function(mimeData){var items=mimeData.split(/,/),i,ii,ext;for(i=0;i<items.length;i+=2){ext=items[i+1].split(/ /);for(ii=0;ii<ext.length;ii++){this.mimes[ext[ii]]=items[i];}
this.extensions[items[i]]=ext;}},extList2mimes:function(filters,addMissingExtensions){var self=this,ext,i,ii,type,mimes=[];for(i=0;i<filters.length;i++){ext=filters[i].extensions.split(/\s*,\s*/);for(ii=0;ii<ext.length;ii++){if(ext[ii]==='*'){return[];}
type=self.mimes[ext[ii]];if(!type){if(addMissingExtensions&&/^\w+$/.test(ext[ii])){mimes.push('.'+ext[ii]);}else{return[];}}else if(Basic.inArray(type,mimes)===-1){mimes.push(type);}}}
return mimes;},mimes2exts:function(mimes){var self=this,exts=[];Basic.each(mimes,function(mime){if(mime==='*'){exts=[];return false;}
var m=mime.match(/^(\w+)\/(\*|\w+)$/);if(m){if(m[2]==='*'){Basic.each(self.extensions,function(arr,mime){if((new RegExp('^'+m[1]+'/')).test(mime)){[].push.apply(exts,self.extensions[mime]);}});}else if(self.extensions[mime]){[].push.apply(exts,self.extensions[mime]);}}});return exts;},mimes2extList:function(mimes){var accept=[],exts=[];if(Basic.typeOf(mimes)==='string'){mimes=Basic.trim(mimes).split(/\s*,\s*/);}
exts=this.mimes2exts(mimes);accept.push({title:I18n.translate('Files'),extensions:exts.length?exts.join(','):'*'});accept.mimes=mimes;return accept;},getFileExtension:function(fileName){var matches=fileName&&fileName.match(/\.([^.]+)$/);if(matches){return matches[1].toLowerCase();}
return'';},getFileMime:function(fileName){return this.mimes[this.getFileExtension(fileName)]||'';}};Mime.addMimeType(mimeData);return Mime;});define("moxie/core/utils/Env",["moxie/core/utils/Basic"],function(Basic){var UAParser=(function(undefined){var EMPTY='',UNKNOWN='?',FUNC_TYPE='function',UNDEF_TYPE='undefined',OBJ_TYPE='object',MAJOR='major',MODEL='model',NAME='name',TYPE='type',VENDOR='vendor',VERSION='version',ARCHITECTURE='architecture',CONSOLE='console',MOBILE='mobile',TABLET='tablet';var util={has:function(str1,str2){return str2.toLowerCase().indexOf(str1.toLowerCase())!==-1;},lowerize:function(str){return str.toLowerCase();}};var mapper={rgx:function(){for(var result,i=0,j,k,p,q,matches,match,args=arguments;i<args.length;i+=2){var regex=args[i],props=args[i+1];if(typeof(result)===UNDEF_TYPE){result={};for(p in props){q=props[p];if(typeof(q)===OBJ_TYPE){result[q[0]]=undefined;}else{result[q]=undefined;}}}
for(j=k=0;j<regex.length;j++){matches=regex[j].exec(this.getUA());if(!!matches){for(p=0;p<props.length;p++){match=matches[++k];q=props[p];if(typeof(q)===OBJ_TYPE&&q.length>0){if(q.length==2){if(typeof(q[1])==FUNC_TYPE){result[q[0]]=q[1].call(this,match);}else{result[q[0]]=q[1];}}else if(q.length==3){if(typeof(q[1])===FUNC_TYPE&&!(q[1].exec&&q[1].test)){result[q[0]]=match?q[1].call(this,match,q[2]):undefined;}else{result[q[0]]=match?match.replace(q[1],q[2]):undefined;}}else if(q.length==4){result[q[0]]=match?q[3].call(this,match.replace(q[1],q[2])):undefined;}}else{result[q]=match?match:undefined;}}
break;}}
if(!!matches)break;}
return result;},str:function(str,map){for(var i in map){if(typeof(map[i])===OBJ_TYPE&&map[i].length>0){for(var j=0;j<map[i].length;j++){if(util.has(map[i][j],str)){return(i===UNKNOWN)?undefined:i;}}}else if(util.has(map[i],str)){return(i===UNKNOWN)?undefined:i;}}
return str;}};var maps={browser:{oldsafari:{major:{'1':['/8','/1','/3'],'2':'/4','?':'/'},version:{'1.0':'/8','1.2':'/1','1.3':'/3','2.0':'/412','2.0.2':'/416','2.0.3':'/417','2.0.4':'/419','?':'/'}}},device:{sprint:{model:{'Evo Shift 4G':'7373KT'},vendor:{'HTC':'APA','Sprint':'Sprint'}}},os:{windows:{version:{'ME':'4.90','NT 3.11':'NT3.51','NT 4.0':'NT4.0','2000':'NT 5.0','XP':['NT 5.1','NT 5.2'],'Vista':'NT 6.0','7':'NT 6.1','8':'NT 6.2','8.1':'NT 6.3','RT':'ARM'}}}};var regexes={browser:[[/(opera\smini)\/((\d+)?[\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/((\d+)?[\w\.-]+)/i,/(opera).+version\/((\d+)?[\w\.]+)/i,/(opera)[\/\s]+((\d+)?[\w\.]+)/i],[NAME,VERSION,MAJOR],[/\s(opr)\/((\d+)?[\w\.]+)/i],[[NAME,'Opera'],VERSION,MAJOR],[/(kindle)\/((\d+)?[\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?((\d+)?[\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?((\d+)?[\w\.]*)/i,/(?:ms|\()(ie)\s((\d+)?[\w\.]+)/i,/(rekonq)((?:\/)[\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron)\/((\d+)?[\w\.-]+)/i],[NAME,VERSION,MAJOR],[/(trident).+rv[:\s]((\d+)?[\w\.]+).+like\sgecko/i],[[NAME,'IE'],VERSION,MAJOR],[/(yabrowser)\/((\d+)?[\w\.]+)/i],[[NAME,'Yandex'],VERSION,MAJOR],[/(comodo_dragon)\/((\d+)?[\w\.]+)/i],[[NAME,/_/g,' '],VERSION,MAJOR],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?((\d+)?[\w\.]+)/i],[NAME,VERSION,MAJOR],[/(dolfin)\/((\d+)?[\w\.]+)/i],[[NAME,'Dolphin'],VERSION,MAJOR],[/((?:android.+)crmo|crios)\/((\d+)?[\w\.]+)/i],[[NAME,'Chrome'],VERSION,MAJOR],[/((?:android.+))version\/((\d+)?[\w\.]+)\smobile\ssafari/i],[[NAME,'Android Browser'],VERSION,MAJOR],[/version\/((\d+)?[\w\.]+).+?mobile\/\w+\s(safari)/i],[VERSION,MAJOR,[NAME,'Mobile Safari']],[/version\/((\d+)?[\w\.]+).+?(mobile\s?safari|safari)/i],[VERSION,MAJOR,NAME],[/webkit.+?(mobile\s?safari|safari)((\/[\w\.]+))/i],[NAME,[MAJOR,mapper.str,maps.browser.oldsafari.major],[VERSION,mapper.str,maps.browser.oldsafari.version]],[/(konqueror)\/((\d+)?[\w\.]+)/i,/(webkit|khtml)\/((\d+)?[\w\.]+)/i],[NAME,VERSION,MAJOR],[/(navigator|netscape)\/((\d+)?[\w\.-]+)/i],[[NAME,'Netscape'],VERSION,MAJOR],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?((\d+)?[\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/((\d+)?[\w\.-]+)/i,/(mozilla)\/((\d+)?[\w\.]+).+rv\:.+gecko\/\d+/i,/(uc\s?browser|polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|qqbrowser)[\/\s]?((\d+)?[\w\.]+)/i,/(links)\s\(((\d+)?[\w\.]+)/i,/(gobrowser)\/?((\d+)?[\w\.]+)*/i,/(ice\s?browser)\/v?((\d+)?[\w\._]+)/i,/(mosaic)[\/\s]((\d+)?[\w\.]+)/i],[NAME,VERSION,MAJOR]],engine:[[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[NAME,VERSION],[/rv\:([\w\.]+).*(gecko)/i],[VERSION,NAME]],os:[[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[NAME,[VERSION,mapper.str,maps.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[NAME,'Windows'],[VERSION,mapper.str,maps.os.windows.version]],[/\((bb)(10);/i],[[NAME,'BlackBerry'],VERSION],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)\/([\w\.]+)/i,/(android|webos|palm\os|qnx|bada|rim\stablet\sos|meego)[\/\s-]?([\w\.]+)*/i],[NAME,VERSION],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[NAME,'Symbian'],VERSION],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[NAME,'Firefox OS'],VERSION],[/(nintendo|playstation)\s([wids3portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[NAME,VERSION],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[NAME,'Chromium OS'],VERSION],[/(sunos)\s?([\w\.]+\d)*/i],[[NAME,'Solaris'],VERSION],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[NAME,VERSION],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[NAME,'iOS'],[VERSION,/_/g,'.']],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i],[NAME,[VERSION,/_/g,'.']],[/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(macintosh|mac(?=_powerpc)|plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos)/i,/(unix)\s?([\w\.]+)*/i],[NAME,VERSION]]};var UAParser=function(uastring){var ua=uastring||((window&&window.navigator&&window.navigator.userAgent)?window.navigator.userAgent:EMPTY);this.getBrowser=function(){return mapper.rgx.apply(this,regexes.browser);};this.getEngine=function(){return mapper.rgx.apply(this,regexes.engine);};this.getOS=function(){return mapper.rgx.apply(this,regexes.os);};this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS()};};this.getUA=function(){return ua;};this.setUA=function(uastring){ua=uastring;return this;};this.setUA(ua);};return new UAParser().getResult();})();function version_compare(v1,v2,operator){var i=0,x=0,compare=0,vm={'dev':-6,'alpha':-5,'a':-5,'beta':-4,'b':-4,'RC':-3,'rc':-3,'#':-2,'p':1,'pl':1},prepVersion=function(v){v=(''+v).replace(/[_\-+]/g,'.');v=v.replace(/([^.\d]+)/g,'.$1.').replace(/\.{2,}/g,'.');return(!v.length?[-8]:v.split('.'));},numVersion=function(v){return!v?0:(isNaN(v)?vm[v]||-7:parseInt(v,10));};v1=prepVersion(v1);v2=prepVersion(v2);x=Math.max(v1.length,v2.length);for(i=0;i<x;i++){if(v1[i]==v2[i]){continue;}
v1[i]=numVersion(v1[i]);v2[i]=numVersion(v2[i]);if(v1[i]<v2[i]){compare=-1;break;}else if(v1[i]>v2[i]){compare=1;break;}}
if(!operator){return compare;}
switch(operator){case'>':case'gt':return(compare>0);case'>=':case'ge':return(compare>=0);case'<=':case'le':return(compare<=0);case'==':case'=':case'eq':return(compare===0);case'<>':case'!=':case'ne':return(compare!==0);case'':case'<':case'lt':return(compare<0);default:return null;}}
var can=(function(){var caps={define_property:(function(){return false;}()),create_canvas:(function(){var el=document.createElement('canvas');return!!(el.getContext&&el.getContext('2d'));}()),return_response_type:function(responseType){try{if(Basic.inArray(responseType,['','text','document'])!==-1){return true;}else if(window.XMLHttpRequest){var xhr=new XMLHttpRequest();xhr.open('get','/');if('responseType'in xhr){xhr.responseType=responseType;if(xhr.responseType!==responseType){return false;}
return true;}}}catch(ex){}
return false;},use_data_uri:(function(){var du=new Image();du.onload=function(){caps.use_data_uri=(du.width===1&&du.height===1);};setTimeout(function(){du.src="data:image/gif;base64,R0lGODlhAQABAIAAAP8AAAAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==";},1);return false;}()),use_data_uri_over32kb:function(){return caps.use_data_uri&&(Env.browser!=='IE'||Env.version>=9);},use_data_uri_of:function(bytes){return(caps.use_data_uri&&bytes<33000||caps.use_data_uri_over32kb());},use_fileinput:function(){var el=document.createElement('input');el.setAttribute('type','file');return!el.disabled;}};return function(cap){var args=[].slice.call(arguments);args.shift();return Basic.typeOf(caps[cap])==='function'?caps[cap].apply(this,args):!!caps[cap];};}());var Env={can:can,browser:UAParser.browser.name,version:parseFloat(UAParser.browser.major),os:UAParser.os.name,osVersion:UAParser.os.version,verComp:version_compare,swf_url:"../flash/Moxie.swf",xap_url:"../silverlight/Moxie.xap",global_event_dispatcher:"moxie.core.EventTarget.instance.dispatchEvent"};Env.OS=Env.os;return Env;});define('moxie/core/utils/Dom',['moxie/core/utils/Env'],function(Env){var get=function(id){if(typeof id!=='string'){return id;}
return document.getElementById(id);};var hasClass=function(obj,name){if(!obj.className){return false;}
var regExp=new RegExp("(^|\\s+)"+name+"(\\s+|$)");return regExp.test(obj.className);};var addClass=function(obj,name){if(!hasClass(obj,name)){obj.className=!obj.className?name:obj.className.replace(/\s+$/,'')+' '+name;}};var removeClass=function(obj,name){if(obj.className){var regExp=new RegExp("(^|\\s+)"+name+"(\\s+|$)");obj.className=obj.className.replace(regExp,function($0,$1,$2){return $1===' '&&$2===' '?' ':'';});}};var getStyle=function(obj,name){if(obj.currentStyle){return obj.currentStyle[name];}else if(window.getComputedStyle){return window.getComputedStyle(obj,null)[name];}};var getPos=function(node,root){var x=0,y=0,parent,doc=document,nodeRect,rootRect;node=node;root=root||doc.body;function getIEPos(node){var bodyElm,rect,x=0,y=0;if(node){rect=node.getBoundingClientRect();bodyElm=doc.compatMode==="CSS1Compat"?doc.documentElement:doc.body;x=rect.left+bodyElm.scrollLeft;y=rect.top+bodyElm.scrollTop;}
return{x:x,y:y};}
if(node&&node.getBoundingClientRect&&Env.browser==='IE'&&(!doc.documentMode||doc.documentMode<8)){nodeRect=getIEPos(node);rootRect=getIEPos(root);return{x:nodeRect.x-rootRect.x,y:nodeRect.y-rootRect.y};}
parent=node;while(parent&&parent!=root&&parent.nodeType){x+=parent.offsetLeft||0;y+=parent.offsetTop||0;parent=parent.offsetParent;}
parent=node.parentNode;while(parent&&parent!=root&&parent.nodeType){x-=parent.scrollLeft||0;y-=parent.scrollTop||0;parent=parent.parentNode;}
return{x:x,y:y};};var getSize=function(node){return{w:node.offsetWidth||node.clientWidth,h:node.offsetHeight||node.clientHeight};};return{get:get,hasClass:hasClass,addClass:addClass,removeClass:removeClass,getStyle:getStyle,getPos:getPos,getSize:getSize};});define('moxie/core/Exceptions',['moxie/core/utils/Basic'],function(Basic){function _findKey(obj,value){var key;for(key in obj){if(obj[key]===value){return key;}}
return null;}
return{RuntimeError:(function(){var namecodes={NOT_INIT_ERR:1,NOT_SUPPORTED_ERR:9,JS_ERR:4};function RuntimeError(code){this.code=code;this.name=_findKey(namecodes,code);this.message=this.name+": RuntimeError "+this.code;}
Basic.extend(RuntimeError,namecodes);RuntimeError.prototype=Error.prototype;return RuntimeError;}()),OperationNotAllowedException:(function(){function OperationNotAllowedException(code){this.code=code;this.name='OperationNotAllowedException';}
Basic.extend(OperationNotAllowedException,{NOT_ALLOWED_ERR:1});OperationNotAllowedException.prototype=Error.prototype;return OperationNotAllowedException;}()),ImageError:(function(){var namecodes={WRONG_FORMAT:1,MAX_RESOLUTION_ERR:2};function ImageError(code){this.code=code;this.name=_findKey(namecodes,code);this.message=this.name+": ImageError "+this.code;}
Basic.extend(ImageError,namecodes);ImageError.prototype=Error.prototype;return ImageError;}()),FileException:(function(){var namecodes={NOT_FOUND_ERR:1,SECURITY_ERR:2,ABORT_ERR:3,NOT_READABLE_ERR:4,ENCODING_ERR:5,NO_MODIFICATION_ALLOWED_ERR:6,INVALID_STATE_ERR:7,SYNTAX_ERR:8};function FileException(code){this.code=code;this.name=_findKey(namecodes,code);this.message=this.name+": FileException "+this.code;}
Basic.extend(FileException,namecodes);FileException.prototype=Error.prototype;return FileException;}()),DOMException:(function(){var namecodes={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25};function DOMException(code){this.code=code;this.name=_findKey(namecodes,code);this.message=this.name+": DOMException "+this.code;}
Basic.extend(DOMException,namecodes);DOMException.prototype=Error.prototype;return DOMException;}()),EventException:(function(){function EventException(code){this.code=code;this.name='EventException';}
Basic.extend(EventException,{UNSPECIFIED_EVENT_TYPE_ERR:0});EventException.prototype=Error.prototype;return EventException;}())};});define('moxie/core/EventTarget',['moxie/core/Exceptions','moxie/core/utils/Basic'],function(x,Basic){function EventTarget(){var eventpool={};Basic.extend(this,{uid:null,init:function(){if(!this.uid){this.uid=Basic.guid('uid_');}},addEventListener:function(type,fn,priority,scope){var self=this,list;type=Basic.trim(type);if(/\s/.test(type)){Basic.each(type.split(/\s+/),function(type){self.addEventListener(type,fn,priority,scope);});return;}
type=type.toLowerCase();priority=parseInt(priority,10)||0;list=eventpool[this.uid]&&eventpool[this.uid][type]||[];list.push({fn:fn,priority:priority,scope:scope||this});if(!eventpool[this.uid]){eventpool[this.uid]={};}
eventpool[this.uid][type]=list;},hasEventListener:function(type){return type?!!(eventpool[this.uid]&&eventpool[this.uid][type]):!!eventpool[this.uid];},removeEventListener:function(type,fn){type=type.toLowerCase();var list=eventpool[this.uid]&&eventpool[this.uid][type],i;if(list){if(fn){for(i=list.length-1;i>=0;i--){if(list[i].fn===fn){list.splice(i,1);break;}}}else{list=[];}
if(!list.length){delete eventpool[this.uid][type];if(Basic.isEmptyObj(eventpool[this.uid])){delete eventpool[this.uid];}}}},removeAllEventListeners:function(){if(eventpool[this.uid]){delete eventpool[this.uid];}},dispatchEvent:function(type){var uid,list,args,tmpEvt,evt={},result=true,undef;if(Basic.typeOf(type)!=='string'){tmpEvt=type;if(Basic.typeOf(tmpEvt.type)==='string'){type=tmpEvt.type;if(tmpEvt.total!==undef&&tmpEvt.loaded!==undef){evt.total=tmpEvt.total;evt.loaded=tmpEvt.loaded;}
evt.async=tmpEvt.async||false;}else{throw new x.EventException(x.EventException.UNSPECIFIED_EVENT_TYPE_ERR);}}
if(type.indexOf('::')!==-1){(function(arr){uid=arr[0];type=arr[1];}(type.split('::')));}else{uid=this.uid;}
type=type.toLowerCase();list=eventpool[uid]&&eventpool[uid][type];if(list){list.sort(function(a,b){return b.priority-a.priority;});args=[].slice.call(arguments);args.shift();evt.type=type;args.unshift(evt);var queue=[];Basic.each(list,function(handler){args[0].target=handler.scope;if(evt.async){queue.push(function(cb){setTimeout(function(){cb(handler.fn.apply(handler.scope,args)===false);},1);});}else{queue.push(function(cb){cb(handler.fn.apply(handler.scope,args)===false);});}});if(queue.length){Basic.inSeries(queue,function(err){result=!err;});}}
return result;},bind:function(){this.addEventListener.apply(this,arguments);},unbind:function(){this.removeEventListener.apply(this,arguments);},unbindAll:function(){this.removeAllEventListeners.apply(this,arguments);},trigger:function(){return this.dispatchEvent.apply(this,arguments);},convertEventPropsToHandlers:function(handlers){var h;if(Basic.typeOf(handlers)!=='array'){handlers=[handlers];}
for(var i=0;i<handlers.length;i++){h='on'+handlers[i];if(Basic.typeOf(this[h])==='function'){this.addEventListener(handlers[i],this[h]);}else if(Basic.typeOf(this[h])==='undefined'){this[h]=null;}}}});}
EventTarget.instance=new EventTarget();return EventTarget;});define('moxie/core/utils/Encode',[],function(){var utf8_encode=function(str){return unescape(encodeURIComponent(str));};var utf8_decode=function(str_data){return decodeURIComponent(escape(str_data));};var atob=function(data,utf8){if(typeof(window.atob)==='function'){return utf8?utf8_decode(window.atob(data)):window.atob(data);}
var b64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var o1,o2,o3,h1,h2,h3,h4,bits,i=0,ac=0,dec="",tmp_arr=[];if(!data){return data;}
data+='';do{h1=b64.indexOf(data.charAt(i++));h2=b64.indexOf(data.charAt(i++));h3=b64.indexOf(data.charAt(i++));h4=b64.indexOf(data.charAt(i++));bits=h1<<18|h2<<12|h3<<6|h4;o1=bits>>16&0xff;o2=bits>>8&0xff;o3=bits&0xff;if(h3==64){tmp_arr[ac++]=String.fromCharCode(o1);}else if(h4==64){tmp_arr[ac++]=String.fromCharCode(o1,o2);}else{tmp_arr[ac++]=String.fromCharCode(o1,o2,o3);}}while(i<data.length);dec=tmp_arr.join('');return utf8?utf8_decode(dec):dec;};var btoa=function(data,utf8){if(utf8){utf8_encode(data);}
if(typeof(window.btoa)==='function'){return window.btoa(data);}
var b64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var o1,o2,o3,h1,h2,h3,h4,bits,i=0,ac=0,enc="",tmp_arr=[];if(!data){return data;}
do{o1=data.charCodeAt(i++);o2=data.charCodeAt(i++);o3=data.charCodeAt(i++);bits=o1<<16|o2<<8|o3;h1=bits>>18&0x3f;h2=bits>>12&0x3f;h3=bits>>6&0x3f;h4=bits&0x3f;tmp_arr[ac++]=b64.charAt(h1)+b64.charAt(h2)+b64.charAt(h3)+b64.charAt(h4);}while(i<data.length);enc=tmp_arr.join('');var r=data.length%3;return(r?enc.slice(0,r-3):enc)+'==='.slice(r||3);};return{utf8_encode:utf8_encode,utf8_decode:utf8_decode,atob:atob,btoa:btoa};});define('moxie/runtime/Runtime',["moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/EventTarget"],function(Basic,Dom,EventTarget){var runtimeConstructors={},runtimes={};function Runtime(options,type,caps,modeCaps,preferredMode){var self=this,_shim,_uid=Basic.guid(type+'_'),defaultMode=preferredMode||'browser';options=options||{};runtimes[_uid]=this;caps=Basic.extend({access_binary:false,access_image_binary:false,display_media:false,do_cors:false,drag_and_drop:false,filter_by_extension:true,resize_image:false,report_upload_progress:false,return_response_headers:false,return_response_type:false,return_status_code:true,send_custom_headers:false,select_file:false,select_folder:false,select_multiple:true,send_binary_string:false,send_browser_cookies:true,send_multipart:true,slice_blob:false,stream_upload:false,summon_file_dialog:false,upload_filesize:true,use_http_method:true},caps);if(options.preferred_caps){defaultMode=Runtime.getMode(modeCaps,options.preferred_caps,defaultMode);}
_shim=(function(){var objpool={};return{exec:function(uid,comp,fn,args){if(_shim[comp]){if(!objpool[uid]){objpool[uid]={context:this,instance:new _shim[comp]()};}
if(objpool[uid].instance[fn]){return objpool[uid].instance[fn].apply(this,args);}}},removeInstance:function(uid){delete objpool[uid];},removeAllInstances:function(){var self=this;Basic.each(objpool,function(obj,uid){if(Basic.typeOf(obj.instance.destroy)==='function'){obj.instance.destroy.call(obj.context);}
self.removeInstance(uid);});}};}());Basic.extend(this,{initialized:false,uid:_uid,type:type,mode:Runtime.getMode(modeCaps,(options.required_caps),defaultMode),shimid:_uid+'_container',clients:0,options:options,can:function(cap,value){var refCaps=arguments[2]||caps;if(Basic.typeOf(cap)==='string'&&Basic.typeOf(value)==='undefined'){cap=Runtime.parseCaps(cap);}
if(Basic.typeOf(cap)==='object'){for(var key in cap){if(!this.can(key,cap[key],refCaps)){return false;}}
return true;}
if(Basic.typeOf(refCaps[cap])==='function'){return refCaps[cap].call(this,value);}else{return(value===refCaps[cap]);}},getShimContainer:function(){var container,shimContainer=Dom.get(this.shimid);if(!shimContainer){container=this.options.container?Dom.get(this.options.container):document.body;shimContainer=document.createElement('div');shimContainer.id=this.shimid;shimContainer.className='moxie-shim moxie-shim-'+this.type;Basic.extend(shimContainer.style,{position:'absolute',top:'0px',left:'0px',width:'1px',height:'1px',overflow:'hidden'});container.appendChild(shimContainer);container=null;}
return shimContainer;},getShim:function(){return _shim;},shimExec:function(component,action){var args=[].slice.call(arguments,2);return self.getShim().exec.call(this,this.uid,component,action,args);},exec:function(component,action){var args=[].slice.call(arguments,2);if(self[component]&&self[component][action]){return self[component][action].apply(this,args);}
return self.shimExec.apply(this,arguments);},destroy:function(){if(!self){return;}
var shimContainer=Dom.get(this.shimid);if(shimContainer){shimContainer.parentNode.removeChild(shimContainer);}
if(_shim){_shim.removeAllInstances();}
this.unbindAll();delete runtimes[this.uid];this.uid=null;_uid=self=_shim=shimContainer=null;}});if(this.mode&&options.required_caps&&!this.can(options.required_caps)){this.mode=false;}}
Runtime.order='html5,flash,silverlight,html4';Runtime.getRuntime=function(uid){return runtimes[uid]?runtimes[uid]:false;};Runtime.addConstructor=function(type,constructor){constructor.prototype=EventTarget.instance;runtimeConstructors[type]=constructor;};Runtime.getConstructor=function(type){return runtimeConstructors[type]||null;};Runtime.getInfo=function(uid){var runtime=Runtime.getRuntime(uid);if(runtime){return{uid:runtime.uid,type:runtime.type,mode:runtime.mode,can:function(){return runtime.can.apply(runtime,arguments);}};}
return null;};Runtime.parseCaps=function(capStr){var capObj={};if(Basic.typeOf(capStr)!=='string'){return capStr||{};}
Basic.each(capStr.split(','),function(key){capObj[key]=true;});return capObj;};Runtime.can=function(type,caps){var runtime,constructor=Runtime.getConstructor(type),mode;if(constructor){runtime=new constructor({required_caps:caps});mode=runtime.mode;runtime.destroy();return!!mode;}
return false;};Runtime.thatCan=function(caps,runtimeOrder){var types=(runtimeOrder||Runtime.order).split(/\s*,\s*/);for(var i in types){if(Runtime.can(types[i],caps)){return types[i];}}
return null;};Runtime.getMode=function(modeCaps,requiredCaps,defaultMode){var mode=null;if(Basic.typeOf(defaultMode)==='undefined'){defaultMode='browser';}
if(requiredCaps&&!Basic.isEmptyObj(modeCaps)){Basic.each(requiredCaps,function(value,cap){if(modeCaps.hasOwnProperty(cap)){var capMode=modeCaps[cap](value);if(typeof(capMode)==='string'){capMode=[capMode];}
if(!mode){mode=capMode;}else if(!(mode=Basic.arrayIntersect(mode,capMode))){return(mode=false);}}});if(mode){return Basic.inArray(defaultMode,mode)!==-1?defaultMode:mode[0];}else if(mode===false){return false;}}
return defaultMode;};Runtime.capTrue=function(){return true;};Runtime.capFalse=function(){return false;};Runtime.capTest=function(expr){return function(){return!!expr;};};return Runtime;});define('moxie/runtime/RuntimeClient',['moxie/core/Exceptions','moxie/core/utils/Basic','moxie/runtime/Runtime'],function(x,Basic,Runtime){return function RuntimeClient(){var runtime;Basic.extend(this,{connectRuntime:function(options){var comp=this,ruid;function initialize(items){var type,constructor;if(!items.length){comp.trigger('RuntimeError',new x.RuntimeError(x.RuntimeError.NOT_INIT_ERR));runtime=null;return;}
type=items.shift();constructor=Runtime.getConstructor(type);if(!constructor){initialize(items);return;}
runtime=new constructor(options);runtime.bind('Init',function(){runtime.initialized=true;setTimeout(function(){runtime.clients++;comp.trigger('RuntimeInit',runtime);},1);});runtime.bind('Error',function(){runtime.destroy();initialize(items);});if(!runtime.mode){runtime.trigger('Error');return;}
runtime.init();}
if(Basic.typeOf(options)==='string'){ruid=options;}else if(Basic.typeOf(options.ruid)==='string'){ruid=options.ruid;}
if(ruid){runtime=Runtime.getRuntime(ruid);if(runtime){runtime.clients++;return runtime;}else{throw new x.RuntimeError(x.RuntimeError.NOT_INIT_ERR);}}
initialize((options.runtime_order||Runtime.order).split(/\s*,\s*/));},getRuntime:function(){if(runtime&&runtime.uid){return runtime;}
runtime=null;return null;},disconnectRuntime:function(){if(runtime&&--runtime.clients<=0){runtime.destroy();runtime=null;}}});};});define('moxie/file/Blob',['moxie/core/utils/Basic','moxie/core/utils/Encode','moxie/runtime/RuntimeClient'],function(Basic,Encode,RuntimeClient){var blobpool={};function Blob(ruid,blob){function _sliceDetached(start,end,type){var blob,data=blobpool[this.uid];if(Basic.typeOf(data)!=='string'||!data.length){return null;}
blob=new Blob(null,{type:type,size:end-start});blob.detach(data.substr(start,blob.size));return blob;}
RuntimeClient.call(this);if(ruid){this.connectRuntime(ruid);}
if(!blob){blob={};}else if(Basic.typeOf(blob)==='string'){blob={data:blob};}
Basic.extend(this,{uid:blob.uid||Basic.guid('uid_'),ruid:ruid,size:blob.size||0,type:blob.type||'',slice:function(start,end,type){if(this.isDetached()){return _sliceDetached.apply(this,arguments);}
return this.getRuntime().exec.call(this,'Blob','slice',this.getSource(),start,end,type);},getSource:function(){if(!blobpool[this.uid]){return null;}
return blobpool[this.uid];},detach:function(data){if(this.ruid){this.getRuntime().exec.call(this,'Blob','destroy');this.disconnectRuntime();this.ruid=null;}
data=data||'';var matches=data.match(/^data:([^;]*);base64,/);if(matches){this.type=matches[1];data=Encode.atob(data.substring(data.indexOf('base64,')+7));}
this.size=data.length;blobpool[this.uid]=data;},isDetached:function(){return!this.ruid&&Basic.typeOf(blobpool[this.uid])==='string';},destroy:function(){this.detach();delete blobpool[this.uid];}});if(blob.data){this.detach(blob.data);}else{blobpool[this.uid]=blob;}}
return Blob;});define('moxie/file/File',['moxie/core/utils/Basic','moxie/core/utils/Mime','moxie/file/Blob'],function(Basic,Mime,Blob){function File(ruid,file){var name,type;if(!file){file={};}
if(file.type&&file.type!==''){type=file.type;}else{type=Mime.getFileMime(file.name);}
if(file.name){name=file.name.replace(/\\/g,'/');name=name.substr(name.lastIndexOf('/')+1);}else{var prefix=type.split('/')[0];name=Basic.guid((prefix!==''?prefix:'file')+'_');if(Mime.extensions[type]){name+='.'+Mime.extensions[type][0];}}
Blob.apply(this,arguments);Basic.extend(this,{type:type||'',name:name||Basic.guid('file_'),lastModifiedDate:file.lastModifiedDate||(new Date()).toLocaleString()});}
File.prototype=Blob.prototype;return File;});define('moxie/file/FileInput',['moxie/core/utils/Basic','moxie/core/utils/Mime','moxie/core/utils/Dom','moxie/core/Exceptions','moxie/core/EventTarget','moxie/core/I18n','moxie/file/File','moxie/runtime/Runtime','moxie/runtime/RuntimeClient'],function(Basic,Mime,Dom,x,EventTarget,I18n,File,Runtime,RuntimeClient){var dispatches=['ready','change','cancel','mouseenter','mouseleave','mousedown','mouseup'];function FileInput(options){var self=this,container,browseButton,defaults;if(Basic.inArray(Basic.typeOf(options),['string','node'])!==-1){options={browse_button:options};}
browseButton=Dom.get(options.browse_button);if(!browseButton){throw new x.DOMException(x.DOMException.NOT_FOUND_ERR);}
defaults={accept:[{title:I18n.translate('All Files'),extensions:'*'}],name:'file',multiple:false,required_caps:false,container:browseButton.parentNode||document.body};options=Basic.extend({},defaults,options);if(typeof(options.required_caps)==='string'){options.required_caps=Runtime.parseCaps(options.required_caps);}
if(typeof(options.accept)==='string'){options.accept=Mime.mimes2extList(options.accept);}
container=Dom.get(options.container);if(!container){container=document.body;}
if(Dom.getStyle(container,'position')==='static'){container.style.position='relative';}
container=browseButton=null;RuntimeClient.call(self);Basic.extend(self,{uid:Basic.guid('uid_'),ruid:null,shimid:null,files:null,init:function(){self.convertEventPropsToHandlers(dispatches);self.bind('RuntimeInit',function(e,runtime){self.ruid=runtime.uid;self.shimid=runtime.shimid;self.bind("Ready",function(){self.trigger("Refresh");},999);self.bind("Change",function(){var files=runtime.exec.call(self,'FileInput','getFiles');self.files=[];Basic.each(files,function(file){if(file.size===0){return true;}
self.files.push(new File(self.ruid,file));});},999);self.bind('Refresh',function(){var pos,size,browseButton,shimContainer;browseButton=Dom.get(options.browse_button);shimContainer=Dom.get(runtime.shimid);if(browseButton){pos=Dom.getPos(browseButton,Dom.get(options.container));size=Dom.getSize(browseButton);if(shimContainer){Basic.extend(shimContainer.style,{top:pos.y+'px',left:pos.x+'px',width:size.w+'px',height:size.h+'px'});}}
shimContainer=browseButton=null;});runtime.exec.call(self,'FileInput','init',options);});self.connectRuntime(Basic.extend({},options,{required_caps:{select_file:true}}));},disable:function(state){var runtime=this.getRuntime();if(runtime){runtime.exec.call(this,'FileInput','disable',Basic.typeOf(state)==='undefined'?true:state);}},refresh:function(){self.trigger("Refresh");},destroy:function(){var runtime=this.getRuntime();if(runtime){runtime.exec.call(this,'FileInput','destroy');this.disconnectRuntime();}
if(Basic.typeOf(this.files)==='array'){Basic.each(this.files,function(file){file.destroy();});}
this.files=null;}});}
FileInput.prototype=EventTarget.instance;return FileInput;});define('moxie/file/FileDrop',['moxie/core/I18n','moxie/core/utils/Dom','moxie/core/Exceptions','moxie/core/utils/Basic','moxie/file/File','moxie/runtime/RuntimeClient','moxie/core/EventTarget','moxie/core/utils/Mime'],function(I18n,Dom,x,Basic,File,RuntimeClient,EventTarget,Mime){var dispatches=['ready','dragenter','dragleave','drop','error'];function FileDrop(options){var self=this,defaults;if(typeof(options)==='string'){options={drop_zone:options};}
defaults={accept:[{title:I18n.translate('All Files'),extensions:'*'}],required_caps:{drag_and_drop:true}};options=typeof(options)==='object'?Basic.extend({},defaults,options):defaults;options.container=Dom.get(options.drop_zone)||document.body;if(Dom.getStyle(options.container,'position')==='static'){options.container.style.position='relative';}
if(typeof(options.accept)==='string'){options.accept=Mime.mimes2extList(options.accept);}
RuntimeClient.call(self);Basic.extend(self,{uid:Basic.guid('uid_'),ruid:null,files:null,init:function(){self.convertEventPropsToHandlers(dispatches);self.bind('RuntimeInit',function(e,runtime){self.ruid=runtime.uid;self.bind("Drop",function(){var files=runtime.exec.call(self,'FileDrop','getFiles');self.files=[];Basic.each(files,function(file){self.files.push(new File(self.ruid,file));});},999);runtime.exec.call(self,'FileDrop','init',options);self.dispatchEvent('ready');});self.connectRuntime(options);},destroy:function(){var runtime=this.getRuntime();if(runtime){runtime.exec.call(this,'FileDrop','destroy');this.disconnectRuntime();}
this.files=null;}});}
FileDrop.prototype=EventTarget.instance;return FileDrop;});define('moxie/runtime/RuntimeTarget',['moxie/core/utils/Basic','moxie/runtime/RuntimeClient',"moxie/core/EventTarget"],function(Basic,RuntimeClient,EventTarget){function RuntimeTarget(){this.uid=Basic.guid('uid_');RuntimeClient.call(this);this.destroy=function(){this.disconnectRuntime();this.unbindAll();};}
RuntimeTarget.prototype=EventTarget.instance;return RuntimeTarget;});define('moxie/file/FileReader',['moxie/core/utils/Basic','moxie/core/utils/Encode','moxie/core/Exceptions','moxie/core/EventTarget','moxie/file/Blob','moxie/file/File','moxie/runtime/RuntimeTarget'],function(Basic,Encode,x,EventTarget,Blob,File,RuntimeTarget){var dispatches=['loadstart','progress','load','abort','error','loadend'];function FileReader(){var self=this,_fr;Basic.extend(this,{uid:Basic.guid('uid_'),readyState:FileReader.EMPTY,result:null,error:null,readAsBinaryString:function(blob){_read.call(this,'readAsBinaryString',blob);},readAsDataURL:function(blob){_read.call(this,'readAsDataURL',blob);},readAsText:function(blob){_read.call(this,'readAsText',blob);},abort:function(){this.result=null;if(Basic.inArray(this.readyState,[FileReader.EMPTY,FileReader.DONE])!==-1){return;}else if(this.readyState===FileReader.LOADING){this.readyState=FileReader.DONE;}
if(_fr){_fr.getRuntime().exec.call(this,'FileReader','abort');}
this.trigger('abort');this.trigger('loadend');},destroy:function(){this.abort();if(_fr){_fr.getRuntime().exec.call(this,'FileReader','destroy');_fr.disconnectRuntime();}
self=_fr=null;}});function _read(op,blob){_fr=new RuntimeTarget();function error(err){self.readyState=FileReader.DONE;self.error=err;self.trigger('error');loadEnd();}
function loadEnd(){_fr.destroy();_fr=null;self.trigger('loadend');}
function exec(runtime){_fr.bind('Error',function(e,err){error(err);});_fr.bind('Progress',function(e){self.result=runtime.exec.call(_fr,'FileReader','getResult');self.trigger(e);});_fr.bind('Load',function(e){self.readyState=FileReader.DONE;self.result=runtime.exec.call(_fr,'FileReader','getResult');self.trigger(e);loadEnd();});runtime.exec.call(_fr,'FileReader','read',op,blob);}
this.convertEventPropsToHandlers(dispatches);if(this.readyState===FileReader.LOADING){return error(new x.DOMException(x.DOMException.INVALID_STATE_ERR));}
this.readyState=FileReader.LOADING;this.trigger('loadstart');if(blob instanceof Blob){if(blob.isDetached()){var src=blob.getSource();switch(op){case'readAsText':case'readAsBinaryString':this.result=src;break;case'readAsDataURL':this.result='data:'+blob.type+';base64,'+Encode.btoa(src);break;}
this.readyState=FileReader.DONE;this.trigger('load');loadEnd();}else{exec(_fr.connectRuntime(blob.ruid));}}else{error(new x.DOMException(x.DOMException.NOT_FOUND_ERR));}}}
FileReader.EMPTY=0;FileReader.LOADING=1;FileReader.DONE=2;FileReader.prototype=EventTarget.instance;return FileReader;});define('moxie/core/utils/Url',[],function(){var parseUrl=function(url,currentUrl){var key=['source','scheme','authority','userInfo','user','pass','host','port','relative','path','directory','file','query','fragment'],i=key.length,ports={http:80,https:443},uri={},regex=/^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,m=regex.exec(url||'');while(i--){if(m[i]){uri[key[i]]=m[i];}}
if(!uri.scheme){if(!currentUrl||typeof(currentUrl)==='string'){currentUrl=parseUrl(currentUrl||document.location.href);}
uri.scheme=currentUrl.scheme;uri.host=currentUrl.host;uri.port=currentUrl.port;var path='';if(/^[^\/]/.test(uri.path)){path=currentUrl.path;if(!/(\/|\/[^\.]+)$/.test(path)){path=path.replace(/\/[^\/]+$/,'/');}else{path+='/';}}
uri.path=path+(uri.path||'');}
if(!uri.port){uri.port=ports[uri.scheme]||80;}
uri.port=parseInt(uri.port,10);if(!uri.path){uri.path="/";}
delete uri.source;return uri;};var resolveUrl=function(url){var ports={http:80,https:443},urlp=parseUrl(url);return urlp.scheme+'://'+urlp.host+(urlp.port!==ports[urlp.scheme]?':'+urlp.port:'')+urlp.path+(urlp.query?urlp.query:'');};var hasSameOrigin=function(url){function origin(url){return[url.scheme,url.host,url.port].join('/');}
if(typeof url==='string'){url=parseUrl(url);}
return origin(parseUrl())===origin(url);};return{parseUrl:parseUrl,resolveUrl:resolveUrl,hasSameOrigin:hasSameOrigin};});define('moxie/file/FileReaderSync',['moxie/core/utils/Basic','moxie/runtime/RuntimeClient','moxie/core/utils/Encode'],function(Basic,RuntimeClient,Encode){return function(){RuntimeClient.call(this);Basic.extend(this,{uid:Basic.guid('uid_'),readAsBinaryString:function(blob){return _read.call(this,'readAsBinaryString',blob);},readAsDataURL:function(blob){return _read.call(this,'readAsDataURL',blob);},readAsText:function(blob){return _read.call(this,'readAsText',blob);}});function _read(op,blob){if(blob.isDetached()){var src=blob.getSource();switch(op){case'readAsBinaryString':return src;case'readAsDataURL':return'data:'+blob.type+';base64,'+Encode.btoa(src);case'readAsText':var txt='';for(var i=0,length=src.length;i<length;i++){txt+=String.fromCharCode(src[i]);}
return txt;}}else{var result=this.connectRuntime(blob.ruid).exec.call(this,'FileReaderSync','read',op,blob);this.disconnectRuntime();return result;}}};});define("moxie/xhr/FormData",["moxie/core/Exceptions","moxie/core/utils/Basic","moxie/file/Blob"],function(x,Basic,Blob){function FormData(){var _blob,_fields=[];Basic.extend(this,{append:function(name,value){var self=this,valueType=Basic.typeOf(value);if(value instanceof Blob){_blob={name:name,value:value};}else if('array'===valueType){name+='[]';Basic.each(value,function(value){self.append(name,value);});}else if('object'===valueType){Basic.each(value,function(value,key){self.append(name+'['+key+']',value);});}else if('null'===valueType||'undefined'===valueType||'number'===valueType&&isNaN(value)){self.append(name,"false");}else{_fields.push({name:name,value:value.toString()});}},hasBlob:function(){return!!this.getBlob();},getBlob:function(){return _blob&&_blob.value||null;},getBlobName:function(){return _blob&&_blob.name||null;},each:function(cb){Basic.each(_fields,function(field){cb(field.value,field.name);});if(_blob){cb(_blob.value,_blob.name);}},destroy:function(){_blob=null;_fields=[];}});}
return FormData;});define("moxie/xhr/XMLHttpRequest",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/core/EventTarget","moxie/core/utils/Encode","moxie/core/utils/Url","moxie/runtime/Runtime","moxie/runtime/RuntimeTarget","moxie/file/Blob","moxie/file/FileReaderSync","moxie/xhr/FormData","moxie/core/utils/Env","moxie/core/utils/Mime"],function(Basic,x,EventTarget,Encode,Url,Runtime,RuntimeTarget,Blob,FileReaderSync,FormData,Env,Mime){var httpCode={100:'Continue',101:'Switching Protocols',102:'Processing',200:'OK',201:'Created',202:'Accepted',203:'Non-Authoritative Information',204:'No Content',205:'Reset Content',206:'Partial Content',207:'Multi-Status',226:'IM Used',300:'Multiple Choices',301:'Moved Permanently',302:'Found',303:'See Other',304:'Not Modified',305:'Use Proxy',306:'Reserved',307:'Temporary Redirect',400:'Bad Request',401:'Unauthorized',402:'Payment Required',403:'Forbidden',404:'Not Found',405:'Method Not Allowed',406:'Not Acceptable',407:'Proxy Authentication Required',408:'Request Timeout',409:'Conflict',410:'Gone',411:'Length Required',412:'Precondition Failed',413:'Request Entity Too Large',414:'Request-URI Too Long',415:'Unsupported Media Type',416:'Requested Range Not Satisfiable',417:'Expectation Failed',422:'Unprocessable Entity',423:'Locked',424:'Failed Dependency',426:'Upgrade Required',500:'Internal Server Error',501:'Not Implemented',502:'Bad Gateway',503:'Service Unavailable',504:'Gateway Timeout',505:'HTTP Version Not Supported',506:'Variant Also Negotiates',507:'Insufficient Storage',510:'Not Extended'};function XMLHttpRequestUpload(){this.uid=Basic.guid('uid_');}
XMLHttpRequestUpload.prototype=EventTarget.instance;var dispatches=['loadstart','progress','abort','error','load','timeout','loadend'];var NATIVE=1,RUNTIME=2;function XMLHttpRequest(){var self=this,props={timeout:0,readyState:XMLHttpRequest.UNSENT,withCredentials:false,status:0,statusText:"",responseType:"",responseXML:null,responseText:null,response:null},_async=true,_url,_method,_headers={},_user,_password,_encoding=null,_mimeType=null,_sync_flag=false,_send_flag=false,_upload_events_flag=false,_upload_complete_flag=false,_error_flag=false,_same_origin_flag=false,_start_time,_timeoutset_time,_finalMime=null,_finalCharset=null,_options={},_xhr,_responseHeaders='',_responseHeadersBag;Basic.extend(this,props,{uid:Basic.guid('uid_'),upload:new XMLHttpRequestUpload(),open:function(method,url,async,user,password){var urlp;if(!method||!url){throw new x.DOMException(x.DOMException.SYNTAX_ERR);}
if(/[\u0100-\uffff]/.test(method)||Encode.utf8_encode(method)!==method){throw new x.DOMException(x.DOMException.SYNTAX_ERR);}
if(!!~Basic.inArray(method.toUpperCase(),['CONNECT','DELETE','GET','HEAD','OPTIONS','POST','PUT','TRACE','TRACK'])){_method=method.toUpperCase();}
if(!!~Basic.inArray(_method,['CONNECT','TRACE','TRACK'])){throw new x.DOMException(x.DOMException.SECURITY_ERR);}
url=Encode.utf8_encode(url);urlp=Url.parseUrl(url);_same_origin_flag=Url.hasSameOrigin(urlp);_url=Url.resolveUrl(url);if((user||password)&&!_same_origin_flag){throw new x.DOMException(x.DOMException.INVALID_ACCESS_ERR);}
_user=user||urlp.user;_password=password||urlp.pass;_async=async||true;if(_async===false&&(_p('timeout')||_p('withCredentials')||_p('responseType')!=="")){throw new x.DOMException(x.DOMException.INVALID_ACCESS_ERR);}
_sync_flag=!_async;_send_flag=false;_headers={};_reset.call(this);_p('readyState',XMLHttpRequest.OPENED);this.convertEventPropsToHandlers(['readystatechange']);this.dispatchEvent('readystatechange');},setRequestHeader:function(header,value){var uaHeaders=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];if(_p('readyState')!==XMLHttpRequest.OPENED||_send_flag){throw new x.DOMException(x.DOMException.INVALID_STATE_ERR);}
if(/[\u0100-\uffff]/.test(header)||Encode.utf8_encode(header)!==header){throw new x.DOMException(x.DOMException.SYNTAX_ERR);}
header=Basic.trim(header).toLowerCase();if(!!~Basic.inArray(header,uaHeaders)||/^(proxy\-|sec\-)/.test(header)){return false;}
if(!_headers[header]){_headers[header]=value;}else{_headers[header]+=', '+value;}
return true;},getAllResponseHeaders:function(){return _responseHeaders||'';},getResponseHeader:function(header){header=header.toLowerCase();if(_error_flag||!!~Basic.inArray(header,['set-cookie','set-cookie2'])){return null;}
if(_responseHeaders&&_responseHeaders!==''){if(!_responseHeadersBag){_responseHeadersBag={};Basic.each(_responseHeaders.split(/\r\n/),function(line){var pair=line.split(/:\s+/);if(pair.length===2){pair[0]=Basic.trim(pair[0]);_responseHeadersBag[pair[0].toLowerCase()]={header:pair[0],value:Basic.trim(pair[1])};}});}
if(_responseHeadersBag.hasOwnProperty(header)){return _responseHeadersBag[header].header+': '+_responseHeadersBag[header].value;}}
return null;},overrideMimeType:function(mime){var matches,charset;if(!!~Basic.inArray(_p('readyState'),[XMLHttpRequest.LOADING,XMLHttpRequest.DONE])){throw new x.DOMException(x.DOMException.INVALID_STATE_ERR);}
mime=Basic.trim(mime.toLowerCase());if(/;/.test(mime)&&(matches=mime.match(/^([^;]+)(?:;\scharset\=)?(.*)$/))){mime=matches[1];if(matches[2]){charset=matches[2];}}
if(!Mime.mimes[mime]){throw new x.DOMException(x.DOMException.SYNTAX_ERR);}
_finalMime=mime;_finalCharset=charset;},send:function(data,options){if(Basic.typeOf(options)==='string'){_options={ruid:options};}else if(!options){_options={};}else{_options=options;}
this.convertEventPropsToHandlers(dispatches);this.upload.convertEventPropsToHandlers(dispatches);if(this.readyState!==XMLHttpRequest.OPENED||_send_flag){throw new x.DOMException(x.DOMException.INVALID_STATE_ERR);}
if(data instanceof Blob){_options.ruid=data.ruid;_mimeType=data.type||'application/octet-stream';}
else if(data instanceof FormData){if(data.hasBlob()){var blob=data.getBlob();_options.ruid=blob.ruid;_mimeType=blob.type||'application/octet-stream';}}
else if(typeof data==='string'){_encoding='UTF-8';_mimeType='text/plain;charset=UTF-8';data=Encode.utf8_encode(data);}
if(!this.withCredentials){this.withCredentials=(_options.required_caps&&_options.required_caps.send_browser_cookies)&&!_same_origin_flag;}
_upload_events_flag=(!_sync_flag&&this.upload.hasEventListener());_error_flag=false;_upload_complete_flag=!data;if(!_sync_flag){_send_flag=true;}
_doXHR.call(this,data);},abort:function(){_error_flag=true;_sync_flag=false;if(!~Basic.inArray(_p('readyState'),[XMLHttpRequest.UNSENT,XMLHttpRequest.OPENED,XMLHttpRequest.DONE])){_p('readyState',XMLHttpRequest.DONE);_send_flag=false;if(_xhr){_xhr.getRuntime().exec.call(_xhr,'XMLHttpRequest','abort',_upload_complete_flag);}else{throw new x.DOMException(x.DOMException.INVALID_STATE_ERR);}
_upload_complete_flag=true;}else{_p('readyState',XMLHttpRequest.UNSENT);}},destroy:function(){if(_xhr){if(Basic.typeOf(_xhr.destroy)==='function'){_xhr.destroy();}
_xhr=null;}
this.unbindAll();if(this.upload){this.upload.unbindAll();this.upload=null;}}});function _p(prop,value){if(!props.hasOwnProperty(prop)){return;}
if(arguments.length===1){return Env.can('define_property')?props[prop]:self[prop];}else{if(Env.can('define_property')){props[prop]=value;}else{self[prop]=value;}}}
function _doXHR(data){var self=this;_start_time=new Date().getTime();_xhr=new RuntimeTarget();function loadEnd(){if(_xhr){_xhr.destroy();_xhr=null;}
self.dispatchEvent('loadend');self=null;}
function exec(runtime){_xhr.bind('LoadStart',function(e){_p('readyState',XMLHttpRequest.LOADING);self.dispatchEvent('readystatechange');self.dispatchEvent(e);if(_upload_events_flag){self.upload.dispatchEvent(e);}});_xhr.bind('Progress',function(e){if(_p('readyState')!==XMLHttpRequest.LOADING){_p('readyState',XMLHttpRequest.LOADING);self.dispatchEvent('readystatechange');}
self.dispatchEvent(e);});_xhr.bind('UploadProgress',function(e){if(_upload_events_flag){self.upload.dispatchEvent({type:'progress',lengthComputable:false,total:e.total,loaded:e.loaded});}});_xhr.bind('Load',function(e){_p('readyState',XMLHttpRequest.DONE);_p('status',Number(runtime.exec.call(_xhr,'XMLHttpRequest','getStatus')||0));_p('statusText',httpCode[_p('status')]||"");_p('response',runtime.exec.call(_xhr,'XMLHttpRequest','getResponse',_p('responseType')));if(!!~Basic.inArray(_p('responseType'),['text',''])){_p('responseText',_p('response'));}else if(_p('responseType')==='document'){_p('responseXML',_p('response'));}
_responseHeaders=runtime.exec.call(_xhr,'XMLHttpRequest','getAllResponseHeaders');self.dispatchEvent('readystatechange');if(_p('status')>0){if(_upload_events_flag){self.upload.dispatchEvent(e);}
self.dispatchEvent(e);}else{_error_flag=true;self.dispatchEvent('error');}
loadEnd();});_xhr.bind('Abort',function(e){self.dispatchEvent(e);loadEnd();});_xhr.bind('Error',function(e){_error_flag=true;_p('readyState',XMLHttpRequest.DONE);self.dispatchEvent('readystatechange');_upload_complete_flag=true;self.dispatchEvent(e);loadEnd();});runtime.exec.call(_xhr,'XMLHttpRequest','send',{url:_url,method:_method,async:_async,user:_user,password:_password,headers:_headers,mimeType:_mimeType,encoding:_encoding,responseType:self.responseType,withCredentials:self.withCredentials,options:_options},data);}
if(typeof(_options.required_caps)==='string'){_options.required_caps=Runtime.parseCaps(_options.required_caps);}
_options.required_caps=Basic.extend({},_options.required_caps,{return_response_type:self.responseType});if(data instanceof FormData){_options.required_caps.send_multipart=true;}
if(!_same_origin_flag){_options.required_caps.do_cors=true;}
if(_options.ruid){exec(_xhr.connectRuntime(_options));}else{_xhr.bind('RuntimeInit',function(e,runtime){exec(runtime);});_xhr.bind('RuntimeError',function(e,err){self.dispatchEvent('RuntimeError',err);});_xhr.connectRuntime(_options);}}
function _reset(){_p('responseText',"");_p('responseXML',null);_p('response',null);_p('status',0);_p('statusText',"");_start_time=_timeoutset_time=null;}}
XMLHttpRequest.UNSENT=0;XMLHttpRequest.OPENED=1;XMLHttpRequest.HEADERS_RECEIVED=2;XMLHttpRequest.LOADING=3;XMLHttpRequest.DONE=4;XMLHttpRequest.prototype=EventTarget.instance;return XMLHttpRequest;});define("moxie/runtime/Transporter",["moxie/core/utils/Basic","moxie/core/utils/Encode","moxie/runtime/RuntimeClient","moxie/core/EventTarget"],function(Basic,Encode,RuntimeClient,EventTarget){function Transporter(){var mod,_runtime,_data,_size,_pos,_chunk_size;RuntimeClient.call(this);Basic.extend(this,{uid:Basic.guid('uid_'),state:Transporter.IDLE,result:null,transport:function(data,type,options){var self=this;options=Basic.extend({chunk_size:204798},options);if((mod=options.chunk_size%3)){options.chunk_size+=3-mod;}
_chunk_size=options.chunk_size;_reset.call(this);_data=data;_size=data.length;if(Basic.typeOf(options)==='string'||options.ruid){_run.call(self,type,this.connectRuntime(options));}else{var cb=function(e,runtime){self.unbind("RuntimeInit",cb);_run.call(self,type,runtime);};this.bind("RuntimeInit",cb);this.connectRuntime(options);}},abort:function(){var self=this;self.state=Transporter.IDLE;if(_runtime){_runtime.exec.call(self,'Transporter','clear');self.trigger("TransportingAborted");}
_reset.call(self);},destroy:function(){this.unbindAll();_runtime=null;this.disconnectRuntime();_reset.call(this);}});function _reset(){_size=_pos=0;_data=this.result=null;}
function _run(type,runtime){var self=this;_runtime=runtime;self.bind("TransportingProgress",function(e){_pos=e.loaded;if(_pos<_size&&Basic.inArray(self.state,[Transporter.IDLE,Transporter.DONE])===-1){_transport.call(self);}},999);self.bind("TransportingComplete",function(){_pos=_size;self.state=Transporter.DONE;_data=null;self.result=_runtime.exec.call(self,'Transporter','getAsBlob',type||'');},999);self.state=Transporter.BUSY;self.trigger("TransportingStarted");_transport.call(self);}
function _transport(){var self=this,chunk,bytesLeft=_size-_pos;if(_chunk_size>bytesLeft){_chunk_size=bytesLeft;}
chunk=Encode.btoa(_data.substr(_pos,_chunk_size));_runtime.exec.call(self,'Transporter','receive',chunk,_size);}}
Transporter.IDLE=0;Transporter.BUSY=1;Transporter.DONE=2;Transporter.prototype=EventTarget.instance;return Transporter;});define("moxie/image/Image",["moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/file/FileReaderSync","moxie/xhr/XMLHttpRequest","moxie/runtime/Runtime","moxie/runtime/RuntimeClient","moxie/runtime/Transporter","moxie/core/utils/Env","moxie/core/EventTarget","moxie/file/Blob","moxie/file/File","moxie/core/utils/Encode"],function(Basic,Dom,x,FileReaderSync,XMLHttpRequest,Runtime,RuntimeClient,Transporter,Env,EventTarget,Blob,File,Encode){var dispatches=['progress','load','error','resize','embedded'];function Image(){RuntimeClient.call(this);Basic.extend(this,{uid:Basic.guid('uid_'),ruid:null,name:"",size:0,width:0,height:0,type:"",meta:{},clone:function(){this.load.apply(this,arguments);},load:function(){this.bind('Load Resize',function(){_updateInfo.call(this);},999);this.convertEventPropsToHandlers(dispatches);_load.apply(this,arguments);},downsize:function(opts){var defaults={width:this.width,height:this.height,crop:false,preserveHeaders:true};if(typeof(opts)==='object'){opts=Basic.extend(defaults,opts);}else{opts=Basic.extend(defaults,{width:arguments[0],height:arguments[1],crop:arguments[2],preserveHeaders:arguments[3]});}
try{if(!this.size){throw new x.DOMException(x.DOMException.INVALID_STATE_ERR);}
if(this.width>Image.MAX_RESIZE_WIDTH||this.height>Image.MAX_RESIZE_HEIGHT){throw new x.ImageError(x.ImageError.MAX_RESOLUTION_ERR);}
this.getRuntime().exec.call(this,'Image','downsize',opts.width,opts.height,opts.crop,opts.preserveHeaders);}catch(ex){this.trigger('error',ex.code);}},crop:function(width,height,preserveHeaders){this.downsize(width,height,true,preserveHeaders);},getAsCanvas:function(){if(!Env.can('create_canvas')){throw new x.RuntimeError(x.RuntimeError.NOT_SUPPORTED_ERR);}
var runtime=this.connectRuntime(this.ruid);return runtime.exec.call(this,'Image','getAsCanvas');},getAsBlob:function(type,quality){if(!this.size){throw new x.DOMException(x.DOMException.INVALID_STATE_ERR);}
if(!type){type='image/jpeg';}
if(type==='image/jpeg'&&!quality){quality=90;}
return this.getRuntime().exec.call(this,'Image','getAsBlob',type,quality);},getAsDataURL:function(type,quality){if(!this.size){throw new x.DOMException(x.DOMException.INVALID_STATE_ERR);}
return this.getRuntime().exec.call(this,'Image','getAsDataURL',type,quality);},getAsBinaryString:function(type,quality){var dataUrl=this.getAsDataURL(type,quality);return Encode.atob(dataUrl.substring(dataUrl.indexOf('base64,')+7));},embed:function(el){var self=this,imgCopy,type,quality,crop,options=arguments[1]||{},width=this.width,height=this.height,runtime;function onResize(){if(Env.can('create_canvas')){var canvas=imgCopy.getAsCanvas();if(canvas){el.appendChild(canvas);canvas=null;imgCopy.destroy();self.trigger('embedded');return;}}
var dataUrl=imgCopy.getAsDataURL(type,quality);if(!dataUrl){throw new x.ImageError(x.ImageError.WRONG_FORMAT);}
if(Env.can('use_data_uri_of',dataUrl.length)){el.innerHTML='<img src="'+dataUrl+'" width="'+imgCopy.width+'" height="'+imgCopy.height+'" />';imgCopy.destroy();self.trigger('embedded');}else{var tr=new Transporter();tr.bind("TransportingComplete",function(){runtime=self.connectRuntime(this.result.ruid);self.bind("Embedded",function(){Basic.extend(runtime.getShimContainer().style,{top:'0px',left:'0px',width:imgCopy.width+'px',height:imgCopy.height+'px'});runtime=null;},999);runtime.exec.call(self,"ImageView","display",this.result.uid,width,height);imgCopy.destroy();});tr.transport(Encode.atob(dataUrl.substring(dataUrl.indexOf('base64,')+7)),type,Basic.extend({},options,{required_caps:{display_media:true},runtime_order:'flash,silverlight',container:el}));}}
try{if(!(el=Dom.get(el))){throw new x.DOMException(x.DOMException.INVALID_NODE_TYPE_ERR);}
if(!this.size){throw new x.DOMException(x.DOMException.INVALID_STATE_ERR);}
if(this.width>Image.MAX_RESIZE_WIDTH||this.height>Image.MAX_RESIZE_HEIGHT){throw new x.ImageError(x.ImageError.MAX_RESOLUTION_ERR);}
type=options.type||this.type||'image/jpeg';quality=options.quality||90;crop=Basic.typeOf(options.crop)!=='undefined'?options.crop:false;if(options.width){width=options.width;height=options.height||width;}else{var dimensions=Dom.getSize(el);if(dimensions.w&&dimensions.h){width=dimensions.w;height=dimensions.h;}}
imgCopy=new Image();imgCopy.bind("Resize",function(){onResize.call(self);});imgCopy.bind("Load",function(){imgCopy.downsize(width,height,crop,false);});imgCopy.clone(this,false);return imgCopy;}catch(ex){this.trigger('error',ex.code);}},destroy:function(){if(this.ruid){this.getRuntime().exec.call(this,'Image','destroy');this.disconnectRuntime();}
this.unbindAll();}});function _updateInfo(info){if(!info){info=this.getRuntime().exec.call(this,'Image','getInfo');}
this.size=info.size;this.width=info.width;this.height=info.height;this.type=info.type;this.meta=info.meta;if(this.name===''){this.name=info.name;}}
function _load(src){var srcType=Basic.typeOf(src);try{if(src instanceof Image){if(!src.size){throw new x.DOMException(x.DOMException.INVALID_STATE_ERR);}
_loadFromImage.apply(this,arguments);}
else if(src instanceof Blob){if(!~Basic.inArray(src.type,['image/jpeg','image/png'])){throw new x.ImageError(x.ImageError.WRONG_FORMAT);}
_loadFromBlob.apply(this,arguments);}
else if(Basic.inArray(srcType,['blob','file'])!==-1){_load.call(this,new File(null,src),arguments[1]);}
else if(srcType==='string'){if(/^data:[^;]*;base64,/.test(src)){_load.call(this,new Blob(null,{data:src}),arguments[1]);}
else{_loadFromUrl.apply(this,arguments);}}
else if(srcType==='node'&&src.nodeName.toLowerCase()==='img'){_load.call(this,src.src,arguments[1]);}
else{throw new x.DOMException(x.DOMException.TYPE_MISMATCH_ERR);}}catch(ex){this.trigger('error',ex.code);}}
function _loadFromImage(img,exact){var runtime=this.connectRuntime(img.ruid);this.ruid=runtime.uid;runtime.exec.call(this,'Image','loadFromImage',img,(Basic.typeOf(exact)==='undefined'?true:exact));}
function _loadFromBlob(blob,options){var self=this;self.name=blob.name||'';function exec(runtime){self.ruid=runtime.uid;runtime.exec.call(self,'Image','loadFromBlob',blob);}
if(blob.isDetached()){this.bind('RuntimeInit',function(e,runtime){exec(runtime);});if(options&&typeof(options.required_caps)==='string'){options.required_caps=Runtime.parseCaps(options.required_caps);}
this.connectRuntime(Basic.extend({required_caps:{access_image_binary:true,resize_image:true}},options));}else{exec(this.connectRuntime(blob.ruid));}}
function _loadFromUrl(url,options){var self=this,xhr;xhr=new XMLHttpRequest();xhr.open('get',url);xhr.responseType='blob';xhr.onprogress=function(e){self.trigger(e);};xhr.onload=function(){_loadFromBlob.call(self,xhr.response,true);};xhr.onerror=function(e){self.trigger(e);};xhr.onloadend=function(){xhr.destroy();};xhr.bind('RuntimeError',function(e,err){self.trigger('RuntimeError',err);});xhr.send(null,options);}}
Image.MAX_RESIZE_WIDTH=6500;Image.MAX_RESIZE_HEIGHT=6500;Image.prototype=EventTarget.instance;return Image;});define("moxie/runtime/html5/Runtime",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/Runtime","moxie/core/utils/Env"],function(Basic,x,Runtime,Env){var type="html5",extensions={};function Html5Runtime(options){var I=this,Test=Runtime.capTest,True=Runtime.capTrue;var caps=Basic.extend({access_binary:Test(window.FileReader||window.File&&window.File.getAsDataURL),access_image_binary:function(){return I.can('access_binary')&&!!extensions.Image;},display_media:Test(Env.can('create_canvas')||Env.can('use_data_uri_over32kb')),do_cors:Test(window.XMLHttpRequest&&'withCredentials'in new XMLHttpRequest()),drag_and_drop:Test(function(){var div=document.createElement('div');return(('draggable'in div)||('ondragstart'in div&&'ondrop'in div))&&(Env.browser!=='IE'||Env.version>9);}()),filter_by_extension:Test(function(){return(Env.browser==='Chrome'&&Env.version>=28)||(Env.browser==='IE'&&Env.version>=10);}()),return_response_headers:True,return_response_type:function(responseType){if(responseType==='json'&&!!window.JSON){return true;}
return Env.can('return_response_type',responseType);},return_status_code:True,report_upload_progress:Test(window.XMLHttpRequest&&new XMLHttpRequest().upload),resize_image:function(){return I.can('access_binary')&&Env.can('create_canvas');},select_file:function(){return Env.can('use_fileinput')&&window.File;},select_folder:function(){return I.can('select_file')&&Env.browser==='Chrome'&&Env.version>=21;},select_multiple:function(){return I.can('select_file')&&!(Env.browser==='Safari'&&Env.os==='Windows')&&!(Env.os==='iOS'&&Env.verComp(Env.osVersion,"7.0.4",'<'));},send_binary_string:Test(window.XMLHttpRequest&&(new XMLHttpRequest().sendAsBinary||(window.Uint8Array&&window.ArrayBuffer))),send_custom_headers:Test(window.XMLHttpRequest),send_multipart:function(){return!!(window.XMLHttpRequest&&new XMLHttpRequest().upload&&window.FormData)||I.can('send_binary_string');},slice_blob:Test(window.File&&(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice)),stream_upload:function(){return I.can('slice_blob')&&I.can('send_multipart');},summon_file_dialog:Test(function(){return(Env.browser==='Firefox'&&Env.version>=4)||(Env.browser==='Opera'&&Env.version>=12)||(Env.browser==='IE'&&Env.version>=10)||!!~Basic.inArray(Env.browser,['Chrome','Safari']);}()),upload_filesize:True},arguments[2]);Runtime.call(this,options,(arguments[1]||type),caps);Basic.extend(this,{init:function(){this.trigger("Init");},destroy:(function(destroy){return function(){destroy.call(I);destroy=I=null;};}(this.destroy))});Basic.extend(this.getShim(),extensions);}
Runtime.addConstructor(type,Html5Runtime);return extensions;});define("moxie/runtime/html5/file/Blob",["moxie/runtime/html5/Runtime","moxie/file/Blob"],function(extensions,Blob){function HTML5Blob(){function w3cBlobSlice(blob,start,end){var blobSlice;if(window.File.prototype.slice){try{blob.slice();return blob.slice(start,end);}catch(e){return blob.slice(start,end-start);}}else if((blobSlice=window.File.prototype.webkitSlice||window.File.prototype.mozSlice)){return blobSlice.call(blob,start,end);}else{return null;}}
this.slice=function(){return new Blob(this.getRuntime().uid,w3cBlobSlice.apply(this,arguments));};}
return(extensions.Blob=HTML5Blob);});define('moxie/core/utils/Events',['moxie/core/utils/Basic'],function(Basic){var eventhash={},uid='moxie_'+Basic.guid();function preventDefault(){this.returnValue=false;}
function stopPropagation(){this.cancelBubble=true;}
var addEvent=function(obj,name,callback,key){var func,events;name=name.toLowerCase();if(obj.addEventListener){func=callback;obj.addEventListener(name,func,false);}else if(obj.attachEvent){func=function(){var evt=window.event;if(!evt.target){evt.target=evt.srcElement;}
evt.preventDefault=preventDefault;evt.stopPropagation=stopPropagation;callback(evt);};obj.attachEvent('on'+name,func);}
if(!obj[uid]){obj[uid]=Basic.guid();}
if(!eventhash.hasOwnProperty(obj[uid])){eventhash[obj[uid]]={};}
events=eventhash[obj[uid]];if(!events.hasOwnProperty(name)){events[name]=[];}
events[name].push({func:func,orig:callback,key:key});};var removeEvent=function(obj,name,callback){var type,undef;name=name.toLowerCase();if(obj[uid]&&eventhash[obj[uid]]&&eventhash[obj[uid]][name]){type=eventhash[obj[uid]][name];}else{return;}
for(var i=type.length-1;i>=0;i--){if(type[i].orig===callback||type[i].key===callback){if(obj.removeEventListener){obj.removeEventListener(name,type[i].func,false);}else if(obj.detachEvent){obj.detachEvent('on'+name,type[i].func);}
type[i].orig=null;type[i].func=null;type.splice(i,1);if(callback!==undef){break;}}}
if(!type.length){delete eventhash[obj[uid]][name];}
if(Basic.isEmptyObj(eventhash[obj[uid]])){delete eventhash[obj[uid]];try{delete obj[uid];}catch(e){obj[uid]=undef;}}};var removeAllEvents=function(obj,key){if(!obj||!obj[uid]){return;}
Basic.each(eventhash[obj[uid]],function(events,name){removeEvent(obj,name,key);});};return{addEvent:addEvent,removeEvent:removeEvent,removeAllEvents:removeAllEvents};});define("moxie/runtime/html5/file/FileInput",["moxie/runtime/html5/Runtime","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Events","moxie/core/utils/Mime","moxie/core/utils/Env"],function(extensions,Basic,Dom,Events,Mime,Env){function FileInput(){var _files=[],_options;Basic.extend(this,{init:function(options){var comp=this,I=comp.getRuntime(),input,shimContainer,mimes,browseButton,zIndex,top;_options=options;_files=[];mimes=_options.accept.mimes||Mime.extList2mimes(_options.accept,I.can('filter_by_extension'));shimContainer=I.getShimContainer();shimContainer.innerHTML='<label class="hidden" for="'+I.uid+'">File</label><input class="js-hidden_file_uploader_input" id="'+I.uid+'" type="file" style="font-size:999px;opacity:0;"'+
(_options.multiple&&I.can('select_multiple')?'multiple':'')+
(_options.directory&&I.can('select_folder')?'webkitdirectory directory':'')+
(mimes?' accept="'+mimes.join(',')+'"':'')+' />';input=Dom.get(I.uid);Basic.extend(input.style,{position:'absolute',top:0,left:0,width:'100%',height:'100%'});browseButton=Dom.get(_options.browse_button);if(I.can('summon_file_dialog')){if(Dom.getStyle(browseButton,'position')==='static'){browseButton.style.position='relative';}
zIndex=parseInt(Dom.getStyle(browseButton,'z-index'),10)||1;browseButton.style.zIndex=zIndex;shimContainer.style.zIndex=zIndex-1;Events.addEvent(browseButton,'click',function(e){var input=Dom.get(I.uid);if(input&&!input.disabled){input.click();}
e.preventDefault();},comp.uid);}
top=I.can('summon_file_dialog')?browseButton:shimContainer;Events.addEvent(top,'mouseover',function(){comp.trigger('mouseenter');},comp.uid);Events.addEvent(top,'mouseout',function(){comp.trigger('mouseleave');},comp.uid);Events.addEvent(top,'mousedown',function(){comp.trigger('mousedown');},comp.uid);Events.addEvent(Dom.get(_options.container),'mouseup',function(){comp.trigger('mouseup');},comp.uid);input.onchange=function onChange(){_files=[];if(_options.directory){Basic.each(this.files,function(file){if(file.name!=="."){_files.push(file);}});}else{_files=[].slice.call(this.files);}
if(Env.browser!=='IE'&&Env.browser!=='IEMobile'){this.value='';}else{var clone=this.cloneNode(true);this.parentNode.replaceChild(clone,this);clone.onchange=onChange;}
comp.trigger('change');};comp.trigger({type:'ready',async:true});shimContainer=null;},getFiles:function(){return _files;},disable:function(state){var I=this.getRuntime(),input;if((input=Dom.get(I.uid))){input.disabled=!!state;}},destroy:function(){var I=this.getRuntime(),shim=I.getShim(),shimContainer=I.getShimContainer();Events.removeAllEvents(shimContainer,this.uid);Events.removeAllEvents(_options&&Dom.get(_options.container),this.uid);Events.removeAllEvents(_options&&Dom.get(_options.browse_button),this.uid);if(shimContainer){shimContainer.innerHTML='';}
shim.removeInstance(this.uid);_files=_options=shimContainer=shim=null;}});}
return(extensions.FileInput=FileInput);});define("moxie/runtime/html5/file/FileDrop",["moxie/runtime/html5/Runtime","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Events","moxie/core/utils/Mime"],function(extensions,Basic,Dom,Events,Mime){function FileDrop(){var _files=[],_allowedExts=[],_options;Basic.extend(this,{init:function(options){var comp=this,dropZone;_options=options;_allowedExts=_extractExts(_options.accept);dropZone=_options.container;Events.addEvent(dropZone,'dragover',function(e){if(!_hasFiles(e)){return;}
e.preventDefault();e.dataTransfer.dropEffect='copy';},comp.uid);Events.addEvent(dropZone,'drop',function(e){if(!_hasFiles(e)){return;}
e.preventDefault();_files=[];if(e.dataTransfer.items&&e.dataTransfer.items[0].webkitGetAsEntry){_readItems(e.dataTransfer.items,function(){comp.trigger("drop");});}else{Basic.each(e.dataTransfer.files,function(file){if(_isAcceptable(file)){_files.push(file);}});comp.trigger("drop");}},comp.uid);Events.addEvent(dropZone,'dragenter',function(e){comp.trigger("dragenter");},comp.uid);Events.addEvent(dropZone,'dragleave',function(e){comp.trigger("dragleave");},comp.uid);},getFiles:function(){return _files;},destroy:function(){Events.removeAllEvents(_options&&Dom.get(_options.container),this.uid);_files=_allowedExts=_options=null;}});function _hasFiles(e){if(!e.dataTransfer||!e.dataTransfer.types){return false;}
var types=Basic.toArray(e.dataTransfer.types||[]);return Basic.inArray("Files",types)!==-1||Basic.inArray("public.file-url",types)!==-1||Basic.inArray("application/x-moz-file",types)!==-1;}
function _extractExts(accept){var exts=[];for(var i=0;i<accept.length;i++){[].push.apply(exts,accept[i].extensions.split(/\s*,\s*/));}
return Basic.inArray('*',exts)===-1?exts:[];}
function _isAcceptable(file){if(!_allowedExts.length){return true;}
var ext=Mime.getFileExtension(file.name);return!ext||Basic.inArray(ext,_allowedExts)!==-1;}
function _readItems(items,cb){var entries=[];Basic.each(items,function(item){var entry=item.webkitGetAsEntry();if(entry){if(entry.isFile){var file=item.getAsFile();if(_isAcceptable(file)){_files.push(file);}}else{entries.push(entry);}}});if(entries.length){_readEntries(entries,cb);}else{cb();}}
function _readEntries(entries,cb){var queue=[];Basic.each(entries,function(entry){queue.push(function(cbcb){_readEntry(entry,cbcb);});});Basic.inSeries(queue,function(){cb();});}
function _readEntry(entry,cb){if(entry.isFile){entry.file(function(file){if(_isAcceptable(file)){_files.push(file);}
cb();},function(){cb();});}else if(entry.isDirectory){_readDirEntry(entry,cb);}else{cb();}}
function _readDirEntry(dirEntry,cb){var entries=[],dirReader=dirEntry.createReader();function getEntries(cbcb){dirReader.readEntries(function(moreEntries){if(moreEntries.length){[].push.apply(entries,moreEntries);getEntries(cbcb);}else{cbcb();}},cbcb);}
getEntries(function(){_readEntries(entries,cb);});}}
return(extensions.FileDrop=FileDrop);});define("moxie/runtime/html5/file/FileReader",["moxie/runtime/html5/Runtime","moxie/core/utils/Encode","moxie/core/utils/Basic"],function(extensions,Encode,Basic){function FileReader(){var _fr,_convertToBinary=false;Basic.extend(this,{read:function(op,blob){var target=this;_fr=new window.FileReader();_fr.addEventListener('progress',function(e){target.trigger(e);});_fr.addEventListener('load',function(e){target.trigger(e);});_fr.addEventListener('error',function(e){target.trigger(e,_fr.error);});_fr.addEventListener('loadend',function(){_fr=null;});if(Basic.typeOf(_fr[op])==='function'){_convertToBinary=false;_fr[op](blob.getSource());}else if(op==='readAsBinaryString'){_convertToBinary=true;_fr.readAsDataURL(blob.getSource());}},getResult:function(){return _fr&&_fr.result?(_convertToBinary?_toBinary(_fr.result):_fr.result):null;},abort:function(){if(_fr){_fr.abort();}},destroy:function(){_fr=null;}});function _toBinary(str){return Encode.atob(str.substring(str.indexOf('base64,')+7));}}
return(extensions.FileReader=FileReader);});define("moxie/runtime/html5/xhr/XMLHttpRequest",["moxie/runtime/html5/Runtime","moxie/core/utils/Basic","moxie/core/utils/Mime","moxie/core/utils/Url","moxie/file/File","moxie/file/Blob","moxie/xhr/FormData","moxie/core/Exceptions","moxie/core/utils/Env"],function(extensions,Basic,Mime,Url,File,Blob,FormData,x,Env){function XMLHttpRequest(){var self=this,_xhr,_filename;Basic.extend(this,{send:function(meta,data){var target=this,isGecko2_5_6=(Env.browser==='Mozilla'&&Env.version>=4&&Env.version<7),isAndroidBrowser=Env.browser==='Android Browser',mustSendAsBinary=false;_filename=meta.url.replace(/^.+?\/([\w\-\.]+)$/,'$1').toLowerCase();_xhr=_getNativeXHR();_xhr.open(meta.method,meta.url,meta.async,meta.user,meta.password);if(data instanceof Blob){if(data.isDetached()){mustSendAsBinary=true;}
data=data.getSource();}else if(data instanceof FormData){if(data.hasBlob()){if(data.getBlob().isDetached()){data=_prepareMultipart.call(target,data);mustSendAsBinary=true;}else if((isGecko2_5_6||isAndroidBrowser)&&Basic.typeOf(data.getBlob().getSource())==='blob'&&window.FileReader){_preloadAndSend.call(target,meta,data);return;}}
if(data instanceof FormData){var fd=new window.FormData();data.each(function(value,name){if(value instanceof Blob){fd.append(name,value.getSource());}else{fd.append(name,value);}});data=fd;}}
if(_xhr.upload){if(meta.withCredentials){_xhr.withCredentials=true;}
_xhr.addEventListener('load',function(e){target.trigger(e);});_xhr.addEventListener('error',function(e){target.trigger(e);});_xhr.addEventListener('progress',function(e){target.trigger(e);});_xhr.upload.addEventListener('progress',function(e){target.trigger({type:'UploadProgress',loaded:e.loaded,total:e.total});});}else{_xhr.onreadystatechange=function onReadyStateChange(){switch(_xhr.readyState){case 1:break;case 2:break;case 3:var total,loaded;try{if(Url.hasSameOrigin(meta.url)){total=_xhr.getResponseHeader('Content-Length')||0;}
if(_xhr.responseText){loaded=_xhr.responseText.length;}}catch(ex){total=loaded=0;}
target.trigger({type:'progress',lengthComputable:!!total,total:parseInt(total,10),loaded:loaded});break;case 4:_xhr.onreadystatechange=function(){};if(_xhr.status===0){target.trigger('error');}else{target.trigger('load');}
break;}};}
if(!Basic.isEmptyObj(meta.headers)){Basic.each(meta.headers,function(value,header){_xhr.setRequestHeader(header,value);});}
if(""!==meta.responseType&&'responseType'in _xhr){if('json'===meta.responseType&&!Env.can('return_response_type','json')){_xhr.responseType='text';}else{_xhr.responseType=meta.responseType;}}
if(!mustSendAsBinary){_xhr.send(data);}else{if(_xhr.sendAsBinary){_xhr.sendAsBinary(data);}else{(function(){var ui8a=new Uint8Array(data.length);for(var i=0;i<data.length;i++){ui8a[i]=(data.charCodeAt(i)&0xff);}
_xhr.send(ui8a.buffer);}());}}
target.trigger('loadstart');},getStatus:function(){try{if(_xhr){return _xhr.status;}}catch(ex){}
return 0;},getResponse:function(responseType){var I=this.getRuntime();try{switch(responseType){case'blob':var file=new File(I.uid,_xhr.response);var disposition=_xhr.getResponseHeader('Content-Disposition');if(disposition){var match=disposition.match(/filename=([\'\"'])([^\1]+)\1/);if(match){_filename=match[2];}}
file.name=_filename;if(!file.type){file.type=Mime.getFileMime(_filename);}
return file;case'json':if(!Env.can('return_response_type','json')){return _xhr.status===200&&!!window.JSON?JSON.parse(_xhr.responseText):null;}
return _xhr.response;case'document':return _getDocument(_xhr);default:return _xhr.responseText!==''?_xhr.responseText:null;}}catch(ex){return null;}},getAllResponseHeaders:function(){try{return _xhr.getAllResponseHeaders();}catch(ex){}
return'';},abort:function(){if(_xhr){_xhr.abort();}},destroy:function(){self=_filename=null;}});function _preloadAndSend(meta,data){var target=this,blob,fr;blob=data.getBlob().getSource();fr=new window.FileReader();fr.onload=function(){data.append(data.getBlobName(),new Blob(null,{type:blob.type,data:fr.result}));self.send.call(target,meta,data);};fr.readAsBinaryString(blob);}
function _getNativeXHR(){if(window.XMLHttpRequest&&!(Env.browser==='IE'&&Env.version<8)){return new window.XMLHttpRequest();}else{return(function(){var progIDs=['Msxml2.XMLHTTP.6.0','Microsoft.XMLHTTP'];for(var i=0;i<progIDs.length;i++){try{return new ActiveXObject(progIDs[i]);}catch(ex){}}})();}}
function _getDocument(xhr){var rXML=xhr.responseXML;var rText=xhr.responseText;if(Env.browser==='IE'&&rText&&rXML&&!rXML.documentElement&&/[^\/]+\/[^\+]+\+xml/.test(xhr.getResponseHeader("Content-Type"))){rXML=new window.ActiveXObject("Microsoft.XMLDOM");rXML.async=false;rXML.validateOnParse=false;rXML.loadXML(rText);}
if(rXML){if((Env.browser==='IE'&&rXML.parseError!==0)||!rXML.documentElement||rXML.documentElement.tagName==="parsererror"){return null;}}
return rXML;}
function _prepareMultipart(fd){var boundary='----moxieboundary'+new Date().getTime(),dashdash='--',crlf='\r\n',multipart='',I=this.getRuntime();if(!I.can('send_binary_string')){throw new x.RuntimeError(x.RuntimeError.NOT_SUPPORTED_ERR);}
_xhr.setRequestHeader('Content-Type','multipart/form-data; boundary='+boundary);fd.each(function(value,name){if(value instanceof Blob){multipart+=dashdash+boundary+crlf+'Content-Disposition: form-data; name="'+name+'"; filename="'+unescape(encodeURIComponent(value.name||'blob'))+'"'+crlf+'Content-Type: '+(value.type||'application/octet-stream')+crlf+crlf+
value.getSource()+crlf;}else{multipart+=dashdash+boundary+crlf+'Content-Disposition: form-data; name="'+name+'"'+crlf+crlf+
unescape(encodeURIComponent(value))+crlf;}});multipart+=dashdash+boundary+dashdash+crlf;return multipart;}}
return(extensions.XMLHttpRequest=XMLHttpRequest);});define("moxie/runtime/html5/utils/BinaryReader",[],function(){return function(){var II=false,bin;function read(idx,size){var mv=II?0:-8*(size-1),sum=0,i;for(i=0;i<size;i++){sum|=(bin.charCodeAt(idx+i)<<Math.abs(mv+i*8));}
return sum;}
function putstr(segment,idx,length){length=arguments.length===3?length:bin.length-idx-1;bin=bin.substr(0,idx)+segment+bin.substr(length+idx);}
function write(idx,num,size){var str='',mv=II?0:-8*(size-1),i;for(i=0;i<size;i++){str+=String.fromCharCode((num>>Math.abs(mv+i*8))&255);}
putstr(str,idx,size);}
return{II:function(order){if(order===undefined){return II;}else{II=order;}},init:function(binData){II=false;bin=binData;},SEGMENT:function(idx,length,segment){switch(arguments.length){case 1:return bin.substr(idx,bin.length-idx-1);case 2:return bin.substr(idx,length);case 3:putstr(segment,idx,length);break;default:return bin;}},BYTE:function(idx){return read(idx,1);},SHORT:function(idx){return read(idx,2);},LONG:function(idx,num){if(num===undefined){return read(idx,4);}else{write(idx,num,4);}},SLONG:function(idx){var num=read(idx,4);return(num>2147483647?num-4294967296:num);},STRING:function(idx,size){var str='';for(size+=idx;idx<size;idx++){str+=String.fromCharCode(read(idx,1));}
return str;}};};});define("moxie/runtime/html5/image/JPEGHeaders",["moxie/runtime/html5/utils/BinaryReader"],function(BinaryReader){return function JPEGHeaders(data){var headers=[],read,idx,marker,length=0;read=new BinaryReader();read.init(data);if(read.SHORT(0)!==0xFFD8){return;}
idx=2;while(idx<=data.length){marker=read.SHORT(idx);if(marker>=0xFFD0&&marker<=0xFFD7){idx+=2;continue;}
if(marker===0xFFDA||marker===0xFFD9){break;}
length=read.SHORT(idx+2)+2;if(marker>=0xFFE1&&marker<=0xFFEF){headers.push({hex:marker,name:'APP'+(marker&0x000F),start:idx,length:length,segment:read.SEGMENT(idx,length)});}
idx+=length;}
read.init(null);return{headers:headers,restore:function(data){var max,i;read.init(data);idx=read.SHORT(2)==0xFFE0?4+read.SHORT(4):2;for(i=0,max=headers.length;i<max;i++){read.SEGMENT(idx,0,headers[i].segment);idx+=headers[i].length;}
data=read.SEGMENT();read.init(null);return data;},strip:function(data){var headers,jpegHeaders,i;jpegHeaders=new JPEGHeaders(data);headers=jpegHeaders.headers;jpegHeaders.purge();read.init(data);i=headers.length;while(i--){read.SEGMENT(headers[i].start,headers[i].length,'');}
data=read.SEGMENT();read.init(null);return data;},get:function(name){var array=[];for(var i=0,max=headers.length;i<max;i++){if(headers[i].name===name.toUpperCase()){array.push(headers[i].segment);}}
return array;},set:function(name,segment){var array=[],i,ii,max;if(typeof(segment)==='string'){array.push(segment);}else{array=segment;}
for(i=ii=0,max=headers.length;i<max;i++){if(headers[i].name===name.toUpperCase()){headers[i].segment=array[ii];headers[i].length=array[ii].length;ii++;}
if(ii>=array.length){break;}}},purge:function(){headers=[];read.init(null);read=null;}};};});define("moxie/runtime/html5/image/ExifParser",["moxie/core/utils/Basic","moxie/runtime/html5/utils/BinaryReader"],function(Basic,BinaryReader){return function ExifParser(){var data,tags,Tiff,offsets={},tagDescs;data=new BinaryReader();tags={tiff:{0x0112:'Orientation',0x010E:'ImageDescription',0x010F:'Make',0x0110:'Model',0x0131:'Software',0x8769:'ExifIFDPointer',0x8825:'GPSInfoIFDPointer'},exif:{0x9000:'ExifVersion',0xA001:'ColorSpace',0xA002:'PixelXDimension',0xA003:'PixelYDimension',0x9003:'DateTimeOriginal',0x829A:'ExposureTime',0x829D:'FNumber',0x8827:'ISOSpeedRatings',0x9201:'ShutterSpeedValue',0x9202:'ApertureValue',0x9207:'MeteringMode',0x9208:'LightSource',0x9209:'Flash',0x920A:'FocalLength',0xA402:'ExposureMode',0xA403:'WhiteBalance',0xA406:'SceneCaptureType',0xA404:'DigitalZoomRatio',0xA408:'Contrast',0xA409:'Saturation',0xA40A:'Sharpness'},gps:{0x0000:'GPSVersionID',0x0001:'GPSLatitudeRef',0x0002:'GPSLatitude',0x0003:'GPSLongitudeRef',0x0004:'GPSLongitude'}};tagDescs={'ColorSpace':{1:'sRGB',0:'Uncalibrated'},'MeteringMode':{0:'Unknown',1:'Average',2:'CenterWeightedAverage',3:'Spot',4:'MultiSpot',5:'Pattern',6:'Partial',255:'Other'},'LightSource':{1:'Daylight',2:'Fliorescent',3:'Tungsten',4:'Flash',9:'Fine weather',10:'Cloudy weather',11:'Shade',12:'Daylight fluorescent (D 5700 - 7100K)',13:'Day white fluorescent (N 4600 -5400K)',14:'Cool white fluorescent (W 3900 - 4500K)',15:'White fluorescent (WW 3200 - 3700K)',17:'Standard light A',18:'Standard light B',19:'Standard light C',20:'D55',21:'D65',22:'D75',23:'D50',24:'ISO studio tungsten',255:'Other'},'Flash':{0x0000:'Flash did not fire.',0x0001:'Flash fired.',0x0005:'Strobe return light not detected.',0x0007:'Strobe return light detected.',0x0009:'Flash fired, compulsory flash mode',0x000D:'Flash fired, compulsory flash mode, return light not detected',0x000F:'Flash fired, compulsory flash mode, return light detected',0x0010:'Flash did not fire, compulsory flash mode',0x0018:'Flash did not fire, auto mode',0x0019:'Flash fired, auto mode',0x001D:'Flash fired, auto mode, return light not detected',0x001F:'Flash fired, auto mode, return light detected',0x0020:'No flash function',0x0041:'Flash fired, red-eye reduction mode',0x0045:'Flash fired, red-eye reduction mode, return light not detected',0x0047:'Flash fired, red-eye reduction mode, return light detected',0x0049:'Flash fired, compulsory flash mode, red-eye reduction mode',0x004D:'Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected',0x004F:'Flash fired, compulsory flash mode, red-eye reduction mode, return light detected',0x0059:'Flash fired, auto mode, red-eye reduction mode',0x005D:'Flash fired, auto mode, return light not detected, red-eye reduction mode',0x005F:'Flash fired, auto mode, return light detected, red-eye reduction mode'},'ExposureMode':{0:'Auto exposure',1:'Manual exposure',2:'Auto bracket'},'WhiteBalance':{0:'Auto white balance',1:'Manual white balance'},'SceneCaptureType':{0:'Standard',1:'Landscape',2:'Portrait',3:'Night scene'},'Contrast':{0:'Normal',1:'Soft',2:'Hard'},'Saturation':{0:'Normal',1:'Low saturation',2:'High saturation'},'Sharpness':{0:'Normal',1:'Soft',2:'Hard'},'GPSLatitudeRef':{N:'North latitude',S:'South latitude'},'GPSLongitudeRef':{E:'East longitude',W:'West longitude'}};function extractTags(IFD_offset,tags2extract){var length=data.SHORT(IFD_offset),i,ii,tag,type,count,tagOffset,offset,value,values=[],hash={};for(i=0;i<length;i++){offset=tagOffset=IFD_offset+12*i+2;tag=tags2extract[data.SHORT(offset)];if(tag===undefined){continue;}
type=data.SHORT(offset+=2);count=data.LONG(offset+=2);offset+=4;values=[];switch(type){case 1:case 7:if(count>4){offset=data.LONG(offset)+offsets.tiffHeader;}
for(ii=0;ii<count;ii++){values[ii]=data.BYTE(offset+ii);}
break;case 2:if(count>4){offset=data.LONG(offset)+offsets.tiffHeader;}
hash[tag]=data.STRING(offset,count-1);continue;case 3:if(count>2){offset=data.LONG(offset)+offsets.tiffHeader;}
for(ii=0;ii<count;ii++){values[ii]=data.SHORT(offset+ii*2);}
break;case 4:if(count>1){offset=data.LONG(offset)+offsets.tiffHeader;}
for(ii=0;ii<count;ii++){values[ii]=data.LONG(offset+ii*4);}
break;case 5:offset=data.LONG(offset)+offsets.tiffHeader;for(ii=0;ii<count;ii++){values[ii]=data.LONG(offset+ii*4)/ data.LONG(offset+ii*4+4);}
break;case 9:offset=data.LONG(offset)+offsets.tiffHeader;for(ii=0;ii<count;ii++){values[ii]=data.SLONG(offset+ii*4);}
break;case 10:offset=data.LONG(offset)+offsets.tiffHeader;for(ii=0;ii<count;ii++){values[ii]=data.SLONG(offset+ii*4)/ data.SLONG(offset+ii*4+4);}
break;default:continue;}
value=(count==1?values[0]:values);if(tagDescs.hasOwnProperty(tag)&&typeof value!='object'){hash[tag]=tagDescs[tag][value];}else{hash[tag]=value;}}
return hash;}
function getIFDOffsets(){var idx=offsets.tiffHeader;data.II(data.SHORT(idx)==0x4949);if(data.SHORT(idx+=2)!==0x002A){return false;}
offsets.IFD0=offsets.tiffHeader+data.LONG(idx+=2);Tiff=extractTags(offsets.IFD0,tags.tiff);if('ExifIFDPointer'in Tiff){offsets.exifIFD=offsets.tiffHeader+Tiff.ExifIFDPointer;delete Tiff.ExifIFDPointer;}
if('GPSInfoIFDPointer'in Tiff){offsets.gpsIFD=offsets.tiffHeader+Tiff.GPSInfoIFDPointer;delete Tiff.GPSInfoIFDPointer;}
return true;}
function setTag(ifd,tag,value){var offset,length,tagOffset,valueOffset=0;if(typeof(tag)==='string'){var tmpTags=tags[ifd.toLowerCase()];for(var hex in tmpTags){if(tmpTags[hex]===tag){tag=hex;break;}}}
offset=offsets[ifd.toLowerCase()+'IFD'];length=data.SHORT(offset);for(var i=0;i<length;i++){tagOffset=offset+12*i+2;if(data.SHORT(tagOffset)==tag){valueOffset=tagOffset+8;break;}}
if(!valueOffset){return false;}
data.LONG(valueOffset,value);return true;}
return{init:function(segment){offsets={tiffHeader:10};if(segment===undefined||!segment.length){return false;}
data.init(segment);if(data.SHORT(0)===0xFFE1&&data.STRING(4,5).toUpperCase()==="EXIF\0"){return getIFDOffsets();}
return false;},TIFF:function(){return Tiff;},EXIF:function(){var Exif;Exif=extractTags(offsets.exifIFD,tags.exif);if(Exif.ExifVersion&&Basic.typeOf(Exif.ExifVersion)==='array'){for(var i=0,exifVersion='';i<Exif.ExifVersion.length;i++){exifVersion+=String.fromCharCode(Exif.ExifVersion[i]);}
Exif.ExifVersion=exifVersion;}
return Exif;},GPS:function(){var GPS;GPS=extractTags(offsets.gpsIFD,tags.gps);if(GPS.GPSVersionID&&Basic.typeOf(GPS.GPSVersionID)==='array'){GPS.GPSVersionID=GPS.GPSVersionID.join('.');}
return GPS;},setExif:function(tag,value){if(tag!=='PixelXDimension'&&tag!=='PixelYDimension'){return false;}
return setTag('exif',tag,value);},getBinary:function(){return data.SEGMENT();},purge:function(){data.init(null);data=Tiff=null;offsets={};}};};});define("moxie/runtime/html5/image/JPEG",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/html5/image/JPEGHeaders","moxie/runtime/html5/utils/BinaryReader","moxie/runtime/html5/image/ExifParser"],function(Basic,x,JPEGHeaders,BinaryReader,ExifParser){function JPEG(binstr){var _binstr,_br,_hm,_ep,_info,hasExif;function _getDimensions(){var idx=0,marker,length;while(idx<=_binstr.length){marker=_br.SHORT(idx+=2);if(marker>=0xFFC0&&marker<=0xFFC3){idx+=5;return{height:_br.SHORT(idx),width:_br.SHORT(idx+=2)};}
length=_br.SHORT(idx+=2);idx+=length-2;}
return null;}
_binstr=binstr;_br=new BinaryReader();_br.init(_binstr);if(_br.SHORT(0)!==0xFFD8){throw new x.ImageError(x.ImageError.WRONG_FORMAT);}
_hm=new JPEGHeaders(binstr);_ep=new ExifParser();hasExif=!!_ep.init(_hm.get('app1')[0]);_info=_getDimensions.call(this);Basic.extend(this,{type:'image/jpeg',size:_binstr.length,width:_info&&_info.width||0,height:_info&&_info.height||0,setExif:function(tag,value){if(!hasExif){return false;}
if(Basic.typeOf(tag)==='object'){Basic.each(tag,function(value,tag){_ep.setExif(tag,value);});}else{_ep.setExif(tag,value);}
_hm.set('app1',_ep.getBinary());},writeHeaders:function(){if(!arguments.length){return(_binstr=_hm.restore(_binstr));}
return _hm.restore(arguments[0]);},stripHeaders:function(binstr){return _hm.strip(binstr);},purge:function(){_purge.call(this);}});if(hasExif){this.meta={tiff:_ep.TIFF(),exif:_ep.EXIF(),gps:_ep.GPS()};}
function _purge(){if(!_ep||!_hm||!_br){return;}
_ep.purge();_hm.purge();_br.init(null);_binstr=_info=_hm=_ep=_br=null;}}
return JPEG;});define("moxie/runtime/html5/image/PNG",["moxie/core/Exceptions","moxie/core/utils/Basic","moxie/runtime/html5/utils/BinaryReader"],function(x,Basic,BinaryReader){function PNG(binstr){var _binstr,_br,_hm,_ep,_info;_binstr=binstr;_br=new BinaryReader();_br.init(_binstr);(function(){var idx=0,i=0,signature=[0x8950,0x4E47,0x0D0A,0x1A0A];for(i=0;i<signature.length;i++,idx+=2){if(signature[i]!=_br.SHORT(idx)){throw new x.ImageError(x.ImageError.WRONG_FORMAT);}}}());function _getDimensions(){var chunk,idx;chunk=_getChunkAt.call(this,8);if(chunk.type=='IHDR'){idx=chunk.start;return{width:_br.LONG(idx),height:_br.LONG(idx+=4)};}
return null;}
function _purge(){if(!_br){return;}
_br.init(null);_binstr=_info=_hm=_ep=_br=null;}
_info=_getDimensions.call(this);Basic.extend(this,{type:'image/png',size:_binstr.length,width:_info.width,height:_info.height,purge:function(){_purge.call(this);}});_purge.call(this);function _getChunkAt(idx){var length,type,start,CRC;length=_br.LONG(idx);type=_br.STRING(idx+=4,4);start=idx+=4;CRC=_br.LONG(idx+length);return{length:length,type:type,start:start,CRC:CRC};}}
return PNG;});define("moxie/runtime/html5/image/ImageInfo",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/html5/image/JPEG","moxie/runtime/html5/image/PNG"],function(Basic,x,JPEG,PNG){return function(binstr){var _cs=[JPEG,PNG],_img;_img=(function(){for(var i=0;i<_cs.length;i++){try{return new _cs[i](binstr);}catch(ex){}}
throw new x.ImageError(x.ImageError.WRONG_FORMAT);}());Basic.extend(this,{type:'',size:0,width:0,height:0,setExif:function(){},writeHeaders:function(data){return data;},stripHeaders:function(data){return data;},purge:function(){}});Basic.extend(this,_img);this.purge=function(){_img.purge();_img=null;};};});define("moxie/runtime/html5/image/MegaPixel",[],function(){function renderImageToCanvas(img,canvas,options){var iw=img.naturalWidth,ih=img.naturalHeight;var width=options.width,height=options.height;var x=options.x||0,y=options.y||0;var ctx=canvas.getContext('2d');if(detectSubsampling(img)){iw /=2;ih /=2;}
var d=1024;var tmpCanvas=document.createElement('canvas');tmpCanvas.width=tmpCanvas.height=d;var tmpCtx=tmpCanvas.getContext('2d');var vertSquashRatio=detectVerticalSquash(img,iw,ih);var sy=0;while(sy<ih){var sh=sy+d>ih?ih-sy:d;var sx=0;while(sx<iw){var sw=sx+d>iw?iw-sx:d;tmpCtx.clearRect(0,0,d,d);tmpCtx.drawImage(img,-sx,-sy);var dx=(sx*width / iw+x)<<0;var dw=Math.ceil(sw*width / iw);var dy=(sy*height / ih / vertSquashRatio+y)<<0;var dh=Math.ceil(sh*height / ih / vertSquashRatio);ctx.drawImage(tmpCanvas,0,0,sw,sh,dx,dy,dw,dh);sx+=d;}
sy+=d;}
tmpCanvas=tmpCtx=null;}
function detectSubsampling(img){var iw=img.naturalWidth,ih=img.naturalHeight;if(iw*ih>1024*1024){var canvas=document.createElement('canvas');canvas.width=canvas.height=1;var ctx=canvas.getContext('2d');ctx.drawImage(img,-iw+1,0);return ctx.getImageData(0,0,1,1).data[3]===0;}else{return false;}}
function detectVerticalSquash(img,iw,ih){var canvas=document.createElement('canvas');canvas.width=1;canvas.height=ih;var ctx=canvas.getContext('2d');ctx.drawImage(img,0,0);var data=ctx.getImageData(0,0,1,ih).data;var sy=0;var ey=ih;var py=ih;while(py>sy){var alpha=data[(py-1)*4+3];if(alpha===0){ey=py;}else{sy=py;}
py=(ey+sy)>>1;}
canvas=null;var ratio=(py / ih);return(ratio===0)?1:ratio;}
return{isSubsampled:detectSubsampling,renderTo:renderImageToCanvas};});define("moxie/runtime/html5/image/Image",["moxie/runtime/html5/Runtime","moxie/core/utils/Basic","moxie/core/Exceptions","moxie/core/utils/Encode","moxie/file/File","moxie/runtime/html5/image/ImageInfo","moxie/runtime/html5/image/MegaPixel","moxie/core/utils/Mime","moxie/core/utils/Env"],function(extensions,Basic,x,Encode,File,ImageInfo,MegaPixel,Mime,Env){function HTML5Image(){var me=this,_img,_imgInfo,_canvas,_binStr,_blob,_modified=false,_preserveHeaders=true;Basic.extend(this,{loadFromBlob:function(blob){var comp=this,I=comp.getRuntime(),asBinary=arguments.length>1?arguments[1]:true;if(!I.can('access_binary')){throw new x.RuntimeError(x.RuntimeError.NOT_SUPPORTED_ERR);}
_blob=blob;if(blob.isDetached()){_binStr=blob.getSource();_preload.call(this,_binStr);return;}else{_readAsDataUrl.call(this,blob.getSource(),function(dataUrl){if(asBinary){_binStr=_toBinary(dataUrl);}
_preload.call(comp,dataUrl);});}},loadFromImage:function(img,exact){this.meta=img.meta;_blob=new File(null,{name:img.name,size:img.size,type:img.type});_preload.call(this,exact?(_binStr=img.getAsBinaryString()):img.getAsDataURL());},getInfo:function(){var I=this.getRuntime(),info;if(!_imgInfo&&_binStr&&I.can('access_image_binary')){_imgInfo=new ImageInfo(_binStr);}
info={width:_getImg().width||0,height:_getImg().height||0,type:_blob.type||Mime.getFileMime(_blob.name),size:_binStr&&_binStr.length||_blob.size||0,name:_blob.name||'',meta:_imgInfo&&_imgInfo.meta||this.meta||{}};return info;},downsize:function(){_downsize.apply(this,arguments);},getAsCanvas:function(){if(_canvas){_canvas.id=this.uid+'_canvas';}
return _canvas;},getAsBlob:function(type,quality){if(type!==this.type){_downsize.call(this,this.width,this.height,false);}
return new File(null,{name:_blob.name||'',type:type,data:me.getAsBinaryString.call(this,type,quality)});},getAsDataURL:function(type){var quality=arguments[1]||90;if(!_modified){return _img.src;}
if('image/jpeg'!==type){return _canvas.toDataURL('image/png');}else{try{return _canvas.toDataURL('image/jpeg',quality/100);}catch(ex){return _canvas.toDataURL('image/jpeg');}}},getAsBinaryString:function(type,quality){if(!_modified){if(!_binStr){_binStr=_toBinary(me.getAsDataURL(type,quality));}
return _binStr;}
if('image/jpeg'!==type){_binStr=_toBinary(me.getAsDataURL(type,quality));}else{var dataUrl;if(!quality){quality=90;}
try{dataUrl=_canvas.toDataURL('image/jpeg',quality/100);}catch(ex){dataUrl=_canvas.toDataURL('image/jpeg');}
_binStr=_toBinary(dataUrl);if(_imgInfo){_binStr=_imgInfo.stripHeaders(_binStr);if(_preserveHeaders){if(_imgInfo.meta&&_imgInfo.meta.exif){_imgInfo.setExif({PixelXDimension:this.width,PixelYDimension:this.height});}
_binStr=_imgInfo.writeHeaders(_binStr);}
_imgInfo.purge();_imgInfo=null;}}
_modified=false;return _binStr;},destroy:function(){me=null;_purge.call(this);this.getRuntime().getShim().removeInstance(this.uid);}});function _getImg(){if(!_canvas&&!_img){throw new x.ImageError(x.DOMException.INVALID_STATE_ERR);}
return _canvas||_img;}
function _toBinary(str){return Encode.atob(str.substring(str.indexOf('base64,')+7));}
function _toDataUrl(str,type){return'data:'+(type||'')+';base64,'+Encode.btoa(str);}
function _preload(str){var comp=this;_img=new Image();_img.onerror=function(){_purge.call(this);comp.trigger('error',x.ImageError.WRONG_FORMAT);};_img.onload=function(){comp.trigger('load');};_img.src=/^data:[^;]*;base64,/.test(str)?str:_toDataUrl(str,_blob.type);}
function _readAsDataUrl(file,callback){var comp=this,fr;if(window.FileReader){fr=new FileReader();fr.onload=function(){callback(this.result);};fr.onerror=function(){comp.trigger('error',x.ImageError.WRONG_FORMAT);};fr.readAsDataURL(file);}else{return callback(file.getAsDataURL());}}
function _downsize(width,height,crop,preserveHeaders){var self=this,scale,mathFn,x=0,y=0,img,destWidth,destHeight,orientation;_preserveHeaders=preserveHeaders;orientation=(this.meta&&this.meta.tiff&&this.meta.tiff.Orientation)||1;if(Basic.inArray(orientation,[5,6,7,8])!==-1){var tmp=width;width=height;height=tmp;}
img=_getImg();if(!crop){scale=Math.min(width/img.width,height/img.height);}else{width=Math.min(width,img.width);height=Math.min(height,img.height);scale=Math.max(width/img.width,height/img.height);}
if(scale>1&&!crop&&preserveHeaders){this.trigger('Resize');return;}
if(!_canvas){_canvas=document.createElement("canvas");}
destWidth=Math.round(img.width*scale);destHeight=Math.round(img.height*scale);if(crop){_canvas.width=width;_canvas.height=height;if(destWidth>width){x=Math.round((destWidth-width)/ 2);}
if(destHeight>height){y=Math.round((destHeight-height)/ 2);}}else{_canvas.width=destWidth;_canvas.height=destHeight;}
if(!_preserveHeaders){_rotateToOrientaion(_canvas.width,_canvas.height,orientation);}
_drawToCanvas.call(this,img,_canvas,-x,-y,destWidth,destHeight);this.width=_canvas.width;this.height=_canvas.height;_modified=true;self.trigger('Resize');}
function _drawToCanvas(img,canvas,x,y,w,h){if(Env.OS==='iOS'){MegaPixel.renderTo(img,canvas,{width:w,height:h,x:x,y:y});}else{var ctx=canvas.getContext('2d');ctx.drawImage(img,x,y,w,h);}}
function _rotateToOrientaion(width,height,orientation){switch(orientation){case 5:case 6:case 7:case 8:_canvas.width=height;_canvas.height=width;break;default:_canvas.width=width;_canvas.height=height;}
var ctx=_canvas.getContext('2d');switch(orientation){case 2:ctx.translate(width,0);ctx.scale(-1,1);break;case 3:ctx.translate(width,height);ctx.rotate(Math.PI);break;case 4:ctx.translate(0,height);ctx.scale(1,-1);break;case 5:ctx.rotate(0.5*Math.PI);ctx.scale(1,-1);break;case 6:ctx.rotate(0.5*Math.PI);ctx.translate(0,-height);break;case 7:ctx.rotate(0.5*Math.PI);ctx.translate(width,-height);ctx.scale(-1,1);break;case 8:ctx.rotate(-0.5*Math.PI);ctx.translate(-width,0);break;}}
function _purge(){if(_imgInfo){_imgInfo.purge();_imgInfo=null;}
_binStr=_img=_canvas=_blob=null;_modified=false;}}
return(extensions.Image=HTML5Image);});define("moxie/runtime/flash/Runtime",["moxie/core/utils/Basic","moxie/core/utils/Env","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/runtime/Runtime"],function(Basic,Env,Dom,x,Runtime){var type='flash',extensions={};function getShimVersion(){var version;try{version=navigator.plugins['Shockwave Flash'];version=version.description;}catch(e1){try{version=new ActiveXObject('ShockwaveFlash.ShockwaveFlash').GetVariable('$version');}catch(e2){version='0.0';}}
version=version.match(/\d+/g);return parseFloat(version[0]+'.'+version[1]);}
function FlashRuntime(options){var I=this,initTimer;options=Basic.extend({swf_url:Env.swf_url},options);Runtime.call(this,options,type,{access_binary:function(value){return value&&I.mode==='browser';},access_image_binary:function(value){return value&&I.mode==='browser';},display_media:Runtime.capTrue,do_cors:Runtime.capTrue,drag_and_drop:false,report_upload_progress:function(){return I.mode==='client';},resize_image:Runtime.capTrue,return_response_headers:false,return_response_type:function(responseType){if(responseType==='json'&&!!window.JSON){return true;}
return!Basic.arrayDiff(responseType,['','text','document'])||I.mode==='browser';},return_status_code:function(code){return I.mode==='browser'||!Basic.arrayDiff(code,[200,404]);},select_file:Runtime.capTrue,select_multiple:Runtime.capTrue,send_binary_string:function(value){return value&&I.mode==='browser';},send_browser_cookies:function(value){return value&&I.mode==='browser';},send_custom_headers:function(value){return value&&I.mode==='browser';},send_multipart:Runtime.capTrue,slice_blob:function(value){return value&&I.mode==='browser';},stream_upload:function(value){return value&&I.mode==='browser';},summon_file_dialog:false,upload_filesize:function(size){return Basic.parseSizeStr(size)<=2097152||I.mode==='client';},use_http_method:function(methods){return!Basic.arrayDiff(methods,['GET','POST']);}},{access_binary:function(value){return value?'browser':'client';},access_image_binary:function(value){return value?'browser':'client';},report_upload_progress:function(value){return value?'browser':'client';},return_response_type:function(responseType){return Basic.arrayDiff(responseType,['','text','json','document'])?'browser':['client','browser'];},return_status_code:function(code){return Basic.arrayDiff(code,[200,404])?'browser':['client','browser'];},send_binary_string:function(value){return value?'browser':'client';},send_browser_cookies:function(value){return value?'browser':'client';},send_custom_headers:function(value){return value?'browser':'client';},stream_upload:function(value){return value?'client':'browser';},upload_filesize:function(size){return Basic.parseSizeStr(size)>=2097152?'client':'browser';}},'client');if(getShimVersion()<10){this.mode=false;}
Basic.extend(this,{getShim:function(){return Dom.get(this.uid);},shimExec:function(component,action){var args=[].slice.call(arguments,2);return I.getShim().exec(this.uid,component,action,args);},init:function(){var html,el,container;container=this.getShimContainer();Basic.extend(container.style,{position:'absolute',top:'-8px',left:'-8px',width:'9px',height:'9px',overflow:'hidden'});html='<object id="'+this.uid+'" type="application/x-shockwave-flash" data="'+options.swf_url+'" ';if(Env.browser==='IE'){html+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" ';}
html+='width="100%" height="100%" style="outline:0">'+'<param name="movie" value="'+options.swf_url+'" />'+'<param name="flashvars" value="uid='+escape(this.uid)+'&target='+Env.global_event_dispatcher+'" />'+'<param name="wmode" value="transparent" />'+'<param name="allowscriptaccess" value="always" />'+'</object>';if(Env.browser==='IE'){el=document.createElement('div');container.appendChild(el);el.outerHTML=html;el=container=null;}else{container.innerHTML=html;}
initTimer=setTimeout(function(){if(I&&!I.initialized){I.trigger("Error",new x.RuntimeError(x.RuntimeError.NOT_INIT_ERR));}},5000);},destroy:(function(destroy){return function(){destroy.call(I);clearTimeout(initTimer);options=initTimer=destroy=I=null;};}(this.destroy))},extensions);}
Runtime.addConstructor(type,FlashRuntime);return extensions;});define("moxie/runtime/flash/file/Blob",["moxie/runtime/flash/Runtime","moxie/file/Blob"],function(extensions,Blob){var FlashBlob={slice:function(blob,start,end,type){var self=this.getRuntime();if(start<0){start=Math.max(blob.size+start,0);}else if(start>0){start=Math.min(start,blob.size);}
if(end<0){end=Math.max(blob.size+end,0);}else if(end>0){end=Math.min(end,blob.size);}
blob=self.shimExec.call(this,'Blob','slice',start,end,type||'');if(blob){blob=new Blob(self.uid,blob);}
return blob;}};return(extensions.Blob=FlashBlob);});define("moxie/runtime/flash/file/FileInput",["moxie/runtime/flash/Runtime"],function(extensions){var FileInput={init:function(options){this.getRuntime().shimExec.call(this,'FileInput','init',{name:options.name,accept:options.accept,multiple:options.multiple});this.trigger('ready');}};return(extensions.FileInput=FileInput);});define("moxie/runtime/flash/file/FileReader",["moxie/runtime/flash/Runtime","moxie/core/utils/Encode"],function(extensions,Encode){var _result='';function _formatData(data,op){switch(op){case'readAsText':return Encode.atob(data,'utf8');case'readAsBinaryString':return Encode.atob(data);case'readAsDataURL':return data;}
return null;}
var FileReader={read:function(op,blob){var target=this,self=target.getRuntime();if(op==='readAsDataURL'){_result='data:'+(blob.type||'')+';base64,';}
target.bind('Progress',function(e,data){if(data){_result+=_formatData(data,op);}});return self.shimExec.call(this,'FileReader','readAsBase64',blob.uid);},getResult:function(){return _result;},destroy:function(){_result=null;}};return(extensions.FileReader=FileReader);});define("moxie/runtime/flash/file/FileReaderSync",["moxie/runtime/flash/Runtime","moxie/core/utils/Encode"],function(extensions,Encode){function _formatData(data,op){switch(op){case'readAsText':return Encode.atob(data,'utf8');case'readAsBinaryString':return Encode.atob(data);case'readAsDataURL':return data;}
return null;}
var FileReaderSync={read:function(op,blob){var result,self=this.getRuntime();result=self.shimExec.call(this,'FileReaderSync','readAsBase64',blob.uid);if(!result){return null;}
if(op==='readAsDataURL'){result='data:'+(blob.type||'')+';base64,'+result;}
return _formatData(result,op,blob.type);}};return(extensions.FileReaderSync=FileReaderSync);});define("moxie/runtime/flash/xhr/XMLHttpRequest",["moxie/runtime/flash/Runtime","moxie/core/utils/Basic","moxie/file/Blob","moxie/file/File","moxie/file/FileReaderSync","moxie/xhr/FormData","moxie/runtime/Transporter"],function(extensions,Basic,Blob,File,FileReaderSync,FormData,Transporter){var XMLHttpRequest={send:function(meta,data){var target=this,self=target.getRuntime();function send(){meta.transport=self.mode;self.shimExec.call(target,'XMLHttpRequest','send',meta,data);}
function appendBlob(name,blob){self.shimExec.call(target,'XMLHttpRequest','appendBlob',name,blob.uid);data=null;send();}
function attachBlob(blob,cb){var tr=new Transporter();tr.bind("TransportingComplete",function(){cb(this.result);});tr.transport(blob.getSource(),blob.type,{ruid:self.uid});}
if(!Basic.isEmptyObj(meta.headers)){Basic.each(meta.headers,function(value,header){self.shimExec.call(target,'XMLHttpRequest','setRequestHeader',header,value.toString());});}
if(data instanceof FormData){var blobField;data.each(function(value,name){if(value instanceof Blob){blobField=name;}else{self.shimExec.call(target,'XMLHttpRequest','append',name,value);}});if(!data.hasBlob()){data=null;send();}else{var blob=data.getBlob();if(blob.isDetached()){attachBlob(blob,function(attachedBlob){blob.destroy();appendBlob(blobField,attachedBlob);});}else{appendBlob(blobField,blob);}}}else if(data instanceof Blob){if(data.isDetached()){attachBlob(data,function(attachedBlob){data.destroy();data=attachedBlob.uid;send();});}else{data=data.uid;send();}}else{send();}},getResponse:function(responseType){var frs,blob,self=this.getRuntime();blob=self.shimExec.call(this,'XMLHttpRequest','getResponseAsBlob');if(blob){blob=new File(self.uid,blob);if('blob'===responseType){return blob;}
try{frs=new FileReaderSync();if(!!~Basic.inArray(responseType,["","text"])){return frs.readAsText(blob);}else if('json'===responseType&&!!window.JSON){return JSON.parse(frs.readAsText(blob));}}finally{blob.destroy();}}
return null;},abort:function(upload_complete_flag){var self=this.getRuntime();self.shimExec.call(this,'XMLHttpRequest','abort');this.dispatchEvent('readystatechange');this.dispatchEvent('abort');}};return(extensions.XMLHttpRequest=XMLHttpRequest);});define("moxie/runtime/flash/runtime/Transporter",["moxie/runtime/flash/Runtime","moxie/file/Blob"],function(extensions,Blob){var Transporter={getAsBlob:function(type){var self=this.getRuntime(),blob=self.shimExec.call(this,'Transporter','getAsBlob',type);if(blob){return new Blob(self.uid,blob);}
return null;}};return(extensions.Transporter=Transporter);});define("moxie/runtime/flash/image/Image",["moxie/runtime/flash/Runtime","moxie/core/utils/Basic","moxie/runtime/Transporter","moxie/file/Blob","moxie/file/FileReaderSync"],function(extensions,Basic,Transporter,Blob,FileReaderSync){var Image={loadFromBlob:function(blob){var comp=this,self=comp.getRuntime();function exec(srcBlob){self.shimExec.call(comp,'Image','loadFromBlob',srcBlob.uid);comp=self=null;}
if(blob.isDetached()){var tr=new Transporter();tr.bind("TransportingComplete",function(){exec(tr.result.getSource());});tr.transport(blob.getSource(),blob.type,{ruid:self.uid});}else{exec(blob.getSource());}},loadFromImage:function(img){var self=this.getRuntime();return self.shimExec.call(this,'Image','loadFromImage',img.uid);},getAsBlob:function(type,quality){var self=this.getRuntime(),blob=self.shimExec.call(this,'Image','getAsBlob',type,quality);if(blob){return new Blob(self.uid,blob);}
return null;},getAsDataURL:function(){var self=this.getRuntime(),blob=self.Image.getAsBlob.apply(this,arguments),frs;if(!blob){return null;}
frs=new FileReaderSync();return frs.readAsDataURL(blob);}};return(extensions.Image=Image);});define("moxie/runtime/silverlight/Runtime",["moxie/core/utils/Basic","moxie/core/utils/Env","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/runtime/Runtime"],function(Basic,Env,Dom,x,Runtime){var type="silverlight",extensions={};function isInstalled(version){var isVersionSupported=false,control=null,actualVer,actualVerArray,reqVerArray,requiredVersionPart,actualVersionPart,index=0;try{try{control=new ActiveXObject('AgControl.AgControl');if(control.IsVersionSupported(version)){isVersionSupported=true;}
control=null;}catch(e){var plugin=navigator.plugins["Silverlight Plug-In"];if(plugin){actualVer=plugin.description;if(actualVer==="1.0.30226.2"){actualVer="2.0.30226.2";}
actualVerArray=actualVer.split(".");while(actualVerArray.length>3){actualVerArray.pop();}
while(actualVerArray.length<4){actualVerArray.push(0);}
reqVerArray=version.split(".");while(reqVerArray.length>4){reqVerArray.pop();}
do{requiredVersionPart=parseInt(reqVerArray[index],10);actualVersionPart=parseInt(actualVerArray[index],10);index++;}while(index<reqVerArray.length&&requiredVersionPart===actualVersionPart);if(requiredVersionPart<=actualVersionPart&&!isNaN(requiredVersionPart)){isVersionSupported=true;}}}}catch(e2){isVersionSupported=false;}
return isVersionSupported;}
function SilverlightRuntime(options){var I=this,initTimer;options=Basic.extend({xap_url:Env.xap_url},options);Runtime.call(this,options,type,{access_binary:Runtime.capTrue,access_image_binary:Runtime.capTrue,display_media:Runtime.capTrue,do_cors:Runtime.capTrue,drag_and_drop:false,report_upload_progress:Runtime.capTrue,resize_image:Runtime.capTrue,return_response_headers:function(value){return value&&I.mode==='client';},return_response_type:function(responseType){if(responseType!=='json'){return true;}else{return!!window.JSON;}},return_status_code:function(code){return I.mode==='client'||!Basic.arrayDiff(code,[200,404]);},select_file:Runtime.capTrue,select_multiple:Runtime.capTrue,send_binary_string:Runtime.capTrue,send_browser_cookies:function(value){return value&&I.mode==='browser';},send_custom_headers:function(value){return value&&I.mode==='client';},send_multipart:Runtime.capTrue,slice_blob:Runtime.capTrue,stream_upload:true,summon_file_dialog:false,upload_filesize:Runtime.capTrue,use_http_method:function(methods){return I.mode==='client'||!Basic.arrayDiff(methods,['GET','POST']);}},{return_response_headers:function(value){return value?'client':'browser';},return_status_code:function(code){return Basic.arrayDiff(code,[200,404])?'client':['client','browser'];},send_browser_cookies:function(value){return value?'browser':'client';},send_custom_headers:function(value){return value?'client':'browser';},use_http_method:function(methods){return Basic.arrayDiff(methods,['GET','POST'])?'client':['client','browser'];}});if(!isInstalled('2.0.31005.0')||Env.browser==='Opera'){this.mode=false;}
Basic.extend(this,{getShim:function(){return Dom.get(this.uid).content.Moxie;},shimExec:function(component,action){var args=[].slice.call(arguments,2);return I.getShim().exec(this.uid,component,action,args);},init:function(){var container;container=this.getShimContainer();container.innerHTML='<object id="'+this.uid+'" data="data:application/x-silverlight," type="application/x-silverlight-2" width="100%" height="100%" style="outline:none;">'+'<param name="source" value="'+options.xap_url+'"/>'+'<param name="background" value="Transparent"/>'+'<param name="windowless" value="true"/>'+'<param name="enablehtmlaccess" value="true"/>'+'<param name="initParams" value="uid='+this.uid+',target='+Env.global_event_dispatcher+'"/>'+'</object>';initTimer=setTimeout(function(){if(I&&!I.initialized){I.trigger("Error",new x.RuntimeError(x.RuntimeError.NOT_INIT_ERR));}},Env.OS!=='Windows'?10000:5000);},destroy:(function(destroy){return function(){destroy.call(I);clearTimeout(initTimer);options=initTimer=destroy=I=null;};}(this.destroy))},extensions);}
Runtime.addConstructor(type,SilverlightRuntime);return extensions;});define("moxie/runtime/silverlight/file/Blob",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/file/Blob"],function(extensions,Basic,Blob){return(extensions.Blob=Basic.extend({},Blob));});define("moxie/runtime/silverlight/file/FileInput",["moxie/runtime/silverlight/Runtime"],function(extensions){var FileInput={init:function(options){function toFilters(accept){var filter='';for(var i=0;i<accept.length;i++){filter+=(filter!==''?'|':'')+accept[i].title+" | *."+accept[i].extensions.replace(/,/g,';*.');}
return filter;}
this.getRuntime().shimExec.call(this,'FileInput','init',toFilters(options.accept),options.name,options.multiple);this.trigger('ready');}};return(extensions.FileInput=FileInput);});define("moxie/runtime/silverlight/file/FileDrop",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Dom","moxie/core/utils/Events"],function(extensions,Dom,Events){var FileDrop={init:function(){var comp=this,self=comp.getRuntime(),dropZone;dropZone=self.getShimContainer();Events.addEvent(dropZone,'dragover',function(e){e.preventDefault();e.stopPropagation();e.dataTransfer.dropEffect='copy';},comp.uid);Events.addEvent(dropZone,'dragenter',function(e){e.preventDefault();var flag=Dom.get(self.uid).dragEnter(e);if(flag){e.stopPropagation();}},comp.uid);Events.addEvent(dropZone,'drop',function(e){e.preventDefault();var flag=Dom.get(self.uid).dragDrop(e);if(flag){e.stopPropagation();}},comp.uid);return self.shimExec.call(this,'FileDrop','init');}};return(extensions.FileDrop=FileDrop);});define("moxie/runtime/silverlight/file/FileReader",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/file/FileReader"],function(extensions,Basic,FileReader){return(extensions.FileReader=Basic.extend({},FileReader));});define("moxie/runtime/silverlight/file/FileReaderSync",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/file/FileReaderSync"],function(extensions,Basic,FileReaderSync){return(extensions.FileReaderSync=Basic.extend({},FileReaderSync));});define("moxie/runtime/silverlight/xhr/XMLHttpRequest",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/xhr/XMLHttpRequest"],function(extensions,Basic,XMLHttpRequest){return(extensions.XMLHttpRequest=Basic.extend({},XMLHttpRequest));});define("moxie/runtime/silverlight/runtime/Transporter",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/runtime/Transporter"],function(extensions,Basic,Transporter){return(extensions.Transporter=Basic.extend({},Transporter));});define("moxie/runtime/silverlight/image/Image",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/image/Image"],function(extensions,Basic,Image){return(extensions.Image=Basic.extend({},Image,{getInfo:function(){var self=this.getRuntime(),grps=['tiff','exif','gps'],info={meta:{}},rawInfo=self.shimExec.call(this,'Image','getInfo');if(rawInfo.meta){Basic.each(grps,function(grp){var meta=rawInfo.meta[grp],tag,i,length,value;if(meta&&meta.keys){info.meta[grp]={};for(i=0,length=meta.keys.length;i<length;i++){tag=meta.keys[i];value=meta[tag];if(value){if(/^(\d|[1-9]\d+)$/.test(value)){value=parseInt(value,10);}else if(/^\d*\.\d+$/.test(value)){value=parseFloat(value);}
info.meta[grp][tag]=value;}}}});}
info.width=parseInt(rawInfo.width,10);info.height=parseInt(rawInfo.height,10);info.size=parseInt(rawInfo.size,10);info.type=rawInfo.type;info.name=rawInfo.name;return info;}}));});define("moxie/runtime/html4/Runtime",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/Runtime","moxie/core/utils/Env"],function(Basic,x,Runtime,Env){var type='html4',extensions={};function Html4Runtime(options){var I=this,Test=Runtime.capTest,True=Runtime.capTrue;Runtime.call(this,options,type,{access_binary:Test(window.FileReader||window.File&&File.getAsDataURL),access_image_binary:false,display_media:Test(extensions.Image&&(Env.can('create_canvas')||Env.can('use_data_uri_over32kb'))),do_cors:false,drag_and_drop:false,filter_by_extension:Test(function(){return(Env.browser==='Chrome'&&Env.version>=28)||(Env.browser==='IE'&&Env.version>=10);}()),resize_image:function(){return extensions.Image&&I.can('access_binary')&&Env.can('create_canvas');},report_upload_progress:false,return_response_headers:false,return_response_type:function(responseType){if(responseType==='json'&&!!window.JSON){return true;}
return!!~Basic.inArray(responseType,['text','document','']);},return_status_code:function(code){return!Basic.arrayDiff(code,[200,404]);},select_file:function(){return Env.can('use_fileinput');},select_multiple:false,send_binary_string:false,send_custom_headers:false,send_multipart:true,slice_blob:false,stream_upload:function(){return I.can('select_file');},summon_file_dialog:Test(function(){return(Env.browser==='Firefox'&&Env.version>=4)||(Env.browser==='Opera'&&Env.version>=12)||!!~Basic.inArray(Env.browser,['Chrome','Safari']);}()),upload_filesize:True,use_http_method:function(methods){return!Basic.arrayDiff(methods,['GET','POST']);}});Basic.extend(this,{init:function(){this.trigger("Init");},destroy:(function(destroy){return function(){destroy.call(I);destroy=I=null;};}(this.destroy))});Basic.extend(this.getShim(),extensions);}
Runtime.addConstructor(type,Html4Runtime);return extensions;});define("moxie/runtime/html4/file/FileInput",["moxie/runtime/html4/Runtime","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Events","moxie/core/utils/Mime","moxie/core/utils/Env"],function(extensions,Basic,Dom,Events,Mime,Env){function FileInput(){var _uid,_files=[],_mimes=[],_options;function addInput(){var comp=this,I=comp.getRuntime(),shimContainer,browseButton,currForm,form,input,uid;uid=Basic.guid('uid_');shimContainer=I.getShimContainer();if(_uid){currForm=Dom.get(_uid+'_form');if(currForm){Basic.extend(currForm.style,{top:'100%'});}}
form=document.createElement('form');form.setAttribute('id',uid+'_form');form.setAttribute('method','post');form.setAttribute('enctype','multipart/form-data');form.setAttribute('encoding','multipart/form-data');Basic.extend(form.style,{overflow:'hidden',position:'absolute',top:0,left:0,width:'100%',height:'100%'});input=document.createElement('input');input.setAttribute('id',uid);input.setAttribute('type','file');input.setAttribute('name',_options.name||'Filedata');input.setAttribute('accept',_mimes.join(','));Basic.extend(input.style,{fontSize:'999px',opacity:0});form.appendChild(input);shimContainer.appendChild(form);Basic.extend(input.style,{position:'absolute',top:0,left:0,width:'100%',height:'100%'});if(Env.browser==='IE'&&Env.version<10){Basic.extend(input.style,{filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0)"});}
input.onchange=function(){var file;if(!this.value){return;}
if(this.files){file=this.files[0];}else{file={name:this.value};}
_files=[file];this.onchange=function(){};addInput.call(comp);comp.bind('change',function onChange(){var input=Dom.get(uid),form=Dom.get(uid+'_form'),file;comp.unbind('change',onChange);if(comp.files.length&&input&&form){file=comp.files[0];input.setAttribute('id',file.uid);form.setAttribute('id',file.uid+'_form');form.setAttribute('target',file.uid+'_iframe');}
input=form=null;},998);input=form=null;comp.trigger('change');};if(I.can('summon_file_dialog')){browseButton=Dom.get(_options.browse_button);Events.removeEvent(browseButton,'click',comp.uid);Events.addEvent(browseButton,'click',function(e){if(input&&!input.disabled){input.click();}
e.preventDefault();},comp.uid);}
_uid=uid;shimContainer=currForm=browseButton=null;}
Basic.extend(this,{init:function(options){var comp=this,I=comp.getRuntime(),shimContainer;_options=options;_mimes=options.accept.mimes||Mime.extList2mimes(options.accept,I.can('filter_by_extension'));shimContainer=I.getShimContainer();(function(){var browseButton,zIndex,top;browseButton=Dom.get(options.browse_button);if(I.can('summon_file_dialog')){if(Dom.getStyle(browseButton,'position')==='static'){browseButton.style.position='relative';}
zIndex=parseInt(Dom.getStyle(browseButton,'z-index'),10)||1;browseButton.style.zIndex=zIndex;shimContainer.style.zIndex=zIndex-1;}
top=I.can('summon_file_dialog')?browseButton:shimContainer;Events.addEvent(top,'mouseover',function(){comp.trigger('mouseenter');},comp.uid);Events.addEvent(top,'mouseout',function(){comp.trigger('mouseleave');},comp.uid);Events.addEvent(top,'mousedown',function(){comp.trigger('mousedown');},comp.uid);Events.addEvent(Dom.get(options.container),'mouseup',function(){comp.trigger('mouseup');},comp.uid);browseButton=null;}());addInput.call(this);shimContainer=null;comp.trigger({type:'ready',async:true});},getFiles:function(){return _files;},disable:function(state){var input;if((input=Dom.get(_uid))){input.disabled=!!state;}},destroy:function(){var I=this.getRuntime(),shim=I.getShim(),shimContainer=I.getShimContainer();Events.removeAllEvents(shimContainer,this.uid);Events.removeAllEvents(_options&&Dom.get(_options.container),this.uid);Events.removeAllEvents(_options&&Dom.get(_options.browse_button),this.uid);if(shimContainer){shimContainer.innerHTML='';}
shim.removeInstance(this.uid);_uid=_files=_mimes=_options=shimContainer=shim=null;}});}
return(extensions.FileInput=FileInput);});define("moxie/runtime/html4/file/FileReader",["moxie/runtime/html4/Runtime","moxie/runtime/html5/file/FileReader"],function(extensions,FileReader){return(extensions.FileReader=FileReader);});define("moxie/runtime/html4/xhr/XMLHttpRequest",["moxie/runtime/html4/Runtime","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Url","moxie/core/Exceptions","moxie/core/utils/Events","moxie/file/Blob","moxie/xhr/FormData"],function(extensions,Basic,Dom,Url,x,Events,Blob,FormData){function XMLHttpRequest(){var _status,_response,_iframe;function cleanup(cb){var target=this,uid,form,inputs,i,hasFile=false;if(!_iframe){return;}
uid=_iframe.id.replace(/_iframe$/,'');form=Dom.get(uid+'_form');if(form){inputs=form.getElementsByTagName('input');i=inputs.length;while(i--){switch(inputs[i].getAttribute('type')){case'hidden':inputs[i].parentNode.removeChild(inputs[i]);break;case'file':hasFile=true;break;}}
inputs=[];if(!hasFile){form.parentNode.removeChild(form);}
form=null;}
setTimeout(function(){Events.removeEvent(_iframe,'load',target.uid);if(_iframe.parentNode){_iframe.parentNode.removeChild(_iframe);}
var shimContainer=target.getRuntime().getShimContainer();if(!shimContainer.children.length){shimContainer.parentNode.removeChild(shimContainer);}
shimContainer=_iframe=null;cb();},1);}
Basic.extend(this,{send:function(meta,data){var target=this,I=target.getRuntime(),uid,form,input,blob;_status=_response=null;function createIframe(){var container=I.getShimContainer()||document.body,temp=document.createElement('div');temp.innerHTML='<iframe id="'+uid+'_iframe" name="'+uid+'_iframe" src="javascript:&quot;&quot;" style="display:none"></iframe>';_iframe=temp.firstChild;container.appendChild(_iframe);Events.addEvent(_iframe,'load',function(){var el;try{el=_iframe.contentWindow.document||_iframe.contentDocument||window.frames[_iframe.id].document;if(/^4(0[0-9]|1[0-7]|2[2346])\s/.test(el.title)){_status=el.title.replace(/^(\d+).*$/,'$1');}else{_status=200;_response=Basic.trim(el.body.innerHTML);target.trigger({type:'progress',loaded:_response.length,total:_response.length});if(blob){target.trigger({type:'uploadprogress',loaded:blob.size||1025,total:blob.size||1025});}}}catch(ex){if(Url.hasSameOrigin(meta.url)){_status=404;}else{cleanup.call(target,function(){target.trigger('error');});return;}}
cleanup.call(target,function(){target.trigger('load');});},target.uid);}
if(data instanceof FormData&&data.hasBlob()){blob=data.getBlob();uid=blob.uid;input=Dom.get(uid);form=Dom.get(uid+'_form');if(!form){throw new x.DOMException(x.DOMException.NOT_FOUND_ERR);}}else{uid=Basic.guid('uid_');form=document.createElement('form');form.setAttribute('id',uid+'_form');form.setAttribute('method',meta.method);form.setAttribute('enctype','multipart/form-data');form.setAttribute('encoding','multipart/form-data');form.setAttribute('target',uid+'_iframe');I.getShimContainer().appendChild(form);}
if(data instanceof FormData){data.each(function(value,name){if(value instanceof Blob){if(input){input.setAttribute('name',name);}}else{var hidden=document.createElement('input');Basic.extend(hidden,{type:'hidden',name:name,value:value});if(input){form.insertBefore(hidden,input);}else{form.appendChild(hidden);}}});}
form.setAttribute("action",meta.url);createIframe();form.submit();target.trigger('loadstart');},getStatus:function(){return _status;},getResponse:function(responseType){if('json'===responseType){if(Basic.typeOf(_response)==='string'&&!!window.JSON){try{return JSON.parse(_response.replace(/^\s*<pre[^>]*>/,'').replace(/<\/pre>\s*$/,''));}catch(ex){return null;}}}else if('document'===responseType){}
return _response;},abort:function(){var target=this;if(_iframe&&_iframe.contentWindow){if(_iframe.contentWindow.stop){_iframe.contentWindow.stop();}else if(_iframe.contentWindow.document.execCommand){_iframe.contentWindow.document.execCommand('Stop');}else{_iframe.src="about:blank";}}
cleanup.call(this,function(){target.dispatchEvent('abort');});}});}
return(extensions.XMLHttpRequest=XMLHttpRequest);});define("moxie/runtime/html4/image/Image",["moxie/runtime/html4/Runtime","moxie/runtime/html5/image/Image"],function(extensions,Image){return(extensions.Image=Image);});expose(["moxie/core/utils/Basic","moxie/core/I18n","moxie/core/utils/Mime","moxie/core/utils/Env","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/core/EventTarget","moxie/core/utils/Encode","moxie/runtime/Runtime","moxie/runtime/RuntimeClient","moxie/file/Blob","moxie/file/File","moxie/file/FileInput","moxie/file/FileDrop","moxie/runtime/RuntimeTarget","moxie/file/FileReader","moxie/core/utils/Url","moxie/file/FileReaderSync","moxie/xhr/FormData","moxie/xhr/XMLHttpRequest","moxie/runtime/Transporter","moxie/image/Image","moxie/core/utils/Events"]);})(this);(function(exports){"use strict";var o={},inArray=exports.moxie.core.utils.Basic.inArray;(function addAlias(ns){var name,itemType;for(name in ns){itemType=typeof(ns[name]);if(itemType==='object'&&!~inArray(name,['Exceptions','Env','Mime'])){addAlias(ns[name]);}else if(itemType==='function'){o[name]=ns[name];}}})(exports.moxie);o.Env=exports.moxie.core.utils.Env;o.Mime=exports.moxie.core.utils.Mime;o.Exceptions=exports.moxie.core.Exceptions;exports.mOxie=o;if(!exports.o){exports.o=o;}
return o;})(this);;(function(window,o,undef){var delay=window.setTimeout,fileFilters={};function normalizeCaps(settings){var features=settings.required_features,caps={};function resolve(feature,value,strict){var map={chunks:'slice_blob',jpgresize:'send_binary_string',pngresize:'send_binary_string',progress:'report_upload_progress',multi_selection:'select_multiple',dragdrop:'drag_and_drop',drop_element:'drag_and_drop',headers:'send_custom_headers',urlstream_upload:'send_binary_string',canSendBinary:'send_binary',triggerDialog:'summon_file_dialog'};if(map[feature]){caps[map[feature]]=value;}else if(!strict){caps[feature]=value;}}
if(typeof(features)==='string'){plupload.each(features.split(/\s*,\s*/),function(feature){resolve(feature,true);});}else if(typeof(features)==='object'){plupload.each(features,function(value,feature){resolve(feature,value);});}else if(features===true){if(settings.chunk_size>0){caps.slice_blob=true;}
if(settings.resize.enabled||!settings.multipart){caps.send_binary_string=true;}
plupload.each(settings,function(value,feature){resolve(feature,!!value,true);});}
return caps;}
var plupload={VERSION:'2.1.2',STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,FILE_DUPLICATE_ERROR:-602,IMAGE_FORMAT_ERROR:-700,MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:o.mimes,ua:o.ua,typeOf:o.typeOf,extend:o.extend,guid:o.guid,get:function get(ids){var els=[],el;if(o.typeOf(ids)!=='array'){ids=[ids];}
var i=ids.length;while(i--){el=o.get(ids[i]);if(el){els.push(el);}}
return els.length?els:null;},each:o.each,getPos:o.getPos,getSize:o.getSize,xmlEncode:function(str){var xmlEncodeChars={'<':'lt','>':'gt','&':'amp','"':'quot','\'':'#39'},xmlEncodeRegExp=/[<>&\"\']/g;return str?(''+str).replace(xmlEncodeRegExp,function(chr){return xmlEncodeChars[chr]?'&'+xmlEncodeChars[chr]+';':chr;}):str;},toArray:o.toArray,inArray:o.inArray,addI18n:o.addI18n,translate:o.translate,isEmptyObj:o.isEmptyObj,hasClass:o.hasClass,addClass:o.addClass,removeClass:o.removeClass,getStyle:o.getStyle,addEvent:o.addEvent,removeEvent:o.removeEvent,removeAllEvents:o.removeAllEvents,cleanName:function(name){var i,lookup;lookup=[/[\300-\306]/g,'A',/[\340-\346]/g,'a',/\307/g,'C',/\347/g,'c',/[\310-\313]/g,'E',/[\350-\353]/g,'e',/[\314-\317]/g,'I',/[\354-\357]/g,'i',/\321/g,'N',/\361/g,'n',/[\322-\330]/g,'O',/[\362-\370]/g,'o',/[\331-\334]/g,'U',/[\371-\374]/g,'u'];for(i=0;i<lookup.length;i+=2){name=name.replace(lookup[i],lookup[i+1]);}
name=name.replace(/\s+/g,'_');name=name.replace(/[^a-z0-9_\-\.]+/gi,'');return name;},buildUrl:function(url,items){var query='';plupload.each(items,function(value,name){query+=(query?'&':'')+encodeURIComponent(name)+'='+encodeURIComponent(value);});if(query){url+=(url.indexOf('?')>0?'&':'?')+query;}
return url;},formatSize:function(size){if(size===undef||/\D/.test(size)){return plupload.translate('N/A');}
function round(num,precision){return Math.round(num*Math.pow(10,precision))/ Math.pow(10,precision);}
var boundary=Math.pow(1024,4);if(size>boundary){return round(size / boundary,1)+" "+plupload.translate('tb');}
if(size>(boundary/=1024)){return round(size / boundary,1)+" "+plupload.translate('gb');}
if(size>(boundary/=1024)){return round(size / boundary,1)+" "+plupload.translate('mb');}
if(size>1024){return Math.round(size / 1024)+" "+plupload.translate('kb');}
return size+" "+plupload.translate('b');},parseSize:o.parseSizeStr,predictRuntime:function(config,runtimes){var up,runtime;up=new plupload.Uploader(config);runtime=o.Runtime.thatCan(up.getOption().required_features,runtimes||config.runtimes);up.destroy();return runtime;},addFileFilter:function(name,cb){fileFilters[name]=cb;}};plupload.addFileFilter('mime_types',function(filters,file,cb){if(filters.length&&!filters.regexp.test(file.name)){this.trigger('Error',{code:plupload.FILE_EXTENSION_ERROR,message:plupload.translate('File extension error.'),file:file});cb(false);}else{cb(true);}});plupload.addFileFilter('max_file_size',function(maxSize,file,cb){var undef;maxSize=plupload.parseSize(maxSize);if(file.size!==undef&&maxSize&&file.size>maxSize){this.trigger('Error',{code:plupload.FILE_SIZE_ERROR,message:plupload.translate('File size error.'),file:file});cb(false);}else{cb(true);}});plupload.addFileFilter('prevent_duplicates',function(value,file,cb){if(value){var ii=this.files.length;while(ii--){if(file.name===this.files[ii].name&&file.size===this.files[ii].size){this.trigger('Error',{code:plupload.FILE_DUPLICATE_ERROR,message:plupload.translate('Duplicate file error.'),file:file});cb(false);return;}}}
cb(true);});plupload.Uploader=function(options){var uid=plupload.guid(),settings,files=[],preferred_caps={},fileInputs=[],fileDrops=[],startTime,total,disabled=false,xhr;function uploadNext(){var file,count=0,i;if(this.state==plupload.STARTED){for(i=0;i<files.length;i++){if(!file&&files[i].status==plupload.QUEUED){file=files[i];if(this.trigger("BeforeUpload",file)){file.status=plupload.UPLOADING;this.trigger("UploadFile",file);}}else{count++;}}
if(count==files.length){if(this.state!==plupload.STOPPED){this.state=plupload.STOPPED;this.trigger("StateChanged");}
this.trigger("UploadComplete",files);}}}
function calcFile(file){file.percent=file.size>0?Math.ceil(file.loaded / file.size*100):100;calc();}
function calc(){var i,file;total.reset();for(i=0;i<files.length;i++){file=files[i];if(file.size!==undef){total.size+=file.origSize;total.loaded+=file.loaded*file.origSize / file.size;}else{total.size=undef;}
if(file.status==plupload.DONE){total.uploaded++;}else if(file.status==plupload.FAILED){total.failed++;}else{total.queued++;}}
if(total.size===undef){total.percent=files.length>0?Math.ceil(total.uploaded / files.length*100):0;}else{total.bytesPerSec=Math.ceil(total.loaded /((+new Date()-startTime||1)/ 1000.0));total.percent=total.size>0?Math.ceil(total.loaded / total.size*100):0;}}
function getRUID(){var ctrl=fileInputs[0]||fileDrops[0];if(ctrl){return ctrl.getRuntime().uid;}
return false;}
function runtimeCan(file,cap){if(file.ruid){var info=o.Runtime.getInfo(file.ruid);if(info){return info.can(cap);}}
return false;}
function bindEventListeners(){this.bind('FilesAdded FilesRemoved',function(up){up.trigger('QueueChanged');up.refresh();});this.bind('CancelUpload',onCancelUpload);this.bind('BeforeUpload',onBeforeUpload);this.bind('UploadFile',onUploadFile);this.bind('UploadProgress',onUploadProgress);this.bind('StateChanged',onStateChanged);this.bind('QueueChanged',calc);this.bind('Error',onError);this.bind('FileUploaded',onFileUploaded);this.bind('Destroy',onDestroy);}
function initControls(settings,cb){var self=this,inited=0,queue=[];var options={runtime_order:settings.runtimes,required_caps:settings.required_features,preferred_caps:preferred_caps,swf_url:settings.flash_swf_url,xap_url:settings.silverlight_xap_url};plupload.each(settings.runtimes.split(/\s*,\s*/),function(runtime){if(settings[runtime]){options[runtime]=settings[runtime];}});if(settings.browse_button){plupload.each(settings.browse_button,function(el){queue.push(function(cb){var fileInput=new o.FileInput(plupload.extend({},options,{accept:settings.filters.mime_types,name:settings.file_data_name,multiple:settings.multi_selection,container:settings.container,browse_button:el}));fileInput.onready=function(){var info=o.Runtime.getInfo(this.ruid);o.extend(self.features,{chunks:info.can('slice_blob'),multipart:info.can('send_multipart'),multi_selection:info.can('select_multiple')});inited++;fileInputs.push(this);cb();};fileInput.onchange=function(){self.addFile(this.files);};fileInput.bind('mouseenter mouseleave mousedown mouseup',function(e){if(!disabled){if(settings.browse_button_hover){if('mouseenter'===e.type){o.addClass(el,settings.browse_button_hover);}else if('mouseleave'===e.type){o.removeClass(el,settings.browse_button_hover);}}
if(settings.browse_button_active){if('mousedown'===e.type){o.addClass(el,settings.browse_button_active);}else if('mouseup'===e.type){o.removeClass(el,settings.browse_button_active);}}}});fileInput.bind('mousedown',function(){self.trigger('Browse');});fileInput.bind('error runtimeerror',function(){fileInput=null;cb();});fileInput.init();});});}
if(settings.drop_element){plupload.each(settings.drop_element,function(el){queue.push(function(cb){var fileDrop=new o.FileDrop(plupload.extend({},options,{drop_zone:el}));fileDrop.onready=function(){var info=o.Runtime.getInfo(this.ruid);self.features.dragdrop=info.can('drag_and_drop');inited++;fileDrops.push(this);cb();};fileDrop.ondrop=function(){self.addFile(this.files);};fileDrop.bind('error runtimeerror',function(){fileDrop=null;cb();});fileDrop.init();});});}
o.inSeries(queue,function(){if(typeof(cb)==='function'){cb(inited);}});}
function resizeImage(blob,params,cb){var img=new o.Image();try{img.onload=function(){if(params.width>this.width&&params.height>this.height&&params.quality===undef&&params.preserve_headers&&!params.crop){this.destroy();return cb(blob);}
img.downsize(params.width,params.height,params.crop,params.preserve_headers);};img.onresize=function(){cb(this.getAsBlob(blob.type,params.quality));this.destroy();};img.onerror=function(){cb(blob);};img.load(blob);}catch(ex){cb(blob);}}
function setOption(option,value,init){var self=this,reinitRequired=false;function _setOption(option,value,init){var oldValue=settings[option];switch(option){case'max_file_size':if(option==='max_file_size'){settings.max_file_size=settings.filters.max_file_size=value;}
break;case'chunk_size':if(value=plupload.parseSize(value)){settings[option]=value;settings.send_file_name=true;}
break;case'multipart':settings[option]=value;if(!value){settings.send_file_name=true;}
break;case'unique_names':settings[option]=value;if(value){settings.send_file_name=true;}
break;case'filters':if(plupload.typeOf(value)==='array'){value={mime_types:value};}
if(init){plupload.extend(settings.filters,value);}else{settings.filters=value;}
if(value.mime_types){settings.filters.mime_types.regexp=(function(filters){var extensionsRegExp=[];plupload.each(filters,function(filter){plupload.each(filter.extensions.split(/,/),function(ext){if(/^\s*\*\s*$/.test(ext)){extensionsRegExp.push('\\.*');}else{extensionsRegExp.push('\\.'+ext.replace(new RegExp('['+('/^$.*+?|()[]{}\\'.replace(/./g,'\\$&'))+']','g'),'\\$&'));}});});return new RegExp('('+extensionsRegExp.join('|')+')$','i');}(settings.filters.mime_types));}
break;case'resize':if(init){plupload.extend(settings.resize,value,{enabled:true});}else{settings.resize=value;}
break;case'prevent_duplicates':settings.prevent_duplicates=settings.filters.prevent_duplicates=!!value;break;case'browse_button':case'drop_element':value=plupload.get(value);case'container':case'runtimes':case'multi_selection':case'flash_swf_url':case'silverlight_xap_url':settings[option]=value;if(!init){reinitRequired=true;}
break;default:settings[option]=value;}
if(!init){self.trigger('OptionChanged',option,value,oldValue);}}
if(typeof(option)==='object'){plupload.each(option,function(value,option){_setOption(option,value,init);});}else{_setOption(option,value,init);}
if(init){settings.required_features=normalizeCaps(plupload.extend({},settings));preferred_caps=normalizeCaps(plupload.extend({},settings,{required_features:true}));}else if(reinitRequired){self.trigger('Destroy');initControls.call(self,settings,function(inited){if(inited){self.runtime=o.Runtime.getInfo(getRUID()).type;self.trigger('Init',{runtime:self.runtime});self.trigger('PostInit');}else{self.trigger('Error',{code:plupload.INIT_ERROR,message:plupload.translate('Init error.')});}});}}
function onBeforeUpload(up,file){if(up.settings.unique_names){var matches=file.name.match(/\.([^.]+)$/),ext="part";if(matches){ext=matches[1];}
file.target_name=file.id+'.'+ext;}}
function onUploadFile(up,file){var url=up.settings.url,chunkSize=up.settings.chunk_size,retries=up.settings.max_retries,features=up.features,offset=0,blob;if(file.loaded){offset=file.loaded=chunkSize?chunkSize*Math.floor(file.loaded / chunkSize):0;}
function handleError(){if(retries-->0){delay(uploadNextChunk,1000);}else{file.loaded=offset;up.trigger('Error',{code:plupload.HTTP_ERROR,message:plupload.translate('HTTP Error.'),file:file,response:xhr.responseText,status:xhr.status,responseHeaders:xhr.getAllResponseHeaders()});}}
function uploadNextChunk(){var chunkBlob,formData,args={},curChunkSize;if(file.status!==plupload.UPLOADING||up.state===plupload.STOPPED){return;}
if(up.settings.send_file_name){args.name=file.target_name||file.name;}
if(chunkSize&&features.chunks&&blob.size>chunkSize){curChunkSize=Math.min(chunkSize,blob.size-offset);chunkBlob=blob.slice(offset,offset+curChunkSize);}else{curChunkSize=blob.size;chunkBlob=blob;}
if(chunkSize&&features.chunks){if(up.settings.send_chunk_number){args.chunk=Math.ceil(offset / chunkSize);args.chunks=Math.ceil(blob.size / chunkSize);}else{args.offset=offset;args.total=blob.size;}}
xhr=new o.XMLHttpRequest();if(xhr.upload){xhr.upload.onprogress=function(e){file.loaded=Math.min(file.size,offset+e.loaded);up.trigger('UploadProgress',file);};}
xhr.onload=function(){if(xhr.status>=400){handleError();return;}
retries=up.settings.max_retries;if(curChunkSize<blob.size){chunkBlob.destroy();offset+=curChunkSize;file.loaded=Math.min(offset,blob.size);up.trigger('ChunkUploaded',file,{offset:file.loaded,total:blob.size,response:xhr.responseText,status:xhr.status,responseHeaders:xhr.getAllResponseHeaders()});if(o.Env.browser==='Android Browser'){up.trigger('UploadProgress',file);}}else{file.loaded=file.size;}
chunkBlob=formData=null;if(!offset||offset>=blob.size){if(file.size!=file.origSize){blob.destroy();blob=null;}
up.trigger('UploadProgress',file);file.status=plupload.DONE;up.trigger('FileUploaded',file,{response:xhr.responseText,status:xhr.status,responseHeaders:xhr.getAllResponseHeaders()});}else{delay(uploadNextChunk,1);}};xhr.onerror=function(){handleError();};xhr.onloadend=function(){this.destroy();xhr=null;};if(up.settings.multipart&&features.multipart){xhr.open("post",url,true);plupload.each(up.settings.headers,function(value,name){xhr.setRequestHeader(name,value);});formData=new o.FormData();plupload.each(plupload.extend(args,up.settings.multipart_params),function(value,name){formData.append(name,value);});formData.append(up.settings.file_data_name,chunkBlob);xhr.send(formData,{runtime_order:up.settings.runtimes,required_caps:up.settings.required_features,preferred_caps:preferred_caps,swf_url:up.settings.flash_swf_url,xap_url:up.settings.silverlight_xap_url});}else{url=plupload.buildUrl(up.settings.url,plupload.extend(args,up.settings.multipart_params));xhr.open("post",url,true);xhr.setRequestHeader('Content-Type','application/octet-stream');plupload.each(up.settings.headers,function(value,name){xhr.setRequestHeader(name,value);});xhr.send(chunkBlob,{runtime_order:up.settings.runtimes,required_caps:up.settings.required_features,preferred_caps:preferred_caps,swf_url:up.settings.flash_swf_url,xap_url:up.settings.silverlight_xap_url});}}
blob=file.getSource();if(up.settings.resize.enabled&&runtimeCan(blob,'send_binary_string')&&!!~o.inArray(blob.type,['image/jpeg','image/png'])){resizeImage.call(this,blob,up.settings.resize,function(resizedBlob){blob=resizedBlob;file.size=resizedBlob.size;uploadNextChunk();});}else{uploadNextChunk();}}
function onUploadProgress(up,file){calcFile(file);}
function onStateChanged(up){if(up.state==plupload.STARTED){startTime=(+new Date());}else if(up.state==plupload.STOPPED){for(var i=up.files.length-1;i>=0;i--){if(up.files[i].status==plupload.UPLOADING){up.files[i].status=plupload.QUEUED;calc();}}}}
function onCancelUpload(){if(xhr){xhr.abort();}}
function onFileUploaded(up){calc();delay(function(){uploadNext.call(up);},1);}
function onError(up,err){if(err.code===plupload.INIT_ERROR){up.destroy();}
else if(err.file){err.file.status=plupload.FAILED;calcFile(err.file);if(up.state==plupload.STARTED){up.trigger('CancelUpload');delay(function(){uploadNext.call(up);},1);}}}
function onDestroy(up){up.stop();plupload.each(files,function(file){file.destroy();});files=[];if(fileInputs.length){plupload.each(fileInputs,function(fileInput){fileInput.destroy();});fileInputs=[];}
if(fileDrops.length){plupload.each(fileDrops,function(fileDrop){fileDrop.destroy();});fileDrops=[];}
preferred_caps={};disabled=false;startTime=xhr=null;total.reset();}
settings={runtimes:o.Runtime.order,max_retries:0,chunk_size:0,multipart:true,multi_selection:true,file_data_name:'file',flash_swf_url:'js/Moxie.swf',silverlight_xap_url:'js/Moxie.xap',filters:{mime_types:[],prevent_duplicates:false,max_file_size:0},resize:{enabled:false,preserve_headers:true,crop:false},send_file_name:true,send_chunk_number:true};setOption.call(this,options,null,true);total=new plupload.QueueProgress();plupload.extend(this,{id:uid,uid:uid,state:plupload.STOPPED,features:{},runtime:null,files:files,settings:settings,total:total,init:function(){var self=this;if(typeof(settings.preinit)=="function"){settings.preinit(self);}else{plupload.each(settings.preinit,function(func,name){self.bind(name,func);});}
bindEventListeners.call(this);if(!settings.browse_button||!settings.url){this.trigger('Error',{code:plupload.INIT_ERROR,message:plupload.translate('Init error.')});return;}
initControls.call(this,settings,function(inited){if(typeof(settings.init)=="function"){settings.init(self);}else{plupload.each(settings.init,function(func,name){self.bind(name,func);});}
if(inited){self.runtime=o.Runtime.getInfo(getRUID()).type;self.trigger('Init',{runtime:self.runtime});self.trigger('PostInit');}else{self.trigger('Error',{code:plupload.INIT_ERROR,message:plupload.translate('Init error.')});}});},setOption:function(option,value){setOption.call(this,option,value,!this.runtime);},getOption:function(option){if(!option){return settings;}
return settings[option];},refresh:function(){if(fileInputs.length){plupload.each(fileInputs,function(fileInput){fileInput.trigger('Refresh');});}
this.trigger('Refresh');},start:function(){if(this.state!=plupload.STARTED){this.state=plupload.STARTED;this.trigger('StateChanged');uploadNext.call(this);}},stop:function(){if(this.state!=plupload.STOPPED){this.state=plupload.STOPPED;this.trigger('StateChanged');this.trigger('CancelUpload');}},disableBrowse:function(){disabled=arguments[0]!==undef?arguments[0]:true;if(fileInputs.length){plupload.each(fileInputs,function(fileInput){fileInput.disable(disabled);});}
this.trigger('DisableBrowse',disabled);},getFile:function(id){var i;for(i=files.length-1;i>=0;i--){if(files[i].id===id){return files[i];}}},addFile:function(file,fileName){var self=this,queue=[],filesAdded=[],ruid;function filterFile(file,cb){var queue=[];o.each(self.settings.filters,function(rule,name){if(fileFilters[name]){queue.push(function(cb){fileFilters[name].call(self,rule,file,function(res){cb(!res);});});}});o.inSeries(queue,cb);}
function resolveFile(file){var type=o.typeOf(file);if(file instanceof o.File){if(!file.ruid&&!file.isDetached()){if(!ruid){return false;}
file.ruid=ruid;file.connectRuntime(ruid);}
resolveFile(new plupload.File(file));}
else if(file instanceof o.Blob){resolveFile(file.getSource());file.destroy();}
else if(file instanceof plupload.File){if(fileName){file.name=fileName;}
queue.push(function(cb){filterFile(file,function(err){if(!err){files.push(file);filesAdded.push(file);self.trigger("FileFiltered",file);}
delay(cb,1);});});}
else if(o.inArray(type,['file','blob'])!==-1){resolveFile(new o.File(null,file));}
else if(type==='node'&&o.typeOf(file.files)==='filelist'){o.each(file.files,resolveFile);}
else if(type==='array'){fileName=null;o.each(file,resolveFile);}}
ruid=getRUID();resolveFile(file);if(queue.length){o.inSeries(queue,function(){if(filesAdded.length){self.trigger("FilesAdded",filesAdded);}});}},removeFile:function(file){var id=typeof(file)==='string'?file:file.id;for(var i=files.length-1;i>=0;i--){if(files[i].id===id){return this.splice(i,1)[0];}}},splice:function(start,length){var removed=files.splice(start===undef?0:start,length===undef?files.length:length);var restartRequired=false;if(this.state==plupload.STARTED){plupload.each(removed,function(file){if(file.status===plupload.UPLOADING){restartRequired=true;return false;}});if(restartRequired){this.stop();}}
this.trigger("FilesRemoved",removed);plupload.each(removed,function(file){file.destroy();});if(restartRequired){this.start();}
return removed;},bind:function(name,func,scope){var self=this;plupload.Uploader.prototype.bind.call(this,name,function(){var args=[].slice.call(arguments);args.splice(0,1,self);return func.apply(this,args);},0,scope);},destroy:function(){this.trigger('Destroy');settings=total=null;this.unbindAll();}});};plupload.Uploader.prototype=o.EventTarget.instance;plupload.File=(function(){var filepool={};function PluploadFile(file){plupload.extend(this,{id:plupload.guid(),name:file.name||file.fileName,type:file.type||'',size:file.size||file.fileSize,origSize:file.size||file.fileSize,loaded:0,percent:0,status:plupload.QUEUED,lastModifiedDate:file.lastModifiedDate||(new Date()).toLocaleString(),getNative:function(){var file=this.getSource().getSource();return o.inArray(o.typeOf(file),['blob','file'])!==-1?file:null;},getSource:function(){if(!filepool[this.id]){return null;}
return filepool[this.id];},destroy:function(){var src=this.getSource();if(src){src.destroy();delete filepool[this.id];}}});filepool[this.id]=file;}
return PluploadFile;}());plupload.QueueProgress=function(){var self=this;self.size=0;self.loaded=0;self.uploaded=0;self.failed=0;self.queued=0;self.percent=0;self.bytesPerSec=0;self.reset=function(){self.size=self.loaded=self.uploaded=self.failed=self.queued=self.percent=self.bytesPerSec=0;};};window.plupload=plupload;}(window,mOxie));function get_tab_id(){if(!(tab_id=sessionStorage.getItem('tab_id'))){tab_id=Date.now();sessionStorage.setItem('tab_id',tab_id);}
return tab_id;}
service_worker=null;if('serviceWorker'in navigator&&typeof document.visibilityState!=="undefined"){upon_enabled=function(reg){service_worker=reg.active;listener=function(e){if(service_worker&&document.visibilityState=='visible'){service_worker.postMessage(get_tab_id());}};document.addEventListener("visibilitychange",listener);listener();};navigator.serviceWorker.register('/serviceworker.js').then(function(reg){if(reg.active){upon_enabled(reg);}
else{navigator.serviceWorker.ready.then(upon_enabled);}}).catch(function(error){console.log('Error registering service worker');});};(function(){String.prototype.trim=function(){return $.trim(this);}
String.prototype.escapeRegExp=function(){return this.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");}
String.prototype.to_int=function(value_if_nan){value_if_nan=typeof value_if_nan=='undefined'?0:value_if_nan;var result=parseInt(this,10);return isNaN(result)?value_if_nan:result;}
String.prototype.to_float=function(precision,value_if_nan){precision=typeof precision=='undefined'?false:precision;value_if_nan=typeof value_if_nan=='undefined'?0:value_if_nan;var result=parseFloat(this.replace(/[^0-9\-.]/g,''),10);if(isNaN(result)){return value_if_nan;}
else if(precision===false){return result;}
else{return result.round(precision);}}
Number.prototype.round=function(precision){precision=typeof precision=='undefined'?0:parseInt(precision);var number_for_rounding=Math.pow(10,precision);return isNaN(this)?this:(Math.round(this*number_for_rounding)/ number_for_rounding);};Number.prototype.money_format=function(precision){precision=typeof precision=='undefined'?2:parseInt(precision);return this.round(precision).toFixed(precision);};String.prototype.round=function(precision){return this.to_float().round(precision);}
String.prototype.money_format=function(precision){return this.to_float().number_format(precision);}})();function parseResponseType(mime_type){mime_type=typeof mime_type=='string'?mime_type:'';mime_type=mime_type.toLowerCase();if(mime_type.match(/json$/)){return'json';}
else if(mime_type.match(/xml$/)){return'xml';}
return'html';};$(document).ajaxSuccess(function(oEvent,oRequestObject,status){var sResponseType=parseResponseType(oRequestObject.getResponseHeader('Content-type'));switch(sResponseType){case'html':if(oRequestObject.responseText&&oRequestObject.responseText.match(/^!__TRIPWIRE__!/)){window.location='/internal/access_denied.php';return false;}
setupCustomDomElements();hideLoading();break;}}).ajaxSend(function(event,request){request.setRequestHeader("X-UserID",(typeof iLoggedInUserID!='undefined'?iLoggedInUserID:null));request.setRequestHeader("X-OrgID",(typeof iLoggedInOrgID!='undefined'?iLoggedInOrgID:null));request.setRequestHeader("X-Current-Location",window.location.pathname+window.location.search);}).ajaxComplete(function(){buttonSetup();if(typeof changeTabs=='function'){changeTabs(window.location.href);}}).ajaxError(function(event,ajax_request,settings){if(ajax_request.status==401){var login_page='/router/logins/index?return_to='+encodeURIComponent(window.location.pathname+window.location.search);if(typeof(iLoggedInUserID)!='undefined'){login_page+='&return_to_user='+iLoggedInUserID.toString();}
window.location=login_page;}
else if(ajax_request.status==503){window.location.reload();}
else if(ajax_request.status==409){setTimeout(function(){window.location.reload();},1000);}
hideLoading();}).on('before_remote.jpi',function(event,params){if(params.triggered_by_class=='remote_nav'&&(($('.js-is-uploading').length&&!confirm('A file is still uploading.\n\nAre you sure you want to navigate away?'))||((formIsModified()||localChange())&&!confirm('You have unsaved changes.\n\nAre you sure you want to navigate away?')))){$.jpi.prevent_remote();return false;}
var $target=$(event.target);var tag=event.target.nodeName.toLowerCase();if(tag=='form'){if($target.data('submitting')){$.jpi.prevent_remote();return false;}
else{$target.data('submitting',true);}}
if(!$target.hasClass('hide_loading')){showLoading();}}).on('after_done.jpi',function(event){var $target=$(event.target);var tag=event.target.nodeName.toLowerCase();if(tag=='form'){$target.data('submitting',false);if(!$target.hasClass('sticky_dialog')){tb_remove();}}
hideLoading();}).on('form_error.jpi',function(event){var $target=$(event.target);var tag=event.target.nodeName.toLowerCase();if(tag=='form'){$target.data('submitting',false);}}).on('remote_nav_fail.jpi',function(event){$('body').addClass('js-remote-nav-fail');}).on('click','.js-open_in_new_tab, .popup, .dialog',function(event){event.preventDefault();$this=$(this);if(!$this.hasClass('disabled')&&!$this.prop('disabled')){var url=($this.attr('href')&&$this.attr('href')!='#')?$this.attr('href'):$this.data('url');if($.trim(url).length>0){if($this.hasClass('js-open_in_new_tab')){open_in_new_tab(url);}
else if($this.hasClass('popup')){openPopup(url,$this.data('window-name'),$this.data('width'),$this.data('height'));}
else if($this.hasClass('dialog')){var dialog_title='';if(!$this.hasClass('js-no_dialog_title')){if($this.data('dialog-title')){var dialog_title=$this.data('dialog-title');}
else{var dialog_title=titleCase($this.text());}}
var post_data=null;if($this.data('post')){post_data=$this.data('post');}
tb_show(dialog_title,url,false,false,'AJAX','',post_data);}}}}).on('change','.select>select',function(event){refreshSelect(this);}).on('change','select.country_toggles_state',function(event){toggleStateInput(this);}).on('error.jpi',function(event,error){if(typeof error=='string'){var message=error;}
else if(typeof error=='object'&&typeof error.message!='undefined'){var message=error.message;}
else{var message=error.toString();}
if(message.match(/[<\/[a-z]+ ?>]/i)){$('#content').html(message);}
else{try{var $errors=$(message).filter('.error');}
catch(e){var $errors={};}
if($errors.length){var final_error_messages=[];$errors.each(function(){$(this).removeClass('error');final_error_messages.push($(this)[0].outerHTML);});growl_error(final_error_messages.join(''));}
else{growl_error(message);}}
if($('.fb_loading:visible').length==1){tb_remove();}
event.stopImmediatePropagation();event.stopPropagation();event.preventDefault();}).on('click','.button.disabled',function(event){}).on("change",".onchange_stop_propagation",function(event){event.stopPropagation();}).on('click','a.tb_inline_content, a.popup_inline_content',function(e){e.preventDefault();var content_selector=$(this).data('selector');var title=$(this).data('title')?$(this).data('title'):$(this).attr('title');if(content_selector){var content_element=$(content_selector);if(content_element){if($(this).hasClass('tb_inline_content')){tb_show(title,content_element.html(),null,null,'HTML');}else{var pops=window.open('',title,'width=600,height=400,resizeable,scrollbars');pops.document.write(content_element.html());pops.document.close();}}}}).on('focus','.select select',function(e,b){if(typeof b=='undefined'||b!=false){focusSelect(this);}}).on('blur','.select select',function(e){blurSelect(this);}).on('click','.download_file',function(event){event.preventDefault();var url=$(this).prop('tagName').toLowerCase()=='a'?$(this).attr('href'):$(this).data('url');open_in_new_tab(url);}).on('click','.show_dropdown',function(event){event.preventDefault();if($(this).hasClass('disabled')){return false;}
var $dropdown=$(this).next('div.drop-down');if(!$dropdown.is(':visible')){$dropdown.fadeIn(100,function(){var hide_dropdown=function(evt){if($dropdown.is(':visible')){$dropdown.fadeOut('fast');$(document).unbind('click',hide_dropdown);$(document).unbind('keydown.dropdown');}};$(document).bind('click',hide_dropdown);$(document).bind('keydown.dropdown',function(event){if(event.keyCode==27){hide_dropdown();}});}).css('display','inline-block');}}).on('input','input.date_or_time_picker',function(){fillHiddenDateSelectors(this,$(this).data('type'));}).on('dragenter','.uploader-drop-area',function(){$(this).addClass('drag-over');if($(this).data('drag-counter')){$(this).data('drag-counter',$(this).data('drag-counter')+1);}
else{$(this).data('drag-counter',1);}}).on('dragleave dragend','.uploader-drop-area',function(){$(this).data('drag-counter',$(this).data('drag-counter')-1);if($(this).data('drag-counter')===0){$(this).removeClass('drag-over');}}).on('drop','.uploader-drop-area',function(){$(this).removeClass('drag-over');$(this).data('drag-counter',0);}).on('click','.js-localization-selector ',function(event){var localization_id=$(this).data('localization-id');Cookies.set('populi_locale_id',localization_id);Cookies.set('populi_locale_update',1);showLoading();window.location.reload();event.preventDefault();event.stopPropagation();}).on('click','.js-srch-placeholder',function(event){event.preventDefault();srch_show();}).on('after_done.jpi','.js-show_file_viewer, .js-show_plagiarism_report_viewer',function(event,triggered_by_class,response){tb_remove();if($('#file_viewer_container').length){$('#file_viewer_container').replaceWith(response);}
else{$('#content').append(response);$('body').addClass('no-scroll');}
$(document).on('keyup',function(e){var keycode=e==null?event.keyCode:keycode=e.which;if(keycode==27&&!$('#facebox').length){remove_file_viewer();}});$(window).one('statechange',function(){$('.no-scroll').removeClass('no-scroll');});}).ready(function(){Mousetrap.bind('mod+k',function(e){if($('.js-adv-srch-container:visible').length){advanced_search_hide();}
if($('.srch-search-input:visible').length){srch_hide();}
else{srch_show();}
e.preventDefault();});Mousetrap.bind('mod+shift+k',function(e){if($('.js-adv-srch-container:visible').length){advanced_search_hide();}
else{advanced_search_show();};e.preventDefault();});}).ajaxSend(function(event,request){if(service_worker){request.setRequestHeader("X-TabID",get_tab_id());}});function profile_card_setup(){$('.js-profile_card:not(.js-profile_card-is_bound)').tooltipster({content:'Loading',contentAsHTML:true,updateAnimation:null,theme:['tooltipster-light','tooltipster-profile-card'],side:'right',interactive:true,maxWidth:400,debug:false}).hover(function(){var $this=$(this),timer=$this.data("timer")||0;clearTimeout(timer);if(!$this.hasClass('js-profile_card-is_set')){$.post($this.data('profile-card'),function(data){$('.js-profile_card[data-profile-card="'+$this.data('profile-card')+'"]').each(function(){$(this).tooltipster('content',data);$(this).addClass('js-profile_card-is_set');});});}
timer=setTimeout(function(){$this.tooltipster('open');},750);$this.data("timer",timer);},function(){var $this=$(this),timer=$this.data("timer")||0;clearTimeout(timer);}).addClass('js-profile_card-is_bound');}
$(window).on('beforeunload',function(event){if($('.js-is-uploading').length){return'A file is still uploading.';}});window.onstatechange=function(event){event.preventDefault();event.stopPropagation();if($('body').hasClass('js-remote-nav-fail')){$('body').removeClass('js-remote-nav-fail');}
else{showLoading();}
tb_remove();}
function formIsModified($form){var aForms=(typeof($form)!='undefined')?$form:$('.userInput');for(var i=0;i<aForms.length;i++){var oForm=aForms.get(i);var element;var option;var hasDefault;var iCount=0;var j;if(typeof(oForm.elements)!='undefined'){while(element=oForm.elements[iCount++]){switch(element.type){case'text':case'textarea':case'hidden':if($(element).val().replace(/\s/g,"")!=$(element).prop('defaultValue').replace(/\s/g,"")){return true;}
break;case'checkbox':case'radio':if(element.checked!=element.defaultChecked){return true;}
break;case'select-one':case'select-multiple':j=0;hasDefault=false;while(option=element.options[j++]){if(option.defaultSelected){hasDefault=true;}}
j=hasDefault?0:1;while(option=element.options[j++]){if(option.selected!=option.defaultSelected){return true;}}
break;}}}}
return false;}
function localChange(){if($('.hidden_change').length){return true;}
else{return false;}}
function navigate(pstrURL,pstrAbbrv,pbAddHistory){if((formIsModified()||localChange())&&!confirm('You have unsaved changes.\n\nAre you sure you want to navigate away?')){return false;}
$(document).trigger('before-remote-nav');if(typeof(pstrURL)=='string'&&pstrURL.length){if(getApp(document.location.href,formIsModified())==getApp(pstrURL,false)){$.jpi.updateCurrentHistoryState(pstrURL,"",{rand:Math.random()});tb_remove();}
else{window.location=pstrURL;}}
return false;}
function remove_file_viewer(){tb_remove();$('.no-scroll').removeClass('no-scroll');$('#file_viewer_container').fadeOut(function(){$(this).remove();});}
function openPopup(strLocation,strID,height,width,bNotResizable){strID=strID?strID:'_blank';height=height?height:600;width=width?width:500;bResizable=bNotResizable?0:1;strLocation=strLocation.match(/\?/)?strLocation+'&pageNav=1':strLocation+'?pageNav=1';var newWin;newWin=window.open(strLocation,strID,'resizable='+bResizable+',scrollbars=1,width='+width+',height='+height+',locationbar=0,toolbar=0');if(typeof newWin=='undefined'||newWin==null){alert('The window could not be opened. Please make sure Pop-Ups are not being blocked and try again.');}
else{newWin.focus();}}
function fillHiddenDateSelectors(poInput,psType){if(typeof(psType)=='undefined'){psType='DATE';}
var display_input=$(poInput);var date_object=(psType=='MONTH_DAY')?Date.parse(display_input.val()+' 2020'):Date.parse(display_input.val());var valid_date_object=(typeof date_object=="object"&&date_object!=null)?1:0;var sFormat=get_mysql_date_format(psType);var formatted_value='';if(valid_date_object){if(psType=='DATETIME'&&display_input.hasClass('js-last_second')&&!display_input.val().match(/(1[0-2]|0?[1-9]):[0-5][0-9](AM|PM)?/i)){date_object.setHours(23,59,59);}
formatted_value=date_object.toString(sFormat);}
var max_date=display_input.data('max-date');var max_date_object=Date.parse(max_date);var date_time_id=display_input.data('date-time-id');if(display_input.val().length){var valid_timeframe=max_date_object?date_object<=max_date_object:true;if(!valid_date_object||!valid_timeframe){display_input.addClass('invalid_date');}
else{display_input.removeClass('invalid_date');}}
$('input:hidden[data-date-time-id="'+date_time_id+'"]:first').val(formatted_value);}
function get_mysql_date_format(type){if(type=='DATE'){return"yyyy-MM-dd";}
else if(type=='TIME'){return"HH:mm:ss";}
else{return"yyyy-MM-dd HH:mm:ss";}}
function get_pretty_date(date,type){return capitalize_first_letter(date.toString(get_pretty_date_format(type)).toLowerCase());}
function get_pretty_date_format(type){if(type=='DATE'){return"MMM d, yyyy";}
else if(type=='TIME'){return"h:mmtt";}
else if(type=='MONTH_DAY'){return"MMM d";}
else{return"MMM d, yyyy h:mmtt";}}
function capitalize_first_letter(string){return string.charAt(0).toUpperCase()+string.slice(1);}
function toggleDropdown(poThis,pstrID){var rightPos=($(window).width()-($(poThis).offset().left+$(poThis).width()));var topPos=$(poThis).offset().top+$(poThis)[0].offsetHeight+9;switch(pstrID){case'editRolesDropdown':$('#'+pstrID).css({left:0});break;case'rolesDropdown':tb_remove();var topPos=$(poThis).position()['top']+$('.singlecol').scrollTop()+12;$('#'+pstrID).css({top:topPos,left:$(poThis).offset().left-$('#side').width()-2});break;case'visibility_dropdown':tb_remove();$('#'+pstrID).css({left:$(poThis).offset().left});break;case'order_export_dropdown':$('#'+pstrID).css({top:topPos,left:$(poThis).offset().left});break;case'events_action_dropdown':$('#'+pstrID).css({right:rightPos-20,top:topPos-149});break;default:tb_remove();$('#'+pstrID).css({right:rightPos,top:topPos-3});break;}
if($('#'+pstrID).hasClass('js-item-action-container')){$('#'+pstrID).css({right:rightPos-10,top:topPos-118});}
$('#'+pstrID).fadeIn(100,function(){var hideDropdown=function(evt){if($('#'+pstrID+':visible')){switch(pstrID){case'editRolesDropdown':case'rolesDropdown':if(!$(evt.target).parents('#'+pstrID).size()&&$(evt.target).attr('id')!=pstrID){$('#'+pstrID).fadeOut('fast');$(document).unbind('click',hideDropdown);}
break;default:$('#'+pstrID).fadeOut('fast');$(document).unbind('click',hideDropdown);break;}}};$(document).bind('click',hideDropdown);});}
function enableButton(pmSelector){var oButton=(typeof pmSelector=='object')?pmSelector:$(pmSelector);if(oButton.length){oButton.prop('disabled',false);}}
function disableButton(pmSelector){var oButton=(typeof pmSelector=='object')?pmSelector:$(pmSelector);if(oButton.length){oButton.prop('disabled',true);}}
function buttonSetup(){}
function setSelectValue(poSelect){$(poSelect).prev('span').html('');var strValue=$(poSelect).find('option:selected, optgroup option:selected').html();if(typeof(strValue)=='undefined'){strValue=$(poSelect).find('option:first, optgroup option:first').html();}
$(poSelect).prev('span').html(strValue);$(poSelect).attr({title:strValue});}
function enableSelect(poSelect){$(poSelect).prop('disabled',false);$(poSelect).parent().removeClass('disabled');}
function disableSelect(poSelect){$(poSelect).prop('disabled',true);$(poSelect).parent().addClass('disabled');}
function showSelect(poSelect){$(poSelect).show();$(poSelect).parent().show();}
function hideSelect(poSelect){$(poSelect).hide();$(poSelect).parent().hide();}
function focusSelect(poSelect){$(poSelect).parent().addClass('focused');try{poSelect.trigger('focus',false);}
catch(e){return false;}}
function blurSelect(poSelect){$(poSelect).parent().removeClass('focused');}
function refreshSelect(poSelect){setSelectValue(poSelect);if($(poSelect).is(':disabled')){$(poSelect).parent().addClass('disabled');}else{$(poSelect).parent().removeClass('disabled');}
if($(poSelect).is(':hidden')){$(poSelect).parent().hide();}else{$(poSelect).parent().show();}}
function toggleStateInput(poThis){var oContainer=$(poThis).closest('.address_input');var country=$(poThis).val();if(country=='USA'){country='US';}
var usa_state_select=$('select.state_state',oContainer);var canada_state_select=$('select.state_province',oContainer);var other_state_input=$('.state_other',oContainer);if(country=='US'){hideSelect(canada_state_select);disableSelect(canada_state_select);other_state_input.prop('disabled',true).hide();enableSelect(usa_state_select);showSelect(usa_state_select);}
else if(country=='CA'){hideSelect(usa_state_select);disableSelect(usa_state_select);other_state_input.prop('disabled',true).hide();enableSelect(canada_state_select);showSelect(canada_state_select);}
else{hideSelect(usa_state_select);disableSelect(usa_state_select);hideSelect(canada_state_select);disableSelect(canada_state_select);other_state_input.show().prop('disabled',false).removeClass('disabled');}
var $zip=$('#zip, .zip',oContainer);if($zip.length){var zip_placeholder='Postal Code';if(country=='US'){if(typeof $zip.data('zip-placeholder')!='undefined'&&$zip.data('zip-placeholder').length){zip_placeholder=$zip.data('zip-placeholder');}
else{zip_placeholder='ZIP';}}
else if(typeof $zip.data('postal-code-placeholder')!='undefined'&&$zip.data('postal-code-placeholder').length){zip_placeholder=$zip.data('postal-code-placeholder');}
$zip.attr('placeholder',zip_placeholder);}}
function showLoading(){$('.loading_throbber').show();}
function hideLoading(){$('.loading_throbber').hide();}
function truncationSetup(){$('.truncation_block').each(function(){iOuterHeight=$(this).height();iInnerHeight=$(this).children('div').height();if(iInnerHeight<=iOuterHeight){$(this).next('.read_more').click();}});}
function refreshBadge(piCount){var oTarget=$('.currentControlTab > span');if(piCount<1){oTarget.hide();}
else{oTarget.html(piCount);}}
function setupCustomDomElements(){buttonSetup();auto_complete_setup();$("[autofocus]").autofocus();$('.numeric_money, .numeric_float').not('.alphanumeric_setup').numeric({allow:'.'});$('.numeric_negative_money, .numeric_negative_float').not('.alphanumeric_setup').numeric({allow:'-.'});$('.numeric_int').not('.alphanumeric_setup').numeric();$('.numeric_negative_int').not('.alphanumeric_setup').numeric({allow:'-'});}
function trap_focus(poThis){var modal_focusable=poThis.find('button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])');var first_focusable=modal_focusable.first().get(0);var last_focusable=modal_focusable.last().get(0);var auto_focusable=poThis.find('button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])');auto_focusable=modal_focusable.length>1?auto_focusable.not('.fb_close'):auto_focusable;auto_focusable=auto_focusable.first().get(0);document.addEventListener('keydown',function(e){var is_tab_pressed=e.key==='Tab'||e.keyCode===9;if(!is_tab_pressed){return;}
if(e.shiftKey){if(document.activeElement===first_focusable){last_focusable.focus();e.preventDefault();}}
else{if(document.activeElement===last_focusable){first_focusable.focus();e.preventDefault();}}});auto_focusable.focus();}
function auto_complete_setup($element){if(typeof $element=='undefined'){$element=$('input.auto_complete').not('.js-auto-complete-input');}
$element.each(function(){var $display_input=$(this);var $hidden_input=$display_input.next('input[type=hidden].auto_complete_target');attach_search($display_input,$display_input.data('url'),function(data){$hidden_input.val(data.id);});$display_input.change(function(){if(!$.trim($(this).val()).length){$hidden_input.val('');}});});}
(function($){$.fn.autofocus=function(){return(this.first().autofocus!==true)?this.focus():this;};})(jQuery);function idle(){$(document).off('mousemove keydown uploader_file_uploading');$(document).one('mousemove',function(){resetTimebomb('keydown uploader_file_uploading');});$(document).one('keydown',function(){resetTimebomb('mousemove uploader_file_uploading');});$(document).one('uploader_file_uploading',function(){resetTimebomb('mousemove keydown');});setTimeout('idle();',60000);}
function resetTimebomb(psUnbind){$(document).off(psUnbind);$.ajax({global:false,url:'/internal/reset_timebomb.php',success:function(sData){if($.trim(sData).length&&!sData.match(/STILL_LOGGED_IN/)){timeout();}}});}
function timeout(){var sReturnTo='&return_to='+encodeURIComponent(window.location.pathname+window.location.search);var sReturnToUser=typeof(iLoggedInUserID)!='undefined'?'&return_to_user='+iLoggedInUserID.toString():'';window.location='/router/logins/index?message=TIMEOUT'+sReturnTo+sReturnToUser;}
function getApp(pstrURL,check_leaving_modified_appearances_page){sURL=pstrURL.toLowerCase();if(sURL.match(/^(https?:\/\/)?[^\/]*(\/router)?\/bookstore\//)){return'BOOKSTORE';}
else if(sURL.match(/^(https?:\/\/)?[^\/]*\/library\//)){return'LIBRARY';}
else if(sURL.match(/^(https?:\/\/)?[^\/]*\/email\//)){return'EMAIL';}
else if(sURL.match(/^(https?:\/\/)?[^\/]*\/calendar\//)){return'CALENDAR';}
else if(sURL.match(/^(https?:\/\/)?[^\/]*(\/router)?\/financial\//)){return'FINANCIAL';}
else if(check_leaving_modified_appearances_page&&sURL.indexOf('account/appearance')!=-1){return'RELOAD_PAGE';}
else if(sURL.match(/^(https?:\/\/)?[^\/]*(\/router)?\/account\//)){return'ACCOUNT';}
else{return'COLLEGE_MANAGEMENT';}}
function broadcast_message(message_type,extra_data){if(window.parent&&typeof window.parent.postMessage=='function'){message_type='populi.'+message_type;var data={type:message_type};if(typeof(extra_data)=='object'){Object.assign(data,extra_data);}
parent.postMessage(data,'*');}}
var pace_options_backup=null;function srch_show(){pace_options_backup=Pace.options.ajax;Pace.options.ajax=false;$('.js-srch').addClass('show-search');setTimeout(function(){$('body').bind('click',function(e){check_click_position_and_hide_srch(e)});},50);srch_setup();$('.js-srch-search-input').focus();}
function srch_hide(){if(pace_options_backup){Pace.options.ajax=pace_options_backup;pace_options_backup=null;}
$('.js-srch-searchbox-dropdown').hide();$('.js-srch').removeClass('show-search');$('.srch-result-selected').removeClass('srch-result-selected');$('body').unbind('click');$('.js-go-to-advanced-search').unbind('click');document.onkeyup='';setup_srch_esc();search_string=$('.js-srch-search-input').val();if(search_string){$('.js-srch-search-input').data('prior',search_string);}
$('.js-srch-search-input').val('');$('.js-srch-search-input').trigger('input');$('.js-srch-recommendations').data('query','');}
function srch_typewatch(){q=$('.js-srch-search-input').val();if(q.trim().length>=2&&q!=$('.js-srch-recommendations').data('query')){$('.js-srch-recommendations').data('query',q);srch_load_suggestions(q);}}
function srch_setup(){if(!$('.js-srch-search-input').hasClass('mousetrapped')){var search_input=$('.js-srch-search-input')[0];Mousetrap(search_input).bind(['up','down','enter'],function(e,combo){search_results_nav(combo);return false;});$('.js-srch-search-input').addClass('mousetrapped');$('.js-srch-execute').click(function(event){event.preventDefault();advanced_search_show();});$('.js-srch-search-input').typeWatch({callback:srch_typewatch,wait:400,highlight:false,captureLength:2}).on('input',function(){q=$(this).val();if(q.trim().length==0&&$('.js-srch').hasClass('show-search')){$(this).val('');srch_recent_show();}
else{if($('.js-srch-results-recent:visible').length){srch_recent_hide();}
if(q.trim().length<=1){srch_hide_results();}
else if($('.js-srch-recommendations').data('query')!=q){var id_match=$('.js-srch-search-input').val().match(/^id([\d]+)id$/i);if(id_match){navigate('/router/contacts/people/'+id_match[1]);srch_hide();}
else{srch_show_loading();}}
else{srch_show_results();}}});$('.js-srch-searchbox-dropdown').on('mouseover','.js-srch-result',function(){update_srch_selected(this);});$(document).on('after_remote.jpi',search_history_hide);}
srch_recent_show();setup_srch_esc();setTimeout(function(){srch_trap_focus();},1000);}
function srch_trap_focus(){var parent=$('.js-srch');var modal_focusable=parent.find('button, [href]:visible, input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])').not('.js-srch-placeholder, .js-srch-submit');var first_focusable=modal_focusable.first().get(0);var last_focusable=modal_focusable.last().get(0);document.addEventListener('keydown',function(e){var is_tab_pressed=e.key==='Tab'||e.keyCode===9;if(!is_tab_pressed){return;}
if(e.shiftKey){if(document.activeElement===first_focusable){last_focusable.focus();e.preventDefault();}}
else{if(document.activeElement===last_focusable){first_focusable.focus();e.preventDefault();}}});}
function is_element_outside_viewport(el){if(typeof el.getBoundingClientRect!=='function'||typeof el.scrollIntoView!=='function'){return false;}
var rect=el.getBoundingClientRect();return rect.bottom<0||rect.right<0||rect.left>window.innerWidth||rect.top>window.innerHeight;}
function search_results_nav(key){if(key=='up'){if(!$('.srch-result-selected:visible').length){$('.js-srch-search-input').val($('.js-srch-search-input').data('prior'));$('.js-srch-search-input').trigger('input');}
else{$('.js-srch-result:visible').each(function(index){if(index){if($(this).hasClass('srch-result-selected')){el=$('.js-srch-result:visible:eq('+(index-1).toString()+')');if(is_element_outside_viewport(el.get(0))){el.get(0).scrollIntoView(true);}
update_srch_selected(el);return false;}}});}}
else if(key=='down'){if(!$('.srch-result-selected:visible').length){update_srch_selected($('.js-srch-results:visible li:first-child a'));}
else{$('.js-srch-result:visible').each(function(index){if((index+1)<$('.js-srch-result:visible').length){if($(this).hasClass('srch-result-selected')){el=$('.js-srch-result:visible:eq('+(index+1).toString()+')');if(is_element_outside_viewport(el.get(0))){el.get(0).scrollIntoView(false);}
update_srch_selected(el);return false;}}});}}
else if(key=='enter'){if($('.js-srch-results-loading:visible').length){srch_typewatch();}
else if($('.srch-result-selected:visible').length){$('.srch-result-selected:visible')[0].click();}}}
function check_click_position_and_hide_srch(e){if(!e.screenX){return;}
var dropdown=$('.js-srch-searchbox-dropdown').offset();var height=$('.js-srch-searchbox-dropdown').height();var width=$('.js-srch-searchbox-dropdown').outerWidth();if(e.pageY<dropdown['top']-dropdown['top']||e.pageY>dropdown['top']+height){srch_hide()}
if(e.pageX<dropdown['left']||e.pageX>dropdown['left']+width){srch_hide()}}
function update_srch_selected(o){$('.srch-result-selected').removeClass('srch-result-selected');$(o).addClass('srch-result-selected');}
function setup_srch_esc(){Mousetrap.unbind('esc');if($('.js-search_shortcuts').length){Mousetrap.bind('esc',function(){search_shortcuts_hide()});}
else if(!$('.js-adv-srch-container').is(':hidden')){Mousetrap.bind('esc',function(){advanced_search_hide()});}
else if(!$('.js-srch-history-container').is(':hidden')){Mousetrap.bind('esc',function(){search_history_hide()});}
else if($('#facebox:visible').length){Mousetrap.bind('esc',function(){tb_remove();setup_srch_esc();});}
else if($('.js-srch').hasClass('show-search')){Mousetrap.bind('esc',function(){srch_hide()});}}
function srch_show_loading(){$('.js-srch-recommendations').hide();$('.js-srch-results-recent').hide();$('.js-srch-searchbox-dropdown').show();$('.js-srch-results-recommendations').show();$('.js-srch-results-loading').show();srch_recalc_dropdown_size();}
function srch_show_results(){$('.js-srch-results-loading').hide();$('.js-srch-results-recent').hide();$('.js-srch-searchbox-dropdown').show();$('.js-srch-results-recommendations').show();$('.js-srch-recommendations').show();srch_recalc_dropdown_size();srch_trap_focus();}
function srch_recalc_dropdown_size(force_width){if(typeof force_width=='undefined'){force_width=false;}
$('.js-srch-searchbox-dropdown').css('left','');$('.js-srch-searchbox-dropdown').width('');inputAreaWidth=$('.js-srch-search-input').outerWidth();inputWidth=$('.js-srch-search-input').width();dropdownWidth=$('.js-srch-searchbox-dropdown').width();dropdownAreaWidth=$('.js-srch-searchbox-dropdown').outerWidth();if(dropdownAreaWidth>inputAreaWidth){if(force_width){$('.js-srch-searchbox-dropdown').width(inputWidth+'px');}
else{$('.js-srch-searchbox-dropdown').css('left',(inputAreaWidth-dropdownAreaWidth)+'px');$('.js-srch-searchbox-dropdown').width(dropdownWidth+'px');}}}
function srch_hide_results(){if($('.js-srch-searchbox-dropdown:visible').length){$('.js-srch-searchbox-dropdown').hide();}}
function srch_recent_show(){if(!$('.js-srch-results-recent:visible').length){$('.js-srch-results-recommendations').hide();$('.js-srch-searchbox-dropdown').hide();$('.js-srch-results-loading').hide();$('.js-srch-results-recent').html('');$('.js-srch-results-recent').load('/router/search/recent',function(results){if(results!=''&&!$('.js-srch-search-input').val()){$('.js-srch-searchbox-dropdown').show();$('.js-srch-results-recent').show();srch_recalc_dropdown_size();}});}}
function srch_recent_hide(){$('.js-srch-results-recent').hide();$('.js-srch-searchbox-dropdown').hide();$('.js-srch-search-for').addClass('srch-result-selected');}
function srch_load_suggestions(query){$('.js-srch-recommendations').load('/router/search/quick?q='+encodeURIComponent(query),function(results){q=$('.js-srch-search-input').val();if(q==$('.js-srch-recommendations').data('query')){if(results==''){srch_hide_results();}
else{srch_show_results();}}});}
function advanced_search_load_suggestions(query,offset){if(typeof query=='undefined'){query=null;}
if(typeof offset=='undefined'){offset=0;}
if(query==null){query=$('.js-adv-srch-results').data('query');}
else{$('.js-adv-srch-results').data('query',query);}
if(query.trim()){$('.js-adv-srch-invite').hide();$('.js-adv-srch-results').hide();$('.js-adv-srch-results-loading').show();var selected_type=$('.js-adv-srch-filter').data('selected_type');var selected_field=$('#js-adv-srch-fields-for-'+selected_type).data('selected_field');if(selected_field){selected_type=selected_field;}
var type_condition=(selected_type=='_'?'':'&model='+selected_type);var url='/router/search/full?q='+encodeURIComponent(query)+'&from='+offset+type_condition;$('.js-adv-srch-results').load(url,function(results){if($('.js-adv-srch-results').data('query')==query){$('.js-adv-srch-results-loading').hide();$('.js-adv-srch-results').show();}});}else{$('.js-adv-srch-results').hide();$('.js-adv-srch-results-loading').hide();$('.js-adv-srch-invite').show();}}
function advanced_search_typewatch(){q=$('.js-adv-srch-input').val();if(q.trim().length>=2&&q!=$('.js-adv-srch-results').data('query')){advanced_search_load_suggestions(q);}}
function advanced_search_setup(){if(!$('.js-adv-srch-input').hasClass('mousetrapped')){var search_input=$('.js-adv-srch-search-input')[0];$('.js-adv-srch-input').addClass('mousetrapped');$('.js-adv-srch-field-container .drop-down-list-link').click(function(event){event.preventDefault();advanced_search_select_type($(this).data('model'),$(this).data('field'));advanced_search_load_suggestions();});$('.js-adv-srch-filter .drop-down-list-link, .js-adv-srch-filter-option').click(function(event){event.preventDefault();advanced_search_select_type($(this).data('model'));advanced_search_load_suggestions();})
$('.js-adv-srch-execute').click(function(event){event.preventDefault();advanced_search_typewatch();});$('.js-adv-srch-input').typeWatch({callback:advanced_search_typewatch,wait:400,highlight:false,captureLength:2}).on('input',function(){q=$(this).val();$('.js-adv-srch-results').hide();if(q.trim().length==0){$(this).val('');}
if(q.trim().length<=1){$('.js-adv-srch-invite').show();$('.js-adv-srch-results-loading').hide();$('.js-adv-srch-results').data('query','');}
else if(q==$('.js-adv-srch-results').data('query')){$('.js-adv-srch-invite').hide();$('.js-adv-srch-results-loading').hide();$('.js-adv-srch-results').show();}
else{$('.js-adv-srch-invite').hide();$('.js-adv-srch-results-loading').show();$('.js-adv-srch-results').hide();}});$('.js-adv-srch-close').click(advanced_search_hide);$(document).on('after_remote.jpi',advanced_search_hide);}}
function advanced_search_show(types,field){if(typeof types=='undefined'){types=['_','PersonModel','ContactOrganization'];}
if(typeof field=='undefined'){field=null;}
advanced_search_setup();var q=$('.js-srch-search-input').val();$('.js-adv-srch-input').val(q);srch_hide();search_shortcuts_hide();$('.js-adv-srch-results').data('query','');$('.js-adv-srch-filter').data('selected_type','');overlay_bg_show();$('.js-adv-srch-container').fadeIn('fast');setup_srch_esc();advanced_search_populate_types(types);advanced_search_select_type(types[0],field);$('.js-adv-srch-input').select();advanced_search_load_suggestions(q);}
function advanced_search_populate_types(visible_types,recurse){if(typeof recurse=='undefined'){recurse=true;}
var search_types=['_','PersonModel','ContactOrganization','Room','Campus','Building','CatalogCourse','CourseOfferingCatalogCourse','Invoice','Payment','BookstoreOrder','Credit','FinancialTransaction','Role','Tag','Group'];var old_container_height=$('.js-adv-srch-filter').height();var show_dropdown=false;search_types.forEach(function(model_name){var found=$.inArray(model_name,visible_types);if(found==-1){$('#adv-srch-filter-dropdown-'+model_name).show();show_dropdown=true;}
else{$('#adv-srch-filter-dropdown-'+model_name).hide();}
$('#js-adv-srch-filter-tab-'+model_name).hide();});if(show_dropdown){$('.js-adv-srch-filter-dropdown').show();}
else{$('.js-adv-srch-filter-dropdown').hide();}
visible_types.slice().reverse().forEach(function(model_name){$('#js-adv-srch-filter-tab-'+model_name).prependTo('.js-adv-srch-filter');$('#js-adv-srch-filter-tab-'+model_name).show();});$('.js-adv-srch-filter').data('visible_types',visible_types)
while(recurse&&$('.js-adv-srch-filter').height()>old_container_height){visible_types=visible_types.slice(0,-1);advanced_search_populate_types(visible_types,false);}}
function advanced_search_select_type(type,field){if(typeof field=='undefined'){field=null;}
$('.js-adv-srch-filter-option').removeClass('adv-srch-filter-current');$('#js-adv-srch-filter-tab-'+type).addClass('adv-srch-filter-current');$('.js-adv-srch-field-container .show_dropdown').hide();var field_selector=$('#js-adv-srch-fields-for-'+type);if(field_selector.length){var chevron='<span class="fa fa-chevron-down" style="margin-left:3px;"></span>'
if(field){var field_option=$('#js-adv-srch-field-dropdown-'+field);field_selector.html(field_option.text()+chevron);field_selector.data('selected_field',field_option.data('field'));}
else{field_selector.html('All Fields'+chevron);field_selector.data('selected_field',$('#js-adv-srch-field-dropdown-'+type+'-all').data('all-fields'));}
field_selector.show();}
if($.inArray(type,$('.js-adv-srch-filter').data('visible_types'))==-1){visible_types=$('.js-adv-srch-filter').data('visible_types');advanced_search_populate_types([type].concat(visible_types));}
$('.js-adv-srch-filter').data('selected_type',type);var placeholder='Search '+$('#js-adv-srch-filter-tab-'+type).text().replace('All','Populi');$('.js-adv-srch-input').attr('placeholder',placeholder);$('.js-adv-srch-input').select();}
function advanced_search_hide(){overlay_bg_hide();$('.js-adv-srch-container').fadeOut('fast',function(){setup_srch_esc();});$('.js-adv-srch-execute').unbind('click');document.onkeyup='';$('.js-adv-srch-input').val('');$('.js-adv-srch-input').trigger('input');}
function search_shortcuts_hide(){if(!$('.js-search_shortcuts').is(':hidden')){tb_remove();setup_srch_esc();}}
function search_history_show(){srch_recent_hide();$('.js-srch-history-nav').hide();$('.js-srch-history-results').empty();overlay_bg_show();$('.js-srch-history-container').fadeIn('fast');$('.js-srch-history-close').click(search_history_hide);setup_srch_esc();search_history_load_page();}
function search_history_load_page(offset){if(typeof offset=='undefined'){offset=0;}
$('.js-srch-history-results').load('/router/search/history?from='+offset,function(results){$('time.timeago').timeago().tooltipster();$('.js-srch-history-item-remove').on('click',function(event){$(this).parent().parent().remove();$.get('/router/search/history_delete?history_id='+$(this).data('id'));});$('.js-srch-history-reload').on('click',function(event){search_history_load_page($(this).data('offset'));});$('.js-srch-history-nav').show();});}
function search_history_hide(){overlay_bg_hide();$('.js-srch-history-container').fadeOut('fast',setup_srch_esc);document.onkeyup='';}
function overlay_bg_show(){$('body>header, #content, body>footer').addClass('blur');$('body').addClass('no-scroll');}
function overlay_bg_hide(){$('.blur').removeClass('blur');$('.no-scroll').removeClass('no-scroll');}
function attach_search($input,search_type_or_url,callback_function,extra_data){$input.attr('autocomplete','off').attr('autocorrect','off').attr('autocapitalize','off').attr('spellcheck','false');var extra_params='';if(typeof(extra_data)=='object'){$.each(extra_data,function(key,value){extra_params+='&'+encodeURIComponent(key)+'='+encodeURIComponent(value);});}
var url=search_type_or_url.indexOf('/')!=-1?search_type_or_url:'/internal/common/search.php?pageNav=1&type='+search_type_or_url;url+=extra_params;$input.autocomplete({minLength:0,appendTo:$input.parent(),source:url,focus:function(event,ui){event.preventDefault();},select:function(event,ui){var item_name=ui.item.name;if(item_name.indexOf('js-search-results-text-container')!=-1){var $text_containers=$(item_name).find('.js-search-results-text-container');item_name='';$text_containers.each(function(i){if(i<=1){item_name+=$(this).text();}
else{return false;}});}
$input.val(htmlDecode(item_name));if(typeof(callback_function)!='undefined'&&callback_function!=false){callback_function(ui.item);}
return false;}}).focus(function(){var skip_search_on_focus=$input.data('skip-search-on-focus');if(typeof(skip_search_on_focus)=='undefined'){skip_search_on_focus=0;}
if(!skip_search_on_focus&&$.trim($input.val()).length){$input.autocomplete("search");}}).autocomplete("instance")._renderItem=function(ul,item){var search_term=this.term.replace(/[.*+\-?^${}()|[\]\\]/g,'\\$&');if(item.name.indexOf('js-html-search-results-container')!=-1){var name_html=$(item.name);var name_elements=$('.js-search-results-text-container',name_html);name_elements.each(function(){$(this).html($(this).html().replace(new RegExp("("+search_term+")","i"),"<strong>$1</strong>"));});var display_value=name_html.html();}
else{var display_value=item.name.replace(new RegExp("("+search_term+")","i"),"<strong>$1</strong>");}
if(typeof(item.extra)!='undefined'){if(item.extra!=null&&item.extra.indexOf('js-html-search-results-container')!=-1){var extra_html=$(item.extra);var extra_elements=$('.js-search-results-text-container',extra_html);if(extra_elements.length){extra_elements.each(function(){$(this).html($(this).html().replace(new RegExp("("+search_term+")","i"),"<strong>$1</strong>"));});display_value+='<div class="ui-autocomplete-extra">'+extra_html.html()+'</div>';}}
else if($.trim(item.extra).length){display_value+='<div class="ui-autocomplete-extra">'+item.extra.replace(new RegExp("("+search_term+")","i"),"<strong>$1</strong>")+'</div>';}}
return $("<li>"+display_value+"</li>").appendTo(ul);};}
function attach_search_email_recipients($input,max_recipients){$input.attr('autocomplete','off').attr('autocorrect','off').attr('autocapitalize','off').attr('spellcheck','false');$input.bind("keydown",function(event){if(event.keyCode===$.ui.keyCode.TAB&&$(this).autocomplete("instance").menu.active){event.preventDefault();}}).autocomplete({minLength:0,source:function(request,response){var last_term=request.term.split(/,\s*/).pop();$.getJSON('/internal/common/search.php?pageNav=1&type=RECIPIENTS&term='+last_term,function(json_data){response(json_data);});},focus:function(){return false;},select:function(event,ui){var terms=this.value.split(/,\s*/);if(max_recipients&&terms.length>max_recipients){$.jGrowl('The maximum number of email addresses is '+max_recipients,{theme:'growlerror'});return false;}
terms.pop();terms.push(ui.item.value);terms.push("");this.value=terms.join(", ");$input.refresh_auto_resize();return false;}}).focus(function(){if($.trim($input.val()).length){$input.autocomplete("search");}}).autocomplete("instance")._renderItem=function(ul,item){var display_value=item.name.replace('<',"&lt;").replace('>',"&gt;");display_value=display_value.replace(new RegExp("("+this.term+")","i"),"<strong>$1</strong>");return $("<li>"+display_value+"</li>").appendTo(ul);};}
function remoteCompose(poParams){var sParams='';for(sKey in poParams){sParams+='&'+sKey+'='+poParams[sKey];}
var newWin=window.open('/email/index.php?view=COMPOSE&pageNav=1'+sParams);if(typeof newWin=='undefined'||newWin==null){alert('The email window could not be opened. Please make sure Pop-Ups are not being blocked and try again.');}
else{newWin.focus();}}
function remoteTempListCompose(pmListInstanceID,mailing_list_id){if((pmListInstanceID.length||typeof pmListInstanceID=='number')&&isNumeric(pmListInstanceID)){var remote_compose_params={listInstanceID:pmListInstanceID};if(typeof mailing_list_id!='undefined'&&isNumeric(mailing_list_id)){remote_compose_params['mailing_list_id']=mailing_list_id;}
remoteCompose(remote_compose_params);}
else{growl_error("Oops! We couldn't email this list. Are you sure at least one member has a primary email?");}}
function insertAtCursor(poElement,pstrValue){if(poElement.is('textarea')){var editor;var textarea=poElement.get(0);}
else{var editor=poElement.get(0).contentWindow;var textarea=poElement.next().get(0);}
if($(textarea).size()&&$(textarea).is(':visible')){if(document.selection){textarea.focus();sel=document.selection.createRange();sel.text=pstrValue;}
else if(textarea.selectionStart||textarea.selectionStart=='0'){var startPos=textarea.selectionStart;var endPos=textarea.selectionEnd;textarea.value=textarea.value.substring(0,startPos)+pstrValue+textarea.value.substring(endPos,textarea.value.length);var newEndPos=startPos+pstrValue.length;textarea.setSelectionRange(newEndPos,newEndPos)}
else{textarea.value+=pstrValue;}
textarea.focus();}
else{var editorDoc=editor.document;if(document.selection){editor.focus();range=editorDoc.selection.createRange();range.pasteHTML(pstrValue);}
else if(editorDoc.body.id=='tinymce'){tinymce.activeEditor.execCommand('mceInsertContent',false,pstrValue);}
else if(editor.getSelection){editorDoc.execCommand('inserthtml',false,pstrValue);}
else{alert("We're sorry, but your browser does not support this functionality.");}
editor.focus();}}
function mce_url_converter(url,node,on_save){var decoded_uri=decodeURI(url);var url_var_list=['{!RECIPIENT_ONLINE_PAYMENT_URL!}','{!SENDER_WEBSITE!}','{{PERSON_ONLINE_PAYMENT_URL}}','{{STUDENT_ONLINE_PAYMENT_URL}}','{{PAYMENT_RECEIPT_URL}}','{{PERSON_PROFILE_URL}}','{{STUDENT_PROFILE_URL}}','{{PERSON_PROFILE_FINANCIAL_URL}}','{{STUDENT_PROFILE_FINANCIAL_URL}}','{{RESPONSE_URL}}','{{RESPONSE_INTERNAL_URL}}','{{APPLICATION_INTERNAL_URL}}','{{COURSE_URL}}'];if(in_array(decoded_uri,url_var_list)){return decoded_uri;}
else if(/^{FILE_URL:([0-9]+)}/i.test(decodeURIComponent(url))){return decodeURIComponent(url);}
if(!/^(https?:\/\/|mailto:|tel:)/i.test(url)){url='http://'+url.replace(/^\/+/g,'');}
return url;}
function isNumeric(sText){return $.isNumeric(sText);}
function is_numeric(value){return isNumeric(value);}
function in_array(pstrNeedle,paHaystack){var i;for(i=0;i<paHaystack.length;i++){if(pstrNeedle===paHaystack[i]){return true;}}
return false;}
function str_replace(f,r,s){var ra=r instanceof Array,sa=s instanceof Array,l=(f=[].concat(f)).length,r=[].concat(r),i=(s=[].concat(s)).length;while(j=0,i--)
while(s[i]=s[i].split(f[j]).join(ra?r[j]||"":r[0]),++j<l);return sa?s:s[0];}
function isValidPhone(pstrPhone){return $.trim(pstrPhone).match(/^\+?[0-9.\-\(\)extnsio ]{5,}$/);}
function isValidAddress(pmStreet,psCity,psState,pmZip,psCountry){var bStreet=(typeof pmStreet=='boolean')?pmStreet:$.trim(pmStreet).length;var bCity=$.trim(psCity).length;var bZip=(typeof pmZip=='boolean')?pmZip:$.trim(pmZip).length;var strCountry=$.trim(psCountry);var bState=$.trim(psState);if(strCountry=='USA'){strCountry='US';}
if(strCountry!='US'&&bStreet&&bCity){return true;}
else if(strCountry=='US'&&bStreet&&bCity&&bState&&bZip){return true;}
return false;}
var aStates=new Array();var aStateAbbrv=new Array();function isValidState(psState){if(!aStateAbbrv.length){for(var i=0;i<aStates.length;i++){aStateAbbrv.push(aStates[i].split(':')[0]);}}
return in_array(psState,aStateAbbrv);}
function attach_search_states(poInput,poCountry){var bAutoComplete=0;if(typeof poInput=='object'&&poInput.length){if(typeof poCountry=='object'&&poCountry.length){$(poCountry).change(function(){if($(this).val()!='USA'&&$(this).val()!='US'){$(poInput).autocomplete("destroy");}
else{attach_search_states(poInput,poCountry);}});bAutoComplete=($(poCountry).val()=='USA'||$(poCountry).val()=='US')?1:0;}
else{bAutoComplete=1;}
if(bAutoComplete){attach_search($(poInput),'GET_STATES',function(data){$(poInput).val(data.id)});}}}
function addCommas(nStr){nStr+='';x=nStr.split('.');x1=x[0];x2=x[1];x2=x2?'.'+x2:'';var rgx=/(\d+)(\d{3})/;while(rgx.test(x1)){x1=x1.replace(rgx,'$1'+','+'$2');}
return x1+x2;}
function htmlEncode(str){return String(str).replace(/&/g,'&amp;').replace(/"/g,'&quot;').replace(/'/g,'&#039;').replace(/</g,'&lt;').replace(/>/g,'&gt;');}
function htmlDecode(str){return String(str).replace(/&amp;/g,'&').replace(/&quot;/g,'"').replace(/&#039;/g,'\'').replace(/&lt;/g,'<').replace(/&gt;/g,'>');}
function moneyFormat(pStr){return addCommas(parseFloat(pStr).toFixed(2));}
function alphaNumericZip(pmVal){$(pmVal).alphanumeric({allow:"- ",paste:1});}
function calculate_characters_remaining(max_characters,$textarea,$characters_remaining_container){var entered_text=$.trim($textarea.val());var entered_text_length=(typeof Array.from!='undefined')?Array.from(entered_text).length:entered_text.length;var num_chars_remaining=max_characters-entered_text_length;var characters_wording=num_chars_remaining===1?"character":"characters";$characters_remaining_container.html(num_chars_remaining+" "+characters_wording+" remaining").css('color',num_chars_remaining<=0?'red':'#666');}
function ucfirst(psString,pbStrToLowerFirst){var sString=(pbStrToLowerFirst==true)?psString.toLowerCase():psString;var sFirstLetter=sString.substr(0,1);return sFirstLetter.toUpperCase()+sString.substr(1);}
function titleCase(str){var smallWords=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|vs?\.?|via)$/i;var big_words=/^(SMS|XLS|CSV|PDF|IP|ID)$/i;return str.replace(/\w\S*/g,function(txt,offset){if(offset!=0&&smallWords.test(txt.toLowerCase())){return txt.toLowerCase();}
if(big_words.test(txt.toUpperCase())){return txt.toUpperCase();}
return txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase();});}
function allCapsInitialism(str){var initialisms=/^(ach|cod|gpa|ssn)$/i;return str.replace(/\w\S*/g,function(txt,offset){if(initialisms.test(txt.toLowerCase())){return txt.toUpperCase();}
return txt;});}
function base64_encode(data){var b64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var o1,o2,o3,h1,h2,h3,h4,bits,i=0,ac=0,enc="",tmp_arr=[];if(!data){return data;}
do{o1=data.charCodeAt(i++);o2=data.charCodeAt(i++);o3=data.charCodeAt(i++);bits=o1<<16|o2<<8|o3;h1=bits>>18&0x3f;h2=bits>>12&0x3f;h3=bits>>6&0x3f;h4=bits&0x3f;tmp_arr[ac++]=b64.charAt(h1)+b64.charAt(h2)+b64.charAt(h3)+b64.charAt(h4);}while(i<data.length);enc=tmp_arr.join('');var r=data.length%3;return(r?enc.slice(0,r-3):enc)+'==='.slice(r||3);}
function reorder_table($this){var $table=$this.closest('table');var oTRs=$('tbody > tr:visible[data-order-id]',$table);var order_value=parseInt($this.val(),10);if(!isNaN(order_value)){var iOrderID=(order_value>oTRs.length)?oTRs.length:order_value;var oTR=$this.closest('tr');var iPositionID=oTR.data('order-id');if(iOrderID<iPositionID){$(oTRs[iOrderID-1]).before(oTR);}
else if(iOrderID>iPositionID){$(oTRs[iOrderID-1]).after(oTR);}
recalculate_table_order($table);$this.focus();$this.select();}
update_table_row_highlighting($table);}
function update_table_row_highlighting($table){$('tbody tr',$table).removeClass('altrow');$('tbody tr:visible:even',$table).addClass('altrow');}
function recalculate_table_order($table){var oNewTRs=$('tbody > tr:visible[data-order-id]',$table);for(var i=0;i<oNewTRs.length;i++){var iNewOrderID=i+1;$('input:text',$(oNewTRs[i]).children('td.order_col')).val(iNewOrderID);$(oNewTRs[i]).data('order-id',iNewOrderID);}
update_table_row_highlighting($table);}
function clone_element($original_element,randomize_numbers){if(typeof randomize_numbers=='undefined'){randomize_numbers=true;}
var $clone=$original_element.clone();if(randomize_numbers){var random_number=Math.round(Math.random()*100000);$('[name],[id],[for]',$clone).each(function(){$element=$(this);$.each(['name','id','for'],function(index,current_attr){attr=$element.attr(current_attr);if(typeof attr!=='undefined'&&attr!==false){var current_attr_value=$element.attr(current_attr);var matches=current_attr_value.match(/([0-9]+)/g);if(matches){var number=matches.reverse()[0];var new_attr_value=replace_last(number,random_number,current_attr_value);$element.attr(current_attr,new_attr_value);}}});});}
return $clone;}
var replace_last=function(needle,replacement,haystack){return haystack.reverse().replace(new RegExp(needle.toString().reverse()),replacement.toString().reverse()).reverse();}
function get_word_count(text){var wc=0;if(typeof text=='string'&&text.length){matches=$.trim(text.replace(/[\s\"\.\!\?;,\\\/:\&*]+/g,' ')).match(/\S+\s*\b/g);wc=matches!==null?matches.length:0;}
return wc;}
function get_character_count(text){var cc=0;if(typeof text=='string'&&text.length){cc=$.trim(text.replace(/[\s]+/g,'')).length;}
return cc;}
function callOnEnter(poElement,poFunction,pbUnbindSelf,ignore_enter_on_element_with_this_class){if(typeof pbUnbindSelf=='undefined'){pbUnbindSelf=true;}
poElement.bind('keydown',function(e){if(e.keyCode==13&&!$(e.target).siblings('ul.ui-autocomplete:visible').children('li.ui-state-focus:visible').length&&!$(e.target).is('textarea')&&!$(e.target).is('select')){if(typeof ignore_enter_on_element_with_this_class!='string'||!$(e.target).hasClass(ignore_enter_on_element_with_this_class)){poFunction($(this),e);if(pbUnbindSelf){$(this).unbind('keydown');}}}});}
function growl_error(psMessage){$.jGrowl(psMessage,{theme:'growlerror'});}
function growl(psMessage){$.jGrowl(psMessage);}
function mustache_template(html,vars){var converted_to_string=false;if(typeof html.html!='undefined'){html=html[0].outerHTML;converted_to_string=true;}
$.each(vars,function(field,value){if(value===null){value='';}
html=html.replace(new RegExp('{{'+field+'}}','g'),value);});if(converted_to_string){return $(html);}
else{return html;}}
function copy_to_clipboard(text){if(navigator.clipboard){navigator.clipboard.writeText(text).then(function(){},function(error){});return true;}
else{var temp_text_area=document.createElement("textarea");temp_text_area.style.cssText="position:fixed; top:0; left:0; width:2em; height:2em; padding:0; border:none; outline:none; box-shadow:none; background:transparent;";temp_text_area.value=text;document.body.appendChild(temp_text_area);temp_text_area.focus();temp_text_area.select();var success=false;try{success=document.execCommand('copy');}catch(error){}
document.body.removeChild(temp_text_area);return success;}}
function calculate_time_zone(){var rightNow=new Date();var jan1=new Date(rightNow.getFullYear(),0,1,0,0,0,0);var june1=new Date(rightNow.getFullYear(),6,1,0,0,0,0);var temp=jan1.toGMTString();var jan2=new Date(temp.substring(0,temp.lastIndexOf(" ")-1));temp=june1.toGMTString();var june2=new Date(temp.substring(0,temp.lastIndexOf(" ")-1));var std_time_offset=(jan1-jan2)/(1000*60*60);var daylight_time_offset=(june1-june2)/(1000*60*60);var dst;if(std_time_offset==daylight_time_offset){dst=0;}else{var hemisphere=std_time_offset-daylight_time_offset;if(hemisphere>=0)
std_time_offset=daylight_time_offset;dst=1;}
return{offset:convert(std_time_offset),dst:dst};}
function convert(value){var hours=parseInt(value);value-=parseInt(value);value*=60;var mins=parseInt(value);value-=parseInt(value);value*=60;var secs=parseInt(value);var display_hours=hours;if(hours==0){display_hours="00";}else if(hours>0){display_hours=(hours<10)?"+0"+hours:"+"+hours;}else{display_hours=(hours>-10)?"-0"+Math.abs(hours):hours;}
mins=(mins<10)?"0"+mins:mins;return display_hours+":"+mins;}
function get_sorted_keys(obj){var keys=[];$.each(obj,function(key,value){keys.push(key);});return keys.sort(function(a,b){return obj[a]-obj[b];});}
function pluralize(string,num){num=parseInt(num,10);if(num!==1){string+='s';}
return num+' '+string;}
function changeTabs(pstrURL){pstrURL=typeof(pstrURL)=='undefined'?'':pstrURL.toLowerCase();var strTab='';if(pstrURL.indexOf('home.php')!=-1||(pstrURL.indexOf('/todo')!=-1&&pstrURL.indexOf('/templates')==-1)||pstrURL.indexOf('router/groups')!=-1||pstrURL.indexOf('router/news')!=-1||pstrURL.indexOf('router/linklists')!=-1){strTab='tab_home';}
else if(pstrURL.indexOf('/contacts/people/'+$('#loggedInUser').val()+'/')!=-1||pstrURL.indexOf('/academics/registration/'+$('#loggedInUser').val()+'/')!=-1){strTab='tab_profile';}
else if(pstrURL.indexOf('/user/my_course_offerings')!=-1){strTab='tab_my_courses';}
else if((pstrURL.indexOf('/contacts/')!=-1&&!pstrURL.match(/people\/\d+\//)&&!pstrURL.match(/organizations\/\d+\//))||pstrURL.indexOf('/forms/')!=-1){strTab='tab_contacts';}
else if(pstrURL.indexOf('/academics/')!=-1||pstrURL.indexOf('/router/courseevaluations')!=-1||pstrURL.indexOf('/router/coursedeliverymethods')!=-1||pstrURL.indexOf('/router/academicsettings')!=-1||pstrURL.indexOf('/router/transcriptrequests')!=-1||pstrURL.indexOf('/router/transcriptrequestdeliverymethods')!=-1||pstrURL.indexOf('/router/transcriptrequestfeerules')!=-1){strTab='tab_academics';}
else if(pstrURL.indexOf('/communications/')!=-1){strTab='tab_communications';}
else if(pstrURL.indexOf('/router/financial/settings')!=-1||pstrURL.indexOf('/router/financial/paymentgateways')!=-1){strTab='tab_settings';}
else if(pstrURL.indexOf('/advisees/')!=-1){strTab='tab_advising';}
else if(pstrURL.indexOf('/admissions/')!=-1){strTab='tab_admissions';}
else if(pstrURL.indexOf('/campuslife')!=-1){strTab='tab_campuslife';}
else if(pstrURL.indexOf('/facilities/')!=-1){strTab='tab_campuslife';}
else if(pstrURL.indexOf('demoorgs')!=-1){strTab='tab_demo';}
else if(pstrURL.indexOf('/billing/')!=-1||pstrURL.indexOf('/router/financial/salesreceipts')!=-1||pstrURL.indexOf('/router/financial/checks')!=-1||pstrURL.indexOf('/financial/payment.php')!=-1){strTab='tab_financial_billing';}
else if(pstrURL.indexOf('/aid/')!=-1||pstrURL.indexOf('/router/financial/aid')!=-1||pstrURL.indexOf('/powerfaidsfinancialaidimports/')!=-1||pstrURL.indexOf('/regentfinancialaidimports/')!=-1){strTab='tab_financial_aid';}
else if(pstrURL.indexOf('/financial/donations')!=-1||pstrURL.indexOf('/financial/donors')!=-1||pstrURL.indexOf('/financial/funds')!=-1||pstrURL.indexOf('/financial/donatepages')!=-1||pstrURL.indexOf('/financial/campaigns')!=-1||pstrURL.indexOf('/financial/appealmedia')!=-1||pstrURL.indexOf('/financial/donationcustomfields')!=-1||pstrURL.indexOf('/financial/donorcustomfields')!=-1){strTab='tab_financial_donations';}
else if(pstrURL.indexOf('/financial/')!=-1){strTab='tab_financial';}
forceTab(strTab);return strTab;}
function forceTab(pstrTab){$('.js-header-tab.current').removeClass('current');if(pstrTab.length&&$('#'+pstrTab).length){$('#'+pstrTab).addClass('current');}}
jQuery.expr.filters.imatch=function(a,i,m){var imatchregex=new RegExp(m[3],"i");return imatchregex.test(a.textContent||a.innerText||jQuery(a).text()||'');};var milliseconds_per_day=1000*60*60*24;function date_diff_in_days(a,b){var a_utc=Date.UTC(a.getFullYear(),a.getMonth(),a.getDate());var b_utc=Date.UTC(b.getFullYear(),b.getMonth(),b.getDate());return Math.floor((b_utc-a_utc)/ milliseconds_per_day);}
function is_valid_email_address(email){var qtext='[^\\x0d\\x22\\x5c\\x80-\\xff]';var dtext='[^\\x0d\\x5b-\\x5d\\x80-\\xff]';var atom='[^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+';var quoted_pair='\\x5c[\\x00-\\x7f]';var domain_literal="\\x5b("+dtext+"|"+quoted_pair+")*\\x5d";var quoted_string="\\x22("+qtext+"|"+quoted_pair+")*\\x22";var domain_ref=atom;var sub_domain="("+domain_ref+"|"+domain_literal+")";var word="("+atom+"|"+quoted_string+")";var domain=sub_domain+"(\\x2e"+sub_domain+")*";var local_part=word+"(\\x2e"+word+")*";var addr_spec=local_part+"\\x40"+domain;var email_spec="^"+addr_spec+"$";var emailregex=new RegExp(email_spec);return emailregex.test(email);}
function is_valid_email_personal(personal){return personal.match(/^([a-zA-Z0-9\s\!\#\$\%\^\&\*\_\+\=\-\|\.\?]*|\"([^\"]*?)\")$/);}
function open_in_new_tab(url,auto_add_page_nav){if(typeof auto_add_page_nav=='undefined'||auto_add_page_nav){if(url.indexOf('pageNav=1')==-1){url=url+(url.indexOf('?')==-1?'?':'&')+'pageNav=1';}}
var new_win=window.open(url,'_blank');if(typeof new_win=='undefined'||new_win==null){alert('The window could not be opened. Please make sure Pop-Ups are not being blocked and try again.');}
else{new_win.focus();}}
var wysiwyg_editors=[];;(function(factory){if(typeof define==='function'&&define.amd){define(factory);}else if(typeof exports==='object'){module.exports=factory();}else{var OldCookies=window.Cookies;var api=window.Cookies=factory();api.noConflict=function(){window.Cookies=OldCookies;return api;};}}(function(){function extend(){var i=0;var result={};for(;i<arguments.length;i++){var attributes=arguments[i];for(var key in attributes){result[key]=attributes[key];}}
return result;}
function init(converter){function api(key,value,attributes){var result;if(typeof document==='undefined'){return;}
if(arguments.length>1){attributes=extend({path:'/'},api.defaults,attributes);if(typeof attributes.expires==='number'){var expires=new Date();expires.setMilliseconds(expires.getMilliseconds()+attributes.expires*864e+5);attributes.expires=expires;}
try{result=JSON.stringify(value);if(/^[\{\[]/.test(result)){value=result;}}catch(e){}
if(!converter.write){value=encodeURIComponent(String(value)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent);}else{value=converter.write(value,key);}
key=encodeURIComponent(String(key));key=key.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent);key=key.replace(/[\(\)]/g,escape);return(document.cookie=[key,'=',value,attributes.expires&&'; expires='+attributes.expires.toUTCString(),attributes.path&&'; path='+attributes.path,attributes.domain&&'; domain='+attributes.domain,attributes.secure?'; secure':''].join(''));}
if(!key){result={};}
var cookies=document.cookie?document.cookie.split('; '):[];var rdecode=/(%[0-9A-Z]{2})+/g;var i=0;for(;i<cookies.length;i++){var parts=cookies[i].split('=');var name=parts[0].replace(rdecode,decodeURIComponent);var cookie=parts.slice(1).join('=');if(cookie.charAt(0)==='"'){cookie=cookie.slice(1,-1);}
try{cookie=converter.read?converter.read(cookie,name):converter(cookie,name)||cookie.replace(rdecode,decodeURIComponent);if(this.json){try{cookie=JSON.parse(cookie);}catch(e){}}
if(key===name){result=cookie;break;}
if(!key){result[name]=cookie;}}catch(e){}}
return result;}
api.set=api;api.get=function(key){return api(key);};api.getJSON=function(){return api.apply({json:true},[].slice.call(arguments));};api.defaults={};api.remove=function(key,attributes){api(key,'',extend(attributes,{expires:-1}));};api.withConverter=init;return api;}
return init(function(){});}));(function(){var initializing=false;window.JQClass=function(){};JQClass.classes={};JQClass.extend=function extender(prop){var base=this.prototype;initializing=true;var prototype=new this();initializing=false;for(var name in prop){prototype[name]=typeof prop[name]=='function'&&typeof base[name]=='function'?(function(name,fn){return function(){var __super=this._super;this._super=function(args){return base[name].apply(this,args||[]);};var ret=fn.apply(this,arguments);this._super=__super;return ret;};})(name,prop[name]):prop[name];}
function JQClass(){if(!initializing&&this._init){this._init.apply(this,arguments);}}
JQClass.prototype=prototype;JQClass.prototype.constructor=JQClass;JQClass.extend=extender;return JQClass;};})();(function($){JQClass.classes.JQPlugin=JQClass.extend({name:'plugin',defaultOptions:{},regionalOptions:{},_getters:[],_getMarker:function(){return'is-'+this.name;},_init:function(){$.extend(this.defaultOptions,(this.regionalOptions&&this.regionalOptions[''])||{});var jqName=camelCase(this.name);$[jqName]=this;$.fn[jqName]=function(options){var otherArgs=Array.prototype.slice.call(arguments,1);if($[jqName]._isNotChained(options,otherArgs)){return $[jqName][options].apply($[jqName],[this[0]].concat(otherArgs));}
return this.each(function(){if(typeof options==='string'){if(options[0]==='_'||!$[jqName][options]){throw'Unknown method: '+options;}
$[jqName][options].apply($[jqName],[this].concat(otherArgs));}
else{$[jqName]._attach(this,options);}});};},setDefaults:function(options){$.extend(this.defaultOptions,options||{});},_isNotChained:function(name,otherArgs){if(name==='option'&&(otherArgs.length===0||(otherArgs.length===1&&typeof otherArgs[0]==='string'))){return true;}
return $.inArray(name,this._getters)>-1;},_attach:function(elem,options){elem=$(elem);if(elem.hasClass(this._getMarker())){return;}
elem.addClass(this._getMarker());options=$.extend({},this.defaultOptions,this._getMetadata(elem),options||{});var inst=$.extend({name:this.name,elem:elem,options:options},this._instSettings(elem,options));elem.data(this.name,inst);this._postAttach(elem,inst);this.option(elem,options);},_instSettings:function(elem,options){return{};},_postAttach:function(elem,inst){},_getMetadata:function(elem){try{var data=elem.data(this.name.toLowerCase())||'';data=data.replace(/'/g,'"');data=data.replace(/([a-zA-Z0-9]+):/g,function(match,group,i){var count=data.substring(0,i).match(/"/g);return(!count||count.length%2===0?'"'+group+'":':group+':');});data=$.parseJSON('{'+data+'}');for(var name in data){var value=data[name];if(typeof value==='string'&&value.match(/^new Date\((.*)\)$/)){data[name]=eval(value);}}
return data;}
catch(e){return{};}},_getInst:function(elem){return $(elem).data(this.name)||{};},option:function(elem,name,value){elem=$(elem);var inst=elem.data(this.name);if(!name||(typeof name==='string'&&value==null)){var options=(inst||{}).options;return(options&&name?options[name]:options);}
if(!elem.hasClass(this._getMarker())){return;}
var options=name||{};if(typeof name==='string'){options={};options[name]=value;}
this._optionsChanged(elem,inst,options);$.extend(inst.options,options);},_optionsChanged:function(elem,inst,options){},destroy:function(elem){elem=$(elem);if(!elem.hasClass(this._getMarker())){return;}
this._preDestroy(elem,this._getInst(elem));elem.removeData(this.name).removeClass(this._getMarker());},_preDestroy:function(elem,inst){}});function camelCase(name){return name.replace(/-([a-z])/g,function(match,group){return group.toUpperCase();});}
$.JQPlugin={createPlugin:function(superClass,overrides){if(typeof superClass==='object'){overrides=superClass;superClass='JQPlugin';}
superClass=camelCase(superClass);var className=camelCase(overrides.name);JQClass.classes[className]=JQClass.classes[superClass].extend(overrides);new JQClass.classes[className]();}};})(jQuery);(function($){var pluginName='timeEntry';$.JQPlugin.createPlugin({name:pluginName,defaultOptions:{appendText:'',showSeconds:false,unlimitedHours:false,timeSteps:[1,1,1],initialField:null,noSeparatorEntry:false,tabToExit:false,useMouseWheel:true,defaultTime:null,minTime:null,maxTime:null,spinnerImage:'spinnerDefault.png',spinnerSize:[20,20,8],spinnerBigImage:'',spinnerBigSize:[40,40,16],spinnerIncDecOnly:false,spinnerRepeat:[500,250],beforeShow:null,beforeSetTime:null},regionalOptions:{'':{show24Hours:false,separator:':',ampmPrefix:'',ampmNames:['AM','PM'],spinnerTexts:['Now','Previous field','Next field','Increment','Decrement']}},_getters:['getOffset','getTime','isDisabled'],_appendClass:pluginName+'-append',_controlClass:pluginName+'-control',_expandClass:pluginName+'-expand',_disabledInputs:[],_instSettings:function(elem,options){return{_field:0,_selectedHour:0,_selectedMinute:0,_selectedSecond:0};},_postAttach:function(elem,inst){elem.on('focus.'+inst.name,this._doFocus).on('blur.'+inst.name,this._doBlur).on('click.'+inst.name,this._doClick).on('keydown.'+inst.name,this._doKeyDown).on('keypress.'+inst.name,this._doKeyPress).on('paste.'+inst.name,function(event){setTimeout(function(){plugin._parseTime(inst);},1);});},_optionsChanged:function(elem,inst,options){var currentTime=this._extractTime(inst);$.extend(inst.options,options);inst.options.show24Hours=inst.options.show24Hours||inst.options.unlimitedHours;inst._field=0;if(currentTime){this._setTime(inst,new Date(0,0,0,currentTime[0],currentTime[1],currentTime[2]));}
elem.next('span.'+this._appendClass).remove();elem.parent().find('span.'+this._controlClass).remove();if($.fn.mousewheel){elem.unmousewheel();}
var spinner=(!inst.options.spinnerImage?null:$('<span class="'+this._controlClass+'" style="display: inline-block; '+'background: url(\''+inst.options.spinnerImage+'\') 0 0 no-repeat; width: '+
inst.options.spinnerSize[0]+'px; height: '+inst.options.spinnerSize[1]+'px;"></span>'));elem.after(inst.options.appendText?'<span class="'+this._appendClass+'">'+
inst.options.appendText+'</span>':'').after(spinner||'');if(inst.options.useMouseWheel&&$.fn.mousewheel){elem.mousewheel(this._doMouseWheel);}
if(spinner){spinner.mousedown(this._handleSpinner).mouseup(this._endSpinner).mouseover(this._expandSpinner).mouseout(this._endSpinner).mousemove(this._describeSpinner);}},enable:function(elem){this._enableDisable(elem,false);},disable:function(elem){this._enableDisable(elem,true);},_enableDisable:function(elem,disable){var inst=this._getInst(elem);if(!inst){return;}
elem.disabled=disable;if(elem.nextSibling&&elem.nextSibling.nodeName.toLowerCase()==='span'){this._changeSpinner(inst,elem.nextSibling,(disable?5:-1));}
this._disabledInputs=$.map(this._disabledInputs,function(value){return(value===elem?null:value);});if(disable){this._disabledInputs.push(elem);}},isDisabled:function(elem){return $.inArray(elem,this._disabledInputs)>-1;},_preDestroy:function(elem,inst){elem=$(elem).off('.'+pluginName);if($.fn.mousewheel){elem.unmousewheel();}
this._disabledInputs=$.map(this._disabledInputs,function(value){return(value===elem[0]?null:value);});elem.siblings('.'+this._appendClass+',.'+this._controlClass).remove();},setTime:function(elem,time){var inst=this._getInst(elem);if(inst){if(time===null||time===''){$(elem).val('');}
else{this._setTime(inst,time?($.isArray(time)?time:(typeof time==='object'?new Date(time.getTime()):time)):null);}}},getTime:function(elem){var inst=this._getInst(elem);var currentTime=(inst?this._extractTime(inst):null);return(!currentTime?null:new Date(0,0,0,currentTime[0],currentTime[1],currentTime[2]));},getOffset:function(elem){var inst=this._getInst(elem);var currentTime=(inst?this._extractTime(inst):null);return(!currentTime?0:(currentTime[0]*3600+currentTime[1]*60+currentTime[2])*1000);},_doFocus:function(elem){var input=(elem.nodeName&&elem.nodeName.toLowerCase()==='input'?elem:this);if(plugin._lastInput===input||plugin.isDisabled(input)){plugin._focussed=false;return;}
var inst=plugin._getInst(input);plugin._focussed=true;plugin._lastInput=input;plugin._blurredInput=null;$.extend(inst.options,($.isFunction(inst.options.beforeShow)?inst.options.beforeShow.apply(input,[input]):{}));plugin._parseTime(inst,elem.nodeName?null:elem);setTimeout(function(){plugin._showField(inst);},10);},_doBlur:function(event){plugin._blurredInput=plugin._lastInput;plugin._lastInput=null;},_doClick:function(event){var input=event.target;var inst=plugin._getInst(input);var prevField=inst._field;if(!plugin._focussed){inst._field=plugin._getSelection(inst,input,event);}
if(prevField!==inst._field){inst._lastChr='';}
plugin._showField(inst);plugin._focussed=false;},_getSelection:function(inst,input,event){var select=0;var fieldSizes=[inst.elem.val().split(inst.options.separator)[0].length,2,2];if(input.selectionStart!==null){var end=0;for(var field=0;field<=Math.max(1,inst._secondField,inst._ampmField);field++){end+=(field!==inst._ampmField?fieldSizes[field]+inst.options.separator.length:inst.options.ampmPrefix.length+inst.options.ampmNames[0].length);select=field;if(input.selectionStart<end){break;}}}
else if(input.createTextRange&&event!=null){var src=$(event.srcElement);var range=input.createTextRange();var convert=function(value){return{thin:2,medium:4,thick:6}[value]||value;};var offsetX=event.clientX+document.documentElement.scrollLeft-
(src.offset().left+parseInt(convert(src.css('border-left-width')),10))-
range.offsetLeft;for(var field=0;field<=Math.max(1,inst._secondField,inst._ampmField);field++){var end=(field!==inst._ampmField?(field*fieldSize)+2:(inst._ampmField*fieldSize)+inst.options.ampmPrefix.length+
inst.options.ampmNames[0].length);range.collapse();range.moveEnd('character',end);select=field;if(offsetX<range.boundingWidth){break;}}}
return select;},_doKeyDown:function(event){if(event.keyCode>=48){return true;}
var inst=plugin._getInst(event.target);switch(event.keyCode){case 9:return(inst.options.tabToExit?true:(event.shiftKey?plugin._changeField(inst,-1,true):plugin._changeField(inst,+1,true)));case 35:if(event.ctrlKey){plugin._setValue(inst,'');}
else{inst._field=Math.max(1,inst._secondField,inst._ampmField);plugin._adjustField(inst,0);}
break;case 36:if(event.ctrlKey){plugin._setTime(inst);}
else{inst._field=0;plugin._adjustField(inst,0);}
break;case 37:plugin._changeField(inst,-1,false);break;case 38:plugin._adjustField(inst,+1);break;case 39:plugin._changeField(inst,+1,false);break;case 40:plugin._adjustField(inst,-1);break;case 46:plugin._setValue(inst,'');break;case 8:inst._lastChr='';default:return true;}
return false;},_doKeyPress:function(event){var chr=String.fromCharCode(event.charCode===undefined?event.keyCode:event.charCode);if(chr<' '){return true;}
var inst=plugin._getInst(event.target);plugin._handleKeyPress(inst,chr);return false;},_handleKeyPress:function(inst,chr){if(chr===inst.options.separator){this._changeField(inst,+1,false);}
else if(chr>='0'&&chr<='9'){var key=parseInt(chr,10);var value=parseInt(inst._lastChr+chr,10);var hour=(inst._field!==0?inst._selectedHour:(inst.options.unlimitedHours?value:(inst.options.show24Hours?(value<24?value:key):(value>=1&&value<=12?value:(key>0?key:inst._selectedHour))%12+
(inst._selectedHour>=12?12:0))));var minute=(inst._field!==1?inst._selectedMinute:(value<60?value:key));var second=(inst._field!==inst._secondField?inst._selectedSecond:(value<60?value:key));var fields=this._constrainTime(inst,[hour,minute,second]);this._setTime(inst,(inst.options.unlimitedHours?fields:new Date(0,0,0,fields[0],fields[1],fields[2])));if(inst.options.noSeparatorEntry&&inst._lastChr){this._changeField(inst,+1,false);}
else{inst._lastChr=(inst.options.unlimitedHours&&inst._field===0?inst._lastChr+chr:chr);}}
else if(!inst.options.show24Hours){chr=chr.toLowerCase();if((chr===inst.options.ampmNames[0].substring(0,1).toLowerCase()&&inst._selectedHour>=12)||(chr===inst.options.ampmNames[1].substring(0,1).toLowerCase()&&inst._selectedHour<12)){var saveField=inst._field;inst._field=inst._ampmField;this._adjustField(inst,+1);inst._field=saveField;this._showField(inst);}}},_doMouseWheel:function(event,delta){if(plugin.isDisabled(event.target)){return;}
var inst=plugin._getInst(event.target);inst.elem.focus();if(!inst.elem.val()){plugin._parseTime(inst);}
plugin._adjustField(inst,delta);event.preventDefault();},_expandSpinner:function(event){var spinner=plugin._getSpinnerTarget(event);var inst=plugin._getInst(plugin._getInput(spinner));if(plugin.isDisabled(inst.elem[0])){return;}
if(inst.options.spinnerBigImage){inst._expanded=true;var offset=$(spinner).offset();var relative=null;$(spinner).parents().each(function(){var parent=$(this);if(parent.css('position')==='relative'||parent.css('position')==='absolute'){relative=parent.offset();}
return!relative;});$('<div class="'+plugin._expandClass+'" style="position: absolute; left: '+
(offset.left-(inst.options.spinnerBigSize[0]-inst.options.spinnerSize[0])/ 2-
(relative?relative.left:0))+'px; top: '+
(offset.top-(inst.options.spinnerBigSize[1]-inst.options.spinnerSize[1])/ 2-
(relative?relative.top:0))+'px; width: '+
inst.options.spinnerBigSize[0]+'px; height: '+
inst.options.spinnerBigSize[1]+'px; background: transparent url('+
inst.options.spinnerBigImage+') no-repeat 0px 0px; z-index: 10;"></div>').mousedown(plugin._handleSpinner).mouseup(plugin._endSpinner).mouseout(plugin._endExpand).mousemove(plugin._describeSpinner).insertAfter(spinner);}},_getInput:function(spinner){return $(spinner).siblings('.'+this._getMarker())[0];},_describeSpinner:function(event){var spinner=plugin._getSpinnerTarget(event);var inst=plugin._getInst(plugin._getInput(spinner));spinner.title=inst.options.spinnerTexts[plugin._getSpinnerRegion(inst,event)];},_handleSpinner:function(event){var spinner=plugin._getSpinnerTarget(event);var input=plugin._getInput(spinner);if(plugin.isDisabled(input)){return;}
if(input===plugin._blurredInput){plugin._lastInput=input;plugin._blurredInput=null;}
var inst=plugin._getInst(input);plugin._doFocus(input);var region=plugin._getSpinnerRegion(inst,event);plugin._changeSpinner(inst,spinner,region);plugin._actionSpinner(inst,region);plugin._timer=null;plugin._handlingSpinner=true;if(region>=3&&inst.options.spinnerRepeat[0]){plugin._timer=setTimeout(function(){plugin._repeatSpinner(inst,region);},inst.options.spinnerRepeat[0]);$(spinner).one('mouseout',plugin._releaseSpinner).one('mouseup',plugin._releaseSpinner);}},_actionSpinner:function(inst,region){if(!inst.elem.val()){plugin._parseTime(inst);}
switch(region){case 0:this._setTime(inst);break;case 1:this._changeField(inst,-1,false);break;case 2:this._changeField(inst,+1,false);break;case 3:this._adjustField(inst,+1);break;case 4:this._adjustField(inst,-1);break;}},_repeatSpinner:function(inst,region){if(!plugin._timer){return;}
plugin._lastInput=plugin._blurredInput;this._actionSpinner(inst,region);this._timer=setTimeout(function(){plugin._repeatSpinner(inst,region);},inst.options.spinnerRepeat[1]);},_releaseSpinner:function(event){clearTimeout(plugin._timer);plugin._timer=null;},_endExpand:function(event){plugin._timer=null;var spinner=plugin._getSpinnerTarget(event);var input=plugin._getInput(spinner);var inst=plugin._getInst(input);$(spinner).remove();inst._expanded=false;},_endSpinner:function(event){plugin._timer=null;var spinner=plugin._getSpinnerTarget(event);var input=plugin._getInput(spinner);var inst=plugin._getInst(input);if(!plugin.isDisabled(input)){plugin._changeSpinner(inst,spinner,-1);}
if(plugin._handlingSpinner){plugin._lastInput=plugin._blurredInput;}
if(plugin._lastInput&&plugin._handlingSpinner){plugin._showField(inst);}
plugin._handlingSpinner=false;},_getSpinnerTarget:function(event){return event.target||event.srcElement;},_getSpinnerRegion:function(inst,event){var spinner=this._getSpinnerTarget(event);var pos=$(spinner).offset();var scrolled=[document.documentElement.scrollLeft||document.body.scrollLeft,document.documentElement.scrollTop||document.body.scrollTop];var left=(inst.options.spinnerIncDecOnly?99:event.clientX+scrolled[0]-pos.left);var top=event.clientY+scrolled[1]-pos.top;var spinnerSize=inst.options[inst._expanded?'spinnerBigSize':'spinnerSize'];var right=(inst.options.spinnerIncDecOnly?99:spinnerSize[0]-1-left);var bottom=spinnerSize[1]-1-top;if(spinnerSize[2]>0&&Math.abs(left-right)<=spinnerSize[2]&&Math.abs(top-bottom)<=spinnerSize[2]){return 0;}
var min=Math.min(left,top,right,bottom);return(min===left?1:(min===right?2:(min===top?3:4)));},_changeSpinner:function(inst,spinner,region){$(spinner).css('background-position','-'+((region+1)*inst.options[inst._expanded?'spinnerBigSize':'spinnerSize'][0])+'px 0px');},_parseTime:function(inst,event){var currentTime=this._extractTime(inst);if(currentTime){inst._selectedHour=currentTime[0];inst._selectedMinute=currentTime[1];inst._selectedSecond=currentTime[2];}
else{var now=this._constrainTime(inst);inst._selectedHour=now[0];inst._selectedMinute=now[1];inst._selectedSecond=(inst.options.showSeconds?now[2]:0);}
inst._secondField=(inst.options.showSeconds?2:-1);inst._ampmField=(inst.options.show24Hours?-1:(inst.options.showSeconds?3:2));inst._lastChr='';var postProcess=function(){if(inst.elem.val()!==''){plugin._showTime(inst);}};if(typeof inst.options.initialField==='number'){inst._field=Math.max(0,Math.min(Math.max(1,inst._secondField,inst._ampmField),inst.options.initialField));postProcess();}
else{setTimeout(function(){inst._field=plugin._getSelection(inst,inst.elem[0],event);postProcess();},0);}},_extractTime:function(inst,value){value=value||inst.elem.val();var currentTime=value.split(inst.options.separator);if(inst.options.separator===''&&value!==''){currentTime[0]=value.substring(0,2);currentTime[1]=value.substring(2,4);currentTime[2]=value.substring(4,6);}
if(currentTime.length>=2){var isAM=!inst.options.show24Hours&&(value.indexOf(inst.options.ampmNames[0])>-1);var isPM=!inst.options.show24Hours&&(value.indexOf(inst.options.ampmNames[1])>-1);var hour=parseInt(currentTime[0],10);hour=(isNaN(hour)?0:hour);hour=((isAM||isPM)&&hour===12?0:hour)+(isPM?12:0);var minute=parseInt(currentTime[1],10);minute=(isNaN(minute)?0:minute);var second=(currentTime.length>=3?parseInt(currentTime[2],10):0);second=(isNaN(second)||!inst.options.showSeconds?0:second);return this._constrainTime(inst,[hour,minute,second]);}
return null;},_constrainTime:function(inst,fields){var specified=(fields!==null&&fields!==undefined);if(!specified){var now=this._determineTime(inst.options.defaultTime,inst)||new Date();fields=[now.getHours(),now.getMinutes(),now.getSeconds()];}
var reset=false;for(var i=0;i<inst.options.timeSteps.length;i++){if(reset){fields[i]=0;}
else if(inst.options.timeSteps[i]>1){fields[i]=Math.round(fields[i]/ inst.options.timeSteps[i])*inst.options.timeSteps[i];reset=true;}}
return fields;},_showTime:function(inst){var currentTime=(inst.options.unlimitedHours?inst._selectedHour:this._formatNumber(inst.options.show24Hours?inst._selectedHour:((inst._selectedHour+11)%12)+1))+inst.options.separator+
this._formatNumber(inst._selectedMinute)+
(inst.options.showSeconds?inst.options.separator+
this._formatNumber(inst._selectedSecond):'')+
(inst.options.show24Hours?'':inst.options.ampmPrefix+
inst.options.ampmNames[(inst._selectedHour<12?0:1)]);this._setValue(inst,currentTime);this._showField(inst);},_showField:function(inst){var input=inst.elem[0];if(inst.elem.is(':hidden')||plugin._lastInput!==input){return;}
var fieldSizes=[inst.elem.val().split(inst.options.separator)[0].length,2,2];var start=0;var field=0;while(field<inst._field){start+=fieldSizes[field]+
(field===Math.max(1,inst._secondField)?0:inst.options.separator.length);field++;}
var end=start+(inst._field!==inst._ampmField?fieldSizes[field]:inst.options.ampmPrefix.length+inst.options.ampmNames[0].length);if(input.setSelectionRange){input.setSelectionRange(start,end);}
else if(input.createTextRange){var range=input.createTextRange();range.moveStart('character',start);range.moveEnd('character',end-inst.elem.val().length);range.select();}
if(!input.disabled){input.focus();}},_formatNumber:function(value){return(value<10?'0':'')+value;},_setValue:function(inst,value){if(value!==inst.elem.val()){inst.elem.val(value).trigger('change');}},_changeField:function(inst,offset,moveOut){var atFirstLast=(inst.elem.val()===''||inst._field===(offset===-1?0:Math.max(1,inst._secondField,inst._ampmField)));if(!atFirstLast){inst._field+=offset;}
this._showField(inst);inst._lastChr='';return(atFirstLast&&moveOut);},_adjustField:function(inst,offset){if(inst.elem.val()===''){offset=0;}
if(inst.options.unlimitedHours){this._setTime(inst,[inst._selectedHour+(inst._field===0?offset*inst.options.timeSteps[0]:0),inst._selectedMinute+(inst._field===1?offset*inst.options.timeSteps[1]:0),inst._selectedSecond+(inst._field===inst._secondField?offset*inst.options.timeSteps[2]:0)]);}
else{this._setTime(inst,new Date(0,0,0,inst._selectedHour+(inst._field===0?offset*inst.options.timeSteps[0]:0)+
(inst._field===inst._ampmField?offset*12:0),inst._selectedMinute+(inst._field===1?offset*inst.options.timeSteps[1]:0),inst._selectedSecond+(inst._field===inst._secondField?offset*inst.options.timeSteps[2]:0)));}},_setTime:function(inst,time){if(inst.options.unlimitedHours&&$.isArray(time)){var fields=time;}
else{time=this._determineTime(time,inst);var fields=(time?[time.getHours(),time.getMinutes(),time.getSeconds()]:null);}
fields=this._constrainTime(inst,fields);time=new Date(0,0,0,fields[0],fields[1],fields[2]);var time=this._normaliseTime(time);var minTime=this._normaliseTime(this._determineTime(inst.options.minTime,inst));var maxTime=this._normaliseTime(this._determineTime(inst.options.maxTime,inst));if(inst.options.unlimitedHours){while(fields[2]<0){fields[2]+=60;fields[1]--;}
while(fields[2]>59){fields[2]-=60;fields[1]++;}
while(fields[1]<0){fields[1]+=60;fields[0]--;}
while(fields[1]>59){fields[1]-=60;fields[0]++;}
minTime=(inst.options.minTime!=null&&$.isArray(inst.options.minTime))?inst.options.minTime:[0,0,0];if(fields[0]<minTime[0]){fields=minTime.slice(0,3);}
else if(fields[0]===minTime[0]){if(fields[1]<minTime[1]){fields[1]=minTime[1];fields[2]=minTime[2];}
else if(fields[1]===minTime[1]){if(fields[2]<minTime[2]){fields[2]=minTime[2];}}}
if(inst.options.maxTime!=null&&$.isArray(inst.options.maxTime)){if(fields[0]>inst.options.maxTime[0]){fields=inst.options.maxTime.slice(0,3);}
else if(fields[0]===inst.options.maxTime[0]){if(fields[1]>inst.options.maxTime[1]){fields[1]=inst.options.maxTime[1];fields[2]=inst.options.maxTime[2];}
else if(fields[1]===inst.options.maxTime[1]){if(fields[2]>inst.options.maxTime[2]){fields[2]=inst.options.maxTime[2];}}}}}
else{if(minTime&&maxTime&&minTime>maxTime){if(time<minTime&&time>maxTime){time=(Math.abs(time-minTime)<Math.abs(time-maxTime)?minTime:maxTime);}}
else{time=(minTime&&time<minTime?minTime:(maxTime&&time>maxTime?maxTime:time));}
fields[0]=time.getHours();fields[1]=time.getMinutes();fields[2]=time.getSeconds();}
if($.isFunction(inst.options.beforeSetTime)){time=inst.options.beforeSetTime.apply(inst.elem[0],[this.getTime(inst.elem[0]),time,minTime,maxTime]);fields[0]=time.getHours();fields[1]=time.getMinutes();fields[2]=time.getSeconds();}
inst._selectedHour=fields[0];inst._selectedMinute=fields[1];inst._selectedSecond=fields[2];this._showTime(inst);},_determineTime:function(setting,inst){var offsetNumeric=function(offset){var time=new Date();time.setTime(time.getTime()+offset*1000);return time;};var offsetString=function(offset){var fields=plugin._extractTime(inst,offset);var time=new Date();var hour=(fields?fields[0]:time.getHours());var minute=(fields?fields[1]:time.getMinutes());var second=(fields?fields[2]:time.getSeconds());if(!fields){var pattern=/([+-]?[0-9]+)\s*(s|S|m|M|h|H)?/g;var matches=pattern.exec(offset);while(matches){switch(matches[2]||'s'){case's':case'S':second+=parseInt(matches[1],10);break;case'm':case'M':minute+=parseInt(matches[1],10);break;case'h':case'H':hour+=parseInt(matches[1],10);break;}
matches=pattern.exec(offset);}}
time=new Date(0,0,10,hour,minute,second,0);if(/^!/.test(offset)){if(time.getDate()>10){time=new Date(0,0,10,23,59,59);}
else if(time.getDate()<10){time=new Date(0,0,10,0,0,0);}}
return time;};var offsetArray=function(setting){return new Date(0,0,0,setting[0],setting[1]||0,setting[2]||0,0);};return(setting?(typeof setting==='string'?offsetString(setting):(typeof setting==='number'?offsetNumeric(setting):($.isArray(setting)?offsetArray(setting):setting))):null);},_normaliseTime:function(time){if(!time){return null;}
time.setFullYear(1900);time.setMonth(0);time.setDate(0);return time;}});var plugin=$.timeEntry;})(jQuery);(function(global,factory){if(typeof define==='function'&&define.amd){define(['exports','module'],factory);}else if(typeof exports!=='undefined'&&typeof module!=='undefined'){factory(exports,module);}else{var mod={exports:{}};factory(mod.exports,mod);global.autosize=mod.exports;}})(this,function(exports,module){'use strict';var map=typeof Map==="function"?new Map():(function(){var keys=[];var values=[];return{has:function has(key){return keys.indexOf(key)>-1;},get:function get(key){return values[keys.indexOf(key)];},set:function set(key,value){if(keys.indexOf(key)===-1){keys.push(key);values.push(value);}},'delete':function _delete(key){var index=keys.indexOf(key);if(index>-1){keys.splice(index,1);values.splice(index,1);}}};})();var createEvent=function createEvent(name){return new Event(name,{bubbles:true});};try{new Event('test');}catch(e){createEvent=function(name){var evt=document.createEvent('Event');evt.initEvent(name,true,false);return evt;};}
function assign(ta){if(!ta||!ta.nodeName||ta.nodeName!=='TEXTAREA'||map.has(ta))return;var heightOffset=null;var clientWidth=ta.clientWidth;var cachedHeight=null;function init(){var style=window.getComputedStyle(ta,null);if(style.resize==='vertical'){ta.style.resize='none';}else if(style.resize==='both'){ta.style.resize='horizontal';}
if(style.boxSizing==='content-box'){heightOffset=-(parseFloat(style.paddingTop)+parseFloat(style.paddingBottom));}else{heightOffset=parseFloat(style.borderTopWidth)+parseFloat(style.borderBottomWidth);}
if(isNaN(heightOffset)){heightOffset=0;}
update();}
function changeOverflow(value){{var width=ta.style.width;ta.style.width='0px';ta.offsetWidth;ta.style.width=width;}
ta.style.overflowY=value;}
function getParentOverflows(el){var arr=[];while(el&&el.parentNode&&el.parentNode instanceof Element){if(el.parentNode.scrollTop){arr.push({node:el.parentNode,scrollTop:el.parentNode.scrollTop});}
el=el.parentNode;}
return arr;}
function resize(){var originalHeight=ta.style.height;var overflows=getParentOverflows(ta);var docTop=document.documentElement&&document.documentElement.scrollTop;ta.style.height='';var endHeight=ta.scrollHeight+heightOffset;if(ta.scrollHeight===0){ta.style.height=originalHeight;return;}
ta.style.height=endHeight+'px';clientWidth=ta.clientWidth;overflows.forEach(function(el){el.node.scrollTop=el.scrollTop;});if(docTop){document.documentElement.scrollTop=docTop;}}
function update(){resize();var styleHeight=Math.round(parseFloat(ta.style.height));var computed=window.getComputedStyle(ta,null);var actualHeight=computed.boxSizing==='content-box'?Math.round(parseFloat(computed.height)):ta.offsetHeight;if(actualHeight!==styleHeight){if(computed.overflowY==='hidden'){changeOverflow('scroll');resize();actualHeight=computed.boxSizing==='content-box'?Math.round(parseFloat(window.getComputedStyle(ta,null).height)):ta.offsetHeight;}}else{if(computed.overflowY!=='hidden'){changeOverflow('hidden');resize();actualHeight=computed.boxSizing==='content-box'?Math.round(parseFloat(window.getComputedStyle(ta,null).height)):ta.offsetHeight;}}
if(cachedHeight!==actualHeight){cachedHeight=actualHeight;var evt=createEvent('autosize:resized');try{ta.dispatchEvent(evt);}catch(err){}}}
var pageResize=function pageResize(){if(ta.clientWidth!==clientWidth){update();}};var destroy=(function(style){window.removeEventListener('resize',pageResize,false);ta.removeEventListener('input',update,false);ta.removeEventListener('keyup',update,false);ta.removeEventListener('autosize:destroy',destroy,false);ta.removeEventListener('autosize:update',update,false);Object.keys(style).forEach(function(key){ta.style[key]=style[key];});map['delete'](ta);}).bind(ta,{height:ta.style.height,resize:ta.style.resize,overflowY:ta.style.overflowY,overflowX:ta.style.overflowX,wordWrap:ta.style.wordWrap});ta.addEventListener('autosize:destroy',destroy,false);if('onpropertychange'in ta&&'oninput'in ta){ta.addEventListener('keyup',update,false);}
window.addEventListener('resize',pageResize,false);ta.addEventListener('input',update,false);ta.addEventListener('autosize:update',update,false);ta.style.overflowX='hidden';ta.style.wordWrap='break-word';map.set(ta,{destroy:destroy,update:update});init();}
function destroy(ta){var methods=map.get(ta);if(methods){methods.destroy();}}
function update(ta){var methods=map.get(ta);if(methods){methods.update();}}
var autosize=null;if(typeof window==='undefined'||typeof window.getComputedStyle!=='function'){autosize=function(el){return el;};autosize.destroy=function(el){return el;};autosize.update=function(el){return el;};}else{autosize=function(el,options){if(el){Array.prototype.forEach.call(el.length?el:[el],function(x){return assign(x,options);});}
return el;};autosize.destroy=function(el){if(el){Array.prototype.forEach.call(el.length?el:[el],destroy);}
return el;};autosize.update=function(el){if(el){Array.prototype.forEach.call(el.length?el:[el],update);}
return el;};}
module.exports=autosize;});(function($){$.fn.autoResize=function(){this.each(function(){return autosize($(this));});};$.fn.refresh_auto_resize=function(){this.each(function(){var evt=document.createEvent('Event');evt.initEvent('autosize:update',true,false);$(this).get(0).dispatchEvent(evt);});};}(jQuery));!function(root,factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else if(typeof exports==='object'){factory(require('jquery'));}else{factory(root.jQuery);}}(this,function($){'use strict';$.fn.typeWatch=function(o){var _supportedInputTypes=['TEXT','TEXTAREA','PASSWORD','TEL','SEARCH','URL','EMAIL','DATETIME','DATE','MONTH','WEEK','TIME','DATETIME-LOCAL','NUMBER','RANGE','DIV'];var options=$.extend({wait:750,callback:function(){},highlight:true,captureLength:2,allowSubmit:false,inputTypes:_supportedInputTypes,enterKey:false},o);function checkElement(timer,override){var value=timer.type==='DIV'?jQuery(timer.el).html():jQuery(timer.el).val();if((value.length>=options.captureLength&&value!=timer.text)||(override&&(value.length>=options.captureLength||options.allowSubmit))||(value.length==0&&timer.text))
{timer.text=value;timer.cb.call(timer.el,value);}};function watchElement(elem){var elementType=(elem.type||elem.nodeName).toUpperCase();if(jQuery.inArray(elementType,options.inputTypes)>=0){var timer={timer:null,text:(elementType==='DIV')?jQuery(elem).html():jQuery(elem).val(),cb:options.callback,el:elem,type:elementType,wait:options.wait};if(options.highlight&&elementType!=='DIV')
jQuery(elem).focus(function(){this.select();});var startWatch=function(evt){var timerWait=timer.wait;var overrideBool=false;var evtElementType=elementType;if(options.enterKey&&typeof evt.keyCode!='undefined'&&evt.keyCode==13&&evtElementType!=='TEXTAREA'&&elementType!=='DIV')
{console.log('OVERRIDE');timerWait=1;overrideBool=true;}
var timerCallbackFx=function(){checkElement(timer,overrideBool)}
clearTimeout(timer.timer);timer.timer=setTimeout(timerCallbackFx,timerWait);};jQuery(elem).on('keydown paste cut input',startWatch);}};return this.each(function(){watchElement(this);});};});(function(factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else if(typeof exports==='object'){module.exports=factory;}else{factory(jQuery);}}(function($){var toFix=['wheel','mousewheel','DOMMouseScroll','MozMousePixelScroll'],toBind=('onwheel'in document||document.documentMode>=9)?['wheel']:['mousewheel','DomMouseScroll','MozMousePixelScroll'],slice=Array.prototype.slice,nullLowestDeltaTimeout,lowestDelta;if($.event.fixHooks){for(var i=toFix.length;i;){$.event.fixHooks[toFix[--i]]=$.event.mouseHooks;}}
var special=$.event.special.mousewheel={version:'3.1.12',setup:function(){if(this.addEventListener){for(var i=toBind.length;i;){this.addEventListener(toBind[--i],handler,false);}}else{this.onmousewheel=handler;}
$.data(this,'mousewheel-line-height',special.getLineHeight(this));$.data(this,'mousewheel-page-height',special.getPageHeight(this));},teardown:function(){if(this.removeEventListener){for(var i=toBind.length;i;){this.removeEventListener(toBind[--i],handler,false);}}else{this.onmousewheel=null;}
$.removeData(this,'mousewheel-line-height');$.removeData(this,'mousewheel-page-height');},getLineHeight:function(elem){var $elem=$(elem),$parent=$elem['offsetParent'in $.fn?'offsetParent':'parent']();if(!$parent.length){$parent=$('body');}
return parseInt($parent.css('fontSize'),10)||parseInt($elem.css('fontSize'),10)||16;},getPageHeight:function(elem){return $(elem).height();},settings:{adjustOldDeltas:true,normalizeOffset:true}};$.fn.extend({mousewheel:function(fn){return fn?this.bind('mousewheel',fn):this.trigger('mousewheel');},unmousewheel:function(fn){return this.unbind('mousewheel',fn);}});function handler(event){var orgEvent=event||window.event,args=slice.call(arguments,1),delta=0,deltaX=0,deltaY=0,absDelta=0,offsetX=0,offsetY=0;event=$.event.fix(orgEvent);event.type='mousewheel';if('detail'in orgEvent){deltaY=orgEvent.detail*-1;}
if('wheelDelta'in orgEvent){deltaY=orgEvent.wheelDelta;}
if('wheelDeltaY'in orgEvent){deltaY=orgEvent.wheelDeltaY;}
if('wheelDeltaX'in orgEvent){deltaX=orgEvent.wheelDeltaX*-1;}
if('axis'in orgEvent&&orgEvent.axis===orgEvent.HORIZONTAL_AXIS){deltaX=deltaY*-1;deltaY=0;}
delta=deltaY===0?deltaX:deltaY;if('deltaY'in orgEvent){deltaY=orgEvent.deltaY*-1;delta=deltaY;}
if('deltaX'in orgEvent){deltaX=orgEvent.deltaX;if(deltaY===0){delta=deltaX*-1;}}
if(deltaY===0&&deltaX===0){return;}
if(orgEvent.deltaMode===1){var lineHeight=$.data(this,'mousewheel-line-height');delta*=lineHeight;deltaY*=lineHeight;deltaX*=lineHeight;}else if(orgEvent.deltaMode===2){var pageHeight=$.data(this,'mousewheel-page-height');delta*=pageHeight;deltaY*=pageHeight;deltaX*=pageHeight;}
absDelta=Math.max(Math.abs(deltaY),Math.abs(deltaX));if(!lowestDelta||absDelta<lowestDelta){lowestDelta=absDelta;if(shouldAdjustOldDeltas(orgEvent,absDelta)){lowestDelta /=40;}}
if(shouldAdjustOldDeltas(orgEvent,absDelta)){delta /=40;deltaX /=40;deltaY /=40;}
delta=Math[delta>=1?'floor':'ceil'](delta / lowestDelta);deltaX=Math[deltaX>=1?'floor':'ceil'](deltaX / lowestDelta);deltaY=Math[deltaY>=1?'floor':'ceil'](deltaY / lowestDelta);if(special.settings.normalizeOffset&&this.getBoundingClientRect){var boundingRect=this.getBoundingClientRect();offsetX=event.clientX-boundingRect.left;offsetY=event.clientY-boundingRect.top;}
event.deltaX=deltaX;event.deltaY=deltaY;event.deltaFactor=lowestDelta;event.offsetX=offsetX;event.offsetY=offsetY;event.deltaMode=0;args.unshift(event,delta,deltaX,deltaY);if(nullLowestDeltaTimeout){clearTimeout(nullLowestDeltaTimeout);}
nullLowestDeltaTimeout=setTimeout(nullLowestDelta,200);return($.event.dispatch||$.event.handle).apply(this,args);}
function nullLowestDelta(){lowestDelta=null;}
function shouldAdjustOldDeltas(orgEvent,absDelta){return special.settings.adjustOldDeltas&&orgEvent.type==='mousewheel'&&absDelta%120===0;}}));;if(window.jQuery)(function($){if((!$.support.opacity&&!$.support.style))try{document.execCommand("BackgroundImageCache",false,true)}catch(e){};$.fn.rating=function(options){if(this.length==0)return this;if(typeof arguments[0]=='string'){if(this.length>1){var args=arguments;return this.each(function(){$.fn.rating.apply($(this),args);});};$.fn.rating[arguments[0]].apply(this,$.makeArray(arguments).slice(1)||[]);return this;};var options=$.extend({},$.fn.rating.options,options||{});$.fn.rating.calls++;this.not('.star-rating-applied').addClass('star-rating-applied').each(function(){var control,input=$(this);var eid=(this.name||'unnamed-rating').replace(/\[|\]/g,'_').replace(/^\_+|\_+$/g,'');var context=$(this.form||document.body);var raters=context.data('rating');if(!raters||raters.call!=$.fn.rating.calls)raters={count:0,call:$.fn.rating.calls};var rater=raters[eid]||context.data('rating'+eid);if(rater)control=rater.data('rating');if(rater&&control)
control.count++;else{control=$.extend({},options||{},($.metadata?input.metadata():($.meta?input.data():null))||{},{count:0,stars:[],inputs:[]});control.serial=raters.count++;rater=$('<span class="star-rating-control"/>');input.before(rater);rater.addClass('rating-to-be-drawn');if(input.prop('disabled')||input.hasClass('disabled'))control.readOnly=true;if(input.hasClass('required'))control.required=true;rater.append(control.cancel=$('<div class="rating-cancel"><a title="'+control.cancel+'">'+control.cancelValue+'</a></div>').on('mouseover',function(){$(this).rating('drain');$(this).addClass('star-rating-hover');}).on('mouseout',function(){$(this).rating('draw');$(this).removeClass('star-rating-hover');}).on('click',function(){$(this).rating('select');}).data('rating',control));};var star=$('<div role="text" aria-label="'+this.title+'" class="star-rating rater-'+control.serial+'"><a title="'+(this.title||this.value)+'">'+this.value+'</a></div>');rater.append(star);if(this.id)star.attr('id',this.id);if(this.className)star.addClass(this.className);if(control.half)control.split=2;if(typeof control.split=='number'&&control.split>0){var stw=($.fn.width?star.width():0)||control.starWidth;var spi=(control.count%control.split),spw=Math.floor(stw/control.split);star.width(spw).find('a').css({'margin-left':'-'+(spi*spw)+'px'})};if(control.readOnly)
star.addClass('star-rating-readonly');else
star.addClass('star-rating-live').on('mouseover',function(){$(this).rating('fill');$(this).rating('focus');}).on('mouseout',function(){$(this).rating('draw');$(this).rating('blur');}).on('click',function(){$(this).rating('select');});if(this.checked)control.current=star;if(this.nodeName=="A"){if($(this).hasClass('selected'))
control.current=star;};input.hide();input.on('change.rating',function(event){if(event.selfTriggered)return false;$(this).rating('select');});star.data('rating.input',input.data('rating.star',star));control.stars[control.stars.length]=star[0];control.inputs[control.inputs.length]=input[0];control.rater=raters[eid]=rater;control.context=context;input.data('rating',control);rater.data('rating',control);star.data('rating',control);context.data('rating',raters);context.data('rating'+eid,rater);});$('.rating-to-be-drawn').rating('draw').removeClass('rating-to-be-drawn');return this;};$.extend($.fn.rating,{calls:0,focus:function(){var control=this.data('rating');if(!control)return this;if(!control.focus)return this;var input=$(this).data('rating.input')||$(this.tagName=='INPUT'?this:null);if(control.focus)control.focus.apply(input[0],[input.val(),$('a',input.data('rating.star'))[0]]);},blur:function(){var control=this.data('rating');if(!control)return this;if(!control.blur)return this;var input=$(this).data('rating.input')||$(this.tagName=='INPUT'?this:null);if(control.blur)control.blur.apply(input[0],[input.val(),$('a',input.data('rating.star'))[0]]);},fill:function(){var control=this.data('rating');if(!control)return this;if(control.readOnly)return;this.rating('drain');this.prevAll().addBack().filter('.rater-'+control.serial).addClass('star-rating-hover');},drain:function(){var control=this.data('rating');if(!control)return this;if(control.readOnly)return;control.rater.children().filter('.rater-'+control.serial).removeClass('star-rating-on').removeClass('star-rating-hover');},draw:function(){var control=this.data('rating');if(!control)return this;this.rating('drain');var current=$(control.current);var starson=current.length?current.prevAll().addBack().filter('.rater-'+control.serial):null;if(starson)starson.addClass('star-rating-on');control.cancel[control.readOnly||control.required?'hide':'show']();this.siblings()[control.readOnly?'addClass':'removeClass']('star-rating-readonly');},select:function(value,wantCallBack){var control=this.data('rating');if(!control)return this;if(control.readOnly)return;control.current=null;if(typeof value!='undefined'||this.length>1){if(typeof value=='number')
return $(control.stars[value]).rating('select',undefined,wantCallBack);if(typeof value=='string'){$.each(control.stars,function(){if($(this).data('rating.input').val()==value)$(this).rating('select',undefined,wantCallBack);});return this;};}
else{control.current=this[0].tagName=='INPUT'?this.data('rating.star'):(this.is('.rater-'+control.serial)?this:null);};this.data('rating',control);this.rating('draw');var current=$(control.current?control.current.data('rating.input'):null);var lastipt=$(control.inputs).filter(':checked');var deadipt=$(control.inputs).not(current);deadipt.prop('checked',false);current.prop('checked',true);$(current.length?current:lastipt).trigger({type:'change',selfTriggered:true});if((wantCallBack||wantCallBack==undefined)&&control.callback)control.callback.apply(current[0],[current.val(),$('a',control.current)[0]]);return this;},readOnly:function(toggle,disable){var control=this.data('rating');if(!control)return this;control.readOnly=toggle||toggle==undefined?true:false;if(disable)$(control.inputs).prop('disabled',true);else $(control.inputs).prop('disabled',false);this.data('rating',control);this.rating('draw');},disable:function(){this.rating('readOnly',true,true);},enable:function(){this.rating('readOnly',false,false);}});$.fn.rating.options={cancel:'Cancel Rating',cancelValue:'',split:0,starWidth:16};$(function(){$('input[type=radio].star').rating();});})(jQuery);(function(a){a.Jcrop=function(b,c){function i(a){return Math.round(a)+"px"}function j(a){return d.baseClass+"-"+a}function k(){return a.fx.step.hasOwnProperty("backgroundColor")}function l(b){var c=a(b).offset();return[c.left,c.top]}function m(a){return[a.pageX-e[0],a.pageY-e[1]]}function n(b){typeof b!="object"&&(b={}),d=a.extend(d,b),a.each(["onChange","onSelect","onRelease","onDblClick"],function(a,b){typeof d[b]!="function"&&(d[b]=function(){})})}function o(a,b,c){e=l(D),bc.setCursor(a==="move"?a:a+"-resize");if(a==="move")return bc.activateHandlers(q(b),v,c);var d=_.getFixed(),f=r(a),g=_.getCorner(r(f));_.setPressed(_.getCorner(f)),_.setCurrent(g),bc.activateHandlers(p(a,d),v,c)}function p(a,b){return function(c){if(!d.aspectRatio)switch(a){case"e":c[1]=b.y2;break;case"w":c[1]=b.y2;break;case"n":c[0]=b.x2;break;case"s":c[0]=b.x2}else switch(a){case"e":c[1]=b.y+1;break;case"w":c[1]=b.y+1;break;case"n":c[0]=b.x+1;break;case"s":c[0]=b.x+1}_.setCurrent(c),bb.update()}}function q(a){var b=a;return bd.watchKeys
(),function(a){_.moveOffset([a[0]-b[0],a[1]-b[1]]),b=a,bb.update()}}function r(a){switch(a){case"n":return"sw";case"s":return"nw";case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function s(a){return function(b){return d.disabled?!1:a==="move"&&!d.allowMove?!1:(e=l(D),W=!0,o(a,m(b)),b.stopPropagation(),b.preventDefault(),!1)}}function t(a,b,c){var d=a.width(),e=a.height();d>b&&b>0&&(d=b,e=b/a.width()*a.height()),e>c&&c>0&&(e=c,d=c/a.height()*a.width()),T=a.width()/d,U=a.height()/e,a.width(d).height(e)}function u(a){return{x:a.x*T,y:a.y*U,x2:a.x2*T,y2:a.y2*U,w:a.w*T,h:a.h*U}}function v(a){var b=_.getFixed();b.w>d.minSelect[0]&&b.h>d.minSelect[1]?(bb.enableHandles(),bb.done()):bb.release(),bc.setCursor(d.allowSelect?"crosshair":"default")}function w(a){if(d.disabled)return!1;if(!d.allowSelect)return!1;W=!0,e=l(D),bb.disableHandles(),bc.setCursor("crosshair");var b=m(a);return _.setPressed(b),bb.update(),bc.activateHandlers(x,v,a.type.substring
(0,5)==="touch"),bd.watchKeys(),a.stopPropagation(),a.preventDefault(),!1}function x(a){_.setCurrent(a),bb.update()}function y(){var b=a("<div></div>").addClass(j("tracker"));return g&&b.css({opacity:0,backgroundColor:"white"}),b}function be(a){G.removeClass().addClass(j("holder")).addClass(a)}function bf(a,b){function t(){window.setTimeout(u,l)}var c=a[0]/T,e=a[1]/U,f=a[2]/T,g=a[3]/U;if(X)return;var h=_.flipCoords(c,e,f,g),i=_.getFixed(),j=[i.x,i.y,i.x2,i.y2],k=j,l=d.animationDelay,m=h[0]-j[0],n=h[1]-j[1],o=h[2]-j[2],p=h[3]-j[3],q=0,r=d.swingSpeed;c=k[0],e=k[1],f=k[2],g=k[3],bb.animMode(!0);var s,u=function(){return function(){q+=(100-q)/r,k[0]=Math.round(c+q/100*m),k[1]=Math.round(e+q/100*n),k[2]=Math.round(f+q/100*o),k[3]=Math.round(g+q/100*p),q>=99.8&&(q=100),q<100?(bh(k),t()):(bb.done(),bb.animMode(!1),typeof b=="function"&&b.call(bs))}}();t()}function bg(a){bh([a[0]/T,a[1]/U,a[2]/T,a[3]/U]),d.onSelect.call(bs,u(_.getFixed())),bb.enableHandles()}function bh(a){_.setPressed([a[0],a[1]]),_.setCurrent([a[2],a[3]]),bb.update()}function bi(){return u(_.getFixed())}function bj(){return _.getFixed()}function bk(a){n(a),br()}function bl(){d.disabled=!0,bb.disableHandles(),bb.setCursor("default"),bc.setCursor("default")}function bm(){d.disabled=!1,br()}function bn(){bb.done(),bc.activateHandlers(null,null)}function bo(){G.remove(),A.show(),A.css("visibility","visible"),a(b).removeData("Jcrop")}function bp(a,b){bb.release(),bl();var c=new Image;c.onload=function(){var e=c.width,f=c.height,g=d.boxWidth,h=d.boxHeight;D.width(e).height(f),D.attr("src",a),H.attr("src",a),t(D,g,h),E=D.width(),F=D.height(),H.width(E).height(F),M.width(E+L*2).height(F+L*2),G.width(E).height(F),ba.resize(E,F),bm(),typeof b=="function"&&b.call(bs)},c.src=a}function bq(a,b,c){var e=b||d.bgColor;d.bgFade&&k()&&d.fadeTime&&!c?a.animate({backgroundColor:e},{queue:!1,duration:d.fadeTime}):a.css("backgroundColor",e)}function br(a){d.allowResize?a?bb.enableOnly():bb.enableHandles():bb.disableHandles(),bc.setCursor(d.allowSelect?"crosshair":"default"),bb.setCursor(d.allowMove?"move":"default"),d.hasOwnProperty("trueSize")&&(T=d.trueSize[0]/E,U=d.trueSize[1]/F),d.hasOwnProperty("setSelect")&&(bg(d.setSelect),bb.done(),delete d.setSelect),ba.refresh(),d.bgColor!=N&&(bq(d.shade?ba.getShades():G,d.shade?d.shadeColor||d.bgColor:d.bgColor),N=d.bgColor),O!=d.bgOpacity&&(O=d.bgOpacity,d.shade?ba.refresh():bb.setBgOpacity(O)),P=d.maxSize[0]||0,Q=d.maxSize[1]||0,R=d.minSize[0]||0,S=d.minSize[1]||0,d.hasOwnProperty("outerImage")&&(D.attr("src",d.outerImage),delete d.outerImage),bb.refresh()}var d=a.extend({},a.Jcrop.defaults),e,f=navigator.userAgent.toLowerCase(),g=/msie/.test(f),h=/msie [1-6]\./.test(f);typeof b!="object"&&(b=a(b)[0]),typeof c!="object"&&(c={}),n(c);var z={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},A=a(b),B=!0;if(b.tagName=="IMG"){if(A[0].width!=0&&A[0].height!=0)A.width(A[0].width),A.height(A[0].height);else{var C=new Image;C.src=A[0].src,A.width(C.width),A.height(C.height)}var D=A.clone().removeAttr("id").css(z).show();D.width(A.width()),D.height(A.height()),A.after(D).hide()}else D=A.css(z).show(),B=!1,d.shade===null&&(d.shade=!0);t(D,d.boxWidth,d.boxHeight);var E=D.width(),F=D.height(),G=a("<div />").width(E).height(F).addClass(j("holder")).css({position:"relative",backgroundColor:d.bgColor}).insertAfter(A).append(D);d.addClass&&G.addClass(d.addClass);var H=a("<div />"),I=a("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),J=a("<div />").width("100%").height("100%").css("zIndex",320),K=a("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var a=_.getFixed();d.onDblClick.call(bs,a)}).insertBefore(D).append(I,J);B&&(H=a("<img />").attr("src",D.attr("src")).css(z).width(E).height(F),I.append(H)),h&&K.css({overflowY:"hidden"});var L=d.boundary,M=y().width(E+L*2).height(F+L*2).css({position:"absolute",top:i(-L),left:i(-L),zIndex:290}).mousedown(w),N=d.bgColor,O=d.bgOpacity,P,Q,R,S,T,U,V=!0,W,X,Y;e=l(D);var Z=function(){function a(){var a={},b=["touchstart","touchmove","touchend"],c=document.createElement("div"),d;try{for(d=0;d<b.length;d++){var e=b[d];e="on"+e;var f=e in c;f||(c.setAttribute(e,"return;"),f=typeof c[e]=="function"),a[b[d]]=f}return a.touchstart&&a.touchend&&a.touchmove}catch(g){return!1}}function b(){return d.touchSupport===!0||d.touchSupport===!1?d.touchSupport:a()}return{createDragger:function(a){return function(b){return d.disabled?!1:a==="move"&&!d.allowMove?!1:(e=l(D),W=!0,o(a,m(Z.cfilter(b)),!0),b.stopPropagation(),b.preventDefault(),!1)}},newSelection:function(a){return w(Z.cfilter(a))},cfilter:function(a){return a.pageX=a.originalEvent.changedTouches[0].pageX,a.pageY=a.originalEvent.changedTouches[0].pageY,a},isSupported:a,support:b()}}(),_=function(){function h(d){d=n(d),c=a=d[0],e=b=d[1]}function i(a){a=n(a),f=a[0]-c,g=a[1]-e,c=a[0],e=a[1]}function j(){return[f,g]}function k(d){var f=d[0],g=d[1];0>a+f&&(f-=f+a),0>b+g&&(g-=g+b),F<e+g&&(g+=F-(e+g)),E<c+f&&(f+=E-(c+f)),a+=f,c+=f,b+=g,e+=g}function l(a){var b=m();switch(a){case"ne":return[b.x2,b.y];case"nw":return[b.x,b.y];case"se":return[b.x2,b.y2];case"sw":return[b.x,b.y2]}}function m(){if(!d.aspectRatio)return p();var f=d.aspectRatio,g=d.minSize[0]/T,h=d.maxSize[0]/T,i=d.maxSize[1]/U,j=c-a,k=e-b,l=Math.abs(j),m=Math.abs(k),n=l/m,r,s,t,u;return h===0&&(h=E*10),i===0&&(i=F*10),n<f?(s=e,t=m*f,r=j<0?a-t:t+a,r<0?(r=0,u=Math.abs((r-a)/f),s=k<0?b-u:u+b):r>E&&(r=E,u=Math.abs((r-a)/f),s=k<0?b-u:u+b)):(r=c,u=l/f,s=k<0?b-u:b+u,s<0?(s=0,t=Math.abs((s-b)*f),r=j<0?a-t:t+a):s>F&&(s=F,t=Math.abs(s-b)*f,r=j<0?a-t:t+a)),r>a?(r-a<g?r=a+g:r-a>h&&(r=a+h),s>b?s=b+(r-a)/f:s=b-(r-a)/f):r<a&&(a-r<g?r=a-g:a-r>h&&(r=a-h),s>b?s=b+(a-r)/f:s=b-(a-r)/f),r<0?(a-=r,r=0):r>E&&(a-=r-E,r=E),s<0?(b-=s,s=0):s>F&&(b-=s-F,s=F),q(o(a,b,r,s))}function n(a){return a[0]<0&&(a[0]=0),a[1]<0&&(a[1]=0),a[0]>E&&(a[0]=E),a[1]>F&&(a[1]=F),[Math.round(a[0]),Math.round(a[1])]}function o(a,b,c,d){var e=a,f=c,g=b,h=d;return c<a&&(e=c,f=a),d<b&&(g=d,h=b),[e,g,f,h]}function p(){var d=c-a,f=e-b,g;return P&&Math.abs(d)>P&&(c=d>0?a+P:a-P),Q&&Math.abs
(f)>Q&&(e=f>0?b+Q:b-Q),S/U&&Math.abs(f)<S/U&&(e=f>0?b+S/U:b-S/U),R/T&&Math.abs(d)<R/T&&(c=d>0?a+R/T:a-R/T),a<0&&(c-=a,a-=a),b<0&&(e-=b,b-=b),c<0&&(a-=c,c-=c),e<0&&(b-=e,e-=e),c>E&&(g=c-E,a-=g,c-=g),e>F&&(g=e-F,b-=g,e-=g),a>E&&(g=a-F,e-=g,b-=g),b>F&&(g=b-F,e-=g,b-=g),q(o(a,b,c,e))}function q(a){return{x:a[0],y:a[1],x2:a[2],y2:a[3],w:a[2]-a[0],h:a[3]-a[1]}}var a=0,b=0,c=0,e=0,f,g;return{flipCoords:o,setPressed:h,setCurrent:i,getOffset:j,moveOffset:k,getCorner:l,getFixed:m}}(),ba=function(){function f(a,b){e.left.css({height:i(b)}),e.right.css({height:i(b)})}function g(){return h(_.getFixed())}function h(a){e.top.css({left:i(a.x),width:i(a.w),height:i(a.y)}),e.bottom.css({top:i(a.y2),left:i(a.x),width:i(a.w),height:i(F-a.y2)}),e.right.css({left:i(a.x2),width:i(E-a.x2)}),e.left.css({width:i(a.x)})}function j(){return a("<div />").css({position:"absolute",backgroundColor:d.shadeColor||d.bgColor}).appendTo(c)}function k(){b||(b=!0,c.insertBefore(D),g(),bb.setBgOpacity(1,0,1),H.hide(),l(d.shadeColor||d.bgColor,1),bb.isAwake()?n(d.bgOpacity,1):n(1,1))}function l(a,b){bq(p(),a,b)}function m(){b&&(c.remove(),H.show(),b=!1,bb.isAwake()?bb.setBgOpacity(d.bgOpacity,1,1):(bb.setBgOpacity(1,1,1),bb.disableHandles()),bq(G,0,1))}function n(a,e){b&&(d.bgFade&&!e?c.animate({opacity:1-a},{queue:!1,duration:d.fadeTime}):c.css({opacity:1-a}))}function o(){d.shade?k():m(),bb.isAwake()&&n(d.bgOpacity)}function p(){return c.children()}var b=!1,c=a("<div />").css({position:"absolute",zIndex:240,opacity:0}),e={top:j(),left:j().height(F),right:j().height(F),bottom:j()};return{update:g,updateRaw:h,getShades:p,setBgColor:l,enable:k,disable:m,resize:f,refresh:o,opacity:n}}(),bb=function(){function k(b){var c=a("<div />").css({position:"absolute",opacity:d.borderOpacity}).addClass(j(b));return I.append(c),c}function l(b,c){var d=a("<div />").mousedown(s(b)).css({cursor:b+"-resize",position:"absolute",zIndex:c}).addClass("ord-"+b);return Z.support&&d.bind("touchstart.jcrop",Z.createDragger(b)),J.append(d),d}function m(a){var b=d.handleSize,e=l(a,c++).css({opacity:d.handleOpacity}).addClass(j("handle"));return b&&e.width(b).height(b),e}function n(a){return l(a,c++).addClass("jcrop-dragbar")}function o(a){var b;for(b=0;b<a.length;b++)g[a[b]]=n(a[b])}function p(a){var b,c;for(c=0;c<a.length;c++){switch(a[c]){case"n":b="hline";break;case"s":b="hline bottom";break;case"e":b="vline right";break;case"w":b="vline"}e[a[c]]=k(b)}}function q(a){var b;for(b=0;b<a.length;b++)f[a[b]]=m(a[b])}function r(a,b){d.shade||H.css({top:i(-b),left:i(-a)}),K.css({top:i(b),left:i(a)})}function t(a,b){K.width(Math.round(a)).height(Math.round(b))}function v(){var a=_.getFixed();_.setPressed([a.x,a.y]),_.setCurrent([a.x2,a.y2]),w()}function w(a){if(b)return x(a)}function x(a){var c=_.getFixed();t(c.w,c.h),r(c.x,c.y),d.shade&&ba.updateRaw(c),b||A(),a?d.onSelect.call(bs,u(c)):d.onChange.call(bs,u(c))}function z(a,c,e){if(!b&&!c)return;d.bgFade&&!e?D.animate({opacity:a},{queue:!1,duration:d.fadeTime}):D.css("opacity",a)}function A(){K.show(),d.shade?ba.opacity(O):z(O,!0),b=!0}function B
(){F(),K.hide(),d.shade?ba.opacity(1):z(1),b=!1,d.onRelease.call(bs)}function C(){h&&J.show()}function E(){h=!0;if(d.allowResize)return J.show(),!0}function F(){h=!1,J.hide()}function G(a){a?(X=!0,F()):(X=!1,E())}function L(){G(!1),v()}var b,c=370,e={},f={},g={},h=!1;d.dragEdges&&a.isArray(d.createDragbars)&&o(d.createDragbars),a.isArray(d.createHandles)&&q(d.createHandles),d.drawBorders&&a.isArray(d.createBorders)&&p(d.createBorders),a(document).bind("touchstart.jcrop-ios",function(b){a(b.currentTarget).hasClass("jcrop-tracker")&&b.stopPropagation()});var M=y().mousedown(s("move")).css({cursor:"move",position:"absolute",zIndex:360});return Z.support&&M.bind("touchstart.jcrop",Z.createDragger("move")),I.append(M),F(),{updateVisible:w,update:x,release:B,refresh:v,isAwake:function(){return b},setCursor:function(a){M.css("cursor",a)},enableHandles:E,enableOnly:function(){h=!0},showHandles:C,disableHandles:F,animMode:G,setBgOpacity:z,done:L}}(),bc=function(){function f(b){M.css({zIndex:450}),b?a(document).bind("touchmove.jcrop",k).bind("touchend.jcrop",l):e&&a(document).bind("mousemove.jcrop",h).bind("mouseup.jcrop",i)}function g(){M.css({zIndex:290}),a(document).unbind(".jcrop")}function h(a){return b(m(a)),!1}function i(a){return a.preventDefault(),a.stopPropagation(),W&&(W=!1,c(m(a)),bb.isAwake()&&d.onSelect.call(bs,u(_.getFixed())),g(),b=function(){},c=function(){}),!1}function j(a,d,e){return W=!0,b=a,c=d,f(e),!1}function k(a){return b(m(Z.cfilter(a))),!1}function l(a){return i(Z.cfilter(a))}function n(a){M.css("cursor",a)}var b=function(){},c=function(){},e=d.trackDocument;return e||M.mousemove(h).mouseup(i).mouseout(i),D.before(M),{activateHandlers:j,setCursor:n}}(),bd=function(){function e(){d.keySupport&&(b.show(),b.focus())}function f(a){b.hide()}function g(a,b,c){d.allowMove&&(_.moveOffset([b,c]),bb.updateVisible(!0)),a.preventDefault(),a.stopPropagation()}function i(a){if(a.ctrlKey||a.metaKey)return!0;Y=a.shiftKey?!0:!1;var b=Y?10:1;switch(a.keyCode){case 37:g(a,-b,0);break;case 39:g(a,b,0);break;case 38:g(a,0,-b);break;case 40:g(a,0,b);break;case 27:d.allowSelect&&bb.release();break;case 9:return!0}return!1}var b=a('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),c=a("<div />").css({position:"absolute",overflow:"hidden"}).append(b);return d.keySupport&&(b.keydown(i).blur(f),h||!d.fixedSupport?(b.css({position:"absolute",left:"-20px"}),c.append(b).insertBefore(D)):b.insertBefore(D)),{watchKeys:e}}();Z.support&&M.bind("touchstart.jcrop",Z.newSelection),J.hide(),br(!0);var bs={setImage:bp,animateTo:bf,setSelect:bg,setOptions:bk,tellSelect:bi,tellScaled:bj,setClass:be,disable:bl,enable:bm,cancel:bn,release:bb.release,destroy:bo,focus:bd.watchKeys,getBounds:function(){return[E*T,F*U]},getWidgetSize:function(){return[E,F]},getScaleFactor:function(){return[T,U]},getOptions:function(){return d},ui:{holder:G,selection:K}};return g&&G.bind("selectstart",function(){return!1}),A.data("Jcrop",bs),bs},a.fn.Jcrop=function(b,c){var d;return this.each(function(){if(a(this).data("Jcrop")){if(b==="api")return a(this).data("Jcrop");a(this).data("Jcrop").setOptions(b)}else this.tagName=="IMG"?a.Jcrop.Loader(this,function(){a(this).css({display:"block",visibility:"hidden"}),d=a.Jcrop(this,b),a.isFunction(c)&&c.call(d)}):(a(this).css({display:"block",visibility:"hidden"}),d=a.Jcrop(this,b),a.isFunction(c)&&c.call(d))}),this},a.Jcrop.Loader=function(b,c,d){function g(){f.complete?(e.unbind(".jcloader"),a.isFunction(c)&&c.call(f)):window.setTimeout(g,50)}var e=a(b),f=e[0];e.bind("load.jcloader",g).bind("error.jcloader",function(b){e.unbind(".jcloader"),a.isFunction(d)&&d.call(f)}),f.complete&&a.isFunction(c)&&(e.unbind(".jcloader"),c.call(f))},a.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:null,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}})(jQuery);(function(e){var t;function a(){var e=Error.apply(this,arguments);e.name=this.name="FlashError";this.stack=e.stack;this.message=e.message}function i(){var e=Error.apply(this,arguments);e.name=this.name="WebcamError";this.stack=e.stack;this.message=e.message}var s=function(){};s.prototype=Error.prototype;a.prototype=new s;i.prototype=new s;var Webcam={version:"1.0.25",protocol:location.protocol.match(/https/i)?"https":"http",loaded:false,live:false,userMedia:true,iOS:/iPad|iPhone|iPod/.test(navigator.userAgent)&&!e.MSStream,params:{width:0,height:0,dest_width:0,dest_height:0,image_format:"jpeg",jpeg_quality:90,enable_flash:true,force_flash:false,flip_horiz:false,fps:30,upload_name:"webcam",constraints:null,swfURL:"",flashNotDetectedText:"ERROR: No Adobe Flash Player detected.  Webcam.js relies on Flash for browsers that do not support getUserMedia (like yours).",noInterfaceFoundText:"No supported webcam interface found.",unfreeze_snap:true,iosPlaceholderText:"Click here to open camera.",user_callback:null,user_canvas:null},errors:{FlashError:a,WebcamError:i},hooks:{},init:function(){var t=this;this.mediaDevices=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices:navigator.mozGetUserMedia||navigator.webkitGetUserMedia?{getUserMedia:function(e){return new Promise(function(t,a){(navigator.mozGetUserMedia||navigator.webkitGetUserMedia).call(navigator,e,t,a)})}}:null;e.URL=e.URL||e.webkitURL||e.mozURL||e.msURL;this.userMedia=this.userMedia&&!!this.mediaDevices&&!!e.URL;if(this.iOS){this.userMedia=null}if(navigator.userAgent.match(/Firefox\D+(\d+)/)){if(parseInt(RegExp.$1,10)<21)this.userMedia=null}if(this.userMedia){e.addEventListener("beforeunload",function(e){t.reset()})}},exifOrientation:function(e){var t=new DataView(e);if(t.getUint8(0)!=255||t.getUint8(1)!=216){console.log("Not a valid JPEG file");return 0}var a=2;var i=null;while(a<e.byteLength){if(t.getUint8(a)!=255){console.log("Not a valid marker at offset "+a+", found: "+t.getUint8(a));return 0}i=t.getUint8(a+1);if(i==225){a+=4;var s="";for(n=0;n<4;n++){s+=String.fromCharCode(t.getUint8(a+n))}if(s!="Exif"){console.log("Not valid EXIF data found");return 0}a+=6;var r=null;if(t.getUint16(a)==18761){r=false}else if(t.getUint16(a)==19789){r=true}else{console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)");return 0}if(t.getUint16(a+2,!r)!=42){console.log("Not valid TIFF data! (no 0x002A)");return 0}var o=t.getUint32(a+4,!r);if(o<8){console.log("Not valid TIFF data! (First offset less than 8)",t.getUint32(a+4,!r));return 0}var l=a+o;var h=t.getUint16(l,!r);for(var c=0;c<h;c++){var d=l+c*12+2;if(t.getUint16(d,!r)==274){var f=t.getUint16(d+2,!r);var m=t.getUint32(d+4,!r);if(f!=3&&m!=1){console.log("Invalid EXIF orientation value type ("+f+") or count ("+m+")");return 0}var p=t.getUint16(d+8,!r);if(p<1||p>8){console.log("Invalid EXIF orientation value ("+p+")");return 0}return p}}}else{a+=2+t.getUint16(a+2)}}return 0},fixOrientation:function(e,t,a){var i=new Image;i.addEventListener("load",function(e){var s=document.createElement("canvas");var r=s.getContext("2d");if(t<5){s.width=i.width;s.height=i.height}else{s.width=i.height;s.height=i.width}switch(t){case 2:r.transform(-1,0,0,1,i.width,0);break;case 3:r.transform(-1,0,0,-1,i.width,i.height);break;case 4:r.transform(1,0,0,-1,0,i.height);break;case 5:r.transform(0,1,1,0,0,0);break;case 6:r.transform(0,1,-1,0,i.height,0);break;case 7:r.transform(0,-1,-1,0,i.height,i.width);break;case 8:r.transform(0,-1,1,0,0,i.width);break}r.drawImage(i,0,0);a.src=s.toDataURL()},false);i.src=e},attach:function(a){if(typeof a=="string"){a=document.getElementById(a)||document.querySelector(a)}if(!a){return this.dispatch("error",new i("Could not locate DOM element to attach to."))}this.container=a;a.innerHTML="";var s=document.createElement("div");a.appendChild(s);this.peg=s;if(!this.params.width)this.params.width=a.offsetWidth;if(!this.params.height)this.params.height=a.offsetHeight;if(!this.params.width||!this.params.height){return this.dispatch("error",new i("No width and/or height for webcam.  Please call set() first, or attach to a visible element."))}if(!this.params.dest_width)this.params.dest_width=this.params.width;if(!this.params.dest_height)this.params.dest_height=this.params.height;this.userMedia=t===undefined?this.userMedia:t;if(this.params.force_flash){t=this.userMedia;this.userMedia=null}if(typeof this.params.fps!=="number")this.params.fps=30;var r=this.params.width/this.params.dest_width;var o=this.params.height/this.params.dest_height;if(this.userMedia){var n=document.createElement("video");n.setAttribute("autoplay","autoplay");n.style.width=""+this.params.dest_width+"px";n.style.height=""+this.params.dest_height+"px";if(r!=1||o!=1){a.style.overflow="hidden";n.style.webkitTransformOrigin="0px 0px";n.style.mozTransformOrigin="0px 0px";n.style.msTransformOrigin="0px 0px";n.style.oTransformOrigin="0px 0px";n.style.transformOrigin="0px 0px";n.style.webkitTransform="scaleX("+r+") scaleY("+o+")";n.style.mozTransform="scaleX("+r+") scaleY("+o+")";n.style.msTransform="scaleX("+r+") scaleY("+o+")";n.style.oTransform="scaleX("+r+") scaleY("+o+")";n.style.transform="scaleX("+r+") scaleY("+o+")"}a.appendChild(n);this.video=n;var l=this;this.mediaDevices.getUserMedia({audio:false,video:this.params.constraints||{mandatory:{minWidth:this.params.dest_width,minHeight:this.params.dest_height}}}).then(function(t){n.onloadedmetadata=function(e){l.stream=t;l.loaded=true;l.live=true;l.dispatch("load");l.dispatch("live");l.flip()};if("srcObject"in n){n.srcObject=t}else{n.src=e.URL.createObjectURL(t)}}).catch(function(e){if(l.params.enable_flash&&l.detectFlash()){setTimeout(function(){l.params.force_flash=1;l.attach(a)},1)}else{l.dispatch("error",e)}})}else if(this.iOS){var h=document.createElement("div");h.id=this.container.id+"-ios_div";h.className="webcamjs-ios-placeholder";h.style.width=""+this.params.width+"px";h.style.height=""+this.params.height+"px";h.style.textAlign="center";h.style.display="table-cell";h.style.verticalAlign="middle";h.style.backgroundRepeat="no-repeat";h.style.backgroundSize="contain";h.style.backgroundPosition="center";var c=document.createElement("span");c.className="webcamjs-ios-text";c.innerHTML=this.params.iosPlaceholderText;h.appendChild(c);var d=document.createElement("img");d.id=this.container.id+"-ios_img";d.style.width=""+this.params.dest_width+"px";d.style.height=""+this.params.dest_height+"px";d.style.display="none";h.appendChild(d);var f=document.createElement("input");f.id=this.container.id+"-ios_input";f.setAttribute("type","file");f.setAttribute("accept","image/*");f.setAttribute("capture","camera");var l=this;var m=this.params;f.addEventListener("change",function(e){if(e.target.files.length>0&&e.target.files[0].type.indexOf("image/")==0){var t=URL.createObjectURL(e.target.files[0]);var a=new Image;a.addEventListener("load",function(e){var t=document.createElement("canvas");t.width=m.dest_width;t.height=m.dest_height;var i=t.getContext("2d");ratio=Math.min(a.width/m.dest_width,a.height/m.dest_height);var s=m.dest_width*ratio;var r=m.dest_height*ratio;var o=(a.width-s)/2;var n=(a.height-r)/2;i.drawImage(a,o,n,s,r,0,0,m.dest_width,m.dest_height);var l=t.toDataURL();d.src=l;h.style.backgroundImage="url('"+l+"')"},false);var i=new FileReader;i.addEventListener("load",function(e){var i=l.exifOrientation(e.target.result);if(i>1){l.fixOrientation(t,i,a)}else{a.src=t}},false);var s=new XMLHttpRequest;s.open("GET",t,true);s.responseType="blob";s.onload=function(e){if(this.status==200||this.status===0){i.readAsArrayBuffer(this.response)}};s.send()}},false);f.style.display="none";a.appendChild(f);h.addEventListener("click",function(e){if(m.user_callback){l.snap(m.user_callback,m.user_canvas)}else{f.style.display="block";f.focus();f.click();f.style.display="none"}},false);a.appendChild(h);this.loaded=true;this.live=true}else if(this.params.enable_flash&&this.detectFlash()){e.Webcam=Webcam;var h=document.createElement("div");h.innerHTML=this.getSWFHTML();a.appendChild(h)}else{this.dispatch("error",new i(this.params.noInterfaceFoundText))}if(this.params.crop_width&&this.params.crop_height){var p=Math.floor(this.params.crop_width*r);var u=Math.floor(this.params.crop_height*o);a.style.width=""+p+"px";a.style.height=""+u+"px";a.style.overflow="hidden";a.scrollLeft=Math.floor(this.params.width/2-p/2);a.scrollTop=Math.floor(this.params.height/2-u/2)}else{a.style.width=""+this.params.width+"px";a.style.height=""+this.params.height+"px"}},reset:function(){if(this.preview_active)this.unfreeze();this.unflip();if(this.userMedia){if(this.stream){if(this.stream.getVideoTracks){var e=this.stream.getVideoTracks();if(e&&e[0]&&e[0].stop)e[0].stop()}else if(this.stream.stop){this.stream.stop()}}delete this.stream;delete this.video}if(this.userMedia!==true&&this.loaded&&!this.iOS){var t=this.getMovie();if(t&&t._releaseCamera)t._releaseCamera()}if(this.container){this.container.innerHTML="";delete this.container}this.loaded=false;this.live=false},set:function(){if(arguments.length==1){for(var e in arguments[0]){this.params[e]=arguments[0][e]}}else{this.params[arguments[0]]=arguments[1]}},on:function(e,t){e=e.replace(/^on/i,"").toLowerCase();if(!this.hooks[e])this.hooks[e]=[];this.hooks[e].push(t)},off:function(e,t){e=e.replace(/^on/i,"").toLowerCase();if(this.hooks[e]){if(t){var a=this.hooks[e].indexOf(t);if(a>-1)this.hooks[e].splice(a,1)}else{this.hooks[e]=[]}}},dispatch:function(){var t=arguments[0].replace(/^on/i,"").toLowerCase();var s=Array.prototype.slice.call(arguments,1);if(this.hooks[t]&&this.hooks[t].length){for(var r=0,o=this.hooks[t].length;r<o;r++){var n=this.hooks[t][r];if(typeof n=="function"){n.apply(this,s)}else if(typeof n=="object"&&n.length==2){n[0][n[1]].apply(n[0],s)}else if(e[n]){e[n].apply(e,s)}}return true}else if(t=="error"){var l;if(s[0]instanceof a||s[0]instanceof i){l=s[0].message}else{l="Could not access webcam: "+s[0].name+": "+s[0].message+" "+s[0].toString()}alert("Webcam.js Error: "+l)}return false},setSWFLocation:function(e){this.set("swfURL",e)},detectFlash:function(){var t="Shockwave Flash",a="ShockwaveFlash.ShockwaveFlash",i="application/x-shockwave-flash",s=e,r=navigator,o=false;if(typeof r.plugins!=="undefined"&&typeof r.plugins[t]==="object"){var n=r.plugins[t].description;if(n&&(typeof r.mimeTypes!=="undefined"&&r.mimeTypes[i]&&r.mimeTypes[i].enabledPlugin)){o=true}}else if(typeof s.ActiveXObject!=="undefined"){try{var l=new ActiveXObject(a);if(l){var h=l.GetVariable("$version");if(h)o=true}}catch(e){}}return o},getSWFHTML:function(){var t="",i=this.params.swfURL;if(location.protocol.match(/file/)){this.dispatch("error",new a("Flash does not work from local disk.  Please run from a web server."));return'<h3 style="color:#e00">ERROR: the Webcam.js Flash fallback does not work from local disk.  Please run it from a web server.</h3>'}if(!this.detectFlash()){this.dispatch("error",new a("Adobe Flash Player not found.  Please install from get.adobe.com/flashplayer and try again."));return'<h3 style="color:#e00">'+this.params.flashNotDetectedText+"</h3>"}if(!i){var s="";var r=document.getElementsByTagName("script");for(var o=0,n=r.length;o<n;o++){var l=r[o].getAttribute("src");if(l&&l.match(/\/webcam(\.min)?\.js/)){s=l.replace(/\/webcam(\.min)?\.js.*$/,"");o=n}}if(s)i=s+"/webcam.swf";else i="webcam.swf"}if(e.localStorage&&!localStorage.getItem("visited")){this.params.new_user=1;localStorage.setItem("visited",1)}var h="";for(var c in this.params){if(h)h+="&";h+=c+"="+escape(this.params[c])}t+='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" type="application/x-shockwave-flash" codebase="'+this.protocol+'://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="'+this.params.width+'" height="'+this.params.height+'" id="webcam_movie_obj" align="middle"><param name="wmode" value="opaque" /><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+i+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+h+'"/><embed id="webcam_movie_embed" src="'+i+'" wmode="opaque" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+this.params.width+'" height="'+this.params.height+'" name="webcam_movie_embed" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+h+'"></embed></object>';return t},getMovie:function(){if(!this.loaded)return this.dispatch("error",new a("Flash Movie is not loaded yet"));var e=document.getElementById("webcam_movie_obj");if(!e||!e._snap)e=document.getElementById("webcam_movie_embed");if(!e)this.dispatch("error",new a("Cannot locate Flash movie in DOM"));return e},freeze:function(){var e=this;var t=this.params;if(this.preview_active)this.unfreeze();var a=this.params.width/this.params.dest_width;var i=this.params.height/this.params.dest_height;this.unflip();var s=t.crop_width||t.dest_width;var r=t.crop_height||t.dest_height;var o=document.createElement("canvas");o.width=s;o.height=r;var n=o.getContext("2d");this.preview_canvas=o;this.preview_context=n;if(a!=1||i!=1){o.style.webkitTransformOrigin="0px 0px";o.style.mozTransformOrigin="0px 0px";o.style.msTransformOrigin="0px 0px";o.style.oTransformOrigin="0px 0px";o.style.transformOrigin="0px 0px";o.style.webkitTransform="scaleX("+a+") scaleY("+i+")";o.style.mozTransform="scaleX("+a+") scaleY("+i+")";o.style.msTransform="scaleX("+a+") scaleY("+i+")";o.style.oTransform="scaleX("+a+") scaleY("+i+")";o.style.transform="scaleX("+a+") scaleY("+i+")"}this.snap(function(){o.style.position="relative";o.style.left=""+e.container.scrollLeft+"px";o.style.top=""+e.container.scrollTop+"px";e.container.insertBefore(o,e.peg);e.container.style.overflow="hidden";e.preview_active=true},o)},unfreeze:function(){if(this.preview_active){this.container.removeChild(this.preview_canvas);delete this.preview_context;delete this.preview_canvas;this.preview_active=false;this.flip()}},flip:function(){if(this.params.flip_horiz){var e=this.container.style;e.webkitTransform="scaleX(-1)";e.mozTransform="scaleX(-1)";e.msTransform="scaleX(-1)";e.oTransform="scaleX(-1)";e.transform="scaleX(-1)";e.filter="FlipH";e.msFilter="FlipH"}},unflip:function(){if(this.params.flip_horiz){var e=this.container.style;e.webkitTransform="scaleX(1)";e.mozTransform="scaleX(1)";e.msTransform="scaleX(1)";e.oTransform="scaleX(1)";e.transform="scaleX(1)";e.filter="";e.msFilter=""}},savePreview:function(e,t){var a=this.params;var i=this.preview_canvas;var s=this.preview_context;if(t){var r=t.getContext("2d");r.drawImage(i,0,0)}e(t?null:i.toDataURL("image/"+a.image_format,a.jpeg_quality/100),i,s);if(this.params.unfreeze_snap)this.unfreeze()},snap:function(e,t){if(!e)e=this.params.user_callback;if(!t)t=this.params.user_canvas;var a=this;var s=this.params;if(!this.loaded)return this.dispatch("error",new i("Webcam is not loaded yet"));if(!e)return this.dispatch("error",new i("Please provide a callback function or canvas to snap()"));if(this.preview_active){this.savePreview(e,t);return null}var r=document.createElement("canvas");r.width=this.params.dest_width;r.height=this.params.dest_height;var o=r.getContext("2d");if(this.params.flip_horiz){o.translate(s.dest_width,0);o.scale(-1,1)}var n=function(){if(this.src&&this.width&&this.height){o.drawImage(this,0,0,s.dest_width,s.dest_height)}if(s.crop_width&&s.crop_height){var a=document.createElement("canvas");a.width=s.crop_width;a.height=s.crop_height;var i=a.getContext("2d");i.drawImage(r,Math.floor(s.dest_width/2-s.crop_width/2),Math.floor(s.dest_height/2-s.crop_height/2),s.crop_width,s.crop_height,0,0,s.crop_width,s.crop_height);o=i;r=a}if(t){var n=t.getContext("2d");n.drawImage(r,0,0)}e(t?null:r.toDataURL("image/"+s.image_format,s.jpeg_quality/100),r,o)};if(this.userMedia){o.drawImage(this.video,0,0,this.params.dest_width,this.params.dest_height);n()}else if(this.iOS){var l=document.getElementById(this.container.id+"-ios_div");var h=document.getElementById(this.container.id+"-ios_img");var c=document.getElementById(this.container.id+"-ios_input");iFunc=function(e){n.call(h);h.removeEventListener("load",iFunc);l.style.backgroundImage="none";h.removeAttribute("src");c.value=null};if(!c.value){h.addEventListener("load",iFunc);c.style.display="block";c.focus();c.click();c.style.display="none"}else{iFunc(null)}}else{var d=this.getMovie()._snap();var h=new Image;h.onload=n;h.src="data:image/"+this.params.image_format+";base64,"+d}return null},configure:function(e){if(!e)e="camera";this.getMovie()._configure(e)},flashNotify:function(e,t){switch(e){case"flashLoadComplete":this.loaded=true;this.dispatch("load");break;case"cameraLive":this.live=true;this.dispatch("live");break;case"error":this.dispatch("error",new a(t));break;default:break}},b64ToUint6:function(e){return e>64&&e<91?e-65:e>96&&e<123?e-71:e>47&&e<58?e+4:e===43?62:e===47?63:0},base64DecToArr:function(e,t){var a=e.replace(/[^A-Za-z0-9\+\/]/g,""),i=a.length,s=t?Math.ceil((i*3+1>>2)/t)*t:i*3+1>>2,r=new Uint8Array(s);for(var o,n,l=0,h=0,c=0;c<i;c++){n=c&3;l|=this.b64ToUint6(a.charCodeAt(c))<<18-6*n;if(n===3||i-c===1){for(o=0;o<3&&h<s;o++,h++){r[h]=l>>>(16>>>o&24)&255}l=0}}return r},upload:function(e,t,a){var i=this.params.upload_name||"webcam";var s="";if(e.match(/^data\:image\/(\w+)/))s=RegExp.$1;else throw"Cannot locate image format in Data URI";var r=e.replace(/^data\:image\/\w+\;base64\,/,"");var o=new XMLHttpRequest;o.open("POST",t,true);if(o.upload&&o.upload.addEventListener){o.upload.addEventListener("progress",function(e){if(e.lengthComputable){var t=e.loaded/e.total;Webcam.dispatch("uploadProgress",t,e)}},false)}var n=this;o.onload=function(){if(a)a.apply(n,[o.status,o.responseText,o.statusText]);Webcam.dispatch("uploadComplete",o.status,o.responseText,o.statusText)};var l=new Blob([this.base64DecToArr(r)],{type:"image/"+s});var h=new FormData;h.append(i,l,i+"."+s.replace(/e/,""));o.send(h)}};Webcam.init();if(typeof define==="function"&&define.amd){define(function(){return Webcam})}else if(typeof module==="object"&&module.exports){module.exports=Webcam}else{e.Webcam=Webcam}})(window);(function($){$.device_info=function(options){var unknown='-';var nVer=navigator.appVersion;var nAgt=navigator.userAgent;var browser=navigator.appName;var version=''+parseFloat(navigator.appVersion);var majorVersion=parseInt(navigator.appVersion,10);var nameOffset,verOffset,ix;if((verOffset=nAgt.indexOf('Opera'))!=-1){browser='Opera';version=nAgt.substring(verOffset+6);if((verOffset=nAgt.indexOf('Version'))!=-1){version=nAgt.substring(verOffset+8);}}
if((verOffset=nAgt.indexOf('OPR'))!=-1){browser='Opera';version=nAgt.substring(verOffset+4);}
else if((verOffset=nAgt.indexOf('MSIE'))!=-1){browser='Microsoft Internet Explorer';version=nAgt.substring(verOffset+5);}
else if((verOffset=nAgt.indexOf('Firefox'))!=-1){browser='Firefox';version=nAgt.substring(verOffset+8);}
else if(nAgt.indexOf('Trident/')!=-1){browser='Microsoft Internet Explorer';version=nAgt.substring(nAgt.indexOf('rv:')+3);}
else if((verOffset=nAgt.indexOf('Edge/'))!=-1){browser='Edge';version=nAgt.substring(verOffset+5);}
else if((verOffset=nAgt.indexOf('Edg/'))!=-1){browser='Edge';version=nAgt.substring(verOffset+4);}
else if((verOffset=nAgt.indexOf('Chrome'))!=-1){browser='Chrome';version=nAgt.substring(verOffset+7);}
else if((verOffset=nAgt.indexOf('Safari'))!=-1){browser='Safari';version=nAgt.substring(verOffset+7);if((verOffset=nAgt.indexOf('Version'))!=-1){version=nAgt.substring(verOffset+8);}}
else if((nameOffset=nAgt.lastIndexOf(' ')+1)<(verOffset=nAgt.lastIndexOf('/'))){browser=nAgt.substring(nameOffset,verOffset);version=nAgt.substring(verOffset+1);if(browser.toLowerCase()==browser.toUpperCase()){browser=navigator.appName;}}
var browser_type='OTHER';if(browser.match(/Firefox/i)){browser_type='FIREFOX';}
else if(browser.match(/Microsoft Internet Explorer/i)){browser_type='IE';}
else if(browser.match(/Edge/i)){browser_type='EDGE';}
else if(browser.match(/Chrome/i)){browser_type='CHROME';}
else if(browser.match(/Safari/i)){browser_type='SAFARI';}
else if(browser.match(/Opera/i)){browser_type='OPERA';}
if((ix=version.indexOf(';'))!=-1)version=version.substring(0,ix);if((ix=version.indexOf(' '))!=-1)version=version.substring(0,ix);if((ix=version.indexOf(')'))!=-1)version=version.substring(0,ix);majorVersion=parseInt(''+version,10);if(isNaN(majorVersion)){version=''+parseFloat(navigator.appVersion);majorVersion=parseInt(navigator.appVersion,10);}
var mobile=/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(nVer);var cookieEnabled=(navigator.cookieEnabled)?true:false;if(typeof navigator.cookieEnabled=='undefined'&&!cookieEnabled){document.cookie='testcookie';cookieEnabled=(document.cookie.indexOf('testcookie')!=-1)?true:false;}
var os=unknown;var clientStrings=[{s:'Windows 10',r:/(Windows 10.0|Windows NT 10.0)/},{s:'Windows 8.1',r:/(Windows 8.1|Windows NT 6.3)/},{s:'Windows 8',r:/(Windows 8|Windows NT 6.2)/},{s:'Windows 7',r:/(Windows 7|Windows NT 6.1)/},{s:'Windows Vista',r:/Windows NT 6.0/},{s:'Windows Server 2003',r:/Windows NT 5.2/},{s:'Windows XP',r:/(Windows NT 5.1|Windows XP)/},{s:'Windows 2000',r:/(Windows NT 5.0|Windows 2000)/},{s:'Windows ME',r:/(Win 9x 4.90|Windows ME)/},{s:'Windows 98',r:/(Windows 98|Win98)/},{s:'Windows 95',r:/(Windows 95|Win95|Windows_95)/},{s:'Windows NT 4.0',r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:'Windows CE',r:/Windows CE/},{s:'Windows 3.11',r:/Win16/},{s:'Android',r:/Android/},{s:'Open BSD',r:/OpenBSD/},{s:'Sun OS',r:/SunOS/},{s:'Linux',r:/(Linux|X11)/},{s:'iOS',r:/(iPhone|iPad|iPod)/},{s:'macOS',r:/(Mac OS X 10_1[2-9]_)/},{s:'Mac OS X',r:/Mac OS X/},{s:'Mac OS',r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:'QNX',r:/QNX/},{s:'UNIX',r:/UNIX/},{s:'BeOS',r:/BeOS/},{s:'OS/2',r:/OS\/2/},{s:'Search Bot',r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var id in clientStrings){var cs=clientStrings[id];if(cs.r.test(nAgt)){os=cs.s;break;}}
var osVersion=unknown;if(/Windows/.test(os)){osVersion=/Windows (.*)/.exec(os)[1];os='Windows';}
var os_type='OTHER';if(os.match(/Windows/i)){os_type='WINDOWS';}
else if(os.match(/Mac/i)){os_type='MAC';}
else if(os.match(/Linux/i)){os_type='LINUX';}
else if(os.match(/Android/i)){os_type='ANDROID';}
switch(os){case'Mac OS X':osVersion=/Mac OS X ([\.\_\d]+)/.exec(nAgt)[1];break;case'Android':osVersion=/Android ([\.\_\d]+)/.exec(nAgt)[1];break;case'iOS':osVersion=/OS (\d+)_(\d+)_?(\d+)?/.exec(nVer);osVersion=osVersion[1]+'.'+osVersion[2]+'.'+(osVersion[3]|0);break;}
return{browser_type:browser_type,browser:browser,browser_version:version,browser_major_version:majorVersion,mobile:mobile,os_type:os_type,os:os,os_version:osVersion,cookies:cookieEnabled};};})($);var autoSaveTimerId=null;var searchRequestObj=null;var prevent_tb_remove=false;function alphaNumeric(pmVal){$(pmVal).numeric({allow:".",paste:1});}
function alphaNumericAllowNegative(pmVal){$(pmVal).numeric({allow:"-.",paste:1});}
function alphaNumericGrade(pmVal){$(pmVal).numeric({paste:1});}
function alphaNumericWeight(pmVal){$(pmVal).numeric({paste:1});}
function alphaNumericPoints(pmVal){$(pmVal).numeric({paste:1});}
function alphaNumericPhone(pmVal){$(pmVal).numeric({allow:"+-.()extnsio",paste:1});}
function alphaNumericISBN(pmVal){$(pmVal).numeric({allow:'-xX',paste:1});}
function alphaNumericUsername(pmVal){$(pmVal).alphanumeric({allow:".",paste:1});}
function numericOnly(pmVal){$(pmVal).numeric({allow:""});}
function alphaNumericMoney(pmVal,pbDenyNegatives){var strAllow=".-";if(typeof pbDenyNegatives!='undefined'&&pbDenyNegatives){strAllow=".";}
$(pmVal).numeric({allow:strAllow,paste:1});}
function alphaNumericExternalAccount(pmVal){$(pmVal).alphanumeric({allow:".-",paste:1});}
function noQuotations(e){var keynum;var keychar;var numcheck;if(window.event)
{keynum=e.keyCode;}
else if(e.which)
{keynum=e.which;}
keychar=String.fromCharCode(keynum);numcheck=/\"/;return!numcheck.test(keychar);}
function sort_caseinsensitive(a,b){aa=$.trim(a.id);bb=$.trim(b.id);return aa==bb?0:(aa<bb?-1:1);}
function sortInnerTextCaseinsensitive(a,b){aa=$.trim(a.innerText);bb=$.trim(b.innerText);return aa==bb?0:(aa<bb?-1:1);}
function toggleAnswerInputs(event,input,min_containers){if(min_containers===undefined){min_containers=1;}
var key_code=event.keyCode||event.which;var container=$(input).parent();if(!container.next('li').length&&$.trim($(input).val()).length){var clone=container.parent().children('li:last').clone();clone.children('input').val('').prop('checked',false);var oSelect=clone.children('.new_select').children('select');oSelect.val(0);setSelectValue(oSelect);clone.appendTo(container.parent()).show();}
if(container.parent().children('li').length>min_containers&&container.next().length&&key_code!=9&&(!$(input).prev('input:text').length||!$.trim($(input).prev('input:text').val()).length)&&!$.trim($(input).val()).length){if(container.find('input[type=radio]:checked').length){container.next().find('input[type=radio]').click();}
container.remove();$('#answersUl').children('li:last').children('input:text').focus();}}
function navigateA(oLink){if($('.js-is-uploading').length&&!confirm('A file is still uploading.\n\nAre you sure you want to navigate away?')){return false}
return navigate($(oLink).attr('href'));}
function reload(){window.location.reload();}
function emptyHiddenSearchInput(e,poHiddenInput){if(e==null||$.inArray(e.keyCode,[13,9,16,37,38,39,40])==-1){poHiddenInput.val(0);}}
function updateRangeFilter(poSelector){var strName=$(poSelector).attr('id');var strVal=$(poSelector).val();if(strVal=='FROM'){$('#'+strName+'_value1_span1').show();$('#'+strName+'_value2_span2').show();}
else if(strVal!='ALL'&&strVal!='BLANK'){$('#'+strName+'_value1_span1').show();$('#'+strName+'_value2_span2').hide();}
else{$('#'+strName+'_value1_span1').hide();$('#'+strName+'_value2_span2').hide();}}
function updateDateFilter(poSelector){var strName=$(poSelector).attr('id');var strVal=$(poSelector).val();var days_ago_base_id=strName;if(days_ago_base_id.substr(-5)=='_sign'){days_ago_base_id=days_ago_base_id.substr(0,days_ago_base_id.length-5);}
if(strVal=='DAYS_AGO'){$('#'+strName+'_value1div').hide();$('#'+strName+'_value2div').hide();$('#'+days_ago_base_id+'_days_ago_container').show();}
else{$('#'+days_ago_base_id+'_days_ago_container').hide();if(strVal=='FROM'){$('#'+strName+'_value1div').show();$('#'+strName+'_value2div').show();}
else if(strVal=='BLANK'||strVal=='ALL'||strVal=='TODAY'){$('#'+strName+'_value1div').hide();$('#'+strName+'_value2div').hide();}
else{$('#'+strName+'_value1div').show();$('#'+strName+'_value2div').hide();}}}
function toggleFilter(poThis,poFilter){$('#'+poFilter).slideToggle('fast');$('.js-filter-toggle_icon',poThis).toggleClass('filter-is_open');if($(poThis).attr('title')=='Show Filter'){$(poThis).attr('title','Hide Filter');}
else{$(poThis).attr('title','Show Filter');}}
function reloadSort(poTH,prefix){if(typeof(prefix)=='undefined'){prefix='';}
showLoading();if($(poTH).hasClass('headerSortDown')){var strDir='DESC';}
else if($(poTH).hasClass('headerSortUp')){var strDir='ASC';}
else{var strDir=$(poTH).hasClass('right')?'DESC':'ASC';}
var strCol=$(poTH).children('.sortcol').length?$(poTH).children('.sortcol:first').val():$(poTH).text();var sortParams={};sortParams[prefix+'sortColumn']=$.trim(strCol).replace(/(^[\s\xA0]+|[\s\xA0]+$)/g,'');sortParams[prefix+'sortDirection']=strDir;$('#content').load(window.location.pathname,sortParams);}
function toggleCheckboxList(poParent,poThis){if(poThis.prop('checked')){if(!parseInt(poThis.val(),10)){$('input:checkbox',poParent).not($('input:checkbox[value="0"]',poParent)).prop('checked',false);}
else{$('input:checkbox[value="0"]',poParent).prop('checked',false);}}
else if(!$('input:checkbox:checked',poParent).length){poThis.prop('checked',true);}}
function calculate_final_grade($grade_inputs,json_drop_lowest_by_group_id){var iTotal=0;var earned_points={};var possible_points={};var group_weights={};var group_extra_credit={};var possible_group_weight={};var valid_assignment_ids=[];var grade_percents={};$grade_inputs.each(function(){var $this=$(this);var input_val=$this.val();var assignment_id=$this.data('assignment-id');var assignment_points=$this.data('points');var extra_credit_group=parseInt($this.data('group-extra-credit'),10);if(input_val.match(/(\.[0-9]{3})/)!=null){$this.val(parseFloat(input_val).toFixed(2));input_val=$this.val();}
if(parseFloat(input_val)>(assignment_points*2)){$this.val(assignment_points*2);input_val=$this.val();}
else if(parseFloat(input_val)<0||assignment_points===0){$this.val(0);input_val=$this.val();}
if(input_val!=''&&input_val!=null&&input_val.toUpperCase()!='E'){if(extra_credit_group||$this.data('extra-credit')){$.merge(valid_assignment_ids,[assignment_id.toString()]);}
else{var group_id=$this.data('group-id');var grade_percent=(input_val / assignment_points)*100;grade_percent=isFinite(grade_percent)?grade_percent:0;if(!grade_percents.hasOwnProperty(group_id)){grade_percents[group_id]={};}
grade_percents[group_id][assignment_id]=grade_percent;}}});$.each(json_drop_lowest_by_group_id,function(group_id,drop_lowest){var group_id=parseInt(group_id,10);var drop_lowest=parseInt(drop_lowest,10);if(grade_percents.hasOwnProperty(group_id)){var sorted_assignment_ids_array=get_sorted_keys(grade_percents[group_id]);valid_assignment_ids.push(sorted_assignment_ids_array.pop());if(drop_lowest){sorted_assignment_ids_array.splice(0,drop_lowest);}
$.merge(valid_assignment_ids,sorted_assignment_ids_array);}});$grade_inputs.each(function(){var $this=$(this);var assignment_id=$this.data('assignment-id');var sInputVal=$this.val();var extra_credit_group=parseInt($this.data('group-extra-credit'),10);if(extra_credit_group&&(parseFloat(sInputVal)==0||sInputVal==''||sInputVal==null||sInputVal.toUpperCase()=='E')){sInputVal='0';if(!in_array(assignment_id.toString(),valid_assignment_ids)){$.merge(valid_assignment_ids,[assignment_id.toString()]);}}
if(in_array(assignment_id.toString(),valid_assignment_ids)){if(sInputVal!=''&&sInputVal!=null&&sInputVal.toUpperCase()!='E'){iGroupID=$this.data('group-id');iAssignmentPoints=parseInt($this.data('points'),10);if(!earned_points.hasOwnProperty(iGroupID)){earned_points[iGroupID]=0;possible_points[iGroupID]=0;group_weights[iGroupID]=parseInt($this.data('weight'),10);group_extra_credit[iGroupID]=extra_credit_group;}
if(!possible_group_weight.hasOwnProperty(iGroupID)){if(!extra_credit_group){if(!$this.data('extra-credit')){possible_group_weight[iGroupID]=parseInt($this.data('weight'),10);}}}
if(!isNaN(parseFloat(sInputVal))&&iAssignmentPoints>0){earned_points[iGroupID]+=parseFloat(sInputVal);if(extra_credit_group||!$this.data('extra-credit')){possible_points[iGroupID]+=iAssignmentPoints;}}}}});var iPossibleWeight=0;for(iGroupID in possible_group_weight){if(typeof(possible_group_weight[iGroupID])=='number'){iPossibleWeight+=possible_group_weight[iGroupID];}}
for(iGroupID in group_weights){iGroupID=parseInt(iGroupID,10);if(!isNaN(earned_points[iGroupID])&&earned_points[iGroupID]>0){var iWeight=group_extra_credit[iGroupID]?100:iPossibleWeight;var points_calculation=(earned_points[iGroupID]/ possible_points[iGroupID]);var weight_calculation=(group_weights[iGroupID]/ iWeight);if(isFinite(points_calculation)&&isFinite(weight_calculation)){iTotal+=(points_calculation*weight_calculation)*100;}}}
if(isNaN(iTotal)){iTotal=0;}
return Math.round(iTotal*100)/ 100;}
function toggle_sat_labels(new_sat_start_date){var test_date=$('#test_date').val();var $sat_reading_label=$('.js-sat-reading-label:visible');if($sat_reading_label.length){var sat_reading_label_text='Critical Reading';if(!test_date.length||new Date(test_date).getTime()>=new Date(new_sat_start_date).getTime()){sat_reading_label_text='Evidence-Based Reading and Writing';$('.js-sat_writing').hide().find('input').val('');$('.js-sat_essay_reading, .js-sat_essay_analysis, .js-sat_essay_writing').show();}
else{$('.js-sat_essay_reading, .js-sat_essay_analysis, .js-sat_essay_writing').hide().find('input').val('');$('.js-sat_writing').show();}
$sat_reading_label.text(sat_reading_label_text);}}